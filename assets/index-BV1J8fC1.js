function _mergeNamespaces(e,i){for(var s=0;s<i.length;s++){const a=i[s];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const h=Object.getOwnPropertyDescriptor(a,c);h&&Object.defineProperty(e,c,h.get?h:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const st of h.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&a(st)}).observe(document,{childList:!0,subtree:!0});function s(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(c){if(c.ep)return;c.ep=!0;const h=s(c);fetch(c.href,h)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(e){return e===null||typeof e!="object"?null:(e=z$2&&e[z$2]||e["@@iterator"],typeof e=="function"?e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$1(e,i,s){this.props=e,this.context=i,this.refs=D$2,this.updater=s||B$2}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,i){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$2(e,i,s){this.props=e,this.context=i,this.refs=D$2,this.updater=s||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(e,i,s){var a,c={},h=null,st=null;if(i!=null)for(a in i.ref!==void 0&&(st=i.ref),i.key!==void 0&&(h=""+i.key),i)J$1.call(i,a)&&!L$2.hasOwnProperty(a)&&(c[a]=i[a]);var nt=arguments.length-2;if(nt===1)c.children=s;else if(1<nt){for(var ot=Array(nt),xt=0;xt<nt;xt++)ot[xt]=arguments[xt+2];c.children=ot}if(e&&e.defaultProps)for(a in nt=e.defaultProps,nt)c[a]===void 0&&(c[a]=nt[a]);return{$$typeof:l$1,type:e,key:h,ref:st,props:c,_owner:K$2.current}}function N$1(e,i){return{$$typeof:l$1,type:e.type,key:i,ref:e.ref,props:e.props,_owner:e._owner}}function O$2(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape(e){var i={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return i[s]})}var P$1=/\/+/g;function Q$2(e,i){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):i.toString(36)}function R$2(e,i,s,a,c){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var st=!1;if(e===null)st=!0;else switch(h){case"string":case"number":st=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:st=!0}}if(st)return st=e,c=c(st),e=a===""?"."+Q$2(st,0):a,I$2(c)?(s="",e!=null&&(s=e.replace(P$1,"$&/")+"/"),R$2(c,i,s,"",function(xt){return xt})):c!=null&&(O$2(c)&&(c=N$1(c,s+(!c.key||st&&st.key===c.key?"":(""+c.key).replace(P$1,"$&/")+"/")+e)),i.push(c)),1;if(st=0,a=a===""?".":a+":",I$2(e))for(var nt=0;nt<e.length;nt++){h=e[nt];var ot=a+Q$2(h,nt);st+=R$2(h,i,s,ot,c)}else if(ot=A$2(e),typeof ot=="function")for(e=ot.call(e),nt=0;!(h=e.next()).done;)h=h.value,ot=a+Q$2(h,nt++),st+=R$2(h,i,s,ot,c);else if(h==="object")throw i=String(e),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return st}function S$2(e,i,s){if(e==null)return e;var a=[],c=0;return R$2(e,a,"","",function(h){return i.call(s,h,c++)}),a}function T$2(e){if(e._status===-1){var i=e._result;i=i(),i.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=i)}if(e._status===1)return e._result.default;throw e._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(e,i,s){S$2(e,function(){i.apply(this,arguments)},s)},count:function(e){var i=0;return S$2(e,function(){i++}),i},toArray:function(e){return S$2(e,function(i){return i})||[]},only:function(e){if(!O$2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$2;react_production_min.cloneElement=function(e,i,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$2({},e.props),c=e.key,h=e.ref,st=e._owner;if(i!=null){if(i.ref!==void 0&&(h=i.ref,st=K$2.current),i.key!==void 0&&(c=""+i.key),e.type&&e.type.defaultProps)var nt=e.type.defaultProps;for(ot in i)J$1.call(i,ot)&&!L$2.hasOwnProperty(ot)&&(a[ot]=i[ot]===void 0&&nt!==void 0?nt[ot]:i[ot])}var ot=arguments.length-2;if(ot===1)a.children=s;else if(1<ot){nt=Array(ot);for(var xt=0;xt<ot;xt++)nt[xt]=arguments[xt+2];a.children=nt}return{$$typeof:l$1,type:e.type,key:c,ref:h,props:a,_owner:st}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$2;react_production_min.createFactory=function(e){var i=M$2.bind(null,e);return i.type=e,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$2,render:e}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(e){return{$$typeof:y$1,_payload:{_status:-1,_result:e},_init:T$2}};react_production_min.memo=function(e,i){return{$$typeof:x$1,type:e,compare:i===void 0?null:i}};react_production_min.startTransition=function(e){var i=V$2.transition;V$2.transition={};try{e()}finally{V$2.transition=i}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(e,i){return U$2.current.useCallback(e,i)};react_production_min.useContext=function(e){return U$2.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$2.current.useDeferredValue(e)};react_production_min.useEffect=function(e,i){return U$2.current.useEffect(e,i)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(e,i,s){return U$2.current.useImperativeHandle(e,i,s)};react_production_min.useInsertionEffect=function(e,i){return U$2.current.useInsertionEffect(e,i)};react_production_min.useLayoutEffect=function(e,i){return U$2.current.useLayoutEffect(e,i)};react_production_min.useMemo=function(e,i){return U$2.current.useMemo(e,i)};react_production_min.useReducer=function(e,i,s){return U$2.current.useReducer(e,i,s)};react_production_min.useRef=function(e){return U$2.current.useRef(e)};react_production_min.useState=function(e){return U$2.current.useState(e)};react_production_min.useSyncExternalStore=function(e,i,s){return U$2.current.useSyncExternalStore(e,i,s)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const o=getDefaultExportFromCjs(reactExports),React=_mergeNamespaces({__proto__:null,default:o},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(e,i,s){var a,c={},h=null,st=null;s!==void 0&&(h=""+s),i.key!==void 0&&(h=""+i.key),i.ref!==void 0&&(st=i.ref);for(a in i)m$2.call(i,a)&&!p$1.hasOwnProperty(a)&&(c[a]=i[a]);if(e&&e.defaultProps)for(a in i=e.defaultProps,i)c[a]===void 0&&(c[a]=i[a]);return{$$typeof:k$1,type:e,key:h,ref:st,props:c,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(Ot,Bt){var Ut=Ot.length;Ot.push(Bt);e:for(;0<Ut;){var Ft=Ut-1>>>1,Wt=Ot[Ft];if(0<c(Wt,Bt))Ot[Ft]=Bt,Ot[Ut]=Wt,Ut=Ft;else break e}}function s(Ot){return Ot.length===0?null:Ot[0]}function a(Ot){if(Ot.length===0)return null;var Bt=Ot[0],Ut=Ot.pop();if(Ut!==Bt){Ot[0]=Ut;e:for(var Ft=0,Wt=Ot.length,_i=Wt>>>1;Ft<_i;){var Qt=2*(Ft+1)-1,on=Ot[Qt],nn=Qt+1,dn=Ot[nn];if(0>c(on,Ut))nn<Wt&&0>c(dn,on)?(Ot[Ft]=dn,Ot[nn]=Ut,Ft=nn):(Ot[Ft]=on,Ot[Qt]=Ut,Ft=Qt);else if(nn<Wt&&0>c(dn,Ut))Ot[Ft]=dn,Ot[nn]=Ut,Ft=nn;else break e}}return Bt}function c(Ot,Bt){var Ut=Ot.sortIndex-Bt.sortIndex;return Ut!==0?Ut:Ot.id-Bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var st=Date,nt=st.now();e.unstable_now=function(){return st.now()-nt}}var ot=[],xt=[],vt=1,bt=null,St=3,Et=!1,Ct=!1,ht=!1,d=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function mt(Ot){for(var Bt=s(xt);Bt!==null;){if(Bt.callback===null)a(xt);else if(Bt.startTime<=Ot)a(xt),Bt.sortIndex=Bt.expirationTime,i(ot,Bt);else break;Bt=s(xt)}}function _t(Ot){if(ht=!1,mt(Ot),!Ct)if(s(ot)!==null)Ct=!0,Nt(tt);else{var Bt=s(xt);Bt!==null&&kt(_t,Bt.startTime-Ot)}}function tt(Ot,Bt){Ct=!1,ht&&(ht=!1,b(yt),yt=-1),Et=!0;var Ut=St;try{for(mt(Bt),bt=s(ot);bt!==null&&(!(bt.expirationTime>Bt)||Ot&&!Pt());){var Ft=bt.callback;if(typeof Ft=="function"){bt.callback=null,St=bt.priorityLevel;var Wt=Ft(bt.expirationTime<=Bt);Bt=e.unstable_now(),typeof Wt=="function"?bt.callback=Wt:bt===s(ot)&&a(ot),mt(Bt)}else a(ot);bt=s(ot)}if(bt!==null)var _i=!0;else{var Qt=s(xt);Qt!==null&&kt(_t,Qt.startTime-Bt),_i=!1}return _i}finally{bt=null,St=Ut,Et=!1}}var gt=!1,wt=null,yt=-1,Tt=5,Mt=-1;function Pt(){return!(e.unstable_now()-Mt<Tt)}function It(){if(wt!==null){var Ot=e.unstable_now();Mt=Ot;var Bt=!0;try{Bt=wt(!0,Ot)}finally{Bt?Lt():(gt=!1,wt=null)}}else gt=!1}var Lt;if(typeof ft=="function")Lt=function(){ft(It)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,jt=zt.port2;zt.port1.onmessage=It,Lt=function(){jt.postMessage(null)}}else Lt=function(){d(It,0)};function Nt(Ot){wt=Ot,gt||(gt=!0,Lt())}function kt(Ot,Bt){yt=d(function(){Ot(e.unstable_now())},Bt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ot){Ot.callback=null},e.unstable_continueExecution=function(){Ct||Et||(Ct=!0,Nt(tt))},e.unstable_forceFrameRate=function(Ot){0>Ot||125<Ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Tt=0<Ot?Math.floor(1e3/Ot):5},e.unstable_getCurrentPriorityLevel=function(){return St},e.unstable_getFirstCallbackNode=function(){return s(ot)},e.unstable_next=function(Ot){switch(St){case 1:case 2:case 3:var Bt=3;break;default:Bt=St}var Ut=St;St=Bt;try{return Ot()}finally{St=Ut}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ot,Bt){switch(Ot){case 1:case 2:case 3:case 4:case 5:break;default:Ot=3}var Ut=St;St=Ot;try{return Bt()}finally{St=Ut}},e.unstable_scheduleCallback=function(Ot,Bt,Ut){var Ft=e.unstable_now();switch(typeof Ut=="object"&&Ut!==null?(Ut=Ut.delay,Ut=typeof Ut=="number"&&0<Ut?Ft+Ut:Ft):Ut=Ft,Ot){case 1:var Wt=-1;break;case 2:Wt=250;break;case 5:Wt=1073741823;break;case 4:Wt=1e4;break;default:Wt=5e3}return Wt=Ut+Wt,Ot={id:vt++,callback:Bt,priorityLevel:Ot,startTime:Ut,expirationTime:Wt,sortIndex:-1},Ut>Ft?(Ot.sortIndex=Ut,i(xt,Ot),s(ot)===null&&Ot===s(xt)&&(ht?(b(yt),yt=-1):ht=!0,kt(_t,Ut-Ft))):(Ot.sortIndex=Wt,i(ot,Ot),Ct||Et||(Ct=!0,Nt(tt))),Ot},e.unstable_shouldYield=Pt,e.unstable_wrapCallback=function(Ot){var Bt=St;return function(){var Ut=St;St=Bt;try{return Ot.apply(this,arguments)}finally{St=Ut}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,i){ha(e,i),ha(e+"Capture",i)}function ha(e,i){for(ea[e]=i,e=0;e<i.length;e++)da.add(i[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,i,s,a){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,i,s,a){if(i===null||typeof i>"u"||pa(e,i,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v$1(e,i,s,a,c,h,st){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=i,this.sanitizeURL=h,this.removeEmptyString=st}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z$1[e]=new v$1(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];z$1[i]=new v$1(i,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z$1[e]=new v$1(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z$1[e]=new v$1(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z$1[e]=new v$1(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z$1[e]=new v$1(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z$1[e]=new v$1(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z$1[e]=new v$1(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z$1[e]=new v$1(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(ra,sa);z$1[i]=new v$1(i,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(ra,sa);z$1[i]=new v$1(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(ra,sa);z$1[i]=new v$1(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z$1[e]=new v$1(e,1,!1,e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z$1[e]=new v$1(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,i,s,a){var c=z$1.hasOwnProperty(i)?z$1[i]:null;(c!==null?c.type!==0:a||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa(i,s,c,a)&&(s=null),a||c===null?oa(i)&&(s===null?e.removeAttribute(i):e.setAttribute(i,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(i=c.attributeName,a=c.attributeNamespace,s===null?e.removeAttribute(i):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,a?e.setAttributeNS(a,i,s):e.setAttribute(i,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A$1=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);La=i&&i[1]||""}return`
`+La+e}var Na=!1;function Oa(e,i){if(!e||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(xt){var a=xt}Reflect.construct(e,[],i)}else{try{i.call()}catch(xt){a=xt}e.call(i.prototype)}else{try{throw Error()}catch(xt){a=xt}e()}}catch(xt){if(xt&&a&&typeof xt.stack=="string"){for(var c=xt.stack.split(`
`),h=a.stack.split(`
`),st=c.length-1,nt=h.length-1;1<=st&&0<=nt&&c[st]!==h[nt];)nt--;for(;1<=st&&0<=nt;st--,nt--)if(c[st]!==h[nt]){if(st!==1||nt!==1)do if(st--,nt--,0>nt||c[st]!==h[nt]){var ot=`
`+c[st].replace(" at new "," at ");return e.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",e.displayName)),ot}while(1<=st&&0<=nt);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return i=e.displayName||null,i!==null?i:Qa(e.type)||"Memo";case Ha:i=e._payload,e=e._init;try{return Qa(e(i))}catch{}}return null}function Ra(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(i);case 8:return i===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua(e){var i=Ta(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),a=""+e[i];if(!e.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,h=s.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return c.call(this)},set:function(st){a=""+st,h.call(this,st)}}),Object.defineProperty(e,i,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(st){a=""+st},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var s=i.getValue(),a="";return e&&(a=Ta(e)?e.checked?"true":"false":e.value),e=a,e!==s?(i.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,i){var s=i.checked;return A$1({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Za(e,i){var s=i.defaultValue==null?"":i.defaultValue,a=i.checked!=null?i.checked:i.defaultChecked;s=Sa(i.value!=null?i.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab(e,i){i=i.checked,i!=null&&ta(e,"checked",i,!1)}function bb(e,i){ab(e,i);var s=Sa(i.value),a=i.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?cb(e,i.type,s):i.hasOwnProperty("defaultValue")&&cb(e,i.type,Sa(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function db(e,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var a=i.type;if(!(a!=="submit"&&a!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,s||i===e.value||(e.value=i),e.defaultValue=i}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function cb(e,i,s){(i!=="number"||Xa(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var eb=Array.isArray;function fb(e,i,s,a){if(e=e.options,i){i={};for(var c=0;c<s.length;c++)i["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=i.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Sa(s),i=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}i!==null||e[c].disabled||(i=e[c])}i!==null&&(i.selected=!0)}}function gb(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p(91));return A$1({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}i=s}i==null&&(i=""),s=i}e._wrapperState={initialValue:Sa(s)}}function ib(e,i){var s=Sa(i.value),a=Sa(i.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),i.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function jb(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,a,c){MSApp.execUnsafeLocalFunction(function(){return e(i,s,a,c)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function ob(e,i){if(i){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=i;return}}e.textContent=i}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),pb[i]=pb[e]})});function rb(e,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||pb.hasOwnProperty(e)&&pb[e]?(""+i).trim():i+"px"}function sb(e,i){e=e.style;for(var s in i)if(i.hasOwnProperty(s)){var a=s.indexOf("--")===0,c=rb(s,i[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,c):e[s]=c}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,i){if(i){if(tb[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p(62))}}function vb(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var i=e.stateNode;i&&(i=Db(i),yb(e.stateNode,e.type,i))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,i=Ab;if(Ab=zb=null,Bb(e),i)for(e=0;e<i.length;e++)Bb(i[e])}}function Gb(e,i){return e(i)}function Hb(){}var Ib=!1;function Jb(e,i,s){if(Ib)return e(i,s);Ib=!0;try{return Gb(e,i,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,i){var s=e.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(p(231,i,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,i,s,a,c,h,st,nt,ot){var xt=Array.prototype.slice.call(arguments,3);try{i.apply(s,xt)}catch(vt){this.onError(vt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,i,s,a,c,h,st,nt,ot){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,i,s,a,c,h,st,nt,ot){if(Tb.apply(this,arguments),Ob){if(Ob){var xt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=xt)}}function Vb(e){var i=e,s=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(s=i.return),e=i.return;while(e)}return i.tag===3?s:null}function Wb(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var i=e.alternate;if(!i){if(i=Vb(e),i===null)throw Error(p(188));return i!==e?null:e}for(var s=e,a=i;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){s=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return Xb(c),e;if(h===a)return Xb(c),i;h=h.sibling}throw Error(p(188))}if(s.return!==a.return)s=c,a=h;else{for(var st=!1,nt=c.child;nt;){if(nt===s){st=!0,s=c,a=h;break}if(nt===a){st=!0,a=c,s=h;break}nt=nt.sibling}if(!st){for(nt=h.child;nt;){if(nt===s){st=!0,s=h,a=c;break}if(nt===a){st=!0,a=h,s=c;break}nt=nt.sibling}if(!st)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?e:i}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=$b(e);if(i!==null)return i;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,i){var s=e.pendingLanes;if(s===0)return 0;var a=0,c=e.suspendedLanes,h=e.pingedLanes,st=s&268435455;if(st!==0){var nt=st&~c;nt!==0?a=tc(nt):(h&=st,h!==0&&(a=tc(h)))}else st=s&~c,st!==0?a=tc(st):h!==0&&(a=tc(h));if(a===0)return 0;if(i!==0&&i!==a&&!(i&c)&&(c=a&-a,h=i&-i,c>=h||c===16&&(h&4194240)!==0))return i;if(a&4&&(a|=s&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=a;0<i;)s=31-oc(i),c=1<<s,a|=e[s],i&=~c;return a}function vc(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,i){for(var s=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var st=31-oc(h),nt=1<<st,ot=c[st];ot===-1?(!(nt&s)||nt&a)&&(c[st]=vc(nt,i)):ot<=i&&(e.expiredLanes|=nt),h&=~nt}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var i=[],s=0;31>s;s++)i.push(e);return i}function Ac(e,i,s){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-oc(i),e[i]=s}function Bc(e,i){var s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-oc(s),h=1<<c;i[c]=0,a[c]=-1,e[c]=-1,s&=~h}}function Cc(e,i){var s=e.entangledLanes|=i;for(e=e.entanglements;s;){var a=31-oc(s),c=1<<a;c&i|e[a]&i&&(e[a]|=i),s&=~c}}var C$1=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,i){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(i.pointerId)}}function Tc(e,i,s,a,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:i,domEventName:s,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},i!==null&&(i=Cb(i),i!==null&&Fc(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,c!==null&&i.indexOf(c)===-1&&i.push(c),e)}function Uc(e,i,s,a,c){switch(i){case"focusin":return Lc=Tc(Lc,e,i,s,a,c),!0;case"dragenter":return Mc=Tc(Mc,e,i,s,a,c),!0;case"mouseover":return Nc=Tc(Nc,e,i,s,a,c),!0;case"pointerover":var h=c.pointerId;return Oc.set(h,Tc(Oc.get(h)||null,e,i,s,a,c)),!0;case"gotpointercapture":return h=c.pointerId,Pc.set(h,Tc(Pc.get(h)||null,e,i,s,a,c)),!0}return!1}function Vc(e){var i=Wc(e.target);if(i!==null){var s=Vb(i);if(s!==null){if(i=s.tag,i===13){if(i=Wb(s),i!==null){e.blockedOn=i,Ic(e.priority,function(){Gc(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var s=Yc(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return i=Cb(s),i!==null&&Fc(i),e.blockedOn=s,!1;i.shift()}return!0}function Zc(e,i,s){Xc(e)&&s.delete(i)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,i){e.blockedOn===i&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function i(c){return ad(c,e)}if(0<Kc.length){ad(Kc[0],e);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(i),Pc.forEach(i),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,i,s,a){var c=C$1,h=cd.transition;cd.transition=null;try{C$1=1,fd(e,i,s,a)}finally{C$1=c,cd.transition=h}}function gd(e,i,s,a){var c=C$1,h=cd.transition;cd.transition=null;try{C$1=4,fd(e,i,s,a)}finally{C$1=c,cd.transition=h}}function fd(e,i,s,a){if(dd){var c=Yc(e,i,s,a);if(c===null)hd(e,i,a,id$2,s),Sc(e,a);else if(Uc(c,e,i,s,a))a.stopPropagation();else if(Sc(e,a),i&4&&-1<Rc.indexOf(e)){for(;c!==null;){var h=Cb(c);if(h!==null&&Ec(h),h=Yc(e,i,s,a),h===null&&hd(e,i,a,id$2,s),h===c)break;c=h}c!==null&&a.stopPropagation()}else hd(e,i,a,null,s)}}var id$2=null;function Yc(e,i,s,a){if(id$2=null,e=xb(a),e=Wc(e),e!==null)if(i=Vb(e),i===null)e=null;else if(s=i.tag,s===13){if(e=Wb(i),e!==null)return e;e=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return id$2=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,i=ld,s=i.length,a,c="value"in kd?kd.value:kd.textContent,h=c.length;for(e=0;e<s&&i[e]===c[e];e++);var st=s-e;for(a=1;a<=st&&i[s-a]===c[h-a];a++);return md=c.slice(e,1<a?1-a:void 0)}function od(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function i(s,a,c,h,st){this._reactName=s,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=st,this.currentTarget=null;for(var nt in e)e.hasOwnProperty(nt)&&(s=e[nt],this[nt]=s?s(h):h[nt]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),i}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Od[e])?!!i[e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(e){if(e.key){var i=Md[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(e,i){switch(e){case"keyup":return $d.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie$1=!1;function je$1(e,i){switch(e){case"compositionend":return he$1(i);case"keypress":return i.which!==32?null:(fe$1=!0,ee$1);case"textInput":return e=i.data,e===ee$1&&fe$1?null:e;default:return null}}function ke$1(e,i){if(ie$1)return e==="compositionend"||!ae$1&&ge$1(e,i)?(e=nd(),md=ld=kd=null,ie$1=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de&&i.locale!=="ko"?null:i.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!le$1[e.type]:i==="textarea"}function ne$1(e,i,s,a){Eb(a),i=oe$1(i,"onChange"),0<i.length&&(s=new td("onChange","change",null,s,a),e.push({event:s,listeners:i}))}var pe=null,qe$1=null;function re$1(e){se$1(e,0)}function te$1(e){var i=ue$1(e);if(Wa(i))return e}function ve$1(e,i){if(e==="change")return i}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be),qe$1=pe=null)}function Be(e){if(e.propertyName==="value"&&te$1(qe$1)){var i=[];ne$1(i,qe$1,e,xb(e)),Jb(re$1,i)}}function Ce$1(e,i,s){e==="focusin"?(Ae$1(),pe=i,qe$1=s,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae$1()}function De$1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te$1(qe$1)}function Ee$1(e,i){if(e==="click")return te$1(i)}function Fe$1(e,i){if(e==="input"||e==="change")return te$1(i)}function Ge$1(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(e,i){if(He$1(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var s=Object.keys(e),a=Object.keys(i);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var c=s[a];if(!ja.call(i,c)||!He$1(e[c],i[c]))return!1}return!0}function Je$1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke$1(e,i){var s=Je$1(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=i&&a>=i)return{node:s,offset:i-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je$1(s)}}function Le(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Le(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Me$1(){for(var e=window,i=Xa();i instanceof e.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)e=i.contentWindow;else break;i=Xa(e.document)}return i}function Ne$1(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function Oe$1(e){var i=Me$1(),s=e.focusedElem,a=e.selectionRange;if(i!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne$1(s)){if(i=a.start,e=a.end,e===void 0&&(e=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(e,s.value.length);else if(e=(i=s.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!e.extend&&h>a&&(c=a,a=h,h=c),c=Ke$1(s,h);var st=Ke$1(s,a);c&&st&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==st.node||e.focusOffset!==st.offset)&&(i=i.createRange(),i.setStart(c.node,c.offset),e.removeAllRanges(),h>a?(e.addRange(i),e.extend(st.node,st.offset)):(i.setEnd(st.node,st.offset),e.addRange(i)))}}for(i=[],e=s;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)e=i[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe$1=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(e,i,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(a)||(a=Qe$1,"selectionStart"in a&&Ne$1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se$1&&Ie$1(Se$1,a)||(Se$1=a,a=oe$1(Re$1,"onSelect"),0<a.length&&(i=new td("onSelect","select",null,i,s),e.push({event:i,listeners:a}),i.target=Qe$1)))}function Ve$1(e,i){var s={};return s[e.toLowerCase()]=i.toLowerCase(),s["Webkit"+e]="webkit"+i,s["Moz"+e]="moz"+i,s}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(e){if(Xe$1[e])return Xe$1[e];if(!We$1[e])return e;var i=We$1[e],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ye)return Xe$1[e]=i[s];return e}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,i){df.set(e,i),fa(i,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,i,s){var a=e.type||"unknown-event";e.currentTarget=s,Ub(a,i,void 0,e),e.currentTarget=null}function se$1(e,i){i=(i&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],c=a.event;a=a.listeners;e:{var h=void 0;if(i)for(var st=a.length-1;0<=st;st--){var nt=a[st],ot=nt.instance,xt=nt.currentTarget;if(nt=nt.listener,ot!==h&&c.isPropagationStopped())break e;nf(c,nt,xt),h=ot}else for(st=0;st<a.length;st++){if(nt=a[st],ot=nt.instance,xt=nt.currentTarget,nt=nt.listener,ot!==h&&c.isPropagationStopped())break e;nf(c,nt,xt),h=ot}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D$1(e,i){var s=i[of];s===void 0&&(s=i[of]=new Set);var a=e+"__bubble";s.has(a)||(pf(i,e,2,!1),s.add(a))}function qf(e,i,s){var a=0;i&&(a|=4),pf(s,e,a,i)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,e),qf(s,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[rf]||(i[rf]=!0,qf("selectionchange",!1,i))}}function pf(e,i,s,a){switch(jd(i)){case 1:var c=ed;break;case 4:c=gd;break;default:c=fd}s=c.bind(null,i,s,e),c=void 0,!Lb||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(i,s,{capture:!0,passive:c}):e.addEventListener(i,s,!0):c!==void 0?e.addEventListener(i,s,{passive:c}):e.addEventListener(i,s,!1)}function hd(e,i,s,a,c){var h=a;if(!(i&1)&&!(i&2)&&a!==null)e:for(;;){if(a===null)return;var st=a.tag;if(st===3||st===4){var nt=a.stateNode.containerInfo;if(nt===c||nt.nodeType===8&&nt.parentNode===c)break;if(st===4)for(st=a.return;st!==null;){var ot=st.tag;if((ot===3||ot===4)&&(ot=st.stateNode.containerInfo,ot===c||ot.nodeType===8&&ot.parentNode===c))return;st=st.return}for(;nt!==null;){if(st=Wc(nt),st===null)return;if(ot=st.tag,ot===5||ot===6){a=h=st;continue e}nt=nt.parentNode}}a=a.return}Jb(function(){var xt=h,vt=xb(s),bt=[];e:{var St=df.get(e);if(St!==void 0){var Et=td,Ct=e;switch(e){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":Et=Rd;break;case"focusin":Ct="focus",Et=Fd;break;case"focusout":Ct="blur",Et=Fd;break;case"beforeblur":case"afterblur":Et=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=Vd;break;case $e$1:case af:case bf:Et=Hd;break;case cf:Et=Xd;break;case"scroll":Et=vd;break;case"wheel":Et=Zd;break;case"copy":case"cut":case"paste":Et=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=Td}var ht=(i&4)!==0,d=!ht&&e==="scroll",b=ht?St!==null?St+"Capture":null:St;ht=[];for(var ft=xt,mt;ft!==null;){mt=ft;var _t=mt.stateNode;if(mt.tag===5&&_t!==null&&(mt=_t,b!==null&&(_t=Kb(ft,b),_t!=null&&ht.push(tf(ft,_t,mt)))),d)break;ft=ft.return}0<ht.length&&(St=new Et(St,Ct,null,s,vt),bt.push({event:St,listeners:ht}))}}if(!(i&7)){e:{if(St=e==="mouseover"||e==="pointerover",Et=e==="mouseout"||e==="pointerout",St&&s!==wb&&(Ct=s.relatedTarget||s.fromElement)&&(Wc(Ct)||Ct[uf]))break e;if((Et||St)&&(St=vt.window===vt?vt:(St=vt.ownerDocument)?St.defaultView||St.parentWindow:window,Et?(Ct=s.relatedTarget||s.toElement,Et=xt,Ct=Ct?Wc(Ct):null,Ct!==null&&(d=Vb(Ct),Ct!==d||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(Et=null,Ct=xt),Et!==Ct)){if(ht=Bd,_t="onMouseLeave",b="onMouseEnter",ft="mouse",(e==="pointerout"||e==="pointerover")&&(ht=Td,_t="onPointerLeave",b="onPointerEnter",ft="pointer"),d=Et==null?St:ue$1(Et),mt=Ct==null?St:ue$1(Ct),St=new ht(_t,ft+"leave",Et,s,vt),St.target=d,St.relatedTarget=mt,_t=null,Wc(vt)===xt&&(ht=new ht(b,ft+"enter",Ct,s,vt),ht.target=mt,ht.relatedTarget=d,_t=ht),d=_t,Et&&Ct)t:{for(ht=Et,b=Ct,ft=0,mt=ht;mt;mt=vf(mt))ft++;for(mt=0,_t=b;_t;_t=vf(_t))mt++;for(;0<ft-mt;)ht=vf(ht),ft--;for(;0<mt-ft;)b=vf(b),mt--;for(;ft--;){if(ht===b||b!==null&&ht===b.alternate)break t;ht=vf(ht),b=vf(b)}ht=null}else ht=null;Et!==null&&wf(bt,St,Et,ht,!1),Ct!==null&&d!==null&&wf(bt,d,Ct,ht,!0)}}e:{if(St=xt?ue$1(xt):window,Et=St.nodeName&&St.nodeName.toLowerCase(),Et==="select"||Et==="input"&&St.type==="file")var tt=ve$1;else if(me(St))if(we$1)tt=Fe$1;else{tt=De$1;var gt=Ce$1}else(Et=St.nodeName)&&Et.toLowerCase()==="input"&&(St.type==="checkbox"||St.type==="radio")&&(tt=Ee$1);if(tt&&(tt=tt(e,xt))){ne$1(bt,tt,s,vt);break e}gt&&gt(e,St,xt),e==="focusout"&&(gt=St._wrapperState)&&gt.controlled&&St.type==="number"&&cb(St,"number",St.value)}switch(gt=xt?ue$1(xt):window,e){case"focusin":(me(gt)||gt.contentEditable==="true")&&(Qe$1=gt,Re$1=xt,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(bt,s,vt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(bt,s,vt)}var wt;if(ae$1)e:{switch(e){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ie$1?ge$1(e,s)&&(yt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(yt="onCompositionStart");yt&&(de&&s.locale!=="ko"&&(ie$1||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ie$1&&(wt=nd()):(kd=vt,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),gt=oe$1(xt,yt),0<gt.length&&(yt=new Ld(yt,e,null,s,vt),bt.push({event:yt,listeners:gt}),wt?yt.data=wt:(wt=he$1(s),wt!==null&&(yt.data=wt)))),(wt=ce$1?je$1(e,s):ke$1(e,s))&&(xt=oe$1(xt,"onBeforeInput"),0<xt.length&&(vt=new Ld("onBeforeInput","beforeinput",null,s,vt),bt.push({event:vt,listeners:xt}),vt.data=wt))}se$1(bt,i)})}function tf(e,i,s){return{instance:e,listener:i,currentTarget:s}}function oe$1(e,i){for(var s=i+"Capture",a=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Kb(e,s),h!=null&&a.unshift(tf(e,h,c)),h=Kb(e,i),h!=null&&a.push(tf(e,h,c))),e=e.return}return a}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,i,s,a,c){for(var h=i._reactName,st=[];s!==null&&s!==a;){var nt=s,ot=nt.alternate,xt=nt.stateNode;if(ot!==null&&ot===a)break;nt.tag===5&&xt!==null&&(nt=xt,c?(ot=Kb(s,h),ot!=null&&st.unshift(tf(s,ot,nt))):c||(ot=Kb(s,h),ot!=null&&st.push(tf(s,ot,nt)))),s=s.return}st.length!==0&&e.push({event:i,listeners:st})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,i,s){if(i=zf(i),zf(e)!==i&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,i){var s=i,a=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(a===0){e.removeChild(c),bd(i);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=c}while(s);bd(i)}function Lf(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return e;i--}else s==="/$"&&i++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var i=e[Of];if(i)return i;for(var s=e.parentNode;s;){if(i=s[uf]||s[Of]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(e=Mf(e);e!==null;){if(s=e[Of])return s;e=Mf(e)}return i}e=s,s=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue$1(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(e,i){Tf++,Sf[Tf]=e.current,e.current=i}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,i){var s=e.type.contextTypes;if(!s)return Vf;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===i)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in s)c[h]=i[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=c),c}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H$1)}function ag(e,i,s){if(H$1.current!==Vf)throw Error(p(168));G$1(H$1,i),G$1(Wf,s)}function bg(e,i,s){var a=e.stateNode;if(i=i.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var c in a)if(!(c in i))throw Error(p(108,Ra(e)||"Unknown",c));return A$1({},s,a)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,e),G$1(Wf,Wf.current),!0}function dg(e,i,s){var a=e.stateNode;if(!a)throw Error(p(169));s?(e=bg(e,i,Xf),a.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H$1),G$1(H$1,e)):E(Wf),G$1(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,i=C$1;try{var s=eg;for(C$1=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(c){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),c}finally{C$1=i,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,i){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=i}function ug(e,i,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var a=rg;e=sg;var c=32-oc(a)-1;a&=~(1<<c),s+=1;var h=32-oc(i)+c;if(30<h){var st=c-c%5;h=(a&(1<<st)-1).toString(32),a>>=st,c-=st,rg=1<<32-oc(i)+c|s<<c|a,sg=h+e}else rg=1<<h|s<<c|a,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(e,i){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=e,i=e.deletions,i===null?(e.deletions=[s],e.flags|=16):i.push(s)}function Cg(e,i){switch(e.tag){case 5:var s=e.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,xg=e,yg=Lf(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,xg=e,yg=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=i,s.return=e,e.child=s,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I$1){var i=yg;if(i){var s=i;if(!Cg(e,i)){if(Dg(e))throw Error(p(418));i=Lf(s.nextSibling);var a=xg;i&&Cg(e,i)?Ag(a,s):(e.flags=e.flags&-4097|2,I$1=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I$1=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I$1)return Fg(e),I$1=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!Ef(e.type,e.memoizedProps)),i&&(i=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;i;)Ag(e,i),i=Lf(i.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(i===0){yg=Lf(e.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,i,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,e));var c=a,h=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===h?i.ref:(i=function(st){var nt=c.refs;st===null?delete nt[h]:nt[h]=st},i._stringRef=h,i)}if(typeof e!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,e))}return e}function Mg(e,i){throw e=Object.prototype.toString.call(i),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function Ng(e){var i=e._init;return i(e._payload)}function Og(e){function i(b,ft){if(e){var mt=b.deletions;mt===null?(b.deletions=[ft],b.flags|=16):mt.push(ft)}}function s(b,ft){if(!e)return null;for(;ft!==null;)i(b,ft),ft=ft.sibling;return null}function a(b,ft){for(b=new Map;ft!==null;)ft.key!==null?b.set(ft.key,ft):b.set(ft.index,ft),ft=ft.sibling;return b}function c(b,ft){return b=Pg(b,ft),b.index=0,b.sibling=null,b}function h(b,ft,mt){return b.index=mt,e?(mt=b.alternate,mt!==null?(mt=mt.index,mt<ft?(b.flags|=2,ft):mt):(b.flags|=2,ft)):(b.flags|=1048576,ft)}function st(b){return e&&b.alternate===null&&(b.flags|=2),b}function nt(b,ft,mt,_t){return ft===null||ft.tag!==6?(ft=Qg(mt,b.mode,_t),ft.return=b,ft):(ft=c(ft,mt),ft.return=b,ft)}function ot(b,ft,mt,_t){var tt=mt.type;return tt===ya?vt(b,ft,mt.props.children,_t,mt.key):ft!==null&&(ft.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===Ha&&Ng(tt)===ft.type)?(_t=c(ft,mt.props),_t.ref=Lg(b,ft,mt),_t.return=b,_t):(_t=Rg(mt.type,mt.key,mt.props,null,b.mode,_t),_t.ref=Lg(b,ft,mt),_t.return=b,_t)}function xt(b,ft,mt,_t){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==mt.containerInfo||ft.stateNode.implementation!==mt.implementation?(ft=Sg(mt,b.mode,_t),ft.return=b,ft):(ft=c(ft,mt.children||[]),ft.return=b,ft)}function vt(b,ft,mt,_t,tt){return ft===null||ft.tag!==7?(ft=Tg(mt,b.mode,_t,tt),ft.return=b,ft):(ft=c(ft,mt),ft.return=b,ft)}function bt(b,ft,mt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ft=Qg(""+ft,b.mode,mt),ft.return=b,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return mt=Rg(ft.type,ft.key,ft.props,null,b.mode,mt),mt.ref=Lg(b,null,ft),mt.return=b,mt;case wa:return ft=Sg(ft,b.mode,mt),ft.return=b,ft;case Ha:var _t=ft._init;return bt(b,_t(ft._payload),mt)}if(eb(ft)||Ka(ft))return ft=Tg(ft,b.mode,mt,null),ft.return=b,ft;Mg(b,ft)}return null}function St(b,ft,mt,_t){var tt=ft!==null?ft.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number")return tt!==null?null:nt(b,ft,""+mt,_t);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return mt.key===tt?ot(b,ft,mt,_t):null;case wa:return mt.key===tt?xt(b,ft,mt,_t):null;case Ha:return tt=mt._init,St(b,ft,tt(mt._payload),_t)}if(eb(mt)||Ka(mt))return tt!==null?null:vt(b,ft,mt,_t,null);Mg(b,mt)}return null}function Et(b,ft,mt,_t,tt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return b=b.get(mt)||null,nt(ft,b,""+_t,tt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:return b=b.get(_t.key===null?mt:_t.key)||null,ot(ft,b,_t,tt);case wa:return b=b.get(_t.key===null?mt:_t.key)||null,xt(ft,b,_t,tt);case Ha:var gt=_t._init;return Et(b,ft,mt,gt(_t._payload),tt)}if(eb(_t)||Ka(_t))return b=b.get(mt)||null,vt(ft,b,_t,tt,null);Mg(ft,_t)}return null}function Ct(b,ft,mt,_t){for(var tt=null,gt=null,wt=ft,yt=ft=0,Tt=null;wt!==null&&yt<mt.length;yt++){wt.index>yt?(Tt=wt,wt=null):Tt=wt.sibling;var Mt=St(b,wt,mt[yt],_t);if(Mt===null){wt===null&&(wt=Tt);break}e&&wt&&Mt.alternate===null&&i(b,wt),ft=h(Mt,ft,yt),gt===null?tt=Mt:gt.sibling=Mt,gt=Mt,wt=Tt}if(yt===mt.length)return s(b,wt),I$1&&tg(b,yt),tt;if(wt===null){for(;yt<mt.length;yt++)wt=bt(b,mt[yt],_t),wt!==null&&(ft=h(wt,ft,yt),gt===null?tt=wt:gt.sibling=wt,gt=wt);return I$1&&tg(b,yt),tt}for(wt=a(b,wt);yt<mt.length;yt++)Tt=Et(wt,b,yt,mt[yt],_t),Tt!==null&&(e&&Tt.alternate!==null&&wt.delete(Tt.key===null?yt:Tt.key),ft=h(Tt,ft,yt),gt===null?tt=Tt:gt.sibling=Tt,gt=Tt);return e&&wt.forEach(function(Pt){return i(b,Pt)}),I$1&&tg(b,yt),tt}function ht(b,ft,mt,_t){var tt=Ka(mt);if(typeof tt!="function")throw Error(p(150));if(mt=tt.call(mt),mt==null)throw Error(p(151));for(var gt=tt=null,wt=ft,yt=ft=0,Tt=null,Mt=mt.next();wt!==null&&!Mt.done;yt++,Mt=mt.next()){wt.index>yt?(Tt=wt,wt=null):Tt=wt.sibling;var Pt=St(b,wt,Mt.value,_t);if(Pt===null){wt===null&&(wt=Tt);break}e&&wt&&Pt.alternate===null&&i(b,wt),ft=h(Pt,ft,yt),gt===null?tt=Pt:gt.sibling=Pt,gt=Pt,wt=Tt}if(Mt.done)return s(b,wt),I$1&&tg(b,yt),tt;if(wt===null){for(;!Mt.done;yt++,Mt=mt.next())Mt=bt(b,Mt.value,_t),Mt!==null&&(ft=h(Mt,ft,yt),gt===null?tt=Mt:gt.sibling=Mt,gt=Mt);return I$1&&tg(b,yt),tt}for(wt=a(b,wt);!Mt.done;yt++,Mt=mt.next())Mt=Et(wt,b,yt,Mt.value,_t),Mt!==null&&(e&&Mt.alternate!==null&&wt.delete(Mt.key===null?yt:Mt.key),ft=h(Mt,ft,yt),gt===null?tt=Mt:gt.sibling=Mt,gt=Mt);return e&&wt.forEach(function(It){return i(b,It)}),I$1&&tg(b,yt),tt}function d(b,ft,mt,_t){if(typeof mt=="object"&&mt!==null&&mt.type===ya&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:e:{for(var tt=mt.key,gt=ft;gt!==null;){if(gt.key===tt){if(tt=mt.type,tt===ya){if(gt.tag===7){s(b,gt.sibling),ft=c(gt,mt.props.children),ft.return=b,b=ft;break e}}else if(gt.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===Ha&&Ng(tt)===gt.type){s(b,gt.sibling),ft=c(gt,mt.props),ft.ref=Lg(b,gt,mt),ft.return=b,b=ft;break e}s(b,gt);break}else i(b,gt);gt=gt.sibling}mt.type===ya?(ft=Tg(mt.props.children,b.mode,_t,mt.key),ft.return=b,b=ft):(_t=Rg(mt.type,mt.key,mt.props,null,b.mode,_t),_t.ref=Lg(b,ft,mt),_t.return=b,b=_t)}return st(b);case wa:e:{for(gt=mt.key;ft!==null;){if(ft.key===gt)if(ft.tag===4&&ft.stateNode.containerInfo===mt.containerInfo&&ft.stateNode.implementation===mt.implementation){s(b,ft.sibling),ft=c(ft,mt.children||[]),ft.return=b,b=ft;break e}else{s(b,ft);break}else i(b,ft);ft=ft.sibling}ft=Sg(mt,b.mode,_t),ft.return=b,b=ft}return st(b);case Ha:return gt=mt._init,d(b,ft,gt(mt._payload),_t)}if(eb(mt))return Ct(b,ft,mt,_t);if(Ka(mt))return ht(b,ft,mt,_t);Mg(b,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"?(mt=""+mt,ft!==null&&ft.tag===6?(s(b,ft.sibling),ft=c(ft,mt),ft.return=b,b=ft):(s(b,ft),ft=Qg(mt,b.mode,_t),ft.return=b,b=ft),st(b)):s(b,ft)}return d}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var i=Wg.current;E(Wg),e._currentValue=i}function bh(e,i,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===s)break;e=e.return}}function ch(e,i){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(dh=!0),e.firstContext=null)}function eh(e){var i=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:i,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return i}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,i,s,a){var c=i.interleaved;return c===null?(s.next=s,gh(i)):(s.next=c.next,c.next=s),i.interleaved=s,ih(e,a)}function ih(e,i){e.lanes|=i;var s=e.alternate;for(s!==null&&(s.lanes|=i),s=e,e=e.return;e!==null;)e.childLanes|=i,s=e.alternate,s!==null&&(s.childLanes|=i),s=e,e=e.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function nh(e,i,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K$1&2){var c=a.pending;return c===null?i.next=i:(i.next=c.next,c.next=i),a.pending=i,ih(e,s)}return c=a.interleaved,c===null?(i.next=i,gh(a)):(i.next=c.next,c.next=i),a.interleaved=i,ih(e,s)}function oh(e,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var a=i.lanes;a&=e.pendingLanes,s|=a,i.lanes=s,Cc(e,s)}}function ph(e,i){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var st={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};h===null?c=h=st:h=h.next=st,s=s.next}while(s!==null);h===null?c=h=i:h=h.next=i}else c=h=i;s={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=i:e.next=i,s.lastBaseUpdate=i}function qh(e,i,s,a){var c=e.updateQueue;jh=!1;var h=c.firstBaseUpdate,st=c.lastBaseUpdate,nt=c.shared.pending;if(nt!==null){c.shared.pending=null;var ot=nt,xt=ot.next;ot.next=null,st===null?h=xt:st.next=xt,st=ot;var vt=e.alternate;vt!==null&&(vt=vt.updateQueue,nt=vt.lastBaseUpdate,nt!==st&&(nt===null?vt.firstBaseUpdate=xt:nt.next=xt,vt.lastBaseUpdate=ot))}if(h!==null){var bt=c.baseState;st=0,vt=xt=ot=null,nt=h;do{var St=nt.lane,Et=nt.eventTime;if((a&St)===St){vt!==null&&(vt=vt.next={eventTime:Et,lane:0,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null});e:{var Ct=e,ht=nt;switch(St=i,Et=s,ht.tag){case 1:if(Ct=ht.payload,typeof Ct=="function"){bt=Ct.call(Et,bt,St);break e}bt=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=ht.payload,St=typeof Ct=="function"?Ct.call(Et,bt,St):Ct,St==null)break e;bt=A$1({},bt,St);break e;case 2:jh=!0}}nt.callback!==null&&nt.lane!==0&&(e.flags|=64,St=c.effects,St===null?c.effects=[nt]:St.push(nt))}else Et={eventTime:Et,lane:St,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null},vt===null?(xt=vt=Et,ot=bt):vt=vt.next=Et,st|=St;if(nt=nt.next,nt===null){if(nt=c.shared.pending,nt===null)break;St=nt,nt=St.next,St.next=null,c.lastBaseUpdate=St,c.shared.pending=null}}while(!0);if(vt===null&&(ot=bt),c.baseState=ot,c.firstBaseUpdate=xt,c.lastBaseUpdate=vt,i=c.shared.interleaved,i!==null){c=i;do st|=c.lane,c=c.next;while(c!==i)}else h===null&&(c.shared.lanes=0);rh|=st,e.lanes=st,e.memoizedState=bt}}function sh(e,i,s){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var a=e[i],c=a.callback;if(c!==null){if(a.callback=null,a=s,typeof c!="function")throw Error(p(191,c));c.call(a)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,i){switch(G$1(wh,i),G$1(vh$1,e),G$1(uh,th),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=lb(i,e)}E(uh),G$1(uh,i)}function zh(){E(uh),E(vh$1),E(wh)}function Ah(e){xh(wh.current);var i=xh(uh.current),s=lb(i,e.type);i!==s&&(G$1(vh$1,e),G$1(uh,s))}function Bh(e){vh$1.current===e&&(E(uh),E(vh$1))}var L$1=Uf(0);function Ch(e){for(var i=e;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,i){if(i===null)return!1;for(var s=0;s<i.length&&s<e.length;s++)if(!He$1(e[s],i[s]))return!1;return!0}function Nh(e,i,s,a,c,h){if(Hh=h,M$1=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=s(a,c),Jh){h=0;do{if(Jh=!1,Kh=0,25<=h)throw Error(p(301));h+=1,O$1=N=null,i.updateQueue=null,Fh.current=Qh,e=s(a,c)}while(Jh)}if(Fh.current=Rh,i=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,i)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=e:O$1=O$1.next=e,O$1}function Uh(){if(N===null){var e=M$1.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var i=O$1===null?M$1.memoizedState:O$1.next;if(i!==null)O$1=i,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=e:O$1=O$1.next=e}return O$1}function Vh(e,i){return typeof i=="function"?i(e):i}function Wh(e){var i=Uh(),s=i.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=N,c=a.baseQueue,h=s.pending;if(h!==null){if(c!==null){var st=c.next;c.next=h.next,h.next=st}a.baseQueue=c=h,s.pending=null}if(c!==null){h=c.next,a=a.baseState;var nt=st=null,ot=null,xt=h;do{var vt=xt.lane;if((Hh&vt)===vt)ot!==null&&(ot=ot.next={lane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),a=xt.hasEagerState?xt.eagerState:e(a,xt.action);else{var bt={lane:vt,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null};ot===null?(nt=ot=bt,st=a):ot=ot.next=bt,M$1.lanes|=vt,rh|=vt}xt=xt.next}while(xt!==null&&xt!==h);ot===null?st=a:ot.next=nt,He$1(a,i.memoizedState)||(dh=!0),i.memoizedState=a,i.baseState=st,i.baseQueue=ot,s.lastRenderedState=a}if(e=s.interleaved,e!==null){c=e;do h=c.lane,M$1.lanes|=h,rh|=h,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function Xh(e){var i=Uh(),s=i.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=s.dispatch,c=s.pending,h=i.memoizedState;if(c!==null){s.pending=null;var st=c=c.next;do h=e(h,st.action),st=st.next;while(st!==c);He$1(h,i.memoizedState)||(dh=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),s.lastRenderedState=h}return[h,a]}function Yh(){}function Zh(e,i){var s=M$1,a=Uh(),c=i(),h=!He$1(a.memoizedState,c);if(h&&(a.memoizedState=c,dh=!0),a=a.queue,$h(ai.bind(null,s,a,e),[e]),a.getSnapshot!==i||h||O$1!==null&&O$1.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,a,c,i),void 0,null),Q$1===null)throw Error(p(349));Hh&30||di(s,i,c)}return c}function di(e,i,s){e.flags|=16384,e={getSnapshot:i,value:s},i=M$1.updateQueue,i===null?(i={lastEffect:null,stores:null},M$1.updateQueue=i,i.stores=[e]):(s=i.stores,s===null?i.stores=[e]:s.push(e))}function ci(e,i,s,a){i.value=s,i.getSnapshot=a,ei(i)&&fi(e)}function ai(e,i,s){return s(function(){ei(i)&&fi(e)})}function ei(e){var i=e.getSnapshot;e=e.value;try{var s=i();return!He$1(e,s)}catch{return!0}}function fi(e){var i=ih(e,1);i!==null&&gi(i,e,1,-1)}function hi(e){var i=Th();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},i.queue=e,e=e.dispatch=ii.bind(null,M$1,e),[i.memoizedState,e]}function bi(e,i,s,a){return e={tag:e,create:i,destroy:s,deps:a,next:null},i=M$1.updateQueue,i===null?(i={lastEffect:null,stores:null},M$1.updateQueue=i,i.lastEffect=e.next=e):(s=i.lastEffect,s===null?i.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,i.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,i,s,a){var c=Th();M$1.flags|=e,c.memoizedState=bi(1|i,s,void 0,a===void 0?null:a)}function li(e,i,s,a){var c=Uh();a=a===void 0?null:a;var h=void 0;if(N!==null){var st=N.memoizedState;if(h=st.destroy,a!==null&&Mh(a,st.deps)){c.memoizedState=bi(i,s,h,a);return}}M$1.flags|=e,c.memoizedState=bi(1|i,s,h,a)}function mi(e,i){return ki(8390656,8,e,i)}function $h(e,i){return li(2048,8,e,i)}function ni(e,i){return li(4,2,e,i)}function oi(e,i){return li(4,4,e,i)}function pi(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function qi(e,i,s){return s=s!=null?s.concat([e]):null,li(4,4,pi.bind(null,i,e),s)}function ri(){}function si(e,i){var s=Uh();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Mh(i,a[1])?a[0]:(s.memoizedState=[e,i],e)}function ti(e,i){var s=Uh();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Mh(i,a[1])?a[0]:(e=e(),s.memoizedState=[e,i],e)}function ui(e,i,s){return Hh&21?(He$1(s,i)||(s=yc(),M$1.lanes|=s,rh|=s,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=s)}function vi(e,i){var s=C$1;C$1=s!==0&&4>s?s:4,e(!0);var a=Gh.transition;Gh.transition={};try{e(!1),i()}finally{C$1=s,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(e,i,s){var a=yi(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(i,s);else if(s=hh(e,i,s,a),s!==null){var c=R$1();gi(s,e,a,c),Bi(s,i,a)}}function ii(e,i,s){var a=yi(e),c={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(i,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var st=i.lastRenderedState,nt=h(st,s);if(c.hasEagerState=!0,c.eagerState=nt,He$1(nt,st)){var ot=i.interleaved;ot===null?(c.next=c,gh(i)):(c.next=ot.next,ot.next=c),i.interleaved=c;return}}catch{}finally{}s=hh(e,i,c,a),s!==null&&(c=R$1(),gi(s,e,a,c),Bi(s,i,a))}}function zi(e){var i=e.alternate;return e===M$1||i!==null&&i===M$1}function Ai(e,i){Jh=Ih=!0;var s=e.pending;s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i}function Bi(e,i,s){if(s&4194240){var a=i.lanes;a&=e.pendingLanes,s|=a,i.lanes=s,Cc(e,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,i){return Th().memoizedState=[e,i===void 0?null:i],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,i,s){return s=s!=null?s.concat([e]):null,ki(4194308,4,pi.bind(null,i,e),s)},useLayoutEffect:function(e,i){return ki(4194308,4,e,i)},useInsertionEffect:function(e,i){return ki(4,2,e,i)},useMemo:function(e,i){var s=Th();return i=i===void 0?null:i,e=e(),s.memoizedState=[e,i],e},useReducer:function(e,i,s){var a=Th();return i=s!==void 0?s(i):i,a.memoizedState=a.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=xi.bind(null,M$1,e),[a.memoizedState,e]},useRef:function(e){var i=Th();return e={current:e},i.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),i=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,s){var a=M$1,c=Th();if(I$1){if(s===void 0)throw Error(p(407));s=s()}else{if(s=i(),Q$1===null)throw Error(p(349));Hh&30||di(a,i,s)}c.memoizedState=s;var h={value:s,getSnapshot:i};return c.queue=h,mi(ai.bind(null,a,h,e),[e]),a.flags|=2048,bi(9,ci.bind(null,a,h,s,i),void 0,null),s},useId:function(){var e=Th(),i=Q$1.identifierPrefix;if(I$1){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,i=":"+i+"R"+s,s=Kh++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Lh++,i=":"+i+"r"+s.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var i=Uh();return ui(i,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],i=Uh().memoizedState;return[e,i]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var i=Uh();return N===null?i.memoizedState=e:ui(i,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],i=Uh().memoizedState;return[e,i]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,i){if(e&&e.defaultProps){i=A$1({},i),e=e.defaultProps;for(var s in e)i[s]===void 0&&(i[s]=e[s]);return i}return i}function Di(e,i,s,a){i=e.memoizedState,s=s(a,i),s=s==null?i:A$1({},i,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,i,s){e=e._reactInternals;var a=R$1(),c=yi(e),h=mh(a,c);h.payload=i,s!=null&&(h.callback=s),i=nh(e,h,c),i!==null&&(gi(i,e,c,a),oh(i,e,c))},enqueueReplaceState:function(e,i,s){e=e._reactInternals;var a=R$1(),c=yi(e),h=mh(a,c);h.tag=1,h.payload=i,s!=null&&(h.callback=s),i=nh(e,h,c),i!==null&&(gi(i,e,c,a),oh(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var s=R$1(),a=yi(e),c=mh(s,a);c.tag=2,i!=null&&(c.callback=i),i=nh(e,c,a),i!==null&&(gi(i,e,a,s),oh(i,e,a))}};function Fi(e,i,s,a,c,h,st){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,st):i.prototype&&i.prototype.isPureReactComponent?!Ie$1(s,a)||!Ie$1(c,h):!0}function Gi(e,i,s){var a=!1,c=Vf,h=i.contextType;return typeof h=="object"&&h!==null?h=eh(h):(c=Zf(i)?Xf:H$1.current,a=i.contextTypes,h=(a=a!=null)?Yf(e,c):Vf),i=new i(s,h),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ei,e.stateNode=i,i._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),i}function Hi(e,i,s,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,a),i.state!==e&&Ei.enqueueReplaceState(i,i.state,null)}function Ii(e,i,s,a){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},kh(e);var h=i.contextType;typeof h=="object"&&h!==null?c.context=eh(h):(h=Zf(i)?Xf:H$1.current,c.context=Yf(e,h)),c.state=e.memoizedState,h=i.getDerivedStateFromProps,typeof h=="function"&&(Di(e,i,h,s),c.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(i=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),i!==c.state&&Ei.enqueueReplaceState(c,c.state,null),qh(e,s,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,i){try{var s="",a=i;do s+=Pa(a),a=a.return;while(a);var c=s}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:i,stack:c,digest:null}}function Ki(e,i,s){return{value:e,source:null,stack:s??null,digest:i??null}}function Li(e,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,i,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var a=i.value;return s.callback=function(){Oi||(Oi=!0,Pi=a),Li(e,i)},s}function Qi(e,i,s){s=mh(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=i.value;s.payload=function(){return a(c)},s.callback=function(){Li(e,i)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){Li(e,i),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var st=i.stack;this.componentDidCatch(i.value,{componentStack:st!==null?st:""})}),s}function Si(e,i,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Mi;var c=new Set;a.set(i,c)}else c=a.get(i),c===void 0&&(c=new Set,a.set(i,c));c.has(s)||(c.add(s),e=Ti.bind(null,e,i,s),i.then(e,e))}function Ui(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function Vi(e,i,s,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===i?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=mh(-1,1),i.tag=2,nh(s,i,1))),s.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,i,s,a){i.child=e===null?Vg(i,null,s,a):Ug(i,e.child,s,a)}function Yi(e,i,s,a,c){s=s.render;var h=i.ref;return ch(i,c),a=Nh(e,i,s,a,h,c),s=Sh(),e!==null&&!dh?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~c,Zi(e,i,c)):(I$1&&s&&vg(i),i.flags|=1,Xi(e,i,a,c),i.child)}function $i(e,i,s,a,c){if(e===null){var h=s.type;return typeof h=="function"&&!aj(h)&&h.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=h,bj(e,i,h,a,c)):(e=Rg(s.type,null,a,i,i.mode,c),e.ref=i.ref,e.return=i,i.child=e)}if(h=e.child,!(e.lanes&c)){var st=h.memoizedProps;if(s=s.compare,s=s!==null?s:Ie$1,s(st,a)&&e.ref===i.ref)return Zi(e,i,c)}return i.flags|=1,e=Pg(h,a),e.ref=i.ref,e.return=i,i.child=e}function bj(e,i,s,a,c){if(e!==null){var h=e.memoizedProps;if(Ie$1(h,a)&&e.ref===i.ref)if(dh=!1,i.pendingProps=a=h,(e.lanes&c)!==0)e.flags&131072&&(dh=!0);else return i.lanes=e.lanes,Zi(e,i,c)}return cj(e,i,s,a,c)}function dj(e,i,s){var a=i.pendingProps,c=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=s;else{if(!(s&1073741824))return e=h!==null?h.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,G$1(ej,fj),fj|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:s,G$1(ej,fj),fj|=a}else h!==null?(a=h.baseLanes|s,i.memoizedState=null):a=s,G$1(ej,fj),fj|=a;return Xi(e,i,c,s),i.child}function gj(e,i){var s=i.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function cj(e,i,s,a,c){var h=Zf(s)?Xf:H$1.current;return h=Yf(i,h),ch(i,c),s=Nh(e,i,s,a,h,c),a=Sh(),e!==null&&!dh?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~c,Zi(e,i,c)):(I$1&&a&&vg(i),i.flags|=1,Xi(e,i,s,c),i.child)}function hj(e,i,s,a,c){if(Zf(s)){var h=!0;cg(i)}else h=!1;if(ch(i,c),i.stateNode===null)ij(e,i),Gi(i,s,a),Ii(i,s,a,c),a=!0;else if(e===null){var st=i.stateNode,nt=i.memoizedProps;st.props=nt;var ot=st.context,xt=s.contextType;typeof xt=="object"&&xt!==null?xt=eh(xt):(xt=Zf(s)?Xf:H$1.current,xt=Yf(i,xt));var vt=s.getDerivedStateFromProps,bt=typeof vt=="function"||typeof st.getSnapshotBeforeUpdate=="function";bt||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(nt!==a||ot!==xt)&&Hi(i,st,a,xt),jh=!1;var St=i.memoizedState;st.state=St,qh(i,a,st,c),ot=i.memoizedState,nt!==a||St!==ot||Wf.current||jh?(typeof vt=="function"&&(Di(i,s,vt,a),ot=i.memoizedState),(nt=jh||Fi(i,s,nt,a,St,ot,xt))?(bt||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(i.flags|=4194308)):(typeof st.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=ot),st.props=a,st.state=ot,st.context=xt,a=nt):(typeof st.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{st=i.stateNode,lh(e,i),nt=i.memoizedProps,xt=i.type===i.elementType?nt:Ci(i.type,nt),st.props=xt,bt=i.pendingProps,St=st.context,ot=s.contextType,typeof ot=="object"&&ot!==null?ot=eh(ot):(ot=Zf(s)?Xf:H$1.current,ot=Yf(i,ot));var Et=s.getDerivedStateFromProps;(vt=typeof Et=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(nt!==bt||St!==ot)&&Hi(i,st,a,ot),jh=!1,St=i.memoizedState,st.state=St,qh(i,a,st,c);var Ct=i.memoizedState;nt!==bt||St!==Ct||Wf.current||jh?(typeof Et=="function"&&(Di(i,s,Et,a),Ct=i.memoizedState),(xt=jh||Fi(i,s,xt,a,St,Ct,ot)||!1)?(vt||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate(a,Ct,ot),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate(a,Ct,ot)),typeof st.componentDidUpdate=="function"&&(i.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof st.componentDidUpdate!="function"||nt===e.memoizedProps&&St===e.memoizedState||(i.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||nt===e.memoizedProps&&St===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=Ct),st.props=a,st.state=Ct,st.context=ot,a=xt):(typeof st.componentDidUpdate!="function"||nt===e.memoizedProps&&St===e.memoizedState||(i.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||nt===e.memoizedProps&&St===e.memoizedState||(i.flags|=1024),a=!1)}return jj(e,i,s,a,h,c)}function jj(e,i,s,a,c,h){gj(e,i);var st=(i.flags&128)!==0;if(!a&&!st)return c&&dg(i,s,!1),Zi(e,i,h);a=i.stateNode,Wi.current=i;var nt=st&&typeof s.getDerivedStateFromError!="function"?null:a.render();return i.flags|=1,e!==null&&st?(i.child=Ug(i,e.child,null,h),i.child=Ug(i,null,nt,h)):Xi(e,i,nt,h),i.memoizedState=a.state,c&&dg(i,s,!0),i.child}function kj(e){var i=e.stateNode;i.pendingContext?ag(e,i.pendingContext,i.pendingContext!==i.context):i.context&&ag(e,i.context,!1),yh(e,i.containerInfo)}function lj(e,i,s,a,c){return Ig(),Jg(c),i.flags|=256,Xi(e,i,s,a),i.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,i,s){var a=i.pendingProps,c=L$1.current,h=!1,st=(i.flags&128)!==0,nt;if((nt=st)||(nt=e!==null&&e.memoizedState===null?!1:(c&2)!==0),nt?(h=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),G$1(L$1,c&1),e===null)return Eg(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(st=a.children,e=a.fallback,h?(a=i.mode,h=i.child,st={mode:"hidden",children:st},!(a&1)&&h!==null?(h.childLanes=0,h.pendingProps=st):h=pj(st,a,0,null),e=Tg(e,a,s,null),h.return=i,e.return=i,h.sibling=e,i.child=h,i.child.memoizedState=nj(s),i.memoizedState=mj,e):qj(i,st));if(c=e.memoizedState,c!==null&&(nt=c.dehydrated,nt!==null))return rj(e,i,st,a,nt,c,s);if(h){h=a.fallback,st=i.mode,c=e.child,nt=c.sibling;var ot={mode:"hidden",children:a.children};return!(st&1)&&i.child!==c?(a=i.child,a.childLanes=0,a.pendingProps=ot,i.deletions=null):(a=Pg(c,ot),a.subtreeFlags=c.subtreeFlags&14680064),nt!==null?h=Pg(nt,h):(h=Tg(h,st,s,null),h.flags|=2),h.return=i,a.return=i,a.sibling=h,i.child=a,a=h,h=i.child,st=e.child.memoizedState,st=st===null?nj(s):{baseLanes:st.baseLanes|s,cachePool:null,transitions:st.transitions},h.memoizedState=st,h.childLanes=e.childLanes&~s,i.memoizedState=mj,a}return h=e.child,e=h.sibling,a=Pg(h,{mode:"visible",children:a.children}),!(i.mode&1)&&(a.lanes=s),a.return=i,a.sibling=null,e!==null&&(s=i.deletions,s===null?(i.deletions=[e],i.flags|=16):s.push(e)),i.child=a,i.memoizedState=null,a}function qj(e,i){return i=pj({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function sj(e,i,s,a){return a!==null&&Jg(a),Ug(i,e.child,null,s),e=qj(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function rj(e,i,s,a,c,h,st){if(s)return i.flags&256?(i.flags&=-257,a=Ki(Error(p(422))),sj(e,i,st,a)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(h=a.fallback,c=i.mode,a=pj({mode:"visible",children:a.children},c,0,null),h=Tg(h,c,st,null),h.flags|=2,a.return=i,h.return=i,a.sibling=h,i.child=a,i.mode&1&&Ug(i,e.child,null,st),i.child.memoizedState=nj(st),i.memoizedState=mj,h);if(!(i.mode&1))return sj(e,i,st,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var nt=a.dgst;return a=nt,h=Error(p(419)),a=Ki(h,a,void 0),sj(e,i,st,a)}if(nt=(st&e.childLanes)!==0,dh||nt){if(a=Q$1,a!==null){switch(st&-st){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|st)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,ih(e,c),gi(a,e,c,-1))}return tj(),a=Ki(Error(p(421))),sj(e,i,st,a)}return c.data==="$?"?(i.flags|=128,i.child=e.child,i=uj.bind(null,e),c._reactRetry=i,null):(e=h.treeContext,yg=Lf(c.nextSibling),xg=i,I$1=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=i),i=qj(i,a.children),i.flags|=4096,i)}function vj(e,i,s){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),bh(e.return,i,s)}function wj(e,i,s,a,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:c}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=s,h.tailMode=c)}function xj(e,i,s){var a=i.pendingProps,c=a.revealOrder,h=a.tail;if(Xi(e,i,a.children,s),a=L$1.current,a&2)a=a&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,s,i);else if(e.tag===19)vj(e,s,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G$1(L$1,a),!(i.mode&1))i.memoizedState=null;else switch(c){case"forwards":for(s=i.child,c=null;s!==null;)e=s.alternate,e!==null&&Ch(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=i.child,i.child=null):(c=s.sibling,s.sibling=null),wj(i,!1,c,s,h);break;case"backwards":for(s=null,c=i.child,i.child=null;c!==null;){if(e=c.alternate,e!==null&&Ch(e)===null){i.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}wj(i,!0,s,null,h);break;case"together":wj(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ij(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function Zi(e,i,s){if(e!==null&&(i.dependencies=e.dependencies),rh|=i.lanes,!(s&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(p(153));if(i.child!==null){for(e=i.child,s=Pg(e,e.pendingProps),i.child=s,s.return=i;e.sibling!==null;)e=e.sibling,s=s.sibling=Pg(e,e.pendingProps),s.return=i;s.sibling=null}return i.child}function yj(e,i,s){switch(i.tag){case 3:kj(i),Ig();break;case 5:Ah(i);break;case 1:Zf(i.type)&&cg(i);break;case 4:yh(i,i.stateNode.containerInfo);break;case 10:var a=i.type._context,c=i.memoizedProps.value;G$1(Wg,a._currentValue),a._currentValue=c;break;case 13:if(a=i.memoizedState,a!==null)return a.dehydrated!==null?(G$1(L$1,L$1.current&1),i.flags|=128,null):s&i.child.childLanes?oj(e,i,s):(G$1(L$1,L$1.current&1),e=Zi(e,i,s),e!==null?e.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(a=(s&i.childLanes)!==0,e.flags&128){if(a)return xj(e,i,s);i.flags|=128}if(c=i.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G$1(L$1,L$1.current),a)break;return null;case 22:case 23:return i.lanes=0,dj(e,i,s)}return Zi(e,i,s)}var zj,Aj,Bj,Cj;zj=function(e,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(e,i,s,a){var c=e.memoizedProps;if(c!==a){e=i.stateNode,xh(uh.current);var h=null;switch(s){case"input":c=Ya(e,c),a=Ya(e,a),h=[];break;case"select":c=A$1({},c,{value:void 0}),a=A$1({},a,{value:void 0}),h=[];break;case"textarea":c=gb(e,c),a=gb(e,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf)}ub(s,a);var st;s=null;for(xt in c)if(!a.hasOwnProperty(xt)&&c.hasOwnProperty(xt)&&c[xt]!=null)if(xt==="style"){var nt=c[xt];for(st in nt)nt.hasOwnProperty(st)&&(s||(s={}),s[st]="")}else xt!=="dangerouslySetInnerHTML"&&xt!=="children"&&xt!=="suppressContentEditableWarning"&&xt!=="suppressHydrationWarning"&&xt!=="autoFocus"&&(ea.hasOwnProperty(xt)?h||(h=[]):(h=h||[]).push(xt,null));for(xt in a){var ot=a[xt];if(nt=c!=null?c[xt]:void 0,a.hasOwnProperty(xt)&&ot!==nt&&(ot!=null||nt!=null))if(xt==="style")if(nt){for(st in nt)!nt.hasOwnProperty(st)||ot&&ot.hasOwnProperty(st)||(s||(s={}),s[st]="");for(st in ot)ot.hasOwnProperty(st)&&nt[st]!==ot[st]&&(s||(s={}),s[st]=ot[st])}else s||(h||(h=[]),h.push(xt,s)),s=ot;else xt==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,nt=nt?nt.__html:void 0,ot!=null&&nt!==ot&&(h=h||[]).push(xt,ot)):xt==="children"?typeof ot!="string"&&typeof ot!="number"||(h=h||[]).push(xt,""+ot):xt!=="suppressContentEditableWarning"&&xt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(xt)?(ot!=null&&xt==="onScroll"&&D$1("scroll",e),h||nt===ot||(h=[])):(h=h||[]).push(xt,ot))}s&&(h=h||[]).push("style",s);var xt=h;(i.updateQueue=xt)&&(i.flags|=4)}};Cj=function(e,i,s,a){s!==a&&(i.flags|=4)};function Dj(e,i){if(!I$1)switch(e.tailMode){case"hidden":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S$1(e){var i=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(i)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=s,i}function Ej(e,i,s){var a=i.pendingProps;switch(wg(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(i),null;case 1:return Zf(i.type)&&$f(),S$1(i),null;case 3:return a=i.stateNode,zh(),E(Wf),E(H$1),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,i),S$1(i),null;case 5:Bh(i);var c=xh(wh.current);if(s=i.type,e!==null&&i.stateNode!=null)Bj(e,i,s,a,c),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!a){if(i.stateNode===null)throw Error(p(166));return S$1(i),null}if(e=xh(uh.current),Gg(i)){a=i.stateNode,s=i.type;var h=i.memoizedProps;switch(a[Of]=i,a[Pf]=h,e=(i.mode&1)!==0,s){case"dialog":D$1("cancel",a),D$1("close",a);break;case"iframe":case"object":case"embed":D$1("load",a);break;case"video":case"audio":for(c=0;c<lf.length;c++)D$1(lf[c],a);break;case"source":D$1("error",a);break;case"img":case"image":case"link":D$1("error",a),D$1("load",a);break;case"details":D$1("toggle",a);break;case"input":Za(a,h),D$1("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},D$1("invalid",a);break;case"textarea":hb(a,h),D$1("invalid",a)}ub(s,h),c=null;for(var st in h)if(h.hasOwnProperty(st)){var nt=h[st];st==="children"?typeof nt=="string"?a.textContent!==nt&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,nt,e),c=["children",nt]):typeof nt=="number"&&a.textContent!==""+nt&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,nt,e),c=["children",""+nt]):ea.hasOwnProperty(st)&&nt!=null&&st==="onScroll"&&D$1("scroll",a)}switch(s){case"input":Va(a),db(a,h,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=Bf)}a=c,i.updateQueue=a,a!==null&&(i.flags|=4)}else{st=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=st.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=st.createElement(s,{is:a.is}):(e=st.createElement(s),s==="select"&&(st=e,a.multiple?st.multiple=!0:a.size&&(st.size=a.size))):e=st.createElementNS(e,s),e[Of]=i,e[Pf]=a,zj(e,i,!1,!1),i.stateNode=e;e:{switch(st=vb(s,a),s){case"dialog":D$1("cancel",e),D$1("close",e),c=a;break;case"iframe":case"object":case"embed":D$1("load",e),c=a;break;case"video":case"audio":for(c=0;c<lf.length;c++)D$1(lf[c],e);c=a;break;case"source":D$1("error",e),c=a;break;case"img":case"image":case"link":D$1("error",e),D$1("load",e),c=a;break;case"details":D$1("toggle",e),c=a;break;case"input":Za(e,a),c=Ya(e,a),D$1("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=A$1({},a,{value:void 0}),D$1("invalid",e);break;case"textarea":hb(e,a),c=gb(e,a),D$1("invalid",e);break;default:c=a}ub(s,c),nt=c;for(h in nt)if(nt.hasOwnProperty(h)){var ot=nt[h];h==="style"?sb(e,ot):h==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&nb(e,ot)):h==="children"?typeof ot=="string"?(s!=="textarea"||ot!=="")&&ob(e,ot):typeof ot=="number"&&ob(e,""+ot):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea.hasOwnProperty(h)?ot!=null&&h==="onScroll"&&D$1("scroll",e):ot!=null&&ta(e,h,ot,st))}switch(s){case"input":Va(e),db(e,a,!1);break;case"textarea":Va(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?fb(e,!!a.multiple,h,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S$1(i),null;case 6:if(e&&i.stateNode!=null)Cj(e,i,e.memoizedProps,a);else{if(typeof a!="string"&&i.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(i)){if(a=i.stateNode,s=i.memoizedProps,a[Of]=i,(h=a.nodeValue!==s)&&(e=xg,e!==null))switch(e.tag){case 3:Af(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(e.mode&1)!==0)}h&&(i.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=i,i.stateNode=a}return S$1(i),null;case 13:if(E(L$1),a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&i.mode&1&&!(i.flags&128))Hg(),Ig(),i.flags|=98560,h=!1;else if(h=Gg(i),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(p(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(p(317));h[Of]=i}else Ig(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S$1(i),h=!1}else zg!==null&&(Fj(zg),zg=null),h=!0;if(!h)return i.flags&65536?i:null}return i.flags&128?(i.lanes=s,i):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(i.child.flags|=8192,i.mode&1&&(e===null||L$1.current&1?T$1===0&&(T$1=3):tj())),i.updateQueue!==null&&(i.flags|=4),S$1(i),null);case 4:return zh(),Aj(e,i),e===null&&sf(i.stateNode.containerInfo),S$1(i),null;case 10:return ah(i.type._context),S$1(i),null;case 17:return Zf(i.type)&&$f(),S$1(i),null;case 19:if(E(L$1),h=i.memoizedState,h===null)return S$1(i),null;if(a=(i.flags&128)!==0,st=h.rendering,st===null)if(a)Dj(h,!1);else{if(T$1!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(st=Ch(e),st!==null){for(i.flags|=128,Dj(h,!1),a=st.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),i.subtreeFlags=0,a=s,s=i.child;s!==null;)h=s,e=a,h.flags&=14680066,st=h.alternate,st===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=st.childLanes,h.lanes=st.lanes,h.child=st.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=st.memoizedProps,h.memoizedState=st.memoizedState,h.updateQueue=st.updateQueue,h.type=st.type,e=st.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return G$1(L$1,L$1.current&1|2),i.child}e=e.sibling}h.tail!==null&&B$1()>Gj&&(i.flags|=128,a=!0,Dj(h,!1),i.lanes=4194304)}else{if(!a)if(e=Ch(st),e!==null){if(i.flags|=128,a=!0,s=e.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),Dj(h,!0),h.tail===null&&h.tailMode==="hidden"&&!st.alternate&&!I$1)return S$1(i),null}else 2*B$1()-h.renderingStartTime>Gj&&s!==1073741824&&(i.flags|=128,a=!0,Dj(h,!1),i.lanes=4194304);h.isBackwards?(st.sibling=i.child,i.child=st):(s=h.last,s!==null?s.sibling=st:i.child=st,h.last=st)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=B$1(),i.sibling=null,s=L$1.current,G$1(L$1,a?s&1|2:s&1),i):(S$1(i),null);case 22:case 23:return Hj(),a=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(i.flags|=8192),a&&i.mode&1?fj&1073741824&&(S$1(i),i.subtreeFlags&6&&(i.flags|=8192)):S$1(i),null;case 24:return null;case 25:return null}throw Error(p(156,i.tag))}function Ij(e,i){switch(wg(i),i.tag){case 1:return Zf(i.type)&&$f(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return zh(),E(Wf),E(H$1),Eh(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return Bh(i),null;case 13:if(E(L$1),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(p(340));Ig()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return E(L$1),null;case 4:return zh(),null;case 10:return ah(i.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(e,i){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W$1(e,i,a)}else s.current=null}function Mj(e,i,s){try{s()}catch(a){W$1(e,i,a)}}var Nj=!1;function Oj(e,i){if(Cf=dd,e=Me$1(),Ne$1(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var st=0,nt=-1,ot=-1,xt=0,vt=0,bt=e,St=null;t:for(;;){for(var Et;bt!==s||c!==0&&bt.nodeType!==3||(nt=st+c),bt!==h||a!==0&&bt.nodeType!==3||(ot=st+a),bt.nodeType===3&&(st+=bt.nodeValue.length),(Et=bt.firstChild)!==null;)St=bt,bt=Et;for(;;){if(bt===e)break t;if(St===s&&++xt===c&&(nt=st),St===h&&++vt===a&&(ot=st),(Et=bt.nextSibling)!==null)break;bt=St,St=bt.parentNode}bt=Et}s=nt===-1||ot===-1?null:{start:nt,end:ot}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:e,selectionRange:s},dd=!1,V$1=i;V$1!==null;)if(i=V$1,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,V$1=e;else for(;V$1!==null;){i=V$1;try{var Ct=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var ht=Ct.memoizedProps,d=Ct.memoizedState,b=i.stateNode,ft=b.getSnapshotBeforeUpdate(i.elementType===i.type?ht:Ci(i.type,ht),d);b.__reactInternalSnapshotBeforeUpdate=ft}break;case 3:var mt=i.stateNode.containerInfo;mt.nodeType===1?mt.textContent="":mt.nodeType===9&&mt.documentElement&&mt.removeChild(mt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(_t){W$1(i,i.return,_t)}if(e=i.sibling,e!==null){e.return=i.return,V$1=e;break}V$1=i.return}return Ct=Nj,Nj=!1,Ct}function Pj(e,i,s){var a=i.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&Mj(i,s,h)}c=c.next}while(c!==a)}}function Qj(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==i)}}function Rj(e){var i=e.ref;if(i!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof i=="function"?i(e):i.current=e}}function Sj(e){var i=e.alternate;i!==null&&(e.alternate=null,Sj(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Of],delete i[Pf],delete i[of],delete i[Qf],delete i[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,i,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(e,i):s.insertBefore(e,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(e,s)):(i=s,i.appendChild(e)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Bf));else if(a!==4&&(e=e.child,e!==null))for(Vj(e,i,s),e=e.sibling;e!==null;)Vj(e,i,s),e=e.sibling}function Wj(e,i,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?s.insertBefore(e,i):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wj(e,i,s),e=e.sibling;e!==null;)Wj(e,i,s),e=e.sibling}var X$1=null,Xj=!1;function Yj(e,i,s){for(s=s.child;s!==null;)Zj(e,i,s),s=s.sibling}function Zj(e,i,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U$1||Lj(s,i);case 6:var a=X$1,c=Xj;X$1=null,Yj(e,i,s),X$1=a,Xj=c,X$1!==null&&(Xj?(e=X$1,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):X$1.removeChild(s.stateNode));break;case 18:X$1!==null&&(Xj?(e=X$1,s=s.stateNode,e.nodeType===8?Kf(e.parentNode,s):e.nodeType===1&&Kf(e,s),bd(e)):Kf(X$1,s.stateNode));break;case 4:a=X$1,c=Xj,X$1=s.stateNode.containerInfo,Xj=!0,Yj(e,i,s),X$1=a,Xj=c;break;case 0:case 11:case 14:case 15:if(!U$1&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,st=h.destroy;h=h.tag,st!==void 0&&(h&2||h&4)&&Mj(s,i,st),c=c.next}while(c!==a)}Yj(e,i,s);break;case 1:if(!U$1&&(Lj(s,i),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(nt){W$1(s,i,nt)}Yj(e,i,s);break;case 21:Yj(e,i,s);break;case 22:s.mode&1?(U$1=(a=U$1)||s.memoizedState!==null,Yj(e,i,s),U$1=a):Yj(e,i,s);break;default:Yj(e,i,s)}}function ak(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Kj),i.forEach(function(a){var c=bk.bind(null,e,a);s.has(a)||(s.add(a),a.then(c,c))})}}function ck(e,i){var s=i.deletions;if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];try{var h=e,st=i,nt=st;e:for(;nt!==null;){switch(nt.tag){case 5:X$1=nt.stateNode,Xj=!1;break e;case 3:X$1=nt.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=nt.stateNode.containerInfo,Xj=!0;break e}nt=nt.return}if(X$1===null)throw Error(p(160));Zj(h,st,c),X$1=null,Xj=!1;var ot=c.alternate;ot!==null&&(ot.return=null),c.return=null}catch(xt){W$1(c,i,xt)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)dk(i,e),i=i.sibling}function dk(e,i){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(i,e),ek(e),a&4){try{Pj(3,e,e.return),Qj(3,e)}catch(ht){W$1(e,e.return,ht)}try{Pj(5,e,e.return)}catch(ht){W$1(e,e.return,ht)}}break;case 1:ck(i,e),ek(e),a&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(i,e),ek(e),a&512&&s!==null&&Lj(s,s.return),e.flags&32){var c=e.stateNode;try{ob(c,"")}catch(ht){W$1(e,e.return,ht)}}if(a&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,st=s!==null?s.memoizedProps:h,nt=e.type,ot=e.updateQueue;if(e.updateQueue=null,ot!==null)try{nt==="input"&&h.type==="radio"&&h.name!=null&&ab(c,h),vb(nt,st);var xt=vb(nt,h);for(st=0;st<ot.length;st+=2){var vt=ot[st],bt=ot[st+1];vt==="style"?sb(c,bt):vt==="dangerouslySetInnerHTML"?nb(c,bt):vt==="children"?ob(c,bt):ta(c,vt,bt,xt)}switch(nt){case"input":bb(c,h);break;case"textarea":ib(c,h);break;case"select":var St=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var Et=h.value;Et!=null?fb(c,!!h.multiple,Et,!1):St!==!!h.multiple&&(h.defaultValue!=null?fb(c,!!h.multiple,h.defaultValue,!0):fb(c,!!h.multiple,h.multiple?[]:"",!1))}c[Pf]=h}catch(ht){W$1(e,e.return,ht)}}break;case 6:if(ck(i,e),ek(e),a&4){if(e.stateNode===null)throw Error(p(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(ht){W$1(e,e.return,ht)}}break;case 3:if(ck(i,e),ek(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(i.containerInfo)}catch(ht){W$1(e,e.return,ht)}break;case 4:ck(i,e),ek(e);break;case 13:ck(i,e),ek(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(fk=B$1())),a&4&&ak(e);break;case 22:if(vt=s!==null&&s.memoizedState!==null,e.mode&1?(U$1=(xt=U$1)||vt,ck(i,e),U$1=xt):ck(i,e),ek(e),a&8192){if(xt=e.memoizedState!==null,(e.stateNode.isHidden=xt)&&!vt&&e.mode&1)for(V$1=e,vt=e.child;vt!==null;){for(bt=V$1=vt;V$1!==null;){switch(St=V$1,Et=St.child,St.tag){case 0:case 11:case 14:case 15:Pj(4,St,St.return);break;case 1:Lj(St,St.return);var Ct=St.stateNode;if(typeof Ct.componentWillUnmount=="function"){a=St,s=St.return;try{i=a,Ct.props=i.memoizedProps,Ct.state=i.memoizedState,Ct.componentWillUnmount()}catch(ht){W$1(a,s,ht)}}break;case 5:Lj(St,St.return);break;case 22:if(St.memoizedState!==null){gk(bt);continue}}Et!==null?(Et.return=St,V$1=Et):gk(bt)}vt=vt.sibling}e:for(vt=null,bt=e;;){if(bt.tag===5){if(vt===null){vt=bt;try{c=bt.stateNode,xt?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(nt=bt.stateNode,ot=bt.memoizedProps.style,st=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,nt.style.display=rb("display",st))}catch(ht){W$1(e,e.return,ht)}}}else if(bt.tag===6){if(vt===null)try{bt.stateNode.nodeValue=xt?"":bt.memoizedProps}catch(ht){W$1(e,e.return,ht)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===e)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===e)break e;for(;bt.sibling===null;){if(bt.return===null||bt.return===e)break e;vt===bt&&(vt=null),bt=bt.return}vt===bt&&(vt=null),bt.sibling.return=bt.return,bt=bt.sibling}}break;case 19:ck(i,e),ek(e),a&4&&ak(e);break;case 21:break;default:ck(i,e),ek(e)}}function ek(e){var i=e.flags;if(i&2){try{e:{for(var s=e.return;s!==null;){if(Tj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ob(c,""),a.flags&=-33);var h=Uj(e);Wj(e,h,c);break;case 3:case 4:var st=a.stateNode.containerInfo,nt=Uj(e);Vj(e,nt,st);break;default:throw Error(p(161))}}catch(ot){W$1(e,e.return,ot)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function hk(e,i,s){V$1=e,ik(e)}function ik(e,i,s){for(var a=(e.mode&1)!==0;V$1!==null;){var c=V$1,h=c.child;if(c.tag===22&&a){var st=c.memoizedState!==null||Jj;if(!st){var nt=c.alternate,ot=nt!==null&&nt.memoizedState!==null||U$1;nt=Jj;var xt=U$1;if(Jj=st,(U$1=ot)&&!xt)for(V$1=c;V$1!==null;)st=V$1,ot=st.child,st.tag===22&&st.memoizedState!==null?jk(c):ot!==null?(ot.return=st,V$1=ot):jk(c);for(;h!==null;)V$1=h,ik(h),h=h.sibling;V$1=c,Jj=nt,U$1=xt}kk(e)}else c.subtreeFlags&8772&&h!==null?(h.return=c,V$1=h):kk(e)}}function kk(e){for(;V$1!==null;){var i=V$1;if(i.flags&8772){var s=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U$1||Qj(5,i);break;case 1:var a=i.stateNode;if(i.flags&4&&!U$1)if(s===null)a.componentDidMount();else{var c=i.elementType===i.type?s.memoizedProps:Ci(i.type,s.memoizedProps);a.componentDidUpdate(c,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=i.updateQueue;h!==null&&sh(i,h,a);break;case 3:var st=i.updateQueue;if(st!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}sh(i,st,s)}break;case 5:var nt=i.stateNode;if(s===null&&i.flags&4){s=nt;var ot=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&s.focus();break;case"img":ot.src&&(s.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var xt=i.alternate;if(xt!==null){var vt=xt.memoizedState;if(vt!==null){var bt=vt.dehydrated;bt!==null&&bd(bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U$1||i.flags&512&&Rj(i)}catch(St){W$1(i,i.return,St)}}if(i===e){V$1=null;break}if(s=i.sibling,s!==null){s.return=i.return,V$1=s;break}V$1=i.return}}function gk(e){for(;V$1!==null;){var i=V$1;if(i===e){V$1=null;break}var s=i.sibling;if(s!==null){s.return=i.return,V$1=s;break}V$1=i.return}}function jk(e){for(;V$1!==null;){var i=V$1;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Qj(4,i)}catch(ot){W$1(i,s,ot)}break;case 1:var a=i.stateNode;if(typeof a.componentDidMount=="function"){var c=i.return;try{a.componentDidMount()}catch(ot){W$1(i,c,ot)}}var h=i.return;try{Rj(i)}catch(ot){W$1(i,h,ot)}break;case 5:var st=i.return;try{Rj(i)}catch(ot){W$1(i,st,ot)}}}catch(ot){W$1(i,i.return,ot)}if(i===e){V$1=null;break}var nt=i.sibling;if(nt!==null){nt.return=i.return,V$1=nt;break}V$1=i.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(e){return e.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C$1,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,i,s,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,s,a),(!(K$1&2)||e!==Q$1)&&(e===Q$1&&(!(K$1&2)&&(qk|=s),T$1===4&&Ck(e,Z$1)),Dk(e,a),s===1&&K$1===0&&!(i.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(e,i){var s=e.callbackNode;wc(e,i);var a=uc(e,e===Q$1?Z$1:0);if(a===0)s!==null&&bc(s),e.callbackNode=null,e.callbackPriority=0;else if(i=a&-a,e.callbackPriority!==i){if(s!=null&&bc(s),i===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K$1&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,e))}e.callbackPriority=i,e.callbackNode=s}}function Gk(e,i){if(Ak=-1,Bk=0,K$1&6)throw Error(p(327));var s=e.callbackNode;if(Hk()&&e.callbackNode!==s)return null;var a=uc(e,e===Q$1?Z$1:0);if(a===0)return null;if(a&30||a&e.expiredLanes||i)i=Ik(e,a);else{i=a;var c=K$1;K$1|=2;var h=Jk();(Q$1!==e||Z$1!==i)&&(uk=null,Gj=B$1()+500,Kk(e,i));do try{Lk();break}catch(nt){Mk(e,nt)}while(!0);$g(),mk.current=h,K$1=c,Y$1!==null?i=0:(Q$1=null,Z$1=0,i=T$1)}if(i!==0){if(i===2&&(c=xc(e),c!==0&&(a=c,i=Nk(e,c))),i===1)throw s=pk,Kk(e,0),Ck(e,a),Dk(e,B$1()),s;if(i===6)Ck(e,a);else{if(c=e.current.alternate,!(a&30)&&!Ok(c)&&(i=Ik(e,a),i===2&&(h=xc(e),h!==0&&(a=h,i=Nk(e,h))),i===1))throw s=pk,Kk(e,0),Ck(e,a),Dk(e,B$1()),s;switch(e.finishedWork=c,e.finishedLanes=a,i){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,a),(a&130023424)===a&&(i=fk+500-B$1(),10<i)){if(uc(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){R$1(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),i);break}Pk(e,tk,uk);break;case 4:if(Ck(e,a),(a&4194240)===a)break;for(i=e.eventTimes,c=-1;0<a;){var st=31-oc(a);h=1<<st,st=i[st],st>c&&(c=st),a&=~h}if(a=c,a=B$1()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),a);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B$1()),e.callbackNode===s?Gk.bind(null,e):null}function Nk(e,i){var s=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,i).flags|=256),e=Ik(e,i),e!==2&&(i=tk,tk=s,i!==null&&Fj(i)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var i=e;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var c=s[a],h=c.getSnapshot;c=c.value;try{if(!He$1(h(),c))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ck(e,i){for(i&=~rk,i&=~qk,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var s=31-oc(i),a=1<<s;e[s]=-1,i&=~a}}function Ek(e){if(K$1&6)throw Error(p(327));Hk();var i=uc(e,0);if(!(i&1))return Dk(e,B$1()),null;var s=Ik(e,i);if(e.tag!==0&&s===2){var a=xc(e);a!==0&&(i=a,s=Nk(e,a))}if(s===1)throw s=pk,Kk(e,0),Ck(e,i),Dk(e,B$1()),s;if(s===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,Pk(e,tk,uk),Dk(e,B$1()),null}function Qk(e,i){var s=K$1;K$1|=1;try{return e(i)}finally{K$1=s,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var i=K$1;K$1|=1;var s=ok.transition,a=C$1;try{if(ok.transition=null,C$1=1,e)return e()}finally{C$1=a,ok.transition=s,K$1=i,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,i){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Gf(s)),Y$1!==null)for(s=Y$1.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H$1),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L$1);break;case 19:E(L$1);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q$1=e,Y$1=e=Pg(e.current,null),Z$1=fj=i,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(i=0;i<fh.length;i++)if(s=fh[i],a=s.interleaved,a!==null){s.interleaved=null;var c=a.next,h=s.pending;if(h!==null){var st=h.next;h.next=c,a.next=st}s.pending=a}fh=null}return e}function Mk(e,i){do{var s=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var a=M$1.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T$1=1,pk=i,Y$1=null;break}e:{var h=e,st=s.return,nt=s,ot=i;if(i=Z$1,nt.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var xt=ot,vt=nt,bt=vt.tag;if(!(vt.mode&1)&&(bt===0||bt===11||bt===15)){var St=vt.alternate;St?(vt.updateQueue=St.updateQueue,vt.memoizedState=St.memoizedState,vt.lanes=St.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Et=Ui(st);if(Et!==null){Et.flags&=-257,Vi(Et,st,nt,h,i),Et.mode&1&&Si(h,xt,i),i=Et,ot=xt;var Ct=i.updateQueue;if(Ct===null){var ht=new Set;ht.add(ot),i.updateQueue=ht}else Ct.add(ot);break e}else{if(!(i&1)){Si(h,xt,i),tj();break e}ot=Error(p(426))}}else if(I$1&&nt.mode&1){var d=Ui(st);if(d!==null){!(d.flags&65536)&&(d.flags|=256),Vi(d,st,nt,h,i),Jg(Ji(ot,nt));break e}}h=ot=Ji(ot,nt),T$1!==4&&(T$1=2),sk===null?sk=[h]:sk.push(h),h=st;do{switch(h.tag){case 3:h.flags|=65536,i&=-i,h.lanes|=i;var b=Ni(h,ot,i);ph(h,b);break e;case 1:nt=ot;var ft=h.type,mt=h.stateNode;if(!(h.flags&128)&&(typeof ft.getDerivedStateFromError=="function"||mt!==null&&typeof mt.componentDidCatch=="function"&&(Ri===null||!Ri.has(mt)))){h.flags|=65536,i&=-i,h.lanes|=i;var _t=Qi(h,nt,i);ph(h,_t);break e}}h=h.return}while(h!==null)}Sk(s)}catch(tt){i=tt,Y$1===s&&s!==null&&(Y$1=s=s.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(e,i){var s=K$1;K$1|=2;var a=Jk();(Q$1!==e||Z$1!==i)&&(uk=null,Kk(e,i));do try{Tk();break}catch(c){Mk(e,c)}while(!0);if($g(),K$1=s,mk.current=a,Y$1!==null)throw Error(p(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(e){var i=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,i===null?Sk(e):Y$1=i,nk.current=null}function Sk(e){var i=e;do{var s=i.alternate;if(e=i.return,i.flags&32768){if(s=Ij(s,i),s!==null){s.flags&=32767,Y$1=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T$1=6,Y$1=null;return}}else if(s=Ej(s,i,fj),s!==null){Y$1=s;return}if(i=i.sibling,i!==null){Y$1=i;return}Y$1=i=e}while(i!==null);T$1===0&&(T$1=5)}function Pk(e,i,s){var a=C$1,c=ok.transition;try{ok.transition=null,C$1=1,Wk(e,i,s,a)}finally{ok.transition=c,C$1=a}return null}function Wk(e,i,s,a){do Hk();while(wk!==null);if(K$1&6)throw Error(p(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var h=s.lanes|s.childLanes;if(Bc(e,h),e===Q$1&&(Y$1=Q$1=null,Z$1=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),h=(s.flags&15990)!==0,s.subtreeFlags&15990||h){h=ok.transition,ok.transition=null;var st=C$1;C$1=1;var nt=K$1;K$1|=4,nk.current=null,Oj(e,s),dk(s,e),Oe$1(Df),dd=!!Cf,Df=Cf=null,e.current=s,hk(s),dc(),K$1=nt,C$1=st,ok.transition=h}else e.current=s;if(vk&&(vk=!1,wk=e,xk=c),h=e.pendingLanes,h===0&&(Ri=null),mc(s.stateNode),Dk(e,B$1()),i!==null)for(a=e.onRecoverableError,s=0;s<i.length;s++)c=i[s],a(c.value,{componentStack:c.stack,digest:c.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),h=e.pendingLanes,h&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),i=ok.transition,s=C$1;try{if(ok.transition=null,C$1=16>e?16:e,wk===null)var a=!1;else{if(e=wk,wk=null,xk=0,K$1&6)throw Error(p(331));var c=K$1;for(K$1|=4,V$1=e.current;V$1!==null;){var h=V$1,st=h.child;if(V$1.flags&16){var nt=h.deletions;if(nt!==null){for(var ot=0;ot<nt.length;ot++){var xt=nt[ot];for(V$1=xt;V$1!==null;){var vt=V$1;switch(vt.tag){case 0:case 11:case 15:Pj(8,vt,h)}var bt=vt.child;if(bt!==null)bt.return=vt,V$1=bt;else for(;V$1!==null;){vt=V$1;var St=vt.sibling,Et=vt.return;if(Sj(vt),vt===xt){V$1=null;break}if(St!==null){St.return=Et,V$1=St;break}V$1=Et}}}var Ct=h.alternate;if(Ct!==null){var ht=Ct.child;if(ht!==null){Ct.child=null;do{var d=ht.sibling;ht.sibling=null,ht=d}while(ht!==null)}}V$1=h}}if(h.subtreeFlags&2064&&st!==null)st.return=h,V$1=st;else e:for(;V$1!==null;){if(h=V$1,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Pj(9,h,h.return)}var b=h.sibling;if(b!==null){b.return=h.return,V$1=b;break e}V$1=h.return}}var ft=e.current;for(V$1=ft;V$1!==null;){st=V$1;var mt=st.child;if(st.subtreeFlags&2064&&mt!==null)mt.return=st,V$1=mt;else e:for(st=ft;V$1!==null;){if(nt=V$1,nt.flags&2048)try{switch(nt.tag){case 0:case 11:case 15:Qj(9,nt)}}catch(tt){W$1(nt,nt.return,tt)}if(nt===st){V$1=null;break e}var _t=nt.sibling;if(_t!==null){_t.return=nt.return,V$1=_t;break e}V$1=nt.return}}if(K$1=c,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}a=!0}return a}finally{C$1=s,ok.transition=i}}return!1}function Xk(e,i,s){i=Ji(s,i),i=Ni(e,i,1),e=nh(e,i,1),i=R$1(),e!==null&&(Ac(e,1,i),Dk(e,i))}function W$1(e,i,s){if(e.tag===3)Xk(e,e,s);else for(;i!==null;){if(i.tag===3){Xk(i,e,s);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){e=Ji(s,e),e=Qi(i,e,1),i=nh(i,e,1),e=R$1(),i!==null&&(Ac(i,1,e),Dk(i,e));break}}i=i.return}}function Ti(e,i,s){var a=e.pingCache;a!==null&&a.delete(i),i=R$1(),e.pingedLanes|=e.suspendedLanes&s,Q$1===e&&(Z$1&s)===s&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(e,0):rk|=s),Dk(e,i)}function Yk(e,i){i===0&&(e.mode&1?(i=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):i=1);var s=R$1();e=ih(e,i),e!==null&&(Ac(e,i,s),Dk(e,s))}function uj(e){var i=e.memoizedState,s=0;i!==null&&(s=i.retryLane),Yk(e,s)}function bk(e,i){var s=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(i),Yk(e,s)}var Vk;Vk=function(e,i,s){if(e!==null)if(e.memoizedProps!==i.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&s)&&!(i.flags&128))return dh=!1,yj(e,i,s);dh=!!(e.flags&131072)}else dh=!1,I$1&&i.flags&1048576&&ug(i,ng,i.index);switch(i.lanes=0,i.tag){case 2:var a=i.type;ij(e,i),e=i.pendingProps;var c=Yf(i,H$1.current);ch(i,s),c=Nh(null,i,a,e,c,s);var h=Sh();return i.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf(a)?(h=!0,cg(i)):h=!1,i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kh(i),c.updater=Ei,i.stateNode=c,c._reactInternals=i,Ii(i,a,e,s),i=jj(null,i,a,!0,h,s)):(i.tag=0,I$1&&h&&vg(i),Xi(null,i,c,s),i=i.child),i;case 16:a=i.elementType;e:{switch(ij(e,i),e=i.pendingProps,c=a._init,a=c(a._payload),i.type=a,c=i.tag=Zk(a),e=Ci(a,e),c){case 0:i=cj(null,i,a,e,s);break e;case 1:i=hj(null,i,a,e,s);break e;case 11:i=Yi(null,i,a,e,s);break e;case 14:i=$i(null,i,a,Ci(a.type,e),s);break e}throw Error(p(306,a,""))}return i;case 0:return a=i.type,c=i.pendingProps,c=i.elementType===a?c:Ci(a,c),cj(e,i,a,c,s);case 1:return a=i.type,c=i.pendingProps,c=i.elementType===a?c:Ci(a,c),hj(e,i,a,c,s);case 3:e:{if(kj(i),e===null)throw Error(p(387));a=i.pendingProps,h=i.memoizedState,c=h.element,lh(e,i),qh(i,a,null,s);var st=i.memoizedState;if(a=st.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:st.cache,pendingSuspenseBoundaries:st.pendingSuspenseBoundaries,transitions:st.transitions},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){c=Ji(Error(p(423)),i),i=lj(e,i,a,s,c);break e}else if(a!==c){c=Ji(Error(p(424)),i),i=lj(e,i,a,s,c);break e}else for(yg=Lf(i.stateNode.containerInfo.firstChild),xg=i,I$1=!0,zg=null,s=Vg(i,null,a,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===c){i=Zi(e,i,s);break e}Xi(e,i,a,s)}i=i.child}return i;case 5:return Ah(i),e===null&&Eg(i),a=i.type,c=i.pendingProps,h=e!==null?e.memoizedProps:null,st=c.children,Ef(a,c)?st=null:h!==null&&Ef(a,h)&&(i.flags|=32),gj(e,i),Xi(e,i,st,s),i.child;case 6:return e===null&&Eg(i),null;case 13:return oj(e,i,s);case 4:return yh(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=Ug(i,null,a,s):Xi(e,i,a,s),i.child;case 11:return a=i.type,c=i.pendingProps,c=i.elementType===a?c:Ci(a,c),Yi(e,i,a,c,s);case 7:return Xi(e,i,i.pendingProps,s),i.child;case 8:return Xi(e,i,i.pendingProps.children,s),i.child;case 12:return Xi(e,i,i.pendingProps.children,s),i.child;case 10:e:{if(a=i.type._context,c=i.pendingProps,h=i.memoizedProps,st=c.value,G$1(Wg,a._currentValue),a._currentValue=st,h!==null)if(He$1(h.value,st)){if(h.children===c.children&&!Wf.current){i=Zi(e,i,s);break e}}else for(h=i.child,h!==null&&(h.return=i);h!==null;){var nt=h.dependencies;if(nt!==null){st=h.child;for(var ot=nt.firstContext;ot!==null;){if(ot.context===a){if(h.tag===1){ot=mh(-1,s&-s),ot.tag=2;var xt=h.updateQueue;if(xt!==null){xt=xt.shared;var vt=xt.pending;vt===null?ot.next=ot:(ot.next=vt.next,vt.next=ot),xt.pending=ot}}h.lanes|=s,ot=h.alternate,ot!==null&&(ot.lanes|=s),bh(h.return,s,i),nt.lanes|=s;break}ot=ot.next}}else if(h.tag===10)st=h.type===i.type?null:h.child;else if(h.tag===18){if(st=h.return,st===null)throw Error(p(341));st.lanes|=s,nt=st.alternate,nt!==null&&(nt.lanes|=s),bh(st,s,i),st=h.sibling}else st=h.child;if(st!==null)st.return=h;else for(st=h;st!==null;){if(st===i){st=null;break}if(h=st.sibling,h!==null){h.return=st.return,st=h;break}st=st.return}h=st}Xi(e,i,c.children,s),i=i.child}return i;case 9:return c=i.type,a=i.pendingProps.children,ch(i,s),c=eh(c),a=a(c),i.flags|=1,Xi(e,i,a,s),i.child;case 14:return a=i.type,c=Ci(a,i.pendingProps),c=Ci(a.type,c),$i(e,i,a,c,s);case 15:return bj(e,i,i.type,i.pendingProps,s);case 17:return a=i.type,c=i.pendingProps,c=i.elementType===a?c:Ci(a,c),ij(e,i),i.tag=1,Zf(a)?(e=!0,cg(i)):e=!1,ch(i,s),Gi(i,a,c),Ii(i,a,c,s),jj(null,i,a,!0,e,s);case 19:return xj(e,i,s);case 22:return dj(e,i,s)}throw Error(p(156,i.tag))};function Fk(e,i){return ac(e,i)}function $k(e,i,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,i,s,a){return new $k(e,i,s,a)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,i){var s=e.alternate;return s===null?(s=Bg(e.tag,i,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=i,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,i=e.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Rg(e,i,s,a,c,h){var st=2;if(a=e,typeof e=="function")aj(e)&&(st=1);else if(typeof e=="string")st=5;else e:switch(e){case ya:return Tg(s.children,c,h,i);case za:st=8,c|=8;break;case Aa:return e=Bg(12,s,i,c|2),e.elementType=Aa,e.lanes=h,e;case Ea:return e=Bg(13,s,i,c),e.elementType=Ea,e.lanes=h,e;case Fa:return e=Bg(19,s,i,c),e.elementType=Fa,e.lanes=h,e;case Ia:return pj(s,c,h,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:st=10;break e;case Ca:st=9;break e;case Da:st=11;break e;case Ga:st=14;break e;case Ha:st=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return i=Bg(st,s,i,c),i.elementType=e,i.type=a,i.lanes=h,i}function Tg(e,i,s,a){return e=Bg(7,e,a,i),e.lanes=s,e}function pj(e,i,s,a){return e=Bg(22,e,a,i),e.elementType=Ia,e.lanes=s,e.stateNode={isHidden:!1},e}function Qg(e,i,s){return e=Bg(6,e,null,i),e.lanes=s,e}function Sg(e,i,s){return i=Bg(4,e.children!==null?e.children:[],e.key,i),i.lanes=s,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function al(e,i,s,a,c){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function bl(e,i,s,a,c,h,st,nt,ot){return e=new al(e,i,s,nt,ot),i===1?(i=1,h===!0&&(i|=8)):i=0,h=Bg(3,null,null,i),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(h),e}function cl(e,i,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:e,containerInfo:i,implementation:s}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p(171))}if(e.tag===1){var s=e.type;if(Zf(s))return bg(e,s,i)}return i}function el(e,i,s,a,c,h,st,nt,ot){return e=bl(s,a,!0,e,c,h,st,nt,ot),e.context=dl(null),s=e.current,a=R$1(),c=yi(s),h=mh(a,c),h.callback=i??null,nh(s,h,c),e.current.lanes=c,Ac(e,c,a),Dk(e,a),e}function fl(e,i,s,a){var c=i.current,h=R$1(),st=yi(c);return s=dl(s),i.context===null?i.context=s:i.pendingContext=s,i=mh(h,st),i.payload={element:e},a=a===void 0?null:a,a!==null&&(i.callback=a),e=nh(c,i,st),e!==null&&(gi(e,c,st,h),oh(e,c,st)),st}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<i?s:i}}function il(e,i){hl(e,i),(e=e.alternate)&&hl(e,i)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(p(409));fl(e,i,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Rk(function(){fl(null,e,null,null)}),i[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hc();e={blockedOn:null,target:e,priority:i};for(var s=0;s<Qc.length&&i!==0&&i<Qc[s].priority;s++);Qc.splice(s,0,e),s===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,i,s,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var xt=gl(st);h.call(xt)}}var st=el(i,a,e,0,null,!1,!1,"",pl);return e._reactRootContainer=st,e[uf]=st.current,sf(e.nodeType===8?e.parentNode:e),Rk(),st}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var nt=a;a=function(){var xt=gl(ot);nt.call(xt)}}var ot=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=ot,e[uf]=ot.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(i,ot,s,a)}),ot}function rl(e,i,s,a,c){var h=s._reactRootContainer;if(h){var st=h;if(typeof c=="function"){var nt=c;c=function(){var ot=gl(st);nt.call(ot)}}fl(i,st,e,c)}else st=ql(s,i,e,c,a);return gl(st)}Ec=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var s=tc(i.pendingLanes);s!==0&&(Cc(i,s|1),Dk(i,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var a=ih(e,1);if(a!==null){var c=R$1();gi(a,e,1,c)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var i=ih(e,134217728);if(i!==null){var s=R$1();gi(i,e,134217728,s)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var i=yi(e),s=ih(e,i);if(s!==null){var a=R$1();gi(s,e,i,a)}il(e,i)}};Hc=function(){return C$1};Ic=function(e,i){var s=C$1;try{return C$1=e,i()}finally{C$1=s}};yb=function(e,i,s){switch(i){case"input":if(bb(e,s),i=s.name,s.type==="radio"&&i!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var a=s[i];if(a!==e&&a.form===e.form){var c=Db(a);if(!c)throw Error(p(90));Wa(a),bb(a,c)}}}break;case"textarea":ib(e,s);break;case"select":i=s.value,i!=null&&fb(e,!!s.multiple,i,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(i))throw Error(p(200));return cl(e,i,null,s)};reactDom_production_min.createRoot=function(e,i){if(!nl(e))throw Error(p(299));var s=!1,a="",c=kl;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onRecoverableError!==void 0&&(c=i.onRecoverableError)),i=bl(e,1,!1,null,null,s,!1,a,c),e[uf]=i.current,sf(e.nodeType===8?e.parentNode:e),new ll(i)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(i),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,i,s){if(!ol(i))throw Error(p(200));return rl(null,e,i,!0,s)};reactDom_production_min.hydrateRoot=function(e,i,s){if(!nl(e))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,c=!1,h="",st=kl;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(st=s.onRecoverableError)),i=el(i,null,e,1,s??null,c,!1,h,st),e[uf]=i.current,sf(e),a)for(e=0;e<a.length;e++)s=a[e],c=s._getVersion,c=c(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,c]:i.mutableSourceEagerHydrationData.push(s,c);return new ml(i)};reactDom_production_min.render=function(e,i,s){if(!ol(i))throw Error(p(200));return rl(null,e,i,!1,s)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,i,s,a){if(!ol(s))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,i,s,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends$3.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(e){e===void 0&&(e={});function i(a,c){let{pathname:h,search:st,hash:nt}=a.location;return createLocation("",{pathname:h,search:st,hash:nt},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(a,c){return typeof c=="string"?c:createPath(c)}return getUrlBasedHistory(i,s,null,e)}function invariant$1(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function warning(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,i){return{usr:e.state,key:e.key,idx:i}}function createLocation(e,i,s,a){return s===void 0&&(s=null),_extends$3({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof i=="string"?parsePath(i):i,{state:s,key:i&&i.key||a||createKey()})}function createPath(e){let{pathname:i="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(i+=a.charAt(0)==="#"?a:"#"+a),i}function parsePath(e){let i={};if(e){let s=e.indexOf("#");s>=0&&(i.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(i.search=e.substr(a),e=e.substr(0,a)),e&&(i.pathname=e)}return i}function getUrlBasedHistory(e,i,s,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:h=!1}=a,st=c.history,nt=Action.Pop,ot=null,xt=vt();xt==null&&(xt=0,st.replaceState(_extends$3({},st.state,{idx:xt}),""));function vt(){return(st.state||{idx:null}).idx}function bt(){nt=Action.Pop;let d=vt(),b=d==null?null:d-xt;xt=d,ot&&ot({action:nt,location:ht.location,delta:b})}function St(d,b){nt=Action.Push;let ft=createLocation(ht.location,d,b);xt=vt()+1;let mt=getHistoryState(ft,xt),_t=ht.createHref(ft);try{st.pushState(mt,"",_t)}catch(tt){if(tt instanceof DOMException&&tt.name==="DataCloneError")throw tt;c.location.assign(_t)}h&&ot&&ot({action:nt,location:ht.location,delta:1})}function Et(d,b){nt=Action.Replace;let ft=createLocation(ht.location,d,b);xt=vt();let mt=getHistoryState(ft,xt),_t=ht.createHref(ft);st.replaceState(mt,"",_t),h&&ot&&ot({action:nt,location:ht.location,delta:0})}function Ct(d){let b=c.location.origin!=="null"?c.location.origin:c.location.href,ft=typeof d=="string"?d:createPath(d);return ft=ft.replace(/ $/,"%20"),invariant$1(b,"No window.location.(origin|href) available to create URL for href: "+ft),new URL(ft,b)}let ht={get action(){return nt},get location(){return e(c,st)},listen(d){if(ot)throw new Error("A history only accepts one active listener");return c.addEventListener(PopStateEventType,bt),ot=d,()=>{c.removeEventListener(PopStateEventType,bt),ot=null}},createHref(d){return i(c,d)},createURL:Ct,encodeLocation(d){let b=Ct(d);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:St,replace:Et,go(d){return st.go(d)}};return ht}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));function matchRoutes(e,i,s){return s===void 0&&(s="/"),matchRoutesImpl(e,i,s,!1)}function matchRoutesImpl(e,i,s,a){let c=typeof i=="string"?parsePath(i):i,h=stripBasename(c.pathname||"/",s);if(h==null)return null;let st=flattenRoutes(e);rankRouteBranches(st);let nt=null;for(let ot=0;nt==null&&ot<st.length;++ot){let xt=decodePath(h);nt=matchRouteBranch(st[ot],xt,a)}return nt}function flattenRoutes(e,i,s,a){i===void 0&&(i=[]),s===void 0&&(s=[]),a===void 0&&(a="");let c=(h,st,nt)=>{let ot={relativePath:nt===void 0?h.path||"":nt,caseSensitive:h.caseSensitive===!0,childrenIndex:st,route:h};ot.relativePath.startsWith("/")&&(invariant$1(ot.relativePath.startsWith(a),'Absolute route path "'+ot.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ot.relativePath=ot.relativePath.slice(a.length));let xt=joinPaths([a,ot.relativePath]),vt=s.concat(ot);h.children&&h.children.length>0&&(invariant$1(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+xt+'".')),flattenRoutes(h.children,i,vt,xt)),!(h.path==null&&!h.index)&&i.push({path:xt,score:computeScore(xt,h.index),routesMeta:vt})};return e.forEach((h,st)=>{var nt;if(h.path===""||!((nt=h.path)!=null&&nt.includes("?")))c(h,st);else for(let ot of explodeOptionalSegments(h.path))c(h,st,ot)}),i}function explodeOptionalSegments(e){let i=e.split("/");if(i.length===0)return[];let[s,...a]=i,c=s.endsWith("?"),h=s.replace(/\?$/,"");if(a.length===0)return c?[h,""]:[h];let st=explodeOptionalSegments(a.join("/")),nt=[];return nt.push(...st.map(ot=>ot===""?h:[h,ot].join("/"))),c&&nt.push(...st),nt.map(ot=>e.startsWith("/")&&ot===""?"/":ot)}function rankRouteBranches(e){e.sort((i,s)=>i.score!==s.score?s.score-i.score:compareIndexes(i.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,i){let s=e.split("/"),a=s.length;return s.some(isSplat)&&(a+=splatPenalty),i&&(a+=indexRouteValue),s.filter(c=>!isSplat(c)).reduce((c,h)=>c+(paramRe.test(h)?dynamicSegmentValue:h===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(e,i){return e.length===i.length&&e.slice(0,-1).every((a,c)=>a===i[c])?e[e.length-1]-i[i.length-1]:0}function matchRouteBranch(e,i,s){let{routesMeta:a}=e,c={},h="/",st=[];for(let nt=0;nt<a.length;++nt){let ot=a[nt],xt=nt===a.length-1,vt=h==="/"?i:i.slice(h.length)||"/",bt=matchPath({path:ot.relativePath,caseSensitive:ot.caseSensitive,end:xt},vt),St=ot.route;if(!bt&&xt&&s&&!a[a.length-1].route.index&&(bt=matchPath({path:ot.relativePath,caseSensitive:ot.caseSensitive,end:!1},vt)),!bt)return null;Object.assign(c,bt.params),st.push({params:c,pathname:joinPaths([h,bt.pathname]),pathnameBase:normalizePathname(joinPaths([h,bt.pathnameBase])),route:St}),bt.pathnameBase!=="/"&&(h=joinPaths([h,bt.pathnameBase]))}return st}function matchPath(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=compilePath(e.path,e.caseSensitive,e.end),c=i.match(s);if(!c)return null;let h=c[0],st=h.replace(/(.)\/+$/,"$1"),nt=c.slice(1);return{params:a.reduce((xt,vt,bt)=>{let{paramName:St,isOptional:Et}=vt;if(St==="*"){let ht=nt[bt]||"";st=h.slice(0,h.length-ht.length).replace(/(.)\/+$/,"$1")}const Ct=nt[bt];return Et&&!Ct?xt[St]=void 0:xt[St]=(Ct||"").replace(/%2F/g,"/"),xt},{}),pathname:h,pathnameBase:st,pattern:e}}function compilePath(e,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(st,nt,ot)=>(a.push({paramName:nt,isOptional:ot!=null}),ot?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,i?void 0:"i"),a]}function decodePath(e){try{return e.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),e}}function stripBasename(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}function resolvePath(e,i){i===void 0&&(i="/");let{pathname:s,search:a="",hash:c=""}=typeof e=="string"?parsePath(e):e;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,i):i,search:normalizeSearch(a),hash:normalizeHash(c)}}function resolvePathname(e,i){let s=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(e,i,s,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(e){return e.filter((i,s)=>s===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(e,i){let s=getPathContributingMatches(e);return i?s.map((a,c)=>c===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function resolveTo(e,i,s,a){a===void 0&&(a=!1);let c;typeof e=="string"?c=parsePath(e):(c=_extends$3({},e),invariant$1(!c.pathname||!c.pathname.includes("?"),getInvalidPathError("?","pathname","search",c)),invariant$1(!c.pathname||!c.pathname.includes("#"),getInvalidPathError("#","pathname","hash",c)),invariant$1(!c.search||!c.search.includes("#"),getInvalidPathError("#","search","hash",c)));let h=e===""||c.pathname==="",st=h?"/":c.pathname,nt;if(st==null)nt=s;else{let bt=i.length-1;if(!a&&st.startsWith("..")){let St=st.split("/");for(;St[0]==="..";)St.shift(),bt-=1;c.pathname=St.join("/")}nt=bt>=0?i[bt]:"/"}let ot=resolvePath(c,nt),xt=st&&st!=="/"&&st.endsWith("/"),vt=(h||st===".")&&s.endsWith("/");return!ot.pathname.endsWith("/")&&(xt||vt)&&(ot.pathname+="/"),ot}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(e,i){let{relative:s}=i===void 0?{}:i;useInRouterContext()||invariant$1(!1);let{basename:a,navigator:c}=reactExports.useContext(NavigationContext),{hash:h,pathname:st,search:nt}=useResolvedPath(e,{relative:s}),ot=st;return a!=="/"&&(ot=st==="/"?a:joinPaths([a,st])),c.createHref({pathname:ot,search:nt,hash:h})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let e=reactExports.useContext(DataRouterContext),{basename:i,future:s,navigator:a}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),{pathname:h}=useLocation(),st=JSON.stringify(getResolveToMatches(c,s.v7_relativeSplatPath)),nt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{nt.current=!0}),reactExports.useCallback(function(xt,vt){if(vt===void 0&&(vt={}),!nt.current)return;if(typeof xt=="number"){a.go(xt);return}let bt=resolveTo(xt,JSON.parse(st),h,vt.relative==="path");e==null&&i!=="/"&&(bt.pathname=bt.pathname==="/"?i:joinPaths([i,bt.pathname])),(vt.replace?a.replace:a.push)(bt,vt.state,vt)},[i,a,st,h,e])}const OutletContext=reactExports.createContext(null);function useOutletContext(){return reactExports.useContext(OutletContext)}function useOutlet(e){let i=reactExports.useContext(RouteContext).outlet;return i&&reactExports.createElement(OutletContext.Provider,{value:e},i)}function useResolvedPath(e,i){let{relative:s}=i===void 0?{}:i,{future:a}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),{pathname:h}=useLocation(),st=JSON.stringify(getResolveToMatches(c,a.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(st),h,s==="path"),[e,st,h,s])}function useRoutes(e,i){return useRoutesImpl(e,i)}function useRoutesImpl(e,i,s,a){useInRouterContext()||invariant$1(!1);let{navigator:c,static:h}=reactExports.useContext(NavigationContext),{matches:st}=reactExports.useContext(RouteContext),nt=st[st.length-1],ot=nt?nt.params:{};nt&&nt.pathname;let xt=nt?nt.pathnameBase:"/";nt&&nt.route;let vt=useLocation(),bt;if(i){var St;let b=typeof i=="string"?parsePath(i):i;xt==="/"||(St=b.pathname)!=null&&St.startsWith(xt)||invariant$1(!1),bt=b}else bt=vt;let Et=bt.pathname||"/",Ct=Et;if(xt!=="/"){let b=xt.replace(/^\//,"").split("/");Ct="/"+Et.replace(/^\//,"").split("/").slice(b.length).join("/")}let ht=!h&&s&&s.matches&&s.matches.length>0?s.matches:matchRoutes(e,{pathname:Ct}),d=_renderMatches(ht&&ht.map(b=>Object.assign({},b,{params:Object.assign({},ot,b.params),pathname:joinPaths([xt,c.encodeLocation?c.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?xt:joinPaths([xt,c.encodeLocation?c.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),st,s,a);return i&&d?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},bt),navigationType:Action.Pop}},d):d}function DefaultErrorComponent(){let e=useRouteError(),i=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),s?reactExports.createElement("pre",{style:c},s):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:i,match:s,children:a}=e,c=reactExports.useContext(DataRouterContext);return c&&c.static&&c.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:i},a)}function _renderMatches(e,i,s,a){var c;if(i===void 0&&(i=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var h;if(!s)return null;if(s.errors)e=s.matches;else if((h=a)!=null&&h.v7_partialHydration&&i.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let st=e,nt=(c=s)==null?void 0:c.errors;if(nt!=null){let vt=st.findIndex(bt=>bt.route.id&&(nt==null?void 0:nt[bt.route.id])!==void 0);vt>=0||invariant$1(!1),st=st.slice(0,Math.min(st.length,vt+1))}let ot=!1,xt=-1;if(s&&a&&a.v7_partialHydration)for(let vt=0;vt<st.length;vt++){let bt=st[vt];if((bt.route.HydrateFallback||bt.route.hydrateFallbackElement)&&(xt=vt),bt.route.id){let{loaderData:St,errors:Et}=s,Ct=bt.route.loader&&St[bt.route.id]===void 0&&(!Et||Et[bt.route.id]===void 0);if(bt.route.lazy||Ct){ot=!0,xt>=0?st=st.slice(0,xt+1):st=[st[0]];break}}}return st.reduceRight((vt,bt,St)=>{let Et,Ct=!1,ht=null,d=null;s&&(Et=nt&&bt.route.id?nt[bt.route.id]:void 0,ht=bt.route.errorElement||defaultErrorElement,ot&&(xt<0&&St===0?(Ct=!0,d=null):xt===St&&(Ct=!0,d=bt.route.hydrateFallbackElement||null)));let b=i.concat(st.slice(0,St+1)),ft=()=>{let mt;return Et?mt=ht:Ct?mt=d:bt.route.Component?mt=reactExports.createElement(bt.route.Component,null):bt.route.element?mt=bt.route.element:mt=vt,reactExports.createElement(RenderedRoute,{match:bt,routeContext:{outlet:vt,matches:b,isDataRoute:s!=null},children:mt})};return s&&(bt.route.ErrorBoundary||bt.route.errorElement||St===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:ht,error:Et,children:ft(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):ft()},null)}var DataRouterHook$1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterContext(e){let i=reactExports.useContext(DataRouterContext);return i||invariant$1(!1),i}function useDataRouterState(e){let i=reactExports.useContext(DataRouterStateContext);return i||invariant$1(!1),i}function useRouteContext(e){let i=reactExports.useContext(RouteContext);return i||invariant$1(!1),i}function useCurrentRouteId(e){let i=useRouteContext(),s=i.matches[i.matches.length-1];return s.route.id||invariant$1(!1),s.route.id}function useRouteError(){var e;let i=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),a=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return i!==void 0?i:(e=s.errors)==null?void 0:e[a]}function useNavigateStable(){let{router:e}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),i=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(function(c,h){h===void 0&&(h={}),s.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,_extends$2({fromRouteId:i},h)))},[e,i])}function logV6DeprecationWarnings(e,i){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Navigate(e){let{to:i,replace:s,state:a,relative:c}=e;useInRouterContext()||invariant$1(!1);let{future:h,static:st}=reactExports.useContext(NavigationContext),{matches:nt}=reactExports.useContext(RouteContext),{pathname:ot}=useLocation(),xt=useNavigate(),vt=resolveTo(i,getResolveToMatches(nt,h.v7_relativeSplatPath),ot,c==="path"),bt=JSON.stringify(vt);return reactExports.useEffect(()=>xt(JSON.parse(bt),{replace:s,state:a,relative:c}),[xt,bt,c,s,a]),null}function Outlet(e){return useOutlet(e.context)}function Route(e){invariant$1(!1)}function Router(e){let{basename:i="/",children:s=null,location:a,navigationType:c=Action.Pop,navigator:h,static:st=!1,future:nt}=e;useInRouterContext()&&invariant$1(!1);let ot=i.replace(/^\/*/,"/"),xt=reactExports.useMemo(()=>({basename:ot,navigator:h,static:st,future:_extends$2({v7_relativeSplatPath:!1},nt)}),[ot,nt,h,st]);typeof a=="string"&&(a=parsePath(a));let{pathname:vt="/",search:bt="",hash:St="",state:Et=null,key:Ct="default"}=a,ht=reactExports.useMemo(()=>{let d=stripBasename(vt,ot);return d==null?null:{location:{pathname:d,search:bt,hash:St,state:Et,key:Ct},navigationType:c}},[ot,vt,bt,St,Et,Ct,c]);return ht==null?null:reactExports.createElement(NavigationContext.Provider,{value:xt},reactExports.createElement(LocationContext.Provider,{children:s,value:ht}))}function Routes(e){let{children:i,location:s}=e;return useRoutes(createRoutesFromChildren(i),s)}new Promise(()=>{});function createRoutesFromChildren(e,i){i===void 0&&(i=[]);let s=[];return reactExports.Children.forEach(e,(a,c)=>{if(!reactExports.isValidElement(a))return;let h=[...i,c];if(a.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(a.props.children,h));return}a.type!==Route&&invariant$1(!1),!a.props.index||!a.props.children||invariant$1(!1);let st={id:a.props.id||h.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(st.children=createRoutesFromChildren(a.props.children,h)),s.push(st)}),s}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(e,i){if(e==null)return{};var s={},a=Object.keys(e),c,h;for(h=0;h<a.length;h++)c=a[h],!(i.indexOf(c)>=0)&&(s[c]=e[c]);return s}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,i){return e.button===0&&(!i||i==="_self")&&!isModifiedEvent(e)}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION];function BrowserRouter(e){let{basename:i,children:s,future:a,window:c}=e,h=reactExports.useRef();h.current==null&&(h.current=createBrowserHistory({window:c,v5Compat:!0}));let st=h.current,[nt,ot]=reactExports.useState({action:st.action,location:st.location}),{v7_startTransition:xt}=a||{},vt=reactExports.useCallback(bt=>{xt&&startTransitionImpl?startTransitionImpl(()=>ot(bt)):ot(bt)},[ot,xt]);return reactExports.useLayoutEffect(()=>st.listen(vt),[st,vt]),reactExports.useEffect(()=>logV6DeprecationWarnings(a),[a]),reactExports.createElement(Router,{basename:i,children:s,location:nt.location,navigationType:nt.action,navigator:st,future:a})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(i,s){let{onClick:a,relative:c,reloadDocument:h,replace:st,state:nt,target:ot,to:xt,preventScrollReset:vt,viewTransition:bt}=i,St=_objectWithoutPropertiesLoose$2(i,_excluded$2),{basename:Et}=reactExports.useContext(NavigationContext),Ct,ht=!1;if(typeof xt=="string"&&ABSOLUTE_URL_REGEX.test(xt)&&(Ct=xt,isBrowser$1))try{let mt=new URL(window.location.href),_t=xt.startsWith("//")?new URL(mt.protocol+xt):new URL(xt),tt=stripBasename(_t.pathname,Et);_t.origin===mt.origin&&tt!=null?xt=tt+_t.search+_t.hash:ht=!0}catch{}let d=useHref(xt,{relative:c}),b=useLinkClickHandler(xt,{replace:st,state:nt,target:ot,preventScrollReset:vt,relative:c,viewTransition:bt});function ft(mt){a&&a(mt),mt.defaultPrevented||b(mt)}return reactExports.createElement("a",_extends$1({},St,{href:Ct||d,onClick:ht||h?a:ft,ref:s,target:ot}))});var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(e,i){let{target:s,replace:a,state:c,preventScrollReset:h,relative:st,viewTransition:nt}=i===void 0?{}:i,ot=useNavigate(),xt=useLocation(),vt=useResolvedPath(e,{relative:st});return reactExports.useCallback(bt=>{if(shouldProcessLinkClick(bt,s)){bt.preventDefault();let St=a!==void 0?a:createPath(xt)===createPath(vt);ot(e,{replace:St,state:c,preventScrollReset:h,relative:st,viewTransition:nt})}},[xt,ot,vt,a,c,s,e,h,st,nt])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,i)=>{const s=reactExports.forwardRef(({color:a="currentColor",size:c=24,strokeWidth:h=2,absoluteStrokeWidth:st,className:nt="",children:ot,...xt},vt)=>reactExports.createElement("svg",{ref:vt,...defaultAttributes,width:c,height:c,stroke:a,strokeWidth:st?Number(h)*24/Number(c):h,className:["lucide",`lucide-${toKebabCase(e)}`,nt].join(" "),...xt},[...i.map(([bt,St])=>reactExports.createElement(bt,St)),...Array.isArray(ot)?ot:[ot]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Atom=createLucideIcon("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Beaker=createLucideIcon("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Brain=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dna=createLucideIcon("Dna",[["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m17 6-2.5-2.5",key:"5cdfhj"}],["path",{d:"m14 8-1-1",key:"15nbz5"}],["path",{d:"m7 18 2.5 2.5",key:"16tu1a"}],["path",{d:"m3.5 14.5.5.5",key:"hapbhd"}],["path",{d:"m20 9 .5.5",key:"1n7z02"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m10 16 1.5 1.5",key:"11lckj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FlaskRound=createLucideIcon("FlaskRound",[["path",{d:"M10 2v7.31",key:"5d1hyh"}],["path",{d:"M14 9.3V1.99",key:"14k4l0"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14 9.3a6.5 6.5 0 1 1-4 0",key:"1r8fvy"}],["path",{d:"M5.52 16h12.96",key:"46hh1i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Microscope=createLucideIcon("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moon=createLucideIcon("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sun=createLucideIcon("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),AuthContext=reactExports.createContext(void 0);function AuthProvider({children:e}){const[i,s]=reactExports.useState(null),a=reactExports.useCallback(async(h,st)=>{s({email:h})},[]),c=reactExports.useCallback(()=>{s(null)},[]);return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:i,login:a,logout:c},children:e})}function useAuth(){const e=reactExports.useContext(AuthContext);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:e}){const[i,s]=reactExports.useState(()=>localStorage.getItem("theme")||"dark");reactExports.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(i),localStorage.setItem("theme",i)},[i]);const a=()=>{s(c=>c==="dark"?"light":"dark")};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:i,toggleTheme:a},children:e})}function useTheme(){const e=reactExports.useContext(ThemeContext);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=o.createContext&&o.createContext(DefaultContext),_excluded$1=["attr","size","title"];function _objectWithoutProperties$1(e,i){if(e==null)return{};var s=_objectWithoutPropertiesLoose$1(e,i),a,c;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(c=0;c<h.length;c++)a=h[c],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function _objectWithoutPropertiesLoose$1(e,i){if(e==null)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(i.indexOf(a)>=0)continue;s[a]=e[a]}return s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends.apply(this,arguments)}function ownKeys$2(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),s.push.apply(s,a)}return s}function _objectSpread$2(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$2(Object(s),!0).forEach(function(a){_defineProperty$2(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys$2(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _defineProperty$2(e,i,s){return i=_toPropertyKey(i),i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function _toPropertyKey(e){var i=_toPrimitive(e,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive(e,i){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,i||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function Tree2Element(e){return e&&e.map((i,s)=>o.createElement(i.tag,_objectSpread$2({key:s},i.attr),Tree2Element(i.child)))}function GenIcon(e){return i=>o.createElement(IconBase,_extends({attr:_objectSpread$2({},e.attr)},i),Tree2Element(e.child))}function IconBase(e){var i=s=>{var{attr:a,size:c,title:h}=e,st=_objectWithoutProperties$1(e,_excluded$1),nt=c||s.size||"1em",ot;return s.className&&(ot=s.className),e.className&&(ot=(ot?ot+" ":"")+e.className),o.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,st,{className:ot,style:_objectSpread$2(_objectSpread$2({color:e.color||s.color},s.style),e.style),height:nt,width:nt,xmlns:"http://www.w3.org/2000/svg"}),h&&o.createElement("title",null,h),e.children)};return IconContext!==void 0?o.createElement(IconContext.Consumer,null,s=>i(s)):i(DefaultContext)}function FaFacebook(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function FaInstagram(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function FaLinkedin(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function FaTwitter(e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}const Footer=()=>{const{theme:e}=useTheme(),i=e==="light"?"text-gray-700":"text-white",s=e==="light"?"hover:text-gray-600":"hover:text-white",a=e==="light"?"text-purple-700":"text-purple-500",c=e==="light"?"hover:text-black":"hover:text-white",h=e==="light"?"text-gray-600":"text-purple-200",st="hover:text-purple-600";return jsxRuntimeExports.jsx("footer",{className:`w-full bg-black/20 backdrop-blur-lg border border-white/10 ${i} py-4 rounded-t-lg`,children:jsxRuntimeExports.jsxs("div",{className:"max-w-full px-4 flex flex-col md:flex-row justify-between items-center text-xs md:text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"text-center md:text-left mb-2 md:mb-0",children:[jsxRuntimeExports.jsx("h2",{className:`text-sm md:text-base font-semibold ${a}`,children:"Pharm.AI"}),jsxRuntimeExports.jsx("p",{className:`text-xs ${i}`,children:"Accelerating drug discovery with AI."}),jsxRuntimeExports.jsx("p",{className:`text-xs ${i}`,children:"Kottayam, Kerela"}),jsxRuntimeExports.jsx("p",{className:`text-xs ${i}`,children:"Phone: 0000000000"}),jsxRuntimeExports.jsx("a",{href:"mailto:info@pharma.ai",className:`${i} ${s}`,children:"info@pharma.ai"}),jsxRuntimeExports.jsx("p",{className:i,children:"© 2025 Pharm.AI All rights reserved."})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-5 mt-2 md:mt-0 md:ml-[-60px]",children:[jsxRuntimeExports.jsx("a",{href:"/about",className:`${a} ${c}`,children:"About"}),jsxRuntimeExports.jsx("a",{href:"/contact",className:`${a} ${c}`,children:"Contact"}),jsxRuntimeExports.jsx("a",{href:"/privacy",className:`${a} ${c}`,children:"Privacy"})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 mt-2 md:mt-0",children:[jsxRuntimeExports.jsx("a",{href:"https://twitter.com",className:`${h} ${st}`,children:jsxRuntimeExports.jsx(FaTwitter,{size:25})}),jsxRuntimeExports.jsx("a",{href:"https://linkedin.com",className:`${h} ${st}`,children:jsxRuntimeExports.jsx(FaLinkedin,{size:25})}),jsxRuntimeExports.jsx("a",{href:"https://facebook.com",className:`${h} ${st}`,children:jsxRuntimeExports.jsx(FaFacebook,{size:25})}),jsxRuntimeExports.jsx("a",{href:"https://instagram.com",className:`${h} ${st}`,children:jsxRuntimeExports.jsx(FaInstagram,{size:25})})]})]})})},RippleButton=({children:e,onClick:i,className:s})=>{const[a,c]=reactExports.useState({x:-1,y:-1}),[h,st]=reactExports.useState(!1);reactExports.useEffect(()=>{a.x!==-1&&a.y!==-1?(st(!0),setTimeout(()=>st(!1),300)):st(!1)},[a]),reactExports.useEffect(()=>{h||c({x:-1,y:-1})},[h]);const nt=ot=>{const xt=ot.currentTarget.getBoundingClientRect();c({x:ot.clientX-xt.left,y:ot.clientY-xt.top}),i&&i()};return jsxRuntimeExports.jsxs("button",{className:`relative overflow-hidden ${s}`,onClick:nt,children:[h&&jsxRuntimeExports.jsx("span",{className:"absolute bg-white bg-opacity-30 rounded-full transform -translate-x-1/2 -translate-y-1/2 animate-ripple",style:{left:a.x,top:a.y}}),jsxRuntimeExports.jsx("span",{className:"relative z-10",children:e})]})};function Layout(){const[e,i]=reactExports.useState("PharmaGenius"),{user:s,logout:a}=useAuth(),{theme:c,toggleTheme:h}=useTheme(),st=useNavigate(),nt=useLocation(),ot=()=>{a(),st("/")};nt.pathname;const xt=["/login","/register"].includes(nt.pathname);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[jsxRuntimeExports.jsx("header",{className:"bg-background border-b border-border shadow-sm",children:jsxRuntimeExports.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-16",children:[jsxRuntimeExports.jsxs(Link,{to:"/",className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Beaker,{className:"h-6 w-6 text-primary glow-effect"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-foreground glow-effect",children:"Pharm.AI"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[!xt&&nt.pathname!=="/"&&jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-1 mr-4",children:["Drug Target Interaction","Computational Compounds","Visualise & Predict","PharmaGenius"].map(vt=>jsxRuntimeExports.jsx(RippleButton,{onClick:()=>i(vt),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${e===vt?"bg-primary text-primary-foreground":"text-foreground/60 hover:bg-primary/10 hover:text-foreground"}`,children:vt},vt))}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-primary/10 transition-colors","aria-label":"Toggle theme",children:c==="dark"?jsxRuntimeExports.jsx(Sun,{className:"h-5 w-5"}):jsxRuntimeExports.jsx(Moon,{className:"h-5 w-5"})}),s&&!xt&&jsxRuntimeExports.jsx("button",{onClick:ot,className:"p-2 rounded-lg hover:bg-primary/10 transition-colors","aria-label":"Logout",children:jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5"})}),!s&&!xt&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Link,{to:"/login",className:"px-4 py-2 rounded-lg hover:bg-primary/10 transition-colors",children:"Sign In"}),jsxRuntimeExports.jsx(Link,{to:"/register",className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Get Started"})]})]})]})})}),jsxRuntimeExports.jsx("main",{className:"flex-grow max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-6",children:jsxRuntimeExports.jsx(Outlet,{context:{activeTab:e,setActiveTab:i}})}),jsxRuntimeExports.jsx(Footer,{})]})}const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const i=reactExports.useRef(null);return i.current===null&&(i.current=e()),i.current}const PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function usePresence(e=!0){const i=reactExports.useContext(PresenceContext);if(i===null)return[!0,null];const{isPresent:s,onExitComplete:a,register:c}=i,h=reactExports.useId();reactExports.useEffect(()=>{e&&c(h)},[e]);const st=reactExports.useCallback(()=>e&&a&&a(h),[h,a,e]);return!s&&a?[!1,st]:[!0]}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,noop$1=e=>e;let invariant=noop$1;function memo(e){let i;return()=>(i===void 0&&(i=e()),i)}const progress=(e,i,s)=>{const a=i-e;return a===0?1:(s-e)/a},secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3,MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1};function createRenderStep(e){let i=new Set,s=new Set,a=!1,c=!1;const h=new WeakSet;let st={delta:0,timestamp:0,isProcessing:!1};function nt(xt){h.has(xt)&&(ot.schedule(xt),e()),xt(st)}const ot={schedule:(xt,vt=!1,bt=!1)=>{const Et=bt&&a?i:s;return vt&&h.add(xt),Et.has(xt)||Et.add(xt),xt},cancel:xt=>{s.delete(xt),h.delete(xt)},process:xt=>{if(st=xt,a){c=!0;return}a=!0,[i,s]=[s,i],i.forEach(nt),i.clear(),a=!1,c&&(c=!1,ot.process(xt))}};return ot}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(e,i){let s=!1,a=!0;const c={delta:0,timestamp:0,isProcessing:!1},h=()=>s=!0,st=stepsOrder.reduce((b,ft)=>(b[ft]=createRenderStep(h),b),{}),{read:nt,resolveKeyframes:ot,update:xt,preRender:vt,render:bt,postRender:St}=st,Et=()=>{const b=performance.now();s=!1,c.delta=a?1e3/60:Math.max(Math.min(b-c.timestamp,maxElapsed),1),c.timestamp=b,c.isProcessing=!0,nt.process(c),ot.process(c),xt.process(c),vt.process(c),bt.process(c),St.process(c),c.isProcessing=!1,s&&i&&(a=!1,e(Et))},Ct=()=>{s=!0,a=!0,c.isProcessing||e(Et)};return{schedule:stepsOrder.reduce((b,ft)=>{const mt=st[ft];return b[ft]=(_t,tt=!1,gt=!1)=>(s||Ct(),mt.schedule(_t,tt,gt)),b},{}),cancel:b=>{for(let ft=0;ft<stepsOrder.length;ft++)st[stepsOrder[ft]].cancel(b)},state:c,steps:st}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0),LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:i=>featureProps[e].some(s=>!!i[s])};function loadFeatures(e){for(const i in e)featureDefinitions[i]={...featureDefinitions[i],...e[i]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){e&&(shouldForward=i=>i.startsWith("on")?!isValidMotionProp(i):e(i))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,i,s){const a={};for(const c in e)c==="values"&&typeof e.values=="object"||(shouldForward(c)||s===!0&&isValidMotionProp(c)||!i&&!isValidMotionProp(c)||e.draggable&&c.startsWith("onDrag"))&&(a[c]=e[c]);return a}function createDOMMotionComponentProxy(e){if(typeof Proxy>"u")return e;const i=new Map,s=(...a)=>e(...a);return new Proxy(s,{get:(a,c)=>c==="create"?e:(i.has(c)||i.set(c,e(c)),i.get(c))})}const MotionContext=reactExports.createContext({});function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(i=>isVariantLabel(e[i]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,i){if(isControllingVariants(e)){const{initial:s,animate:a}=e;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(a)?a:void 0}}return e.inherit!==!1?i:{}}function useCreateMotionContext(e){const{initial:i,animate:s}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:i,animate:s}),[variantLabelsAsDependency(i),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,i,s){return reactExports.useCallback(a=>{a&&e.onMount&&e.onMount(a),i&&(a?i.mount(a):i.unmount()),s&&(typeof s=="function"?s(a):isRefObject(s)&&(s.current=a))},[i])}const camelToDash=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(e,i,s,a,c){var h,st;const{visualElement:nt}=reactExports.useContext(MotionContext),ot=reactExports.useContext(LazyContext),xt=reactExports.useContext(PresenceContext),vt=reactExports.useContext(MotionConfigContext).reducedMotion,bt=reactExports.useRef(null);a=a||ot.renderer,!bt.current&&a&&(bt.current=a(e,{visualState:i,parent:nt,props:s,presenceContext:xt,blockInitialAnimation:xt?xt.initial===!1:!1,reducedMotionConfig:vt}));const St=bt.current,Et=reactExports.useContext(SwitchLayoutGroupContext);St&&!St.projection&&c&&(St.type==="html"||St.type==="svg")&&createProjectionNode$1(bt.current,s,c,Et);const Ct=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{St&&Ct.current&&St.update(s,xt)});const ht=s[optimizedAppearDataAttribute],d=reactExports.useRef(!!ht&&!(!((h=window.MotionHandoffIsComplete)===null||h===void 0)&&h.call(window,ht))&&((st=window.MotionHasOptimisedAnimation)===null||st===void 0?void 0:st.call(window,ht)));return useIsomorphicLayoutEffect(()=>{St&&(Ct.current=!0,window.MotionIsMounted=!0,St.updateFeatures(),microtask.render(St.render),d.current&&St.animationState&&St.animationState.animateChanges())}),reactExports.useEffect(()=>{St&&(!d.current&&St.animationState&&St.animationState.animateChanges(),d.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,ht)}),d.current=!1))}),St}function createProjectionNode$1(e,i,s,a){const{layoutId:c,layout:h,drag:st,dragConstraints:nt,layoutScroll:ot,layoutRoot:xt}=i;e.projection=new s(e.latestValues,i["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:c,layout:h,alwaysMeasureLayout:!!st||nt&&isRefObject(nt),visualElement:e,animationType:typeof h=="string"?h:"both",initialPromotionConfig:a,layoutScroll:ot,layoutRoot:xt})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createRendererMotionComponent({preloadedFeatures:e,createVisualElement:i,useRender:s,useVisualState:a,Component:c}){var h,st;e&&loadFeatures(e);function nt(xt,vt){let bt;const St={...reactExports.useContext(MotionConfigContext),...xt,layoutId:useLayoutId(xt)},{isStatic:Et}=St,Ct=useCreateMotionContext(xt),ht=a(xt,Et);if(!Et&&isBrowser){useStrictMode();const d=getProjectionFunctionality(St);bt=d.MeasureLayout,Ct.visualElement=useVisualElement(c,ht,St,i,d.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Ct,children:[bt&&Ct.visualElement?jsxRuntimeExports.jsx(bt,{visualElement:Ct.visualElement,...St}):null,s(c,xt,useMotionRef(ht,Ct.visualElement,vt),ht,Et,Ct.visualElement)]})}nt.displayName=`motion.${typeof c=="string"?c:`create(${(st=(h=c.displayName)!==null&&h!==void 0?h:c.name)!==null&&st!==void 0?st:""})`}`;const ot=reactExports.forwardRef(nt);return ot[motionComponentSymbol]=c,ot}function useLayoutId({layoutId:e}){const i=reactExports.useContext(LayoutGroupContext).id;return i&&e!==void 0?i+"-"+e:e}function useStrictMode(e,i){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:i,layout:s}=featureDefinitions;if(!i&&!s)return{};const a={...i,...s};return{MeasureLayout:i!=null&&i.isEnabled(e)||s!=null&&s.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function getValueState(e){const i=[{},{}];return e==null||e.values.forEach((s,a)=>{i[0][a]=s.get(),i[1][a]=s.getVelocity()}),i}function resolveVariantFromProps(e,i,s,a){if(typeof i=="function"){const[c,h]=getValueState(a);i=i(s!==void 0?s:e.custom,c,h)}if(typeof i=="string"&&(i=e.variants&&e.variants[i]),typeof i=="function"){const[c,h]=getValueState(a);i=i(s!==void 0?s:e.custom,c,h)}return i}const isKeyframesTarget=e=>Array.isArray(e),isCustomValue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),resolveFinalValueInKeyframes=e=>isKeyframesTarget(e)?e[e.length-1]||0:e,isMotionValue=e=>!!(e&&e.getVelocity);function resolveMotionValue(e){const i=isMotionValue(e)?e.get():e;return isCustomValue(i)?i.toValue():i}function makeState({scrapeMotionValuesFromProps:e,createRenderState:i,onUpdate:s},a,c,h){const st={latestValues:makeLatestValues(a,c,h,e),renderState:i()};return s&&(st.onMount=nt=>s({props:a,current:nt,...st}),st.onUpdate=nt=>s(nt)),st}const makeUseVisualState=e=>(i,s)=>{const a=reactExports.useContext(MotionContext),c=reactExports.useContext(PresenceContext),h=()=>makeState(e,i,a,c);return s?h():useConstant(h)};function makeLatestValues(e,i,s,a){const c={},h=a(e,{});for(const St in h)c[St]=resolveMotionValue(h[St]);let{initial:st,animate:nt}=e;const ot=isControllingVariants(e),xt=isVariantNode(e);i&&xt&&!ot&&e.inherit!==!1&&(st===void 0&&(st=i.initial),nt===void 0&&(nt=i.animate));let vt=s?s.initial===!1:!1;vt=vt||st===!1;const bt=vt?nt:st;if(bt&&typeof bt!="boolean"&&!isAnimationControls(bt)){const St=Array.isArray(bt)?bt:[bt];for(let Et=0;Et<St.length;Et++){const Ct=resolveVariantFromProps(e,St[Et]);if(Ct){const{transitionEnd:ht,transition:d,...b}=Ct;for(const ft in b){let mt=b[ft];if(Array.isArray(mt)){const _t=vt?mt.length-1:0;mt=mt[_t]}mt!==null&&(c[ft]=mt)}for(const ft in ht)c[ft]=ht[ft]}}}return c}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),checkStringStartsWith=e=>i=>typeof i=="string"&&i.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,getValueAsType=(e,i)=>i&&typeof e=="number"?i.transform(e):e,clamp=(e,i,s)=>s>i?i:s<e?e:s,number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp(0,1,e)},scale={...number,default:1},createUnitType=e=>({test:i=>typeof i=="string"&&i.endsWith(e)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,i,s){let a="",c=!0;for(let h=0;h<numTransforms;h++){const st=transformPropOrder[h],nt=e[st];if(nt===void 0)continue;let ot=!0;if(typeof nt=="number"?ot=nt===(st.startsWith("scale")?1:0):ot=parseFloat(nt)===0,!ot||s){const xt=getValueAsType(nt,numberValueTypes[st]);if(!ot){c=!1;const vt=translateAlias[st]||st;a+=`${vt}(${xt}) `}s&&(i[st]=xt)}}return a=a.trim(),s?a=s(i,c?"":a):c&&(a="none"),a}function buildHTMLStyles(e,i,s){const{style:a,vars:c,transformOrigin:h}=e;let st=!1,nt=!1;for(const ot in i){const xt=i[ot];if(transformProps.has(ot)){st=!0;continue}else if(isCSSVariableName(ot)){c[ot]=xt;continue}else{const vt=getValueAsType(xt,numberValueTypes[ot]);ot.startsWith("origin")?(nt=!0,h[ot]=vt):a[ot]=vt}}if(i.transform||(st||s?a.transform=buildTransform(i,e.transform,s):a.transform&&(a.transform="none")),nt){const{originX:ot="50%",originY:xt="50%",originZ:vt=0}=h;a.transformOrigin=`${ot} ${xt} ${vt}`}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,i,s=1,a=0,c=!0){e.pathLength=1;const h=c?dashKeys:camelKeys;e[h.offset]=px.transform(-a);const st=px.transform(i),nt=px.transform(s);e[h.array]=`${st} ${nt}`}function calcOrigin$1(e,i,s){return typeof e=="string"?e:px.transform(i+s*e)}function calcSVGTransformOrigin(e,i,s){const a=calcOrigin$1(i,e.x,e.width),c=calcOrigin$1(s,e.y,e.height);return`${a} ${c}`}function buildSVGAttrs(e,{attrX:i,attrY:s,attrScale:a,originX:c,originY:h,pathLength:st,pathSpacing:nt=1,pathOffset:ot=0,...xt},vt,bt){if(buildHTMLStyles(e,xt,bt),vt){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:St,style:Et,dimensions:Ct}=e;St.transform&&(Ct&&(Et.transform=St.transform),delete St.transform),Ct&&(c!==void 0||h!==void 0||Et.transform)&&(Et.transformOrigin=calcSVGTransformOrigin(Ct,c!==void 0?c:.5,h!==void 0?h:.5)),i!==void 0&&(St.x=i),s!==void 0&&(St.y=s),a!==void 0&&(St.scale=a),st!==void 0&&buildSVGPath(St,st,nt,ot,!1)}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function renderHTML(e,{style:i,vars:s},a,c){Object.assign(e.style,i,c&&c.getProjectionStyles(a));for(const h in s)e.style.setProperty(h,s[h])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,i,s,a){renderHTML(e,i,void 0,a);for(const c in i.attrs)e.setAttribute(camelCaseAttributes.has(c)?c:camelToDash(c),i.attrs[c])}const scaleCorrectors={};function addScaleCorrector(e){Object.assign(scaleCorrectors,e)}function isForcedMotionValue(e,{layout:i,layoutId:s}){return transformProps.has(e)||e.startsWith("origin")||(i||s!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}function scrapeMotionValuesFromProps$1(e,i,s){var a;const{style:c}=e,h={};for(const st in c)(isMotionValue(c[st])||i.style&&isMotionValue(i.style[st])||isForcedMotionValue(st,e)||((a=s==null?void 0:s.getValue(st))===null||a===void 0?void 0:a.liveStyle)!==void 0)&&(h[st]=c[st]);return h}function scrapeMotionValuesFromProps(e,i,s){const a=scrapeMotionValuesFromProps$1(e,i,s);for(const c in e)if(isMotionValue(e[c])||isMotionValue(i[c])){const h=transformPropOrder.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;a[h]=e[c]}return a}function updateSVGDimensions(e,i){try{i.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{i.dimensions={x:0,y:0,width:0,height:0}}}const layoutProps=["x","y","width","height","cx","cy","r"],svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onUpdate:({props:e,prevProps:i,current:s,renderState:a,latestValues:c})=>{if(!s)return;let h=!!e.drag;if(!h){for(const nt in c)if(transformProps.has(nt)){h=!0;break}}if(!h)return;let st=!i;if(i)for(let nt=0;nt<layoutProps.length;nt++){const ot=layoutProps[nt];e[ot]!==i[ot]&&(st=!0)}st&&frame.read(()=>{updateSVGDimensions(s,a),frame.render(()=>{buildSVGAttrs(a,c,isSVGTag(s.tagName),e.transformTemplate),renderSVG(s,a)})})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(e,i,s){for(const a in i)!isMotionValue(i[a])&&!isForcedMotionValue(a,s)&&(e[a]=i[a])}function useInitialMotionValues({transformTemplate:e},i){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,i,e),Object.assign({},s.vars,s.style)},[i])}function useStyle(e,i){const s=e.style||{},a={};return copyRawValuesOnly(a,s,e),Object.assign(a,useInitialMotionValues(e,i)),a}function useHTMLProps(e,i){const s={},a=useStyle(e,i);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=a,s}function useSVGProps(e,i,s,a){const c=reactExports.useMemo(()=>{const h=createSvgRenderState();return buildSVGAttrs(h,i,isSVGTag(a),e.transformTemplate),{...h.attrs,style:{...h.style}}},[i]);if(e.style){const h={};copyRawValuesOnly(h,e.style,e),c.style={...h,...c.style}}return c}function createUseRender(e=!1){return(s,a,c,{latestValues:h},st)=>{const ot=(isSVGComponent(s)?useSVGProps:useHTMLProps)(a,h,st,s),xt=filterProps(a,typeof s=="string",e),vt=s!==reactExports.Fragment?{...xt,...ot,ref:c}:{},{children:bt}=a,St=reactExports.useMemo(()=>isMotionValue(bt)?bt.get():bt,[bt]);return reactExports.createElement(s,{...vt,children:St})}}function createMotionComponentFactory(e,i){return function(a,{forwardMotionProps:c}={forwardMotionProps:!1}){const st={...isSVGComponent(a)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:e,useRender:createUseRender(c),createVisualElement:i,Component:a};return createRendererMotionComponent(st)}}function shallowCompare(e,i){if(!Array.isArray(i))return!1;const s=i.length;if(s!==e.length)return!1;for(let a=0;a<s;a++)if(i[a]!==e[a])return!1;return!0}function resolveVariant(e,i,s){const a=e.getProps();return resolveVariantFromProps(a,i,s!==void 0?s:a.custom,e)}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class BaseGroupPlaybackControls{constructor(i){this.stop=()=>this.runAll("stop"),this.animations=i.filter(Boolean)}get finished(){return Promise.all(this.animations.map(i=>"finished"in i?i.finished:i))}getAll(i){return this.animations[0][i]}setAll(i,s){for(let a=0;a<this.animations.length;a++)this.animations[a][i]=s}attachTimeline(i,s){const a=this.animations.map(c=>{if(supportsScrollTimeline()&&c.attachTimeline)return c.attachTimeline(i);if(typeof s=="function")return s(c)});return()=>{a.forEach((c,h)=>{c&&c(),this.animations[h].stop()})}}get time(){return this.getAll("time")}set time(i){this.setAll("time",i)}get speed(){return this.getAll("speed")}set speed(i){this.setAll("speed",i)}get startTime(){return this.getAll("startTime")}get duration(){let i=0;for(let s=0;s<this.animations.length;s++)i=Math.max(i,this.animations[s].duration);return i}runAll(i){this.animations.forEach(s=>s[i]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupPlaybackControls extends BaseGroupPlaybackControls{then(i,s){return Promise.all(this.animations).then(i).catch(s)}}function getValueTransition(e,i){return e?e[i]||e.default||e:void 0}const maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let i=0;const s=50;let a=e.next(i);for(;!a.done&&i<maxGeneratorDuration;)i+=s,a=e.next(i);return i>=maxGeneratorDuration?1/0:i}function isGenerator(e){return typeof e=="function"}function attachTimeline(e,i){e.timeline=i,e.onfinish=null}const isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",supportsFlags={linearEasing:void 0};function memoSupports(e,i){const s=memo(e);return()=>{var a;return(a=supportsFlags[i])!==null&&a!==void 0?a:s()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),generateLinearEasing=(e,i,s=10)=>{let a="";const c=Math.max(Math.round(i/s),2);for(let h=0;h<c;h++)a+=e(progress(0,c-1,h))+", ";return`linear(${a.substring(0,a.length-2)})`};function isWaapiSupportedEasing(e){return!!(typeof e=="function"&&supportsLinearEasing()||!e||typeof e=="string"&&(e in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(e)||Array.isArray(e)&&e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([e,i,s,a])=>`cubic-bezier(${e}, ${i}, ${s}, ${a})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,i){if(e)return typeof e=="function"&&supportsLinearEasing()?generateLinearEasing(e,i):isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(s=>mapEasingToNativeEasing(s,i)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}const isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(e,i,s){var a;if(e instanceof Element)return[e];if(typeof e=="string"){let c=document;const h=(a=void 0)!==null&&a!==void 0?a:c.querySelectorAll(e);return h?Array.from(h):[]}return Array.from(e)}function setupGesture(e,i){const s=resolveElements(e),a=new AbortController,c={passive:!0,...i,signal:a.signal};return[s,c,()=>a.abort()]}function filterEvents$1(e){return i=>{i.pointerType==="touch"||isDragActive()||e(i)}}function hover(e,i,s={}){const[a,c,h]=setupGesture(e,s),st=filterEvents$1(nt=>{const{target:ot}=nt,xt=i(nt);if(typeof xt!="function"||!ot)return;const vt=filterEvents$1(bt=>{xt(bt),ot.removeEventListener("pointerleave",vt)});ot.addEventListener("pointerleave",vt,c)});return a.forEach(nt=>{nt.addEventListener("pointerenter",st,c)}),h}const isNodeOrChild=(e,i)=>i?e===i?!0:isNodeOrChild(e,i.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||e.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(e){return i=>{i.key==="Enter"&&e(i)}}function firePointerEvent(e,i){e.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,i)=>{const s=e.currentTarget;if(!s)return;const a=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const c=filterEvents(()=>{firePointerEvent(s,"up")}),h=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",c,i),s.addEventListener("blur",h,i)});s.addEventListener("keydown",a,i),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),i)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,i,s={}){const[a,c,h]=setupGesture(e,s),st=nt=>{const ot=nt.currentTarget;if(!isValidPressEvent(nt)||isPressing.has(ot))return;isPressing.add(ot);const xt=i(nt),vt=(Et,Ct)=>{window.removeEventListener("pointerup",bt),window.removeEventListener("pointercancel",St),!(!isValidPressEvent(Et)||!isPressing.has(ot))&&(isPressing.delete(ot),typeof xt=="function"&&xt(Et,{success:Ct}))},bt=Et=>{vt(Et,s.useGlobalTarget||isNodeOrChild(ot,Et.target))},St=Et=>{vt(Et,!1)};window.addEventListener("pointerup",bt,c),window.addEventListener("pointercancel",St,c)};return a.forEach(nt=>{!isElementKeyboardAccessible(nt)&&nt.getAttribute("tabindex")===null&&(nt.tabIndex=0),(s.useGlobalTarget?window:nt).addEventListener("pointerdown",st,c),nt.addEventListener("focus",xt=>enableKeyboardPress(xt,c),c)}),h}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:e=>{now=e,queueMicrotask(clearTime)}};function addUniqueItem(e,i){e.indexOf(i)===-1&&e.push(i)}function removeItem(e,i){const s=e.indexOf(i);s>-1&&e.splice(s,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(i){return addUniqueItem(this.subscriptions,i),()=>removeItem(this.subscriptions,i)}notify(i,s,a){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](i,s,a);else for(let h=0;h<c;h++){const st=this.subscriptions[h];st&&st(i,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function velocityPerSecond(e,i){return i?e*(1e3/i):0}const MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(i,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,c=!0)=>{const h=time.now();this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(i),this.owner=s.owner}setCurrent(i){this.current=i,this.updatedAt=time.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,s){this.events[i]||(this.events[i]=new SubscriptionManager);const a=this.events[i].add(s);return i==="change"?()=>{a(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,s){this.passiveEffect=i,this.stopPassiveEffect=s}set(i,s=!0){!s||!this.passiveEffect?this.updateAndNotify(i,s):this.passiveEffect(i,this.updateAndNotify)}setWithVelocity(i,s,a){this.set(s),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-a}jump(i,s=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const i=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(i){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=i(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,i){return new MotionValue(e,i)}function setMotionValue(e,i,s){e.hasValue(i)?e.getValue(i).set(s):e.addValue(i,motionValue(s))}function setTarget(e,i){const s=resolveVariant(e,i);let{transitionEnd:a={},transition:c={},...h}=s||{};h={...h,...a};for(const st in h){const nt=resolveFinalValueInKeyframes(h[st]);setMotionValue(e,st,nt)}}function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,i){const s=e.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(i)}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}const calcBezier=(e,i,s)=>(((1-3*s+3*i)*e+(3*s-6*i))*e+3*i)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,i,s,a,c){let h,st,nt=0;do st=i+(s-i)/2,h=calcBezier(st,a,c)-e,h>0?s=st:i=st;while(Math.abs(h)>subdivisionPrecision&&++nt<subdivisionMaxIterations);return st}function cubicBezier(e,i,s,a){if(e===i&&s===a)return noop$1;const c=h=>binarySubdivide(h,0,1,e,s);return h=>h===0||h===1?h:calcBezier(c(h),i,a)}const mirrorEasing=e=>i=>i<=.5?e(2*i)/2:(2-e(2*(1-i)))/2,reverseEasing=e=>i=>1-e(1-i),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,i)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(e)||i&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,i)),splitColor=(e,i,s)=>a=>{if(typeof a!="string")return a;const[c,h,st,nt]=a.match(floatRegex);return{[e]:parseFloat(c),[i]:parseFloat(h),[s]:parseFloat(st),alpha:nt!==void 0?parseFloat(nt):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:i,blue:s,alpha:a=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(i)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(a))+")"};function parseHex(e){let i="",s="",a="",c="";return e.length>5?(i=e.substring(1,3),s=e.substring(3,5),a=e.substring(5,7),c=e.substring(7,9)):(i=e.substring(1,2),s=e.substring(2,3),a=e.substring(3,4),c=e.substring(4,5),i+=i,s+=s,a+=a,c+=c),{red:parseInt(i,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:c?parseInt(c,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:i,lightness:s,alpha:a=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(i))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(a))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(e){var i,s;return isNaN(e)&&typeof e=="string"&&(((i=e.match(floatRegex))===null||i===void 0?void 0:i.length)||0)+(((s=e.match(colorRegex))===null||s===void 0?void 0:s.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const i=e.toString(),s=[],a={color:[],number:[],var:[]},c=[];let h=0;const nt=i.replace(complexRegex,ot=>(color.test(ot)?(a.color.push(h),c.push(COLOR_TOKEN),s.push(color.parse(ot))):ot.startsWith(VAR_FUNCTION_TOKEN)?(a.var.push(h),c.push(VAR_TOKEN),s.push(ot)):(a.number.push(h),c.push(NUMBER_TOKEN),s.push(parseFloat(ot))),++h,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:nt,indexes:a,types:c}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:i,types:s}=analyseComplexValue(e),a=i.length;return c=>{let h="";for(let st=0;st<a;st++)if(h+=i[st],c[st]!==void 0){const nt=s[st];nt===NUMBER_TOKEN?h+=sanitize(c[st]):nt===COLOR_TOKEN?h+=color.transform(c[st]):h+=c[st]}return h}}const convertNumbersToZero=e=>typeof e=="number"?0:e;function getAnimatableNone$1(e){const i=parseComplexValue(e);return createTransformer(e)(i.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[i,s]=e.slice(0,-1).split("(");if(i==="drop-shadow")return e;const[a]=s.match(floatRegex)||[];if(!a)return e;const c=s.replace(a,"");let h=maxDefaults.has(i)?1:0;return a!==s&&(h*=100),i+"("+h+c+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter$1={...complex,getAnimatableNone:e=>{const i=e.match(functionRegex);return i?i.map(applyDefaultFilter).join(" "):e}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter:filter$1,WebkitFilter:filter$1},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,i){let s=getDefaultValueType(e);return s!==filter$1&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(i):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,i,s){let a=0,c;for(;a<e.length&&!c;){const h=e[a];typeof h=="string"&&!invalidTemplates.has(h)&&analyseComplexValue(h).values.length&&(c=e[a]),a++}if(c&&s)for(const h of i)e[h]=getAnimatableNone(s,c)}const isNumOrPxType=e=>e===number||e===px,getPosFromMatrix=(e,i)=>parseFloat(e.split(", ")[i]),getTranslateFromMatrix=(e,i)=>(s,{transform:a})=>{if(a==="none"||!a)return 0;const c=a.match(/^matrix3d\((.+)\)$/u);if(c)return getPosFromMatrix(c[1],i);{const h=a.match(/^matrix\((.+)\)$/u);return h?getPosFromMatrix(h[1],e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const i=[];return nonTranslationalTransformKeys.forEach(s=>{const a=e.getValue(s);a!==void 0&&(i.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),i}const positionalValues={width:({x:e},{paddingLeft:i="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(i)-parseFloat(s),height:({y:e},{paddingTop:i="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(i)-parseFloat(s),top:(e,{top:i})=>parseFloat(i),left:(e,{left:i})=>parseFloat(i),bottom:({y:e},{top:i})=>parseFloat(i)+(e.max-e.min),right:({x:e},{left:i})=>parseFloat(i)+(e.max-e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(a=>a.needsMeasurement),i=new Set(e.map(a=>a.element)),s=new Map;i.forEach(a=>{const c=removeNonTranslationalTransform(a);c.length&&(s.set(a,c),a.render())}),e.forEach(a=>a.measureInitialState()),i.forEach(a=>{a.render();const c=s.get(a);c&&c.forEach(([h,st])=>{var nt;(nt=a.getValue(h))===null||nt===void 0||nt.set(st)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(i,s,a,c,h,st=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...i],this.onComplete=s,this.name=a,this.motionValue=c,this.element=h,this.isAsync=st}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:s,element:a,motionValue:c}=this;for(let h=0;h<i.length;h++)if(i[h]===null)if(h===0){const st=c==null?void 0:c.get(),nt=i[i.length-1];if(st!==void 0)i[0]=st;else if(a&&s){const ot=a.readValue(s,nt);ot!=null&&(i[0]=ot)}i[0]===void 0&&(i[0]=nt),c&&st===void 0&&c.set(i[0])}else i[h]=i[h-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const i=splitCSSVariableRegex.exec(e);if(!i)return[,];const[,s,a,c]=i;return[`--${s??a}`,c]}function getVariableValue(e,i,s=1){const[a,c]=parseCSSVariable(e);if(!a)return;const h=window.getComputedStyle(i).getPropertyValue(a);if(h){const st=h.trim();return isNumericalString(st)?parseFloat(st):st}return isCSSVariableToken(c)?getVariableValue(c,i,s+1):c}const testValueType=e=>i=>i.test(e),auto={test:e=>e==="auto",parse:e=>e},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));class DOMKeyframesResolver extends KeyframeResolver{constructor(i,s,a,c,h){super(i,s,a,c,h,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:s,name:a}=this;if(!s||!s.current)return;super.readKeyframes();for(let ot=0;ot<i.length;ot++){let xt=i[ot];if(typeof xt=="string"&&(xt=xt.trim(),isCSSVariableToken(xt))){const vt=getVariableValue(xt,s.current);vt!==void 0&&(i[ot]=vt),ot===i.length-1&&(this.finalKeyframe=xt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(a)||i.length!==2)return;const[c,h]=i,st=findDimensionValueType(c),nt=findDimensionValueType(h);if(st!==nt)if(isNumOrPxType(st)&&isNumOrPxType(nt))for(let ot=0;ot<i.length;ot++){const xt=i[ot];typeof xt=="string"&&(i[ot]=parseFloat(xt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:s}=this,a=[];for(let c=0;c<i.length;c++)isNone(i[c])&&a.push(c);a.length&&makeNoneKeyframesAnimatable(i,a,s)}measureInitialState(){const{element:i,unresolvedKeyframes:s,name:a}=this;if(!i||!i.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[a](i.measureViewportBox(),window.getComputedStyle(i.current)),s[0]=this.measuredOrigin;const c=s[s.length-1];c!==void 0&&i.getValue(a,c).jump(c,!1)}measureEndState(){var i;const{element:s,name:a,unresolvedKeyframes:c}=this;if(!s||!s.current)return;const h=s.getValue(a);h&&h.jump(this.measuredOrigin,!1);const st=c.length-1,nt=c[st];c[st]=positionalValues[a](s.measureViewportBox(),window.getComputedStyle(s.current)),nt!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=nt),!((i=this.removedTransforms)===null||i===void 0)&&i.length&&this.removedTransforms.forEach(([ot,xt])=>{s.getValue(ot).set(xt)}),this.resolveNoneKeyframes()}}const isAnimatable=(e,i)=>i==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const i=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==i)return!0}function canAnimate(e,i,s,a){const c=e[0];if(c===null)return!1;if(i==="display"||i==="visibility")return!0;const h=e[e.length-1],st=isAnimatable(c,i),nt=isAnimatable(h,i);return!st||!nt?!1:hasKeyframesChanged(e)||(s==="spring"||isGenerator(s))&&a}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:i,repeatType:s="loop"},a){const c=e.filter(isNotNull),h=i&&s!=="loop"&&i%2===1?0:c.length-1;return!h||a===void 0?c[h]:a}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:i=!0,delay:s=0,type:a="keyframes",repeat:c=0,repeatDelay:h=0,repeatType:st="loop",...nt}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:i,delay:s,type:a,repeat:c,repeatDelay:h,repeatType:st,...nt},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(i,s){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:a,type:c,velocity:h,delay:st,onComplete:nt,onUpdate:ot,isGenerator:xt}=this.options;if(!xt&&!canAnimate(i,a,c,h))if(st)this.options.duration=0;else{ot&&ot(getFinalKeyframe(i,this.options,s)),nt&&nt(),this.resolveFinishedPromise();return}const vt=this.initPlayback(i,s);vt!==!1&&(this._resolved={keyframes:i,finalKeyframe:s,...vt},this.onPostResolved())}onPostResolved(){}then(i,s){return this.currentFinishedPromise.then(i,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(i=>{this.resolveFinishedPromise=i})}}const mixNumber$1=(e,i,s)=>e+(i-e)*s;function hueToRgb(e,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(i-e)*6*s:s<1/2?i:s<2/3?e+(i-e)*(2/3-s)*6:e}function hslaToRgba({hue:e,saturation:i,lightness:s,alpha:a}){e/=360,i/=100,s/=100;let c=0,h=0,st=0;if(!i)c=h=st=s;else{const nt=s<.5?s*(1+i):s+i-s*i,ot=2*s-nt;c=hueToRgb(ot,nt,e+1/3),h=hueToRgb(ot,nt,e),st=hueToRgb(ot,nt,e-1/3)}return{red:Math.round(c*255),green:Math.round(h*255),blue:Math.round(st*255),alpha:a}}function mixImmediate(e,i){return s=>s>0?i:e}const mixLinearColor=(e,i,s)=>{const a=e*e,c=s*(i*i-a)+a;return c<0?0:Math.sqrt(c)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(i=>i.test(e));function asRGBA(e){const i=getColorType(e);if(!i)return!1;let s=i.parse(e);return i===hsla&&(s=hslaToRgba(s)),s}const mixColor=(e,i)=>{const s=asRGBA(e),a=asRGBA(i);if(!s||!a)return mixImmediate(e,i);const c={...s};return h=>(c.red=mixLinearColor(s.red,a.red,h),c.green=mixLinearColor(s.green,a.green,h),c.blue=mixLinearColor(s.blue,a.blue,h),c.alpha=mixNumber$1(s.alpha,a.alpha,h),rgba.transform(c))},combineFunctions=(e,i)=>s=>i(e(s)),pipe=(...e)=>e.reduce(combineFunctions),invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,i){return invisibleValues.has(e)?s=>s<=0?e:i:s=>s>=1?i:e}function mixNumber(e,i){return s=>mixNumber$1(e,i,s)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,i){const s=[...e],a=s.length,c=e.map((h,st)=>getMixer(h)(h,i[st]));return h=>{for(let st=0;st<a;st++)s[st]=c[st](h);return s}}function mixObject(e,i){const s={...e,...i},a={};for(const c in s)e[c]!==void 0&&i[c]!==void 0&&(a[c]=getMixer(e[c])(e[c],i[c]));return c=>{for(const h in a)s[h]=a[h](c);return s}}function matchOrder(e,i){var s;const a=[],c={color:0,var:0,number:0};for(let h=0;h<i.values.length;h++){const st=i.types[h],nt=e.indexes[st][c[st]],ot=(s=e.values[nt])!==null&&s!==void 0?s:0;a[h]=ot,c[st]++}return a}const mixComplex=(e,i)=>{const s=complex.createTransformer(i),a=analyseComplexValue(e),c=analyseComplexValue(i);return a.indexes.var.length===c.indexes.var.length&&a.indexes.color.length===c.indexes.color.length&&a.indexes.number.length>=c.indexes.number.length?invisibleValues.has(e)&&!c.values.length||invisibleValues.has(i)&&!a.values.length?mixVisibility(e,i):pipe(mixArray(matchOrder(a,c),c.values),s):mixImmediate(e,i)};function mix(e,i,s){return typeof e=="number"&&typeof i=="number"&&typeof s=="number"?mixNumber$1(e,i,s):getMixer(e)(e,i)}const velocitySampleDuration=5;function calcGeneratorVelocity(e,i,s){const a=Math.max(i-velocitySampleDuration,0);return velocityPerSecond(s-e(a),i-a)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:i=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:a=springDefaults.mass}){let c,h,st=1-i;st=clamp(springDefaults.minDamping,springDefaults.maxDamping,st),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),st<1?(c=xt=>{const vt=xt*st,bt=vt*e,St=vt-s,Et=calcAngularFreq(xt,st),Ct=Math.exp(-bt);return safeMin-St/Et*Ct},h=xt=>{const bt=xt*st*e,St=bt*s+s,Et=Math.pow(st,2)*Math.pow(xt,2)*e,Ct=Math.exp(-bt),ht=calcAngularFreq(Math.pow(xt,2),st);return(-c(xt)+safeMin>0?-1:1)*((St-Et)*Ct)/ht}):(c=xt=>{const vt=Math.exp(-xt*e),bt=(xt-s)*e+1;return-safeMin+vt*bt},h=xt=>{const vt=Math.exp(-xt*e),bt=(s-xt)*(e*e);return vt*bt});const nt=5/e,ot=approximateRoot(c,h,nt);if(e=secondsToMilliseconds(e),isNaN(ot))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const xt=Math.pow(ot,2)*a;return{stiffness:xt,damping:st*2*Math.sqrt(a*xt),duration:e}}}const rootIterations=12;function approximateRoot(e,i,s){let a=s;for(let c=1;c<rootIterations;c++)a=a-e(a)/i(a);return a}function calcAngularFreq(e,i){return e*Math.sqrt(1-i*i)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,i){return i.some(s=>e[s]!==void 0)}function getSpringOptions(e){let i={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const s=e.visualDuration,a=2*Math.PI/(s*1.2),c=a*a,h=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(c);i={...i,mass:springDefaults.mass,stiffness:c,damping:h}}else{const s=findSpring(e);i={...i,...s,mass:springDefaults.mass},i.isResolvedFromDuration=!0}return i}function spring(e=springDefaults.visualDuration,i=springDefaults.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:i}:e;let{restSpeed:a,restDelta:c}=s;const h=s.keyframes[0],st=s.keyframes[s.keyframes.length-1],nt={done:!1,value:h},{stiffness:ot,damping:xt,mass:vt,duration:bt,velocity:St,isResolvedFromDuration:Et}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),Ct=St||0,ht=xt/(2*Math.sqrt(ot*vt)),d=st-h,b=millisecondsToSeconds(Math.sqrt(ot/vt)),ft=Math.abs(d)<5;a||(a=ft?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),c||(c=ft?springDefaults.restDelta.granular:springDefaults.restDelta.default);let mt;if(ht<1){const tt=calcAngularFreq(b,ht);mt=gt=>{const wt=Math.exp(-ht*b*gt);return st-wt*((Ct+ht*b*d)/tt*Math.sin(tt*gt)+d*Math.cos(tt*gt))}}else if(ht===1)mt=tt=>st-Math.exp(-b*tt)*(d+(Ct+b*d)*tt);else{const tt=b*Math.sqrt(ht*ht-1);mt=gt=>{const wt=Math.exp(-ht*b*gt),yt=Math.min(tt*gt,300);return st-wt*((Ct+ht*b*d)*Math.sinh(yt)+tt*d*Math.cosh(yt))/tt}}const _t={calculatedDuration:Et&&bt||null,next:tt=>{const gt=mt(tt);if(Et)nt.done=tt>=bt;else{let wt=0;ht<1&&(wt=tt===0?secondsToMilliseconds(Ct):calcGeneratorVelocity(mt,tt,gt));const yt=Math.abs(wt)<=a,Tt=Math.abs(st-gt)<=c;nt.done=yt&&Tt}return nt.value=nt.done?st:gt,nt},toString:()=>{const tt=Math.min(calcGeneratorDuration(_t),maxGeneratorDuration),gt=generateLinearEasing(wt=>_t.next(tt*wt).value,tt,30);return tt+"ms "+gt}};return _t}function inertia({keyframes:e,velocity:i=0,power:s=.8,timeConstant:a=325,bounceDamping:c=10,bounceStiffness:h=500,modifyTarget:st,min:nt,max:ot,restDelta:xt=.5,restSpeed:vt}){const bt=e[0],St={done:!1,value:bt},Et=yt=>nt!==void 0&&yt<nt||ot!==void 0&&yt>ot,Ct=yt=>nt===void 0?ot:ot===void 0||Math.abs(nt-yt)<Math.abs(ot-yt)?nt:ot;let ht=s*i;const d=bt+ht,b=st===void 0?d:st(d);b!==d&&(ht=b-bt);const ft=yt=>-ht*Math.exp(-yt/a),mt=yt=>b+ft(yt),_t=yt=>{const Tt=ft(yt),Mt=mt(yt);St.done=Math.abs(Tt)<=xt,St.value=St.done?b:Mt};let tt,gt;const wt=yt=>{Et(St.value)&&(tt=yt,gt=spring({keyframes:[St.value,Ct(St.value)],velocity:calcGeneratorVelocity(mt,yt,St.value),damping:c,stiffness:h,restDelta:xt,restSpeed:vt}))};return wt(0),{calculatedDuration:null,next:yt=>{let Tt=!1;return!gt&&tt===void 0&&(Tt=!0,_t(yt),wt(yt)),tt!==void 0&&yt>=tt?gt.next(yt-tt):(!Tt&&_t(yt),St)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[i,s,a,c]=e;return cubicBezier(i,s,a,c)}else if(typeof e=="string")return invariant(easingLookup[e]!==void 0),easingLookup[e];return e};function createMixers(e,i,s){const a=[],c=s||mix,h=e.length-1;for(let st=0;st<h;st++){let nt=c(e[st],e[st+1]);if(i){const ot=Array.isArray(i)?i[st]||noop$1:i;nt=pipe(ot,nt)}a.push(nt)}return a}function interpolate(e,i,{clamp:s=!0,ease:a,mixer:c}={}){const h=e.length;if(invariant(h===i.length),h===1)return()=>i[0];if(h===2&&i[0]===i[1])return()=>i[1];const st=e[0]===e[1];e[0]>e[h-1]&&(e=[...e].reverse(),i=[...i].reverse());const nt=createMixers(i,a,c),ot=nt.length,xt=vt=>{if(st&&vt<e[0])return i[0];let bt=0;if(ot>1)for(;bt<e.length-2&&!(vt<e[bt+1]);bt++);const St=progress(e[bt],e[bt+1],vt);return nt[bt](St)};return s?vt=>xt(clamp(e[0],e[h-1],vt)):xt}function fillOffset(e,i){const s=e[e.length-1];for(let a=1;a<=i;a++){const c=progress(0,i,a);e.push(mixNumber$1(s,1,c))}}function defaultOffset(e){const i=[0];return fillOffset(i,e.length-1),i}function convertOffsetToTimes(e,i){return e.map(s=>s*i)}function defaultEasing(e,i){return e.map(()=>i||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:i,times:s,ease:a="easeInOut"}){const c=isEasingArray(a)?a.map(easingDefinitionToFunction):easingDefinitionToFunction(a),h={done:!1,value:i[0]},st=convertOffsetToTimes(s&&s.length===i.length?s:defaultOffset(i),e),nt=interpolate(st,i,{ease:Array.isArray(c)?c:defaultEasing(i,c)});return{calculatedDuration:e,next:ot=>(h.value=nt(ot),h.done=ot>=e,h)}}const frameloopDriver=e=>{const i=({timestamp:s})=>e(s);return{start:()=>frame.update(i,!0),stop:()=>cancelFrame(i),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=e=>e/100;class MainThreadAnimation extends BaseAnimation{constructor(i){super(i),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:ot}=this.options;ot&&ot()};const{name:s,motionValue:a,element:c,keyframes:h}=this.options,st=(c==null?void 0:c.KeyframeResolver)||KeyframeResolver,nt=(ot,xt)=>this.onKeyframesResolved(ot,xt);this.resolver=new st(h,nt,s,a,c),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(i){const{type:s="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:h,velocity:st=0}=this.options,nt=isGenerator(s)?s:generators[s]||keyframes;let ot,xt;nt!==keyframes&&typeof i[0]!="number"&&(ot=pipe(percentToProgress,mix(i[0],i[1])),i=[0,100]);const vt=nt({...this.options,keyframes:i});h==="mirror"&&(xt=nt({...this.options,keyframes:[...i].reverse(),velocity:-st})),vt.calculatedDuration===null&&(vt.calculatedDuration=calcGeneratorDuration(vt));const{calculatedDuration:bt}=vt,St=bt+c,Et=St*(a+1)-c;return{generator:vt,mirroredGenerator:xt,mapPercentToKeyframes:ot,calculatedDuration:bt,resolvedDuration:St,totalDuration:Et}}onPostResolved(){const{autoplay:i=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!i?this.pause():this.state=this.pendingPlayState}tick(i,s=!1){const{resolved:a}=this;if(!a){const{keyframes:yt}=this.options;return{done:!0,value:yt[yt.length-1]}}const{finalKeyframe:c,generator:h,mirroredGenerator:st,mapPercentToKeyframes:nt,keyframes:ot,calculatedDuration:xt,totalDuration:vt,resolvedDuration:bt}=a;if(this.startTime===null)return h.next(0);const{delay:St,repeat:Et,repeatType:Ct,repeatDelay:ht,onUpdate:d}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-vt/this.speed,this.startTime)),s?this.currentTime=i:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(i-this.startTime)*this.speed;const b=this.currentTime-St*(this.speed>=0?1:-1),ft=this.speed>=0?b<0:b>vt;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=vt);let mt=this.currentTime,_t=h;if(Et){const yt=Math.min(this.currentTime,vt)/bt;let Tt=Math.floor(yt),Mt=yt%1;!Mt&&yt>=1&&(Mt=1),Mt===1&&Tt--,Tt=Math.min(Tt,Et+1),!!(Tt%2)&&(Ct==="reverse"?(Mt=1-Mt,ht&&(Mt-=ht/bt)):Ct==="mirror"&&(_t=st)),mt=clamp(0,1,Mt)*bt}const tt=ft?{done:!1,value:ot[0]}:_t.next(mt);nt&&(tt.value=nt(tt.value));let{done:gt}=tt;!ft&&xt!==null&&(gt=this.speed>=0?this.currentTime>=vt:this.currentTime<=0);const wt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&gt);return wt&&c!==void 0&&(tt.value=getFinalKeyframe(ot,this.options,c)),d&&d(tt.value),wt&&this.finish(),tt}get duration(){const{resolved:i}=this;return i?millisecondsToSeconds(i.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(i){i=secondsToMilliseconds(i),this.currentTime=i,this.holdTime!==null||this.speed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.speed)}get speed(){return this.playbackSpeed}set speed(i){const s=this.playbackSpeed!==i;this.playbackSpeed=i,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:i=frameloopDriver,onPlay:s,startTime:a}=this.options;this.driver||(this.driver=i(h=>this.tick(h))),s&&s();const c=this.driver.now();this.holdTime!==null?this.startTime=c-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=c):this.startTime=a??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var i;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(i=this.currentTime)!==null&&i!==void 0?i:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:i}=this.options;i&&i()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function startWaapiAnimation(e,i,s,{delay:a=0,duration:c=300,repeat:h=0,repeatType:st="loop",ease:nt="easeInOut",times:ot}={}){const xt={[i]:s};ot&&(xt.offset=ot);const vt=mapEasingToNativeEasing(nt,c);return Array.isArray(vt)&&(xt.easing=vt),e.animate(xt,{delay:a,duration:c,easing:Array.isArray(vt)?"linear":vt,fill:"both",iterations:h+1,direction:st==="reverse"?"alternate":"normal"})}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(e){return isGenerator(e.type)||e.type==="spring"||!isWaapiSupportedEasing(e.ease)}function pregenerateKeyframes(e,i){const s=new MainThreadAnimation({...i,keyframes:e,repeat:0,delay:0,isGenerator:!0});let a={done:!1,value:e[0]};const c=[];let h=0;for(;!a.done&&h<maxDuration;)a=s.sample(h),c.push(a.value),h+=sampleDelta;return{times:void 0,keyframes:c,duration:h-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(i){super(i);const{name:s,motionValue:a,element:c,keyframes:h}=this.options;this.resolver=new DOMKeyframesResolver(h,(st,nt)=>this.onKeyframesResolved(st,nt),s,a,c),this.resolver.scheduleResolve()}initPlayback(i,s){let{duration:a=300,times:c,ease:h,type:st,motionValue:nt,name:ot,startTime:xt}=this.options;if(!nt.owner||!nt.owner.current)return!1;if(typeof h=="string"&&supportsLinearEasing()&&isUnsupportedEase(h)&&(h=unsupportedEasingFunctions[h]),requiresPregeneratedKeyframes(this.options)){const{onComplete:bt,onUpdate:St,motionValue:Et,element:Ct,...ht}=this.options,d=pregenerateKeyframes(i,ht);i=d.keyframes,i.length===1&&(i[1]=i[0]),a=d.duration,c=d.times,h=d.ease,st="keyframes"}const vt=startWaapiAnimation(nt.owner.current,ot,i,{...this.options,duration:a,times:c,ease:h});return vt.startTime=xt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(vt,this.pendingTimeline),this.pendingTimeline=void 0):vt.onfinish=()=>{const{onComplete:bt}=this.options;nt.set(getFinalKeyframe(i,this.options,s)),bt&&bt(),this.cancel(),this.resolveFinishedPromise()},{animation:vt,duration:a,times:c,type:st,ease:h,keyframes:i}}get duration(){const{resolved:i}=this;if(!i)return 0;const{duration:s}=i;return millisecondsToSeconds(s)}get time(){const{resolved:i}=this;if(!i)return 0;const{animation:s}=i;return millisecondsToSeconds(s.currentTime||0)}set time(i){const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.currentTime=secondsToMilliseconds(i)}get speed(){const{resolved:i}=this;if(!i)return 1;const{animation:s}=i;return s.playbackRate}set speed(i){const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.playbackRate=i}get state(){const{resolved:i}=this;if(!i)return"idle";const{animation:s}=i;return s.playState}get startTime(){const{resolved:i}=this;if(!i)return null;const{animation:s}=i;return s.startTime}attachTimeline(i){if(!this._resolved)this.pendingTimeline=i;else{const{resolved:s}=this;if(!s)return noop$1;const{animation:a}=s;attachTimeline(a,i)}return noop$1}play(){if(this.isStopped)return;const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:i}=this;if(!i)return;const{animation:s,keyframes:a,duration:c,type:h,ease:st,times:nt}=i;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:xt,onUpdate:vt,onComplete:bt,element:St,...Et}=this.options,Ct=new MainThreadAnimation({...Et,keyframes:a,duration:c,type:h,ease:st,times:nt,isGenerator:!0}),ht=secondsToMilliseconds(this.time);xt.setWithVelocity(Ct.sample(ht-sampleDelta).value,Ct.sample(ht).value,sampleDelta)}const{onStop:ot}=this.options;ot&&ot(),this.cancel()}complete(){const{resolved:i}=this;i&&i.animation.finish()}cancel(){const{resolved:i}=this;i&&i.animation.cancel()}static supports(i){const{motionValue:s,name:a,repeatDelay:c,repeatType:h,damping:st,type:nt}=i;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:ot,transformTemplate:xt}=s.owner.getProps();return supportsWaapi()&&a&&acceleratedValues.has(a)&&!ot&&!xt&&!c&&h!=="mirror"&&st!==0&&nt!=="inertia"}}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:i})=>i.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(i[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:i,delayChildren:s,staggerChildren:a,staggerDirection:c,repeat:h,repeatType:st,repeatDelay:nt,from:ot,elapsed:xt,...vt}){return!!Object.keys(vt).length}const animateMotionValue=(e,i,s,a={},c,h)=>st=>{const nt=getValueTransition(a,e)||{},ot=nt.delay||a.delay||0;let{elapsed:xt=0}=a;xt=xt-secondsToMilliseconds(ot);let vt={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:i.getVelocity(),...nt,delay:-xt,onUpdate:St=>{i.set(St),nt.onUpdate&&nt.onUpdate(St)},onComplete:()=>{st(),nt.onComplete&&nt.onComplete()},name:e,motionValue:i,element:h?void 0:c};isTransitionDefined(nt)||(vt={...vt,...getDefaultTransition(e,vt)}),vt.duration&&(vt.duration=secondsToMilliseconds(vt.duration)),vt.repeatDelay&&(vt.repeatDelay=secondsToMilliseconds(vt.repeatDelay)),vt.from!==void 0&&(vt.keyframes[0]=vt.from);let bt=!1;if((vt.type===!1||vt.duration===0&&!vt.repeatDelay)&&(vt.duration=0,vt.delay===0&&(bt=!0)),bt&&!h&&i.get()!==void 0){const St=getFinalKeyframe(vt.keyframes,nt);if(St!==void 0)return frame.update(()=>{vt.onUpdate(St),vt.onComplete()}),new GroupPlaybackControls([])}return!h&&AcceleratedAnimation.supports(vt)?new AcceleratedAnimation(vt):new MainThreadAnimation(vt)};function shouldBlockAnimation({protectedKeys:e,needsAnimating:i},s){const a=e.hasOwnProperty(s)&&i[s]!==!0;return i[s]=!1,a}function animateTarget(e,i,{delay:s=0,transitionOverride:a,type:c}={}){var h;let{transition:st=e.getDefaultTransition(),transitionEnd:nt,...ot}=i;a&&(st=a);const xt=[],vt=c&&e.animationState&&e.animationState.getState()[c];for(const bt in ot){const St=e.getValue(bt,(h=e.latestValues[bt])!==null&&h!==void 0?h:null),Et=ot[bt];if(Et===void 0||vt&&shouldBlockAnimation(vt,bt))continue;const Ct={delay:s,...getValueTransition(st||{},bt)};let ht=!1;if(window.MotionHandoffAnimation){const b=getOptimisedAppearId(e);if(b){const ft=window.MotionHandoffAnimation(b,bt,frame);ft!==null&&(Ct.startTime=ft,ht=!0)}}addValueToWillChange(e,bt),St.start(animateMotionValue(bt,St,Et,e.shouldReduceMotion&&positionalKeys.has(bt)?{type:!1}:Ct,e,ht));const d=St.animation;d&&xt.push(d)}return nt&&Promise.all(xt).then(()=>{frame.update(()=>{nt&&setTarget(e,nt)})}),xt}function animateVariant(e,i,s={}){var a;const c=resolveVariant(e,i,s.type==="exit"?(a=e.presenceContext)===null||a===void 0?void 0:a.custom:void 0);let{transition:h=e.getDefaultTransition()||{}}=c||{};s.transitionOverride&&(h=s.transitionOverride);const st=c?()=>Promise.all(animateTarget(e,c,s)):()=>Promise.resolve(),nt=e.variantChildren&&e.variantChildren.size?(xt=0)=>{const{delayChildren:vt=0,staggerChildren:bt,staggerDirection:St}=h;return animateChildren(e,i,vt+xt,bt,St,s)}:()=>Promise.resolve(),{when:ot}=h;if(ot){const[xt,vt]=ot==="beforeChildren"?[st,nt]:[nt,st];return xt().then(()=>vt())}else return Promise.all([st(),nt(s.delay)])}function animateChildren(e,i,s=0,a=0,c=1,h){const st=[],nt=(e.variantChildren.size-1)*a,ot=c===1?(xt=0)=>xt*a:(xt=0)=>nt-xt*a;return Array.from(e.variantChildren).sort(sortByTreeOrder).forEach((xt,vt)=>{xt.notify("AnimationStart",i),st.push(animateVariant(xt,i,{...h,delay:s+ot(vt)}).then(()=>xt.notify("AnimationComplete",i)))}),Promise.all(st)}function sortByTreeOrder(e,i){return e.sortNodePosition(i)}function animateVisualElement(e,i,s={}){e.notify("AnimationStart",i);let a;if(Array.isArray(i)){const c=i.map(h=>animateVariant(e,h,s));a=Promise.all(c)}else if(typeof i=="string")a=animateVariant(e,i,s);else{const c=typeof i=="function"?resolveVariant(e,i,s.custom):i;a=Promise.all(animateTarget(e,c,s))}return a.then(()=>{e.notify("AnimationComplete",i)})}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const i={};for(let s=0;s<numVariantProps;s++){const a=variantProps[s],c=e.props[a];(isVariantLabel(c)||c===!1)&&(i[a]=c)}return i}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return i=>Promise.all(i.map(({animation:s,options:a})=>animateVisualElement(e,s,a)))}function createAnimationState(e){let i=animateList(e),s=createState(),a=!0;const c=ot=>(xt,vt)=>{var bt;const St=resolveVariant(e,vt,ot==="exit"?(bt=e.presenceContext)===null||bt===void 0?void 0:bt.custom:void 0);if(St){const{transition:Et,transitionEnd:Ct,...ht}=St;xt={...xt,...ht,...Ct}}return xt};function h(ot){i=ot(e)}function st(ot){const{props:xt}=e,vt=getVariantContext(e.parent)||{},bt=[],St=new Set;let Et={},Ct=1/0;for(let d=0;d<numAnimationTypes;d++){const b=reversePriorityOrder[d],ft=s[b],mt=xt[b]!==void 0?xt[b]:vt[b],_t=isVariantLabel(mt),tt=b===ot?ft.isActive:null;tt===!1&&(Ct=d);let gt=mt===vt[b]&&mt!==xt[b]&&_t;if(gt&&a&&e.manuallyAnimateOnMount&&(gt=!1),ft.protectedKeys={...Et},!ft.isActive&&tt===null||!mt&&!ft.prevProp||isAnimationControls(mt)||typeof mt=="boolean")continue;const wt=checkVariantsDidChange(ft.prevProp,mt);let yt=wt||b===ot&&ft.isActive&&!gt&&_t||d>Ct&&_t,Tt=!1;const Mt=Array.isArray(mt)?mt:[mt];let Pt=Mt.reduce(c(b),{});tt===!1&&(Pt={});const{prevResolvedValues:It={}}=ft,Lt={...It,...Pt},zt=kt=>{yt=!0,St.has(kt)&&(Tt=!0,St.delete(kt)),ft.needsAnimating[kt]=!0;const Ot=e.getValue(kt);Ot&&(Ot.liveStyle=!1)};for(const kt in Lt){const Ot=Pt[kt],Bt=It[kt];if(Et.hasOwnProperty(kt))continue;let Ut=!1;isKeyframesTarget(Ot)&&isKeyframesTarget(Bt)?Ut=!shallowCompare(Ot,Bt):Ut=Ot!==Bt,Ut?Ot!=null?zt(kt):St.add(kt):Ot!==void 0&&St.has(kt)?zt(kt):ft.protectedKeys[kt]=!0}ft.prevProp=mt,ft.prevResolvedValues=Pt,ft.isActive&&(Et={...Et,...Pt}),a&&e.blockInitialAnimation&&(yt=!1),yt&&(!(gt&&wt)||Tt)&&bt.push(...Mt.map(kt=>({animation:kt,options:{type:b}})))}if(St.size){const d={};St.forEach(b=>{const ft=e.getBaseTarget(b),mt=e.getValue(b);mt&&(mt.liveStyle=!0),d[b]=ft??null}),bt.push({animation:d})}let ht=!!bt.length;return a&&(xt.initial===!1||xt.initial===xt.animate)&&!e.manuallyAnimateOnMount&&(ht=!1),a=!1,ht?i(bt):Promise.resolve()}function nt(ot,xt){var vt;if(s[ot].isActive===xt)return Promise.resolve();(vt=e.variantChildren)===null||vt===void 0||vt.forEach(St=>{var Et;return(Et=St.animationState)===null||Et===void 0?void 0:Et.setActive(ot,xt)}),s[ot].isActive=xt;const bt=st(ot);for(const St in s)s[St].protectedKeys={};return bt}return{animateChanges:st,setActive:nt,setAnimateFunction:h,getState:()=>s,reset:()=>{s=createState(),a=!0}}}function checkVariantsDidChange(e,i){return typeof i=="string"?i!==e:Array.isArray(i)?!shallowCompare(i,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(i){this.isMounted=!1,this.node=i}update(){}}class AnimationFeature extends Feature{constructor(i){super(i),i.animationState||(i.animationState=createAnimationState(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();isAnimationControls(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:s}=this.node.prevProps||{};i!==s&&this.updateAnimationControlsSubscription()}unmount(){var i;this.node.animationState.reset(),(i=this.unmountControls)===null||i===void 0||i.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===a)return;const c=this.node.animationState.setActive("exit",!i);s&&!i&&c.then(()=>s(this.id))}mount(){const{register:i}=this.node.presenceContext||{};i&&(this.unmount=i(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(e,i,s,a={passive:!0}){return e.addEventListener(i,s,a),()=>e.removeEventListener(i,s)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>i=>isPrimaryPointer(i)&&e(i,extractEventInfo(i));function addPointerEvent(e,i,s,a){return addDomEvent(e,i,addPointerInfo(s),a)}const distance=(e,i)=>Math.abs(e-i);function distance2D(e,i){const s=distance(e.x,i.x),a=distance(e.y,i.y);return Math.sqrt(s**2+a**2)}class PanSession{constructor(i,s,{transformPagePoint:a,contextWindow:c,dragSnapToOrigin:h=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const bt=getPanInfo(this.lastMoveEventInfo,this.history),St=this.startEvent!==null,Et=distance2D(bt.offset,{x:0,y:0})>=3;if(!St&&!Et)return;const{point:Ct}=bt,{timestamp:ht}=frameData;this.history.push({...Ct,timestamp:ht});const{onStart:d,onMove:b}=this.handlers;St||(d&&d(this.lastMoveEvent,bt),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,bt)},this.handlePointerMove=(bt,St)=>{this.lastMoveEvent=bt,this.lastMoveEventInfo=transformPoint(St,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(bt,St)=>{this.end();const{onEnd:Et,onSessionEnd:Ct,resumeAnimation:ht}=this.handlers;if(this.dragSnapToOrigin&&ht&&ht(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=getPanInfo(bt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(St,this.transformPagePoint),this.history);this.startEvent&&Et&&Et(bt,d),Ct&&Ct(bt,d)},!isPrimaryPointer(i))return;this.dragSnapToOrigin=h,this.handlers=s,this.transformPagePoint=a,this.contextWindow=c||window;const st=extractEventInfo(i),nt=transformPoint(st,this.transformPagePoint),{point:ot}=nt,{timestamp:xt}=frameData;this.history=[{...ot,timestamp:xt}];const{onSessionStart:vt}=s;vt&&vt(i,getPanInfo(nt,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,i){return i?{point:i(e.point)}:e}function subtractPoint(e,i){return{x:e.x-i.x,y:e.y-i.y}}function getPanInfo({point:e},i){return{point:e,delta:subtractPoint(e,lastDevicePoint(i)),offset:subtractPoint(e,startDevicePoint(i)),velocity:getVelocity(i,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,i){if(e.length<2)return{x:0,y:0};let s=e.length-1,a=null;const c=lastDevicePoint(e);for(;s>=0&&(a=e[s],!(c.timestamp-a.timestamp>secondsToMilliseconds(i)));)s--;if(!a)return{x:0,y:0};const h=millisecondsToSeconds(c.timestamp-a.timestamp);if(h===0)return{x:0,y:0};const st={x:(c.x-a.x)/h,y:(c.y-a.y)/h};return st.x===1/0&&(st.x=0),st.y===1/0&&(st.y=0),st}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,i,s){return Math.abs(e-i)<=s}function calcAxisDelta(e,i,s,a=.5){e.origin=a,e.originPoint=mixNumber$1(i.min,i.max,e.origin),e.scale=calcLength(s)/calcLength(i),e.translate=mixNumber$1(s.min,s.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,i,s,a){calcAxisDelta(e.x,i.x,s.x,a?a.originX:void 0),calcAxisDelta(e.y,i.y,s.y,a?a.originY:void 0)}function calcRelativeAxis(e,i,s){e.min=s.min+i.min,e.max=e.min+calcLength(i)}function calcRelativeBox(e,i,s){calcRelativeAxis(e.x,i.x,s.x),calcRelativeAxis(e.y,i.y,s.y)}function calcRelativeAxisPosition(e,i,s){e.min=i.min-s.min,e.max=e.min+calcLength(i)}function calcRelativePosition(e,i,s){calcRelativeAxisPosition(e.x,i.x,s.x),calcRelativeAxisPosition(e.y,i.y,s.y)}function applyConstraints(e,{min:i,max:s},a){return i!==void 0&&e<i?e=a?mixNumber$1(i,e,a.min):Math.max(e,i):s!==void 0&&e>s&&(e=a?mixNumber$1(s,e,a.max):Math.min(e,s)),e}function calcRelativeAxisConstraints(e,i,s){return{min:i!==void 0?e.min+i:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:i,left:s,bottom:a,right:c}){return{x:calcRelativeAxisConstraints(e.x,s,c),y:calcRelativeAxisConstraints(e.y,i,a)}}function calcViewportAxisConstraints(e,i){let s=i.min-e.min,a=i.max-e.max;return i.max-i.min<e.max-e.min&&([s,a]=[a,s]),{min:s,max:a}}function calcViewportConstraints(e,i){return{x:calcViewportAxisConstraints(e.x,i.x),y:calcViewportAxisConstraints(e.y,i.y)}}function calcOrigin(e,i){let s=.5;const a=calcLength(e),c=calcLength(i);return c>a?s=progress(i.min,i.max-a,e.min):a>c&&(s=progress(e.min,e.max-c,i.min)),clamp(0,1,s)}function rebaseAxisConstraints(e,i){const s={};return i.min!==void 0&&(s.min=i.min-e.min),i.max!==void 0&&(s.max=i.max-e.min),s}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,i,s){return{min:resolvePointElastic(e,i),max:resolvePointElastic(e,s)}}function resolvePointElastic(e,i){return typeof e=="number"?e:e[i]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(e){return[e("x"),e("y")]}function convertBoundingBoxToBox({top:e,left:i,right:s,bottom:a}){return{x:{min:i,max:s},y:{min:e,max:a}}}function convertBoxToBoundingBox({x:e,y:i}){return{top:i.min,right:e.max,bottom:i.max,left:e.min}}function transformBoxPoints(e,i){if(!i)return e;const s=i({x:e.left,y:e.top}),a=i({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:i,scaleY:s}){return!isIdentityScale(e)||!isIdentityScale(i)||!isIdentityScale(s)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,i,s){const a=e-s,c=i*a;return s+c}function applyPointDelta(e,i,s,a,c){return c!==void 0&&(e=scalePoint(e,c,a)),scalePoint(e,s,a)+i}function applyAxisDelta(e,i=0,s=1,a,c){e.min=applyPointDelta(e.min,i,s,a,c),e.max=applyPointDelta(e.max,i,s,a,c)}function applyBoxDelta(e,{x:i,y:s}){applyAxisDelta(e.x,i.translate,i.scale,i.originPoint),applyAxisDelta(e.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,i,s,a=!1){const c=s.length;if(!c)return;i.x=i.y=1;let h,st;for(let nt=0;nt<c;nt++){h=s[nt],st=h.projectionDelta;const{visualElement:ot}=h.options;ot&&ot.props.style&&ot.props.style.display==="contents"||(a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&transformBox(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),st&&(i.x*=st.x.scale,i.y*=st.y.scale,applyBoxDelta(e,st)),a&&hasTransform(h.latestValues)&&transformBox(e,h.latestValues))}i.x<TREE_SCALE_SNAP_MAX&&i.x>TREE_SCALE_SNAP_MIN&&(i.x=1),i.y<TREE_SCALE_SNAP_MAX&&i.y>TREE_SCALE_SNAP_MIN&&(i.y=1)}function translateAxis(e,i){e.min=e.min+i,e.max=e.max+i}function transformAxis(e,i,s,a,c=.5){const h=mixNumber$1(e.min,e.max,c);applyAxisDelta(e,i,s,h,a)}function transformBox(e,i){transformAxis(e.x,i.x,i.scaleX,i.scale,i.originX),transformAxis(e.y,i.y,i.scaleY,i.scale,i.originY)}function measureViewportBox(e,i){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),i))}function measurePageBox(e,i,s){const a=measureViewportBox(e,s),{scroll:c}=i;return c&&(translateAxis(a.x,c.offset.x),translateAxis(a.y,c.offset.y)),a}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=i}start(i,{snapToCursor:s=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const c=vt=>{const{dragSnapToOrigin:bt}=this.getProps();bt?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(extractEventInfo(vt).point)},h=(vt,bt)=>{const{drag:St,dragPropagation:Et,onDragStart:Ct}=this.getProps();if(St&&!Et&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(St),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(d=>{let b=this.getAxisMotionValue(d).get()||0;if(percent.test(b)){const{projection:ft}=this.visualElement;if(ft&&ft.layout){const mt=ft.layout.layoutBox[d];mt&&(b=calcLength(mt)*(parseFloat(b)/100))}}this.originPoint[d]=b}),Ct&&frame.postRender(()=>Ct(vt,bt)),addValueToWillChange(this.visualElement,"transform");const{animationState:ht}=this.visualElement;ht&&ht.setActive("whileDrag",!0)},st=(vt,bt)=>{const{dragPropagation:St,dragDirectionLock:Et,onDirectionLock:Ct,onDrag:ht}=this.getProps();if(!St&&!this.openDragLock)return;const{offset:d}=bt;if(Et&&this.currentDirection===null){this.currentDirection=getCurrentDirection(d),this.currentDirection!==null&&Ct&&Ct(this.currentDirection);return}this.updateAxis("x",bt.point,d),this.updateAxis("y",bt.point,d),this.visualElement.render(),ht&&ht(vt,bt)},nt=(vt,bt)=>this.stop(vt,bt),ot=()=>eachAxis(vt=>{var bt;return this.getAnimationState(vt)==="paused"&&((bt=this.getAxisMotionValue(vt).animation)===null||bt===void 0?void 0:bt.play())}),{dragSnapToOrigin:xt}=this.getProps();this.panSession=new PanSession(i,{onSessionStart:c,onStart:h,onMove:st,onSessionEnd:nt,resumeAnimation:ot},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:xt,contextWindow:getContextWindow(this.visualElement)})}stop(i,s){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&frame.postRender(()=>h(i,s))}cancel(){this.isDragging=!1;const{projection:i,animationState:s}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(i,s,a){const{drag:c}=this.getProps();if(!a||!shouldDrag(i,c,this.currentDirection))return;const h=this.getAxisMotionValue(i);let st=this.originPoint[i]+a[i];this.constraints&&this.constraints[i]&&(st=applyConstraints(st,this.constraints[i],this.elastic[i])),h.set(st)}resolveConstraints(){var i;const{dragConstraints:s,dragElastic:a}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)===null||i===void 0?void 0:i.layout,h=this.constraints;s&&isRefObject(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&c?this.constraints=calcRelativeConstraints(c.layoutBox,s):this.constraints=!1,this.elastic=resolveDragElastic(a),h!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(st=>{this.constraints!==!1&&this.getAxisMotionValue(st)&&(this.constraints[st]=rebaseAxisConstraints(c.layoutBox[st],this.constraints[st]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:s}=this.getProps();if(!i||!isRefObject(i))return!1;const a=i.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const h=measurePageBox(a,c.root,this.visualElement.getTransformPagePoint());let st=calcViewportConstraints(c.layout.layoutBox,h);if(s){const nt=s(convertBoxToBoundingBox(st));this.hasMutatedConstraints=!!nt,nt&&(st=convertBoundingBoxToBox(nt))}return st}startAnimation(i){const{drag:s,dragMomentum:a,dragElastic:c,dragTransition:h,dragSnapToOrigin:st,onDragTransitionEnd:nt}=this.getProps(),ot=this.constraints||{},xt=eachAxis(vt=>{if(!shouldDrag(vt,s,this.currentDirection))return;let bt=ot&&ot[vt]||{};st&&(bt={min:0,max:0});const St=c?200:1e6,Et=c?40:1e7,Ct={type:"inertia",velocity:a?i[vt]:0,bounceStiffness:St,bounceDamping:Et,timeConstant:750,restDelta:1,restSpeed:10,...h,...bt};return this.startAxisValueAnimation(vt,Ct)});return Promise.all(xt).then(nt)}startAxisValueAnimation(i,s){const a=this.getAxisMotionValue(i);return addValueToWillChange(this.visualElement,i),a.start(animateMotionValue(i,a,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(i=>this.getAxisMotionValue(i).stop())}pauseAnimation(){eachAxis(i=>{var s;return(s=this.getAxisMotionValue(i).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(i){var s;return(s=this.getAxisMotionValue(i).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(i){const s=`_drag${i.toUpperCase()}`,a=this.visualElement.getProps(),c=a[s];return c||this.visualElement.getValue(i,(a.initial?a.initial[i]:void 0)||0)}snapToCursor(i){eachAxis(s=>{const{drag:a}=this.getProps();if(!shouldDrag(s,a,this.currentDirection))return;const{projection:c}=this.visualElement,h=this.getAxisMotionValue(s);if(c&&c.layout){const{min:st,max:nt}=c.layout.layoutBox[s];h.set(i[s]-mixNumber$1(st,nt,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!isRefObject(s)||!a||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};eachAxis(st=>{const nt=this.getAxisMotionValue(st);if(nt&&this.constraints!==!1){const ot=nt.get();c[st]=calcOrigin({min:ot,max:ot},this.constraints[st])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),eachAxis(st=>{if(!shouldDrag(st,i,null))return;const nt=this.getAxisMotionValue(st),{min:ot,max:xt}=this.constraints[st];nt.set(mixNumber$1(ot,xt,c[st]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const i=this.visualElement.current,s=addPointerEvent(i,"pointerdown",ot=>{const{drag:xt,dragListener:vt=!0}=this.getProps();xt&&vt&&this.start(ot)}),a=()=>{const{dragConstraints:ot}=this.getProps();isRefObject(ot)&&ot.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,h=c.addEventListener("measure",a);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),frame.read(a);const st=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),nt=c.addEventListener("didUpdate",({delta:ot,hasLayoutChanged:xt})=>{this.isDragging&&xt&&(eachAxis(vt=>{const bt=this.getAxisMotionValue(vt);bt&&(this.originPoint[vt]+=ot[vt].translate,bt.set(bt.get()+ot[vt].translate))}),this.visualElement.render())});return()=>{st(),s(),h(),nt&&nt()}}getProps(){const i=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:c=!1,dragConstraints:h=!1,dragElastic:st=defaultElastic,dragMomentum:nt=!0}=i;return{...i,drag:s,dragDirectionLock:a,dragPropagation:c,dragConstraints:h,dragElastic:st,dragMomentum:nt}}}function shouldDrag(e,i,s){return(i===!0||i===e)&&(s===null||s===e)}function getCurrentDirection(e,i=10){let s=null;return Math.abs(e.y)>i?s="y":Math.abs(e.x)>i&&(s="x"),s}class DragGesture extends Feature{constructor(i){super(i),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(i,s)=>{e&&frame.postRender(()=>e(i,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(i){this.session=new PanSession(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:s,onPan:a,onPanEnd:c}=this.node.getProps();return{onSessionStart:asyncHandler(i),onStart:asyncHandler(s),onMove:a,onEnd:(h,st)=>{delete this.session,c&&frame.postRender(()=>c(h,st))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,i){return i.max===i.min?0:e/(i.max-i.min)*100}const correctBorderRadius={correct:(e,i)=>{if(!i.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const s=pixelsToPercent(e,i.target.x),a=pixelsToPercent(e,i.target.y);return`${s}% ${a}%`}},correctBoxShadow={correct:(e,{treeScale:i,projectionDelta:s})=>{const a=e,c=complex.parse(e);if(c.length>5)return a;const h=complex.createTransformer(e),st=typeof c[0]!="number"?1:0,nt=s.x.scale*i.x,ot=s.y.scale*i.y;c[0+st]/=nt,c[1+st]/=ot;const xt=mixNumber$1(nt,ot,.5);return typeof c[2+st]=="number"&&(c[2+st]/=xt),typeof c[3+st]=="number"&&(c[3+st]/=xt),h(c)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:a,layoutId:c}=this.props,{projection:h}=i;addScaleCorrector(defaultScaleCorrectors),h&&(s.group&&s.group.add(h),a&&a.register&&c&&a.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:s,visualElement:a,drag:c,isPresent:h}=this.props,st=a.projection;return st&&(st.isPresent=h,c||i.layoutDependency!==s||s===void 0?st.willUpdate():this.safeToRemove(),i.isPresent!==h&&(h?st.promote():st.relegate()||frame.postRender(()=>{const nt=st.getStack();(!nt||!nt.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),microtask.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:c}=i;c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),a&&a.deregister&&a.deregister(c))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function MeasureLayout(e){const[i,s]=usePresence(),a=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:a,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:i,safeToRemove:s})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(e,i,s){const a=isMotionValue(e)?e:motionValue(e);return a.start(animateMotionValue("",a,i,s)),a.animation}function isSVGElement(e){return e instanceof SVGElement&&e.tagName!=="svg"}const compareByDepth=(e,i)=>e.depth-i.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(i){addUniqueItem(this.children,i),this.isDirty=!0}remove(i){removeItem(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(i)}}function delay(e,i){const s=time.now(),a=({timestamp:c})=>{const h=c-s;h>=i&&(cancelFrame(a),e(h-i))};return frame.read(a,!0),()=>cancelFrame(a)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,i,s,a,c,h){c?(e.opacity=mixNumber$1(0,s.opacity!==void 0?s.opacity:1,easeCrossfadeIn(a)),e.opacityExit=mixNumber$1(i.opacity!==void 0?i.opacity:1,0,easeCrossfadeOut(a))):h&&(e.opacity=mixNumber$1(i.opacity!==void 0?i.opacity:1,s.opacity!==void 0?s.opacity:1,a));for(let st=0;st<numBorders;st++){const nt=`border${borders[st]}Radius`;let ot=getRadius(i,nt),xt=getRadius(s,nt);if(ot===void 0&&xt===void 0)continue;ot||(ot=0),xt||(xt=0),ot===0||xt===0||isPx(ot)===isPx(xt)?(e[nt]=Math.max(mixNumber$1(asNumber(ot),asNumber(xt),a),0),(percent.test(xt)||percent.test(ot))&&(e[nt]+="%")):e[nt]=xt}(i.rotate||s.rotate)&&(e.rotate=mixNumber$1(i.rotate||0,s.rotate||0,a))}function getRadius(e,i){return e[i]!==void 0?e[i]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(e,i,s){return a=>a<e?0:a>i?1:s(progress(e,i,a))}function copyAxisInto(e,i){e.min=i.min,e.max=i.max}function copyBoxInto(e,i){copyAxisInto(e.x,i.x),copyAxisInto(e.y,i.y)}function copyAxisDeltaInto(e,i){e.translate=i.translate,e.scale=i.scale,e.originPoint=i.originPoint,e.origin=i.origin}function removePointDelta(e,i,s,a,c){return e-=i,e=scalePoint(e,1/s,a),c!==void 0&&(e=scalePoint(e,1/c,a)),e}function removeAxisDelta(e,i=0,s=1,a=.5,c,h=e,st=e){if(percent.test(i)&&(i=parseFloat(i),i=mixNumber$1(st.min,st.max,i/100)-st.min),typeof i!="number")return;let nt=mixNumber$1(h.min,h.max,a);e===h&&(nt-=i),e.min=removePointDelta(e.min,i,s,nt,c),e.max=removePointDelta(e.max,i,s,nt,c)}function removeAxisTransforms(e,i,[s,a,c],h,st){removeAxisDelta(e,i[s],i[a],i[c],i.scale,h,st)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,i,s,a){removeAxisTransforms(e.x,i,xKeys,s?s.x:void 0,a?a.x:void 0),removeAxisTransforms(e.y,i,yKeys,s?s.y:void 0,a?a.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,i){return e.min===i.min&&e.max===i.max}function boxEquals(e,i){return axisEquals(e.x,i.x)&&axisEquals(e.y,i.y)}function axisEqualsRounded(e,i){return Math.round(e.min)===Math.round(i.min)&&Math.round(e.max)===Math.round(i.max)}function boxEqualsRounded(e,i){return axisEqualsRounded(e.x,i.x)&&axisEqualsRounded(e.y,i.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,i){return e.translate===i.translate&&e.scale===i.scale&&e.originPoint===i.originPoint}class NodeStack{constructor(){this.members=[]}add(i){addUniqueItem(this.members,i),i.scheduleRender()}remove(i){if(removeItem(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(i){const s=this.members.findIndex(c=>i===c);if(s===0)return!1;let a;for(let c=s;c>=0;c--){const h=this.members[c];if(h.isPresent!==!1){a=h;break}}return a?(this.promote(a),!0):!1}promote(i,s){const a=this.lead;if(i!==a&&(this.prevLead=a,this.lead=i,i.show(),a)){a.instance&&a.scheduleRender(),i.scheduleRender(),i.resumeFrom=a,s&&(i.resumeFrom.preserveOpacity=!0),a.snapshot&&(i.snapshot=a.snapshot,i.snapshot.latestValues=a.animationValues||a.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:c}=i.options;c===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:s,resumingFrom:a}=i;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,i,s){let a="";const c=e.x.translate/i.x,h=e.y.translate/i.y,st=(s==null?void 0:s.z)||0;if((c||h||st)&&(a=`translate3d(${c}px, ${h}px, ${st}px) `),(i.x!==1||i.y!==1)&&(a+=`scale(${1/i.x}, ${1/i.y}) `),s){const{transformPerspective:xt,rotate:vt,rotateX:bt,rotateY:St,skewX:Et,skewY:Ct}=s;xt&&(a=`perspective(${xt}px) ${a}`),vt&&(a+=`rotate(${vt}deg) `),bt&&(a+=`rotateX(${bt}deg) `),St&&(a+=`rotateY(${St}deg) `),Et&&(a+=`skewX(${Et}deg) `),Ct&&(a+=`skewY(${Ct}deg) `)}const nt=e.x.scale*i.x,ot=e.y.scale*i.y;return(nt!==1||ot!==1)&&(a+=`scale(${nt}, ${ot})`),a||"none"}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(e,i,s,a){const{latestValues:c}=i;c[e]&&(s[e]=c[e],i.setStaticValue(e,0),a&&(a[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:i}=e.options;if(!i)return;const s=getOptimisedAppearId(i);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:c,layoutId:h}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(c||h))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(a)}function createProjectionNode({attachResizeListener:e,defaultParent:i,measureScroll:s,checkIsScrollRoot:a,resetTransform:c}){return class{constructor(st={},nt=i==null?void 0:i()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=st,this.root=nt?nt.root||nt:this,this.path=nt?[...nt.path,nt]:[],this.parent=nt,this.depth=nt?nt.depth+1:0;for(let ot=0;ot<this.path.length;ot++)this.path[ot].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(st,nt){return this.eventHandlers.has(st)||this.eventHandlers.set(st,new SubscriptionManager),this.eventHandlers.get(st).add(nt)}notifyListeners(st,...nt){const ot=this.eventHandlers.get(st);ot&&ot.notify(...nt)}hasListeners(st){return this.eventHandlers.has(st)}mount(st,nt=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(st),this.instance=st;const{layoutId:ot,layout:xt,visualElement:vt}=this.options;if(vt&&!vt.current&&vt.mount(st),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),nt&&(xt||ot)&&(this.isLayoutDirty=!0),e){let bt;const St=()=>this.root.updateBlockedByResize=!1;e(st,()=>{this.root.updateBlockedByResize=!0,bt&&bt(),bt=delay(St,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}ot&&this.root.registerSharedNode(ot,this),this.options.animate!==!1&&vt&&(ot||xt)&&this.addEventListener("didUpdate",({delta:bt,hasLayoutChanged:St,hasRelativeTargetChanged:Et,layout:Ct})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ht=this.options.transition||vt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:d,onLayoutAnimationComplete:b}=vt.getProps(),ft=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Ct)||Et,mt=!St&&Et;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||mt||St&&(ft||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(bt,mt);const _t={...getValueTransition(ht,"layout"),onPlay:d,onComplete:b};(vt.shouldReduceMotion||this.options.layoutRoot)&&(_t.delay=0,_t.type=!1),this.startAnimation(_t)}else St||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Ct})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const st=this.getStack();st&&st.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:st}=this.options;return st&&st.getProps().transformTemplate}willUpdate(st=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let vt=0;vt<this.path.length;vt++){const bt=this.path[vt];bt.shouldResetTransform=!0,bt.updateScroll("snapshot"),bt.options.layoutRoot&&bt.willUpdate(!1)}const{layoutId:nt,layout:ot}=this.options;if(nt===void 0&&!ot)return;const xt=this.getTransformTemplate();this.prevTransformTemplateValue=xt?xt(this.latestValues,""):void 0,this.updateSnapshot(),st&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const nt=time.now();frameData.delta=clamp(0,1e3/60,nt-frameData.timestamp),frameData.timestamp=nt,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let ot=0;ot<this.path.length;ot++)this.path[ot].updateScroll();const st=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:nt}=this.options;nt&&nt.notify("LayoutMeasure",this.layout.layoutBox,st?st.layoutBox:void 0)}updateScroll(st="measure"){let nt=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===st&&(nt=!1),nt){const ot=a(this.instance);this.scroll={animationId:this.root.animationId,phase:st,isRoot:ot,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:ot}}}resetTransform(){if(!c)return;const st=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,nt=this.projectionDelta&&!isDeltaZero(this.projectionDelta),ot=this.getTransformTemplate(),xt=ot?ot(this.latestValues,""):void 0,vt=xt!==this.prevTransformTemplateValue;st&&(nt||hasTransform(this.latestValues)||vt)&&(c(this.instance,xt),this.shouldResetTransform=!1,this.scheduleRender())}measure(st=!0){const nt=this.measurePageBox();let ot=this.removeElementScroll(nt);return st&&(ot=this.removeTransform(ot)),roundBox(ot),{animationId:this.root.animationId,measuredBox:nt,layoutBox:ot,latestValues:{},source:this.id}}measurePageBox(){var st;const{visualElement:nt}=this.options;if(!nt)return createBox();const ot=nt.measureViewportBox();if(!(((st=this.scroll)===null||st===void 0?void 0:st.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:vt}=this.root;vt&&(translateAxis(ot.x,vt.offset.x),translateAxis(ot.y,vt.offset.y))}return ot}removeElementScroll(st){var nt;const ot=createBox();if(copyBoxInto(ot,st),!((nt=this.scroll)===null||nt===void 0)&&nt.wasRoot)return ot;for(let xt=0;xt<this.path.length;xt++){const vt=this.path[xt],{scroll:bt,options:St}=vt;vt!==this.root&&bt&&St.layoutScroll&&(bt.wasRoot&&copyBoxInto(ot,st),translateAxis(ot.x,bt.offset.x),translateAxis(ot.y,bt.offset.y))}return ot}applyTransform(st,nt=!1){const ot=createBox();copyBoxInto(ot,st);for(let xt=0;xt<this.path.length;xt++){const vt=this.path[xt];!nt&&vt.options.layoutScroll&&vt.scroll&&vt!==vt.root&&transformBox(ot,{x:-vt.scroll.offset.x,y:-vt.scroll.offset.y}),hasTransform(vt.latestValues)&&transformBox(ot,vt.latestValues)}return hasTransform(this.latestValues)&&transformBox(ot,this.latestValues),ot}removeTransform(st){const nt=createBox();copyBoxInto(nt,st);for(let ot=0;ot<this.path.length;ot++){const xt=this.path[ot];if(!xt.instance||!hasTransform(xt.latestValues))continue;hasScale(xt.latestValues)&&xt.updateSnapshot();const vt=createBox(),bt=xt.measurePageBox();copyBoxInto(vt,bt),removeBoxTransforms(nt,xt.latestValues,xt.snapshot?xt.snapshot.layoutBox:void 0,vt)}return hasTransform(this.latestValues)&&removeBoxTransforms(nt,this.latestValues),nt}setTargetDelta(st){this.targetDelta=st,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(st){this.options={...this.options,...st,crossfade:st.crossfade!==void 0?st.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(st=!1){var nt;const ot=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=ot.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=ot.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=ot.isSharedProjectionDirty);const xt=!!this.resumingFrom||this!==ot;if(!(st||xt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((nt=this.parent)===null||nt===void 0)&&nt.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:bt,layoutId:St}=this.options;if(!(!this.layout||!(bt||St))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const Et=this.getClosestProjectingParent();Et&&Et.layout&&this.animationProgress!==1?(this.relativeParent=Et,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,Et.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const Et=this.getClosestProjectingParent();Et&&!!Et.resumingFrom==!!this.resumingFrom&&!Et.options.layoutScroll&&Et.target&&this.animationProgress!==1?(this.relativeParent=Et,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,Et.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var st;const nt=this.getLead(),ot=!!this.resumingFrom||this!==nt;let xt=!0;if((this.isProjectionDirty||!((st=this.parent)===null||st===void 0)&&st.isProjectionDirty)&&(xt=!1),ot&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(xt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(xt=!1),xt)return;const{layout:vt,layoutId:bt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(vt||bt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const St=this.treeScale.x,Et=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,ot),nt.layout&&!nt.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(nt.target=nt.layout.layoutBox,nt.targetWithTransforms=createBox());const{target:Ct}=nt;if(!Ct){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,Ct,this.latestValues),(this.treeScale.x!==St||this.treeScale.y!==Et||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Ct)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(st=!0){var nt;if((nt=this.options.visualElement)===null||nt===void 0||nt.scheduleRender(),st){const ot=this.getStack();ot&&ot.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(st,nt=!1){const ot=this.snapshot,xt=ot?ot.latestValues:{},vt={...this.latestValues},bt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!nt;const St=createBox(),Et=ot?ot.source:void 0,Ct=this.layout?this.layout.source:void 0,ht=Et!==Ct,d=this.getStack(),b=!d||d.members.length<=1,ft=!!(ht&&!b&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let mt;this.mixTargetDelta=_t=>{const tt=_t/1e3;mixAxisDelta(bt.x,st.x,tt),mixAxisDelta(bt.y,st.y,tt),this.setTargetDelta(bt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(St,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,St,tt),mt&&boxEquals(this.relativeTarget,mt)&&(this.isProjectionDirty=!1),mt||(mt=createBox()),copyBoxInto(mt,this.relativeTarget)),ht&&(this.animationValues=vt,mixValues(vt,xt,this.latestValues,tt,ft,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=tt},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(st){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...st,onUpdate:nt=>{this.mixTargetDelta(nt),st.onUpdate&&st.onUpdate(nt)},onComplete:()=>{st.onComplete&&st.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const st=this.getStack();st&&st.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const st=this.getLead();let{targetWithTransforms:nt,target:ot,layout:xt,latestValues:vt}=st;if(!(!nt||!ot||!xt)){if(this!==st&&this.layout&&xt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,xt.layoutBox)){ot=this.target||createBox();const bt=calcLength(this.layout.layoutBox.x);ot.x.min=st.target.x.min,ot.x.max=ot.x.min+bt;const St=calcLength(this.layout.layoutBox.y);ot.y.min=st.target.y.min,ot.y.max=ot.y.min+St}copyBoxInto(nt,ot),transformBox(nt,vt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,nt,vt)}}registerSharedNode(st,nt){this.sharedNodes.has(st)||this.sharedNodes.set(st,new NodeStack),this.sharedNodes.get(st).add(nt);const xt=nt.options.initialPromotionConfig;nt.promote({transition:xt?xt.transition:void 0,preserveFollowOpacity:xt&&xt.shouldPreserveFollowOpacity?xt.shouldPreserveFollowOpacity(nt):void 0})}isLead(){const st=this.getStack();return st?st.lead===this:!0}getLead(){var st;const{layoutId:nt}=this.options;return nt?((st=this.getStack())===null||st===void 0?void 0:st.lead)||this:this}getPrevLead(){var st;const{layoutId:nt}=this.options;return nt?(st=this.getStack())===null||st===void 0?void 0:st.prevLead:void 0}getStack(){const{layoutId:st}=this.options;if(st)return this.root.sharedNodes.get(st)}promote({needsReset:st,transition:nt,preserveFollowOpacity:ot}={}){const xt=this.getStack();xt&&xt.promote(this,ot),st&&(this.projectionDelta=void 0,this.needsReset=!0),nt&&this.setOptions({transition:nt})}relegate(){const st=this.getStack();return st?st.relegate(this):!1}resetSkewAndRotation(){const{visualElement:st}=this.options;if(!st)return;let nt=!1;const{latestValues:ot}=st;if((ot.z||ot.rotate||ot.rotateX||ot.rotateY||ot.rotateZ||ot.skewX||ot.skewY)&&(nt=!0),!nt)return;const xt={};ot.z&&resetDistortingTransform("z",st,xt,this.animationValues);for(let vt=0;vt<transformAxes.length;vt++)resetDistortingTransform(`rotate${transformAxes[vt]}`,st,xt,this.animationValues),resetDistortingTransform(`skew${transformAxes[vt]}`,st,xt,this.animationValues);st.render();for(const vt in xt)st.setStaticValue(vt,xt[vt]),this.animationValues&&(this.animationValues[vt]=xt[vt]);st.scheduleRender()}getProjectionStyles(st){var nt,ot;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const xt={visibility:""},vt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,xt.opacity="",xt.pointerEvents=resolveMotionValue(st==null?void 0:st.pointerEvents)||"",xt.transform=vt?vt(this.latestValues,""):"none",xt;const bt=this.getLead();if(!this.projectionDelta||!this.layout||!bt.target){const ht={};return this.options.layoutId&&(ht.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ht.pointerEvents=resolveMotionValue(st==null?void 0:st.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(ht.transform=vt?vt({},""):"none",this.hasProjected=!1),ht}const St=bt.animationValues||bt.latestValues;this.applyTransformsToTarget(),xt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,St),vt&&(xt.transform=vt(St,xt.transform));const{x:Et,y:Ct}=this.projectionDelta;xt.transformOrigin=`${Et.origin*100}% ${Ct.origin*100}% 0`,bt.animationValues?xt.opacity=bt===this?(ot=(nt=St.opacity)!==null&&nt!==void 0?nt:this.latestValues.opacity)!==null&&ot!==void 0?ot:1:this.preserveOpacity?this.latestValues.opacity:St.opacityExit:xt.opacity=bt===this?St.opacity!==void 0?St.opacity:"":St.opacityExit!==void 0?St.opacityExit:0;for(const ht in scaleCorrectors){if(St[ht]===void 0)continue;const{correct:d,applyTo:b}=scaleCorrectors[ht],ft=xt.transform==="none"?St[ht]:d(St[ht],bt);if(b){const mt=b.length;for(let _t=0;_t<mt;_t++)xt[b[_t]]=ft}else xt[ht]=ft}return this.options.layoutId&&(xt.pointerEvents=bt===this?resolveMotionValue(st==null?void 0:st.pointerEvents)||"":"none"),xt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(st=>{var nt;return(nt=st.currentAnimation)===null||nt===void 0?void 0:nt.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var i;const s=((i=e.resumeFrom)===null||i===void 0?void 0:i.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:c}=e.layout,{animationType:h}=e.options,st=s.source!==e.layout.source;h==="size"?eachAxis(bt=>{const St=st?s.measuredBox[bt]:s.layoutBox[bt],Et=calcLength(St);St.min=a[bt].min,St.max=St.min+Et}):shouldAnimatePositionOnly(h,s.layoutBox,a)&&eachAxis(bt=>{const St=st?s.measuredBox[bt]:s.layoutBox[bt],Et=calcLength(a[bt]);St.max=St.min+Et,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[bt].max=e.relativeTarget[bt].min+Et)});const nt=createDelta();calcBoxDelta(nt,a,s.layoutBox);const ot=createDelta();st?calcBoxDelta(ot,e.applyTransform(c,!0),s.measuredBox):calcBoxDelta(ot,a,s.layoutBox);const xt=!isDeltaZero(nt);let vt=!1;if(!e.resumeFrom){const bt=e.getClosestProjectingParent();if(bt&&!bt.resumeFrom){const{snapshot:St,layout:Et}=bt;if(St&&Et){const Ct=createBox();calcRelativePosition(Ct,s.layoutBox,St.layoutBox);const ht=createBox();calcRelativePosition(ht,a,Et.layoutBox),boxEqualsRounded(Ct,ht)||(vt=!0),bt.options.layoutRoot&&(e.relativeTarget=ht,e.relativeTargetOrigin=Ct,e.relativeParent=bt)}}}e.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:ot,layoutDelta:nt,hasLayoutChanged:xt,hasRelativeTargetChanged:vt})}else if(e.isLead()){const{onExitComplete:a}=e.options;a&&a()}e.options.transition=void 0}function propagateDirtyNodes(e){isDebug&&metrics.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:i}=e.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,i,s){e.translate=mixNumber$1(i.translate,0,s),e.scale=mixNumber$1(i.scale,1,s),e.origin=i.origin,e.originPoint=i.originPoint}function mixAxis(e,i,s,a){e.min=mixNumber$1(i.min,s.min,a),e.max=mixNumber$1(i.max,s.max,a)}function mixBox(e,i,s,a){mixAxis(e.x,i.x,s.x,a),mixAxis(e.y,i.y,s.y,a)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,i,s){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(i),aspectRatio(s),.2)}function checkNodeWasScrollRoot(e){var i;return e!==e.root&&((i=e.scroll)===null||i===void 0?void 0:i.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,i)=>addDomEvent(e,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,i)=>{e.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,i,s){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",s==="Start");const c="onHover"+s,h=a[c];h&&frame.postRender(()=>h(i,extractEventInfo(i)))}class HoverGesture extends Feature{mount(){const{current:i}=this.node;i&&(this.unmount=hover(i,s=>(handleHoverEvent(this.node,s,"Start"),a=>handleHoverEvent(this.node,a,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,i,s){const{props:a}=e;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",s==="Start");const c="onTap"+(s==="End"?"":s),h=a[c];h&&frame.postRender(()=>h(i,extractEventInfo(i)))}class PressGesture extends Feature{mount(){const{current:i}=this.node;i&&(this.unmount=press(i,s=>(handlePressEvent(this.node,s,"Start"),(a,{success:c})=>handlePressEvent(this.node,a,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const i=observerCallbacks.get(e.target);i&&i(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...i}){const s=e||document;observers.has(s)||observers.set(s,{});const a=observers.get(s),c=JSON.stringify(i);return a[c]||(a[c]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...i})),a[c]}function observeIntersection(e,i,s){const a=initIntersectionObserver(i);return observerCallbacks.set(e,s),a.observe(e),()=>{observerCallbacks.delete(e),a.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:s,margin:a,amount:c="some",once:h}=i,st={root:s?s.current:void 0,rootMargin:a,threshold:typeof c=="number"?c:thresholdNames[c]},nt=ot=>{const{isIntersecting:xt}=ot;if(this.isInView===xt||(this.isInView=xt,h&&!xt&&this.hasEnteredView))return;xt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",xt);const{onViewportEnter:vt,onViewportLeave:bt}=this.node.getProps(),St=xt?vt:bt;St&&St(ot)};return observeIntersection(this.node.current,st,nt)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(i,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:i={}}={}){return s=>e[s]!==i[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),i=()=>prefersReducedMotion.current=e.matches;e.addListener(i),i()}else prefersReducedMotion.current=!1}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),visualElementStore=new WeakMap;function updateMotionValuesFromProps(e,i,s){for(const a in i){const c=i[a],h=s[a];if(isMotionValue(c))e.addValue(a,c);else if(isMotionValue(h))e.addValue(a,motionValue(c,{owner:e}));else if(h!==c)if(e.hasValue(a)){const st=e.getValue(a);st.liveStyle===!0?st.jump(c):st.hasAnimated||st.set(c)}else{const st=e.getStaticValue(a);e.addValue(a,motionValue(st!==void 0?st:c,{owner:e}))}}for(const a in s)i[a]===void 0&&e.removeValue(a);return i}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(i,s,a){return{}}constructor({parent:i,props:s,presenceContext:a,reducedMotionConfig:c,blockInitialAnimation:h,visualState:st},nt={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Et=time.now();this.renderScheduledAt<Et&&(this.renderScheduledAt=Et,frame.render(this.render,!1,!0))};const{latestValues:ot,renderState:xt,onUpdate:vt}=st;this.onUpdate=vt,this.latestValues=ot,this.baseTarget={...ot},this.initialValues=s.initial?{...ot}:{},this.renderState=xt,this.parent=i,this.props=s,this.presenceContext=a,this.depth=i?i.depth+1:0,this.reducedMotionConfig=c,this.options=nt,this.blockInitialAnimation=!!h,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:bt,...St}=this.scrapeMotionValuesFromProps(s,{},this);for(const Et in St){const Ct=St[Et];ot[Et]!==void 0&&isMotionValue(Ct)&&Ct.set(ot[Et],!1)}}mount(i){this.current=i,visualElementStore.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(i=>i()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const i in this.events)this.events[i].clear();for(const i in this.features){const s=this.features[i];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(i,s){this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)();const a=transformProps.has(i),c=s.on("change",nt=>{this.latestValues[i]=nt,this.props.onUpdate&&frame.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),h=s.on("renderRequest",this.scheduleRender);let st;window.MotionCheckAppearSync&&(st=window.MotionCheckAppearSync(this,i,s)),this.valueSubscriptions.set(i,()=>{c(),h(),st&&st(),s.owner&&s.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in featureDefinitions){const s=featureDefinitions[i];if(!s)continue;const{isEnabled:a,Feature:c}=s;if(!this.features[i]&&c&&a(this.props)&&(this.features[i]=new c(this)),this.features[i]){const h=this.features[i];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,s){this.latestValues[i]=s}update(i,s){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<propEventHandlers.length;a++){const c=propEventHandlers[a];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const h="on"+c,st=i[h];st&&(this.propEventSubscriptions[c]=this.on(c,st))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(i,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(i),()=>s.variantChildren.delete(i)}addValue(i,s){const a=this.values.get(i);s!==a&&(a&&this.removeValue(i),this.bindToMotionValue(i,s),this.values.set(i,s),this.latestValues[i]=s.get())}removeValue(i){this.values.delete(i);const s=this.valueSubscriptions.get(i);s&&(s(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,s){if(this.props.values&&this.props.values[i])return this.props.values[i];let a=this.values.get(i);return a===void 0&&s!==void 0&&(a=motionValue(s===null?void 0:s,{owner:this}),this.addValue(i,a)),a}readValue(i,s){var a;let c=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:(a=this.getBaseTargetFromProps(this.props,i))!==null&&a!==void 0?a:this.readValueFromInstance(this.current,i,this.options);return c!=null&&(typeof c=="string"&&(isNumericalString(c)||isZeroValueString(c))?c=parseFloat(c):!findValueType(c)&&complex.test(s)&&(c=getAnimatableNone(i,s)),this.setBaseTarget(i,isMotionValue(c)?c.get():c)),isMotionValue(c)?c.get():c}setBaseTarget(i,s){this.baseTarget[i]=s}getBaseTarget(i){var s;const{initial:a}=this.props;let c;if(typeof a=="string"||typeof a=="object"){const st=resolveVariantFromProps(this.props,a,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);st&&(c=st[i])}if(a&&c!==void 0)return c;const h=this.getBaseTargetFromProps(this.props,i);return h!==void 0&&!isMotionValue(h)?h:this.initialValues[i]!==void 0&&c===void 0?void 0:this.baseTarget[i]}on(i,s){return this.events[i]||(this.events[i]=new SubscriptionManager),this.events[i].add(s)}notify(i,...s){this.events[i]&&this.events[i].notify(...s)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(i,s){return i.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(i,s){return i.style?i.style[s]:void 0}removeValueFromRenderState(i,{vars:s,style:a}){delete s[i],delete a[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;isMotionValue(i)&&(this.childSubscription=i.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function getComputedStyle(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(i,s){if(transformProps.has(s)){const a=getDefaultValueType(s);return a&&a.default||0}else{const a=getComputedStyle(i),c=(isCSSVariableName(s)?a.getPropertyValue(s):a[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(i,{transformPagePoint:s}){return measureViewportBox(i,s)}build(i,s,a){buildHTMLStyles(i,s,a.transformTemplate)}scrapeMotionValuesFromProps(i,s,a){return scrapeMotionValuesFromProps$1(i,s,a)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(i,s){return i[s]}readValueFromInstance(i,s){if(transformProps.has(s)){const a=getDefaultValueType(s);return a&&a.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),i.getAttribute(s)}scrapeMotionValuesFromProps(i,s,a){return scrapeMotionValuesFromProps(i,s,a)}build(i,s,a){buildSVGAttrs(i,s,this.isSVGTag,a.transformTemplate)}renderInstance(i,s,a,c){renderSVG(i,s,a,c)}mount(i){this.isSVGTag=isSVGTag(i.tagName),super.mount(i)}}const createDomVisualElement=(e,i)=>isSVGComponent(e)?new SVGVisualElement(i):new HTMLVisualElement(i,{allowProjection:e!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent),services=[{icon:Brain,title:"AI-Powered Drug Discovery",description:"Leverage advanced machine learning models to accelerate the identification of potential drug candidates."},{icon:Microscope,title:"Molecular Analysis",description:"Advanced analysis of molecular structures and properties using state-of-the-art computational methods."},{icon:Database,title:"Data-Driven Insights",description:"Transform complex biological data into actionable insights for drug development."},{icon:FlaskRound,title:"Virtual Screening",description:"Screen millions of compounds virtually to identify promising drug candidates."},{icon:Dna,title:"Structure Optimization",description:"Optimize molecular structures for improved drug-like properties and efficacy."},{icon:Atom,title:"3D Molecular Analysis",description:"3D Rendering of molecule in real-time with chemical and physical properties, suitable for redesigning compounds."}];function Home(){return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background",children:[jsxRuntimeExports.jsxs("section",{className:"relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[jsxRuntimeExports.jsx(Beaker,{className:"w-12 h-12 text-primary"}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-primary glow-text",children:"Pharm.AI"})]}),jsxRuntimeExports.jsxs("h2",{className:"text-5xl font-bold leading-tight",children:["Accelerating Drug Discovery",jsxRuntimeExports.jsx("br",{}),"with Artificial Intelligence"]}),jsxRuntimeExports.jsx("p",{className:"text-xl max-w-3xl mx-auto text-foreground/80",children:"Transform your drug discovery process with our cutting-edge AI platform. Discover potential drug candidates faster and more efficiently than ever before."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[jsxRuntimeExports.jsxs(Link,{to:"/register",className:"px-8 py-3 rounded-lg bg-primary text-primary-foreground font-medium hover:bg-primary/90 transition-colors inline-flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{children:"Get Started"}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]}),jsxRuntimeExports.jsx(Link,{to:"/login",className:"px-8 py-3 rounded-lg border border-primary/50 text-foreground font-medium hover:bg-primary/10 transition-colors",children:"Sign In"})]})]})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 -z-10 animated-gradient opacity-10"})]}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-background",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"glassmorphism p-8 md:p-12 text-center space-y-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold",children:"Our Vision"}),jsxRuntimeExports.jsx("p",{className:"text-lg max-w-4xl mx-auto text-foreground/80",children:"We envision a future where drug discovery is revolutionized through the power of artificial intelligence. Our mission is to accelerate the development of life-saving medications by combining cutting-edge AI technology with deep pharmaceutical expertise."})]})})}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-background",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Our Services"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-foreground/80",children:"Comprehensive AI solutions for modern drug discovery"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:services.map((e,i)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:i*.1},whileHover:{scale:1.05,boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.2)"},className:"glassmorphism p-6 space-y-4 transition-transform duration-150 ease-in-out cursor-pointer hover:bg-primary/10",children:[jsxRuntimeExports.jsx(e.icon,{className:"w-10 h-10 text-primary transition-colors duration-150 group-hover:text-primary/80"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-foreground/80",children:e.description})]},e.title))})]})})]})}function Login(){const[e,i]=reactExports.useState(""),[s,a]=reactExports.useState(""),{login:c,user:h}=useAuth(),st=useNavigate();if(h)return jsxRuntimeExports.jsx(Navigate,{to:"/dashboard"});const nt=async ot=>{ot.preventDefault();try{await c(e,s),st("/dashboard")}catch(xt){console.error("Login failed:",xt)}};return jsxRuntimeExports.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-background flex items-center justify-center p-4",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-md",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glassmorphism p-8 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(Beaker,{className:"w-8 h-8 text-primary"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-center",children:"Welcome Back"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:nt,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:e,onChange:ot=>i(ot.target.value),className:"w-full px-4 py-2 rounded-lg bg-background neon-border focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Enter your email",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:s,onChange:ot=>a(ot.target.value),className:"w-full px-4 py-2 rounded-lg bg-background neon-border focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Enter your password",required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full py-2 px-4 rounded-lg bg-primary text-primary-foreground font-medium hover:bg-primary/90 transition-colors",children:"Login"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-center",children:["Don't have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/register",className:"text-primary hover:underline",children:"Register"})]})]})})})}function Register(){const[e,i]=reactExports.useState(""),[s,a]=reactExports.useState(""),[c,h]=reactExports.useState(""),{login:st}=useAuth(),nt=useNavigate(),ot=async xt=>{if(xt.preventDefault(),s!==c){console.error("Passwords do not match");return}try{await st(e,s),nt("/")}catch(vt){console.error("Registration failed:",vt)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-md",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glassmorphism p-8 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(Beaker,{className:"w-8 h-8 text-primary"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-center",children:"Pharm.AI"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ot,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:e,onChange:xt=>i(xt.target.value),className:"w-full px-4 py-2 rounded-lg bg-background neon-border focus:ring-2 focus:ring-primary focus:outline-none",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:s,onChange:xt=>a(xt.target.value),className:"w-full px-4 py-2 rounded-lg bg-background neon-border focus:ring-2 focus:ring-primary focus:outline-none",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Confirm Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:c,onChange:xt=>h(xt.target.value),className:"w-full px-4 py-2 rounded-lg bg-background neon-border focus:ring-2 focus:ring-primary focus:outline-none",required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full py-2 px-4 rounded-lg bg-primary text-primary-foreground font-medium hover:bg-primary/90 transition-colors",children:"Register"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-center",children:["Already have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/login",className:"text-primary hover:underline",children:"Login"})]})]})})})}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(a,c,h,st,nt,ot){if(ot!==ReactPropTypesSecret){var xt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw xt.name="Invariant Violation",xt}}e.isRequired=e;function i(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:i,element:e,elementType:e,instanceOf:i,node:e,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function __awaiter(e,i,s,a){function c(h){return h instanceof s?h:new s(function(st){st(h)})}return new(s||(s=Promise))(function(h,st){function nt(vt){try{xt(a.next(vt))}catch(bt){st(bt)}}function ot(vt){try{xt(a.throw(vt))}catch(bt){st(bt)}}function xt(vt){vt.done?h(vt.value):c(vt.value).then(nt,ot)}xt((a=a.apply(e,i||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const COMMON_MIME_TYPES=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(e,i,s){const a=withMimeType(e),{webkitRelativePath:c}=e,h=typeof i=="string"?i:typeof c=="string"&&c.length>0?c:`./${e.name}`;return typeof a.path!="string"&&setObjProp(a,"path",h),setObjProp(a,"relativePath",h),a}function withMimeType(e){const{name:i}=e;if(i&&i.lastIndexOf(".")!==-1&&!e.type){const a=i.split(".").pop().toLowerCase(),c=COMMON_MIME_TYPES.get(a);c&&Object.defineProperty(e,"type",{value:c,writable:!1,configurable:!1,enumerable:!0})}return e}function setObjProp(e,i,s){Object.defineProperty(e,i,{value:s,writable:!1,configurable:!1,enumerable:!0})}const FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(e){return __awaiter(this,void 0,void 0,function*(){return isObject(e)&&isDataTransfer(e.dataTransfer)?getDataTransferFiles(e.dataTransfer,e.type):isChangeEvt(e)?getInputFiles(e):Array.isArray(e)&&e.every(i=>"getFile"in i&&typeof i.getFile=="function")?getFsHandleFiles(e):[]})}function isDataTransfer(e){return isObject(e)}function isChangeEvt(e){return isObject(e)&&isObject(e.target)}function isObject(e){return typeof e=="object"&&e!==null}function getInputFiles(e){return fromList(e.target.files).map(i=>toFileWithPath(i))}function getFsHandleFiles(e){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(e.map(s=>s.getFile()))).map(s=>toFileWithPath(s))})}function getDataTransferFiles(e,i){return __awaiter(this,void 0,void 0,function*(){if(e.items){const s=fromList(e.items).filter(c=>c.kind==="file");if(i!=="drop")return s;const a=yield Promise.all(s.map(toFilePromises));return noIgnoredFiles(flatten(a))}return noIgnoredFiles(fromList(e.files).map(s=>toFileWithPath(s)))})}function noIgnoredFiles(e){return e.filter(i=>FILES_TO_IGNORE.indexOf(i.name)===-1)}function fromList(e){if(e===null)return[];const i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a)}return i}function toFilePromises(e){if(typeof e.webkitGetAsEntry!="function")return fromDataTransferItem(e);const i=e.webkitGetAsEntry();return i&&i.isDirectory?fromDirEntry(i):fromDataTransferItem(e,i)}function flatten(e){return e.reduce((i,s)=>[...i,...Array.isArray(s)?flatten(s):[s]],[])}function fromDataTransferItem(e,i){return __awaiter(this,void 0,void 0,function*(){var s;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const h=yield e.getAsFileSystemHandle();if(h===null)throw new Error(`${e} is not a File`);if(h!==void 0){const st=yield h.getFile();return st.handle=h,toFileWithPath(st)}}const a=e.getAsFile();if(!a)throw new Error(`${e} is not a File`);return toFileWithPath(a,(s=i==null?void 0:i.fullPath)!==null&&s!==void 0?s:void 0)})}function fromEntry(e){return __awaiter(this,void 0,void 0,function*(){return e.isDirectory?fromDirEntry(e):fromFileEntry(e)})}function fromDirEntry(e){const i=e.createReader();return new Promise((s,a)=>{const c=[];function h(){i.readEntries(st=>__awaiter(this,void 0,void 0,function*(){if(st.length){const nt=Promise.all(st.map(fromEntry));c.push(nt),h()}else try{const nt=yield Promise.all(c);s(nt)}catch(nt){a(nt)}}),st=>{a(st)})}h()})}function fromFileEntry(e){return __awaiter(this,void 0,void 0,function*(){return new Promise((i,s)=>{e.file(a=>{const c=toFileWithPath(a,e.fullPath);i(c)},a=>{s(a)})})})}var _default=function(e,i){if(e&&i){var s=Array.isArray(i)?i:i.split(",");if(s.length===0)return!0;var a=e.name||"",c=(e.type||"").toLowerCase(),h=c.replace(/\/.*$/,"");return s.some(function(st){var nt=st.trim().toLowerCase();return nt.charAt(0)==="."?a.toLowerCase().endsWith(nt):nt.endsWith("/*")?h===nt.replace(/\/.*$/,""):c===nt})}return!0};function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function ownKeys$1(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),s.push.apply(s,a)}return s}function _objectSpread$1(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(s),!0).forEach(function(a){_defineProperty$1(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys$1(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _defineProperty$1(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function _slicedToArray$1(e,i){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,i)||_unsupportedIterableToArray$1(e,i)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(e,i){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$1(e,i)}}function _arrayLikeToArray$1(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=e[s];return a}function _iterableToArrayLimit$1(e,i){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a=[],c=!0,h=!1,st,nt;try{for(s=s.call(e);!(c=(st=s.next()).done)&&(a.push(st.value),!(i&&a.length===i));c=!0);}catch(ot){h=!0,nt=ot}finally{try{!c&&s.return!=null&&s.return()}finally{if(h)throw nt}}return a}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=i.split(","),a=s.length>1?"one of ".concat(s.join(", ")):s[0];return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(a)}},getTooLargeRejectionErr=function(i){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(i," ").concat(i===1?"byte":"bytes")}},getTooSmallRejectionErr=function(i){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(i," ").concat(i===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(e,i){var s=e.type==="application/x-moz-file"||accepts(e,i);return[s,s?null:getInvalidTypeRejectionErr(i)]}function fileMatchSize(e,i,s){if(isDefined(e.size))if(isDefined(i)&&isDefined(s)){if(e.size>s)return[!1,getTooLargeRejectionErr(s)];if(e.size<i)return[!1,getTooSmallRejectionErr(i)]}else{if(isDefined(i)&&e.size<i)return[!1,getTooSmallRejectionErr(i)];if(isDefined(s)&&e.size>s)return[!1,getTooLargeRejectionErr(s)]}return[!0,null]}function isDefined(e){return e!=null}function allFilesAccepted(e){var i=e.files,s=e.accept,a=e.minSize,c=e.maxSize,h=e.multiple,st=e.maxFiles,nt=e.validator;return!h&&i.length>1||h&&st>=1&&i.length>st?!1:i.every(function(ot){var xt=fileAccepted(ot,s),vt=_slicedToArray$1(xt,1),bt=vt[0],St=fileMatchSize(ot,a,c),Et=_slicedToArray$1(St,1),Ct=Et[0],ht=nt?nt(ot):null;return bt&&Ct&&!ht})}function isPropagationStopped(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function isEvtWithFiles(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(i){return i==="Files"||i==="application/x-moz-file"}):!!e.target&&!!e.target.files}function onDocumentDragOver(e){e.preventDefault()}function isIe(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function isEdge(e){return e.indexOf("Edge/")!==-1}function isIeOrEdge(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(e)||isEdge(e)}function composeEventHandlers(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return function(a){for(var c=arguments.length,h=new Array(c>1?c-1:0),st=1;st<c;st++)h[st-1]=arguments[st];return i.some(function(nt){return!isPropagationStopped(a)&&nt&&nt.apply(void 0,[a].concat(h)),isPropagationStopped(a)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(e){if(isDefined(e)){var i=Object.entries(e).filter(function(s){var a=_slicedToArray$1(s,2),c=a[0],h=a[1],st=!0;return isMIMEType(c)||(console.warn('Skipped "'.concat(c,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),st=!1),(!Array.isArray(h)||!h.every(isExt))&&(console.warn('Skipped "'.concat(c,'" because an invalid file extension was provided.')),st=!1),st}).reduce(function(s,a){var c=_slicedToArray$1(a,2),h=c[0],st=c[1];return _objectSpread$1(_objectSpread$1({},s),{},_defineProperty$1({},h,st))},{});return[{description:"Files",accept:i}]}return e}function acceptPropAsAcceptAttr(e){if(isDefined(e))return Object.entries(e).reduce(function(i,s){var a=_slicedToArray$1(s,2),c=a[0],h=a[1];return[].concat(_toConsumableArray$1(i),[c],_toConsumableArray$1(h))},[]).filter(function(i){return isMIMEType(i)||isExt(i)}).join(",")}function isAbort(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function isSecurityError(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function isMIMEType(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function isExt(e){return/^.*\.[\w]+$/.test(e)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,i){return _arrayWithHoles(e)||_iterableToArrayLimit(e,i)||_unsupportedIterableToArray(e,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(e,i){if(e){if(typeof e=="string")return _arrayLikeToArray(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(e,i)}}function _arrayLikeToArray(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=e[s];return a}function _iterableToArrayLimit(e,i){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a=[],c=!0,h=!1,st,nt;try{for(s=s.call(e);!(c=(st=s.next()).done)&&(a.push(st.value),!(i&&a.length===i));c=!0);}catch(ot){h=!0,nt=ot}finally{try{!c&&s.return!=null&&s.return()}finally{if(h)throw nt}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),s.push.apply(s,a)}return s}function _objectSpread(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _defineProperty(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function _objectWithoutProperties(e,i){if(e==null)return{};var s=_objectWithoutPropertiesLoose(e,i),a,c;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(c=0;c<h.length;c++)a=h[c],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function _objectWithoutPropertiesLoose(e,i){if(e==null)return{};var s={},a=Object.keys(e),c,h;for(h=0;h<a.length;h++)c=a[h],!(i.indexOf(c)>=0)&&(s[c]=e[c]);return s}var Dropzone=reactExports.forwardRef(function(e,i){var s=e.children,a=_objectWithoutProperties(e,_excluded),c=useDropzone(a),h=c.open,st=_objectWithoutProperties(c,_excluded2);return reactExports.useImperativeHandle(i,function(){return{open:h}},[h]),o.createElement(reactExports.Fragment,null,s(_objectSpread(_objectSpread({},st),{},{open:h})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=_objectSpread(_objectSpread({},defaultProps),e),s=i.accept,a=i.disabled,c=i.getFilesFromEvent,h=i.maxSize,st=i.minSize,nt=i.multiple,ot=i.maxFiles,xt=i.onDragEnter,vt=i.onDragLeave,bt=i.onDragOver,St=i.onDrop,Et=i.onDropAccepted,Ct=i.onDropRejected,ht=i.onFileDialogCancel,d=i.onFileDialogOpen,b=i.useFsAccessApi,ft=i.autoFocus,mt=i.preventDropOnDocument,_t=i.noClick,tt=i.noKeyboard,gt=i.noDrag,wt=i.noDragEventsBubbling,yt=i.onError,Tt=i.validator,Mt=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(s)},[s]),Pt=reactExports.useMemo(function(){return pickerOptionsFromAccept(s)},[s]),It=reactExports.useMemo(function(){return typeof d=="function"?d:noop},[d]),Lt=reactExports.useMemo(function(){return typeof ht=="function"?ht:noop},[ht]),zt=reactExports.useRef(null),jt=reactExports.useRef(null),Nt=reactExports.useReducer(reducer,initialState),kt=_slicedToArray(Nt,2),Ot=kt[0],Bt=kt[1],Ut=Ot.isFocused,Ft=Ot.isFileDialogActive,Wt=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&b&&canUseFileSystemAccessAPI()),_i=function(){!Wt.current&&Ft&&setTimeout(function(){if(jt.current){var Ln=jt.current.files;Ln.length||(Bt({type:"closeDialog"}),Lt())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",_i,!1),function(){window.removeEventListener("focus",_i,!1)}},[jt,Ft,Lt,Wt]);var Qt=reactExports.useRef([]),on=function(Ln){zt.current&&zt.current.contains(Ln.target)||(Ln.preventDefault(),Qt.current=[])};reactExports.useEffect(function(){return mt&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",on,!1)),function(){mt&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",on))}},[zt,mt]),reactExports.useEffect(function(){return!a&&ft&&zt.current&&zt.current.focus(),function(){}},[zt,ft,a]);var nn=reactExports.useCallback(function(cn){yt?yt(cn):console.error(cn)},[yt]),dn=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),kn(cn),Qt.current=[].concat(_toConsumableArray(Qt.current),[cn.target]),isEvtWithFiles(cn)&&Promise.resolve(c(cn)).then(function(Ln){if(!(isPropagationStopped(cn)&&!wt)){var Fn=Ln.length,$t=Fn>0&&allFilesAccepted({files:Ln,accept:Mt,minSize:st,maxSize:h,multiple:nt,maxFiles:ot,validator:Tt}),Xt=Fn>0&&!$t;Bt({isDragAccept:$t,isDragReject:Xt,isDragActive:!0,type:"setDraggedFiles"}),xt&&xt(cn)}}).catch(function(Ln){return nn(Ln)})},[c,xt,nn,wt,Mt,st,h,nt,ot,Tt]),tn=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),kn(cn);var Ln=isEvtWithFiles(cn);if(Ln&&cn.dataTransfer)try{cn.dataTransfer.dropEffect="copy"}catch{}return Ln&&bt&&bt(cn),!1},[bt,wt]),rn=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),kn(cn);var Ln=Qt.current.filter(function($t){return zt.current&&zt.current.contains($t)}),Fn=Ln.indexOf(cn.target);Fn!==-1&&Ln.splice(Fn,1),Qt.current=Ln,!(Ln.length>0)&&(Bt({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(cn)&&vt&&vt(cn))},[zt,vt,wt]),En=reactExports.useCallback(function(cn,Ln){var Fn=[],$t=[];cn.forEach(function(Xt){var Zt=fileAccepted(Xt,Mt),mn=_slicedToArray(Zt,2),an=mn[0],Rn=mn[1],Cn=fileMatchSize(Xt,st,h),Gt=_slicedToArray(Cn,2),un=Gt[0],yn=Gt[1],Mn=Tt?Tt(Xt):null;if(an&&un&&!Mn)Fn.push(Xt);else{var ln=[Rn,yn];Mn&&(ln=ln.concat(Mn)),$t.push({file:Xt,errors:ln.filter(function(wn){return wn})})}}),(!nt&&Fn.length>1||nt&&ot>=1&&Fn.length>ot)&&(Fn.forEach(function(Xt){$t.push({file:Xt,errors:[TOO_MANY_FILES_REJECTION]})}),Fn.splice(0)),Bt({acceptedFiles:Fn,fileRejections:$t,isDragReject:$t.length>0,type:"setFiles"}),St&&St(Fn,$t,Ln),$t.length>0&&Ct&&Ct($t,Ln),Fn.length>0&&Et&&Et(Fn,Ln)},[Bt,nt,Mt,st,h,ot,St,Et,Ct,Tt]),bn=reactExports.useCallback(function(cn){cn.preventDefault(),cn.persist(),kn(cn),Qt.current=[],isEvtWithFiles(cn)&&Promise.resolve(c(cn)).then(function(Ln){isPropagationStopped(cn)&&!wt||En(Ln,cn)}).catch(function(Ln){return nn(Ln)}),Bt({type:"reset"})},[c,En,nn,wt]),Dn=reactExports.useCallback(function(){if(Wt.current){Bt({type:"openDialog"}),It();var cn={multiple:nt,types:Pt};window.showOpenFilePicker(cn).then(function(Ln){return c(Ln)}).then(function(Ln){En(Ln,null),Bt({type:"closeDialog"})}).catch(function(Ln){isAbort(Ln)?(Lt(Ln),Bt({type:"closeDialog"})):isSecurityError(Ln)?(Wt.current=!1,jt.current?(jt.current.value=null,jt.current.click()):nn(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):nn(Ln)});return}jt.current&&(Bt({type:"openDialog"}),It(),jt.current.value=null,jt.current.click())},[Bt,It,Lt,b,En,nn,Pt,nt]),hn=reactExports.useCallback(function(cn){!zt.current||!zt.current.isEqualNode(cn.target)||(cn.key===" "||cn.key==="Enter"||cn.keyCode===32||cn.keyCode===13)&&(cn.preventDefault(),Dn())},[zt,Dn]),en=reactExports.useCallback(function(){Bt({type:"focus"})},[]),xn=reactExports.useCallback(function(){Bt({type:"blur"})},[]),Pn=reactExports.useCallback(function(){_t||(isIeOrEdge()?setTimeout(Dn,0):Dn())},[_t,Dn]),In=function(Ln){return a?null:Ln},Nn=function(Ln){return tt?null:In(Ln)},Un=function(Ln){return gt?null:In(Ln)},kn=function(Ln){wt&&Ln.stopPropagation()},jn=reactExports.useMemo(function(){return function(){var cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ln=cn.refKey,Fn=Ln===void 0?"ref":Ln,$t=cn.role,Xt=cn.onKeyDown,Zt=cn.onFocus,mn=cn.onBlur,an=cn.onClick,Rn=cn.onDragEnter,Cn=cn.onDragOver,Gt=cn.onDragLeave,un=cn.onDrop,yn=_objectWithoutProperties(cn,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:Nn(composeEventHandlers(Xt,hn)),onFocus:Nn(composeEventHandlers(Zt,en)),onBlur:Nn(composeEventHandlers(mn,xn)),onClick:In(composeEventHandlers(an,Pn)),onDragEnter:Un(composeEventHandlers(Rn,dn)),onDragOver:Un(composeEventHandlers(Cn,tn)),onDragLeave:Un(composeEventHandlers(Gt,rn)),onDrop:Un(composeEventHandlers(un,bn)),role:typeof $t=="string"&&$t!==""?$t:"presentation"},Fn,zt),!a&&!tt?{tabIndex:0}:{}),yn)}},[zt,hn,en,xn,Pn,dn,tn,rn,bn,tt,gt,a]),zn=reactExports.useCallback(function(cn){cn.stopPropagation()},[]),On=reactExports.useMemo(function(){return function(){var cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ln=cn.refKey,Fn=Ln===void 0?"ref":Ln,$t=cn.onChange,Xt=cn.onClick,Zt=_objectWithoutProperties(cn,_excluded4),mn=_defineProperty({accept:Mt,multiple:nt,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:In(composeEventHandlers($t,bn)),onClick:In(composeEventHandlers(Xt,zn)),tabIndex:-1},Fn,jt);return _objectSpread(_objectSpread({},mn),Zt)}},[jt,s,nt,bn,a]);return _objectSpread(_objectSpread({},Ot),{},{isFocused:Ut&&!a,getRootProps:jn,getInputProps:On,rootRef:zt,inputRef:jt,open:In(Dn)})}function reducer(e,i){switch(i.type){case"focus":return _objectSpread(_objectSpread({},e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},e),{},{isDragActive:i.isDragActive,isDragAccept:i.isDragAccept,isDragReject:i.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},e),{},{acceptedFiles:i.acceptedFiles,fileRejections:i.fileRejections,isDragReject:i.isDragReject});case"reset":return _objectSpread({},initialState);default:return e}}function noop(){}function DrugTargetInteraction({onFileUpload:e}){const i=reactExports.useCallback(h=>{h.length>0&&e(h[0])},[e]),{getRootProps:s,getInputProps:a,isDragActive:c}=useDropzone({onDrop:i,accept:{"text/csv":[".csv"]},multiple:!1});return jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.01},whileTap:{scale:.99},className:`border-2 border-dashed rounded-lg p-8 text-center ${c?"border-primary":"border-border"}`,...s(),children:[jsxRuntimeExports.jsx("input",{...a()}),jsxRuntimeExports.jsx(Upload,{className:"mx-auto h-12 w-12 text-primary mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-lg mb-2",children:c?"Drop your CSV file here":"Drop your CSV file here or click to browse"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-foreground/60",children:"Supports CSV files containing molecular data"})]})}var _3Dmol={exports:{}};/*!
 * 3dmol v2.4.2
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */(function(module,exports){(function(i,s){module.exports=s()})(commonjsGlobal,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":(e,i,s)=>{s.r(i),s.d(i,{IOBuffer:()=>nt});var a=s("./node_modules/iobuffer/lib-esm/text.browser.js");const c=1024*8,h=(()=>{const ot=new Uint8Array(4),xt=new Uint32Array(ot.buffer);return!((xt[0]=1)&ot[0])})(),st={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class nt{constructor(xt=c,vt={}){let bt=!1;typeof xt=="number"?xt=new ArrayBuffer(xt):(bt=!0,this.lastWrittenByte=xt.byteLength);const St=vt.offset?vt.offset>>>0:0,Et=xt.byteLength-St;let Ct=St;(ArrayBuffer.isView(xt)||xt instanceof nt)&&(xt.byteLength!==xt.buffer.byteLength&&(Ct=xt.byteOffset+St),xt=xt.buffer),bt?this.lastWrittenByte=Et:this.lastWrittenByte=0,this.buffer=xt,this.length=Et,this.byteLength=Et,this.byteOffset=Ct,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Ct,Et),this._mark=0,this._marks=[]}available(xt=1){return this.offset+xt<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(xt=1){return this.offset+=xt,this}back(xt=1){return this.offset-=xt,this}seek(xt){return this.offset=xt,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const xt=this._marks.pop();if(xt===void 0)throw new Error("Mark stack empty");return this.seek(xt),this}rewind(){return this.offset=0,this}ensureAvailable(xt=1){if(!this.available(xt)){const bt=(this.offset+xt)*2,St=new Uint8Array(bt);St.set(new Uint8Array(this.buffer)),this.buffer=St.buffer,this.length=this.byteLength=bt,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(xt=1){return this.readArray(xt,"uint8")}readArray(xt,vt){const bt=st[vt].BYTES_PER_ELEMENT*xt,St=this.byteOffset+this.offset,Et=this.buffer.slice(St,St+bt);if(this.littleEndian===h&&vt!=="uint8"&&vt!=="int8"){const ht=new Uint8Array(this.buffer.slice(St,St+bt));ht.reverse();const d=new st[vt](ht.buffer);return this.offset+=bt,d.reverse(),d}const Ct=new st[vt](Et);return this.offset+=bt,Ct}readInt16(){const xt=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,xt}readUint16(){const xt=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,xt}readInt32(){const xt=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,xt}readUint32(){const xt=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,xt}readFloat32(){const xt=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,xt}readFloat64(){const xt=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,xt}readBigInt64(){const xt=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,xt}readBigUint64(){const xt=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,xt}readChar(){return String.fromCharCode(this.readInt8())}readChars(xt=1){let vt="";for(let bt=0;bt<xt;bt++)vt+=this.readChar();return vt}readUtf8(xt=1){return(0,a.decode)(this.readBytes(xt))}decodeText(xt=1,vt="utf-8"){return(0,a.decode)(this.readBytes(xt),vt)}writeBoolean(xt){return this.writeUint8(xt?255:0),this}writeInt8(xt){return this.ensureAvailable(1),this._data.setInt8(this.offset++,xt),this._updateLastWrittenByte(),this}writeUint8(xt){return this.ensureAvailable(1),this._data.setUint8(this.offset++,xt),this._updateLastWrittenByte(),this}writeByte(xt){return this.writeUint8(xt)}writeBytes(xt){this.ensureAvailable(xt.length);for(let vt=0;vt<xt.length;vt++)this._data.setUint8(this.offset++,xt[vt]);return this._updateLastWrittenByte(),this}writeInt16(xt){return this.ensureAvailable(2),this._data.setInt16(this.offset,xt,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(xt){return this.ensureAvailable(2),this._data.setUint16(this.offset,xt,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(xt){return this.ensureAvailable(4),this._data.setInt32(this.offset,xt,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(xt){return this.ensureAvailable(4),this._data.setUint32(this.offset,xt,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(xt){return this.ensureAvailable(4),this._data.setFloat32(this.offset,xt,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(xt){return this.ensureAvailable(8),this._data.setFloat64(this.offset,xt,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(xt){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,xt,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(xt){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,xt,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(xt){return this.writeUint8(xt.charCodeAt(0))}writeChars(xt){for(let vt=0;vt<xt.length;vt++)this.writeUint8(xt.charCodeAt(vt));return this}writeUtf8(xt){return this.writeBytes((0,a.encode)(xt))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},"./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js":function(){(function(e){if(e.TextEncoder&&e.TextDecoder)return!1;function i(a="utf-8"){if(a!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${a}') is invalid.`)}Object.defineProperty(i.prototype,"encoding",{value:"utf-8"}),i.prototype.encode=function(a,c={stream:!1}){if(c.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let h=0;const st=a.length;let nt=0,ot=Math.max(32,st+(st>>1)+7),xt=new Uint8Array(ot>>3<<3);for(;h<st;){let vt=a.charCodeAt(h++);if(vt>=55296&&vt<=56319){if(h<st){const bt=a.charCodeAt(h);(bt&64512)===56320&&(++h,vt=((vt&1023)<<10)+(bt&1023)+65536)}if(vt>=55296&&vt<=56319)continue}if(nt+4>xt.length){ot+=8,ot*=1+h/a.length*2,ot=ot>>3<<3;const bt=new Uint8Array(ot);bt.set(xt),xt=bt}if(vt&4294967168)if(!(vt&4294965248))xt[nt++]=vt>>6&31|192;else if(!(vt&4294901760))xt[nt++]=vt>>12&15|224,xt[nt++]=vt>>6&63|128;else if(!(vt&4292870144))xt[nt++]=vt>>18&7|240,xt[nt++]=vt>>12&63|128,xt[nt++]=vt>>6&63|128;else continue;else{xt[nt++]=vt;continue}xt[nt++]=vt&63|128}return xt.slice(0,nt)};function s(a="utf-8",c={fatal:!1}){if(a!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${a}') is invalid.`);if(c.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(s.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(s.prototype,"fatal",{value:!1}),Object.defineProperty(s.prototype,"ignoreBOM",{value:!1}),s.prototype.decode=function(a,c={stream:!1}){if(c.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const h=new Uint8Array(a);let st=0;const nt=h.length,ot=[];for(;st<nt;){const xt=h[st++];if(xt===0)break;if(!(xt&128))ot.push(xt);else if((xt&224)===192){const vt=h[st++]&63;ot.push((xt&31)<<6|vt)}else if((xt&240)===224){const vt=h[st++]&63,bt=h[st++]&63;ot.push((xt&31)<<12|vt<<6|bt)}else if((xt&248)===240){const vt=h[st++]&63,bt=h[st++]&63,St=h[st++]&63;let Et=(xt&7)<<18|vt<<12|bt<<6|St;Et>65535&&(Et-=65536,ot.push(Et>>>10&1023|55296),Et=56320|Et&1023),ot.push(Et)}}return String.fromCharCode.apply(null,ot)},e.TextEncoder=i,e.TextDecoder=s})(typeof window<"u"?window:typeof self<"u"?self:this)},"./node_modules/iobuffer/lib-esm/text.browser.js":(e,i,s)=>{s.r(i),s.d(i,{decode:()=>a,encode:()=>h}),s("./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js");function a(st,nt="utf8"){return new TextDecoder(nt).decode(st)}const c=new TextEncoder;function h(st){return c.encode(st)}},"./node_modules/netcdfjs/lib-esm/data.js":(e,i,s)=>{s.r(i),s.d(i,{nonRecord:()=>c,record:()=>h});var a=s("./node_modules/netcdfjs/lib-esm/types.js");function c(st,nt){const ot=(0,a.str2num)(nt.type),xt=nt.size/(0,a.num2bytes)(ot),vt=new Array(xt);for(let bt=0;bt<xt;bt++)vt[bt]=(0,a.readType)(st,ot,1);return vt}function h(st,nt,ot){const xt=(0,a.str2num)(nt.type),vt=nt.size?nt.size/(0,a.num2bytes)(xt):1,bt=ot.length,St=new Array(bt),Et=ot.recordStep;if(Et)for(let Ct=0;Ct<bt;Ct++){const ht=st.offset;St[Ct]=(0,a.readType)(st,xt,vt),st.seek(ht+Et)}else throw new Error("recordDimension.recordStep is undefined");return St}},"./node_modules/netcdfjs/lib-esm/header.js":(e,i,s)=>{s.r(i),s.d(i,{header:()=>vt});var a=s("./node_modules/netcdfjs/lib-esm/types.js"),c=s("./node_modules/netcdfjs/lib-esm/utils.js");const h=0,st=10,nt=11,ot=12,xt=0;function vt(Ct,ht){const d={version:ht},b={length:Ct.readUint32()},ft=bt(Ct);Array.isArray(ft)||(b.id=ft.recordId,b.name=ft.recordName,d.dimensions=ft.dimensions),d.globalAttributes=St(Ct);const mt=Et(Ct,b==null?void 0:b.id,ht);return Array.isArray(mt)||(d.variables=mt.variables,b.recordStep=mt.recordStep),d.recordDimension=b,d}function bt(Ct){const ht={};let d,b;const ft=Ct.readUint32();let mt;if(ft===h)return(0,c.notNetcdf)(Ct.readUint32()!==h,"wrong empty tag for list of dimensions"),[];{(0,c.notNetcdf)(ft!==st,"wrong tag for list of dimensions");const _t=Ct.readUint32();mt=new Array(_t);for(let tt=0;tt<_t;tt++){const gt=(0,c.readName)(Ct),wt=Ct.readUint32();wt===xt&&(d=tt,b=gt),mt[tt]={name:gt,size:wt}}}return d!==void 0&&(ht.recordId=d),b!==void 0&&(ht.recordName=b),ht.dimensions=mt,ht}function St(Ct){const ht=Ct.readUint32();let d;if(ht===h)return(0,c.notNetcdf)(Ct.readUint32()!==h,"wrong empty tag for list of attributes"),[];{(0,c.notNetcdf)(ht!==ot,"wrong tag for list of attributes");const b=Ct.readUint32();d=new Array(b);for(let ft=0;ft<b;ft++){const mt=(0,c.readName)(Ct),_t=Ct.readUint32();(0,c.notNetcdf)(_t<1||_t>6,`non valid type ${_t}`);const tt=Ct.readUint32(),gt=(0,a.readType)(Ct,_t,tt);(0,c.padding)(Ct),d[ft]={name:mt,type:(0,a.num2str)(_t),value:gt}}}return d}function Et(Ct,ht,d){const b=Ct.readUint32();let ft=0,mt;if(b===h)return(0,c.notNetcdf)(Ct.readUint32()!==h,"wrong empty tag for list of variables"),[];{(0,c.notNetcdf)(b!==nt,"wrong tag for list of variables");const _t=Ct.readUint32();mt=new Array(_t);for(let tt=0;tt<_t;tt++){const gt=(0,c.readName)(Ct),wt=Ct.readUint32(),yt=new Array(wt);for(let zt=0;zt<wt;zt++)yt[zt]=Ct.readUint32();const Tt=St(Ct),Mt=Ct.readUint32();(0,c.notNetcdf)(Mt<1&&Mt>6,`non valid type ${Mt}`);const Pt=Ct.readUint32();let It=Ct.readUint32();d===2&&((0,c.notNetcdf)(It>0,"offsets larger than 4GB not supported"),It=Ct.readUint32());let Lt=!1;typeof ht<"u"&&yt[0]===ht&&(ft+=Pt,Lt=!0),mt[tt]={name:gt,dimensions:yt,attributes:Tt,type:(0,a.num2str)(Mt),size:Pt,offset:It,record:Lt}}}return{variables:mt,recordStep:ft}}},"./node_modules/netcdfjs/lib-esm/index.js":(e,i,s)=>{s.r(i),s.d(i,{NetCDFReader:()=>a.NetCDFReader});var a=s("./node_modules/netcdfjs/lib-esm/parser.js")},"./node_modules/netcdfjs/lib-esm/parser.js":(e,i,s)=>{s.r(i),s.d(i,{NetCDFReader:()=>ot});var a=s("./node_modules/iobuffer/lib-esm/IOBuffer.js"),c=s("./node_modules/netcdfjs/lib-esm/data.js"),h=s("./node_modules/netcdfjs/lib-esm/header.js"),st=s("./node_modules/netcdfjs/lib-esm/toString.js"),nt=s("./node_modules/netcdfjs/lib-esm/utils.js");class ot{constructor(vt){this.toString=st.toString;const bt=new a.IOBuffer(vt);bt.setBigEndian(),(0,nt.notNetcdf)(bt.readChars(3)!=="CDF","should start with CDF");const St=bt.readByte();(0,nt.notNetcdf)(St>2,"unknown version"),this.header=(0,h.header)(bt,St),this.buffer=bt}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(vt){const bt=this.globalAttributes.find(St=>St.name===vt);return bt?bt.value:null}getDataVariableAsString(vt){const bt=this.getDataVariable(vt);return bt?bt.join(""):null}get variables(){return this.header.variables}getDataVariable(vt){let bt;if(typeof vt=="string"?bt=this.header.variables.find(St=>St.name===vt):bt=vt,bt===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(bt.offset),bt.record?(0,c.record)(this.buffer,bt,this.header.recordDimension):(0,c.nonRecord)(this.buffer,bt)}dataVariableExists(vt){return this.header.variables.find(St=>St.name===vt)!==void 0}attributeExists(vt){return this.globalAttributes.find(St=>St.name===vt)!==void 0}}},"./node_modules/netcdfjs/lib-esm/toString.js":(e,i,s)=>{s.r(i),s.d(i,{toString:()=>a});function a(){const c=[];c.push("DIMENSIONS");for(const st of this.dimensions)c.push(`  ${st.name.padEnd(30)} = size: ${st.size}`);c.push(""),c.push("GLOBAL ATTRIBUTES");for(const st of this.globalAttributes)c.push(`  ${st.name.padEnd(30)} = ${st.value}`);const h=JSON.parse(JSON.stringify(this.variables));c.push(""),c.push("VARIABLES:");for(const st of h){st.value=this.getDataVariable(st);let nt=JSON.stringify(st.value);nt.length>50&&(nt=nt.substring(0,50)),isNaN(st.value.length)||(nt+=` (length: ${st.value.length})`),c.push(`  ${st.name.padEnd(30)} = ${nt}`)}return c.join(`
`)}},"./node_modules/netcdfjs/lib-esm/types.js":(e,i,s)=>{s.r(i),s.d(i,{num2bytes:()=>h,num2str:()=>c,readType:()=>ot,str2num:()=>st});const a={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function c(vt){switch(Number(vt)){case a.BYTE:return"byte";case a.CHAR:return"char";case a.SHORT:return"short";case a.INT:return"int";case a.FLOAT:return"float";case a.DOUBLE:return"double";default:return"undefined"}}function h(vt){switch(Number(vt)){case a.BYTE:return 1;case a.CHAR:return 1;case a.SHORT:return 2;case a.INT:return 4;case a.FLOAT:return 4;case a.DOUBLE:return 8;default:return-1}}function st(vt){switch(String(vt)){case"byte":return a.BYTE;case"char":return a.CHAR;case"short":return a.SHORT;case"int":return a.INT;case"float":return a.FLOAT;case"double":return a.DOUBLE;default:return-1}}function nt(vt,bt){if(vt!==1){const St=new Array(vt);for(let Et=0;Et<vt;Et++)St[Et]=bt();return St}else return bt()}function ot(vt,bt,St){switch(bt){case a.BYTE:return Array.from(vt.readBytes(St));case a.CHAR:return xt(vt.readChars(St));case a.SHORT:return nt(St,vt.readInt16.bind(vt));case a.INT:return nt(St,vt.readInt32.bind(vt));case a.FLOAT:return nt(St,vt.readFloat32.bind(vt));case a.DOUBLE:return nt(St,vt.readFloat64.bind(vt));default:throw new Error(`non valid type ${bt}`)}}function xt(vt){return vt.charCodeAt(vt.length-1)===0?vt.substring(0,vt.length-1):vt}},"./node_modules/netcdfjs/lib-esm/utils.js":(e,i,s)=>{s.r(i),s.d(i,{notNetcdf:()=>a,padding:()=>c,readName:()=>h});function a(st,nt){if(st)throw new TypeError(`Not a valid NetCDF v3.x file: ${nt}`)}function c(st){st.offset%4!==0&&st.skip(4-st.offset%4)}function h(st){const nt=st.readUint32(),ot=st.readChars(nt);return c(st),ot}},"./src/WebGL/shaders/lib/basic/basic.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/basic/basic.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`},"./src/WebGL/shaders/lib/blur/blur.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`},"./src/WebGL/shaders/lib/blur/blur.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/instanced/instanced.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/instanced/instanced.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/lambert/lambert.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}`},"./src/WebGL/shaders/lib/lambert/lambert.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/outline/outline.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );    
}


`},"./src/WebGL/shaders/lib/outline/outline.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`},"./src/WebGL/shaders/lib/screen/screen.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `},"./src/WebGL/shaders/lib/screen/screen.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}

`},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );
}


`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform int fogType;
uniform vec3 fogColor;
uniform float fogDensity;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogType > 0) {

        float depth = gl_FragCoord.z / gl_FragCoord.w;
        float fogFactor = 0.0;

        if (fogType == 1) {
            fogFactor = smoothstep(fogNear, fogFar, depth);
        }

        else {
            const float LOG2 = 1.442695;
            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);
            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);
        }

        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`},"./src/WebGL/shaders/lib/ssao/ssao.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`},"./src/WebGL/shaders/lib/ssao/ssao.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`},"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`},"./src/WebGL/shaders/lib/volumetric/volumetric.frag":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `},"./src/WebGL/shaders/lib/volumetric/volumetric.vert":(e,i,s)=>{s.r(i),s.d(i,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`},"./src/GLDraw.ts":(e,i,s)=>{s.r(i),s.d(i,{CAP:()=>c,GLDraw:()=>h});var a=s("./src/WebGL/math/index.ts"),c;(function(st){st[st.NONE=0]="NONE",st[st.FLAT=1]="FLAT",st[st.ROUND=2]="ROUND"})(c||(c={}));var h;(function(st){function nt(ht,d,b){var ft=Math.hypot(ht,d),mt,_t,tt,gt,wt;ft<1e-4?(_t=0,tt=1):(_t=-ht/ft,tt=d/ft),d=-_t*ht+tt*d,mt=Math.hypot(d,b),mt<1e-4?(gt=0,wt=1):(gt=b/mt,wt=d/mt);var yt=new Float32Array(9);return yt[0]=tt,yt[1]=_t,yt[2]=0,yt[3]=-_t*wt,yt[4]=tt*wt,yt[5]=gt,yt[6]=_t*gt,yt[7]=-tt*gt,yt[8]=wt,yt}class ot{constructor(){this.cache={};let d=[],b=4,ft=Math.pow(2,b),mt=2,_t=Math.pow(2,mt),tt=ft/_t,gt;for(d[0]=new a.Vector3(-1,0,0),d[tt]=new a.Vector3(0,0,1),d[tt*2]=new a.Vector3(1,0,0),d[tt*3]=new a.Vector3(0,0,-1),mt=3;mt<=b;mt++){for(_t=Math.pow(2,mt-1),tt=ft/_t,gt=0;gt<_t-1;gt++)d[tt/2+gt*tt]=d[gt*tt].clone().add(d[(gt+1)*tt]).normalize();gt=_t-1,d[tt/2+gt*tt]=d[gt*tt].clone().add(d[0]).normalize()}this.basisVectors=d}getVerticesForRadius(d,b,ft){if(typeof this.cache<"u"&&this.cache[d]!==void 0&&this.cache[d][b+ft]!==void 0)return this.cache[d][b+ft];for(var mt=this.basisVectors.length,_t=[],tt=[],gt,wt=0;wt<mt;wt++)_t.push(this.basisVectors[wt].clone().multiplyScalar(d)),_t.push(this.basisVectors[wt].clone().multiplyScalar(d)),gt=this.basisVectors[wt].clone().normalize(),tt.push(gt),tt.push(gt);var yt=[],Tt=10,Mt=mt,Pt=0,It=Math.PI*2,Lt=0,zt=Math.PI,jt,Nt,kt=!1,Ot=!1;for(Nt=0;Nt<=Tt;Nt++){kt=Nt===0||Nt===Tt,Ot=Nt===Tt/2;var Bt=[],Ut=[];for(jt=0;jt<=Mt;jt++){if(Ot){var Ft=jt<Mt?2*jt:0;Ut.push(Ft+1),Bt.push(Ft);continue}var Wt=jt/Mt,_i=Nt/Tt;if(!kt||jt===0)if(jt<Mt){var Qt=new a.Vector3;Qt.x=-d*Math.cos(Pt+Wt*It)*Math.sin(Lt+_i*zt),b==1?Qt.y=0:Qt.y=d*Math.cos(Lt+_i*zt),Qt.z=d*Math.sin(Pt+Wt*It)*Math.sin(Lt+_i*zt),Math.abs(Qt.x)<1e-5&&(Qt.x=0),Math.abs(Qt.y)<1e-5&&(Qt.y=0),Math.abs(Qt.z)<1e-5&&(Qt.z=0),b==c.FLAT?(gt=new a.Vector3(0,Math.cos(Lt+_i*zt),0),gt.normalize()):(gt=new a.Vector3(Qt.x,Qt.y,Qt.z),gt.normalize()),_t.push(Qt),tt.push(gt),Bt.push(_t.length-1)}else Bt.push(_t.length-Mt);else kt&&Bt.push(_t.length-1)}Ot&&yt.push(Ut),yt.push(Bt)}var on={vertices:_t,normals:tt,verticesRows:yt,w:Mt,h:Tt};return d in this.cache||(this.cache[d]={}),this.cache[d][b+ft]=on,on}}var xt=new ot;function vt(ht,d,b,ft,mt,_t=0,tt=0){if(!d||!b)return;let gt=function(_n){if(typeof _n=="string"){let Gn=_n;return Gn.toLowerCase()=="flat"?c.FLAT:Gn.toLowerCase()=="round"?c.ROUND:c.NONE}else return _n};_t=gt(_t),tt=gt(tt);var wt=tt||_t;mt=mt||{r:0,g:0,b:0};var yt=nt(b.x-d.x,b.y-d.y,b.z-d.z),Tt=xt.getVerticesForRadius(ft,tt,"to"),Mt=Tt.w,Pt=Tt.h,It=wt?Pt*Mt+2:2*Mt,Lt=ht.updateGeoGroup(It),zt=Tt.vertices,jt=Tt.normals,Nt=Tt.verticesRows,kt=Nt[Pt/2],Ot=Nt[Pt/2+1],Bt=Lt.vertices,Ut,Ft,Wt,_i,Qt,on,nn=Lt.vertexArray,dn=Lt.normalArray,tn=Lt.colorArray,rn=Lt.faceArray;for(Wt=0;Wt<Mt;++Wt){var En=2*Wt;_i=yt[0]*zt[En].x+yt[3]*zt[En].y+yt[6]*zt[En].z,Qt=yt[1]*zt[En].x+yt[4]*zt[En].y+yt[7]*zt[En].z,on=yt[5]*zt[En].y+yt[8]*zt[En].z,Ut=3*(Bt+En),Ft=Lt.faceidx,nn[Ut]=_i+d.x,nn[Ut+1]=Qt+d.y,nn[Ut+2]=on+d.z,nn[Ut+3]=_i+b.x,nn[Ut+4]=Qt+b.y,nn[Ut+5]=on+b.z,dn[Ut]=_i,dn[Ut+3]=_i,dn[Ut+1]=Qt,dn[Ut+4]=Qt,dn[Ut+2]=on,dn[Ut+5]=on,tn[Ut]=mt.r,tn[Ut+3]=mt.r,tn[Ut+1]=mt.g,tn[Ut+4]=mt.g,tn[Ut+2]=mt.b,tn[Ut+5]=mt.b,rn[Ft]=Ot[Wt]+Bt,rn[Ft+1]=Ot[Wt+1]+Bt,rn[Ft+2]=kt[Wt]+Bt,rn[Ft+3]=kt[Wt]+Bt,rn[Ft+4]=Ot[Wt+1]+Bt,rn[Ft+5]=kt[Wt+1]+Bt,Lt.faceidx+=6}if(wt){var bn=tt?0:Pt/2,Dn=_t?Pt+1:Pt/2+1,hn,en,xn,Pn,In,Nn,Un,kn,jn,zn,On,cn,Ln,Fn,$t,Xt,Zt,mn,an,Rn,Cn,Gt,un,yn,Mn,ln,wn,Ht,Tn,Vn,Rt,gn;for(Qt=bn;Qt<Dn;Qt++)if(Qt!==Pt/2){var pn=Qt<=Pt/2?b:d,Kt=xt.getVerticesForRadius(ft,tt,"to"),sn=xt.getVerticesForRadius(ft,_t,"from");for(pn===b?(zt=Kt.vertices,jt=Kt.normals,Nt=Kt.verticesRows):pn==d&&(zt=sn.vertices,jt=sn.normals,Nt=sn.verticesRows),_i=0;_i<Mt;_i++)Ft=Lt.faceidx,hn=Nt[Qt][_i+1],Tn=(hn+Bt)*3,en=Nt[Qt][_i],Vn=(en+Bt)*3,xn=Nt[Qt+1][_i],Rt=(xn+Bt)*3,Pn=Nt[Qt+1][_i+1],gn=(Pn+Bt)*3,In=yt[0]*zt[hn].x+yt[3]*zt[hn].y+yt[6]*zt[hn].z,Nn=yt[0]*zt[en].x+yt[3]*zt[en].y+yt[6]*zt[en].z,Un=yt[0]*zt[xn].x+yt[3]*zt[xn].y+yt[6]*zt[xn].z,kn=yt[0]*zt[Pn].x+yt[3]*zt[Pn].y+yt[6]*zt[Pn].z,jn=yt[1]*zt[hn].x+yt[4]*zt[hn].y+yt[7]*zt[hn].z,zn=yt[1]*zt[en].x+yt[4]*zt[en].y+yt[7]*zt[en].z,On=yt[1]*zt[xn].x+yt[4]*zt[xn].y+yt[7]*zt[xn].z,cn=yt[1]*zt[Pn].x+yt[4]*zt[Pn].y+yt[7]*zt[Pn].z,Ln=yt[5]*zt[hn].y+yt[8]*zt[hn].z,Fn=yt[5]*zt[en].y+yt[8]*zt[en].z,$t=yt[5]*zt[xn].y+yt[8]*zt[xn].z,Xt=yt[5]*zt[Pn].y+yt[8]*zt[Pn].z,nn[Tn]=In+pn.x,nn[Vn]=Nn+pn.x,nn[Rt]=Un+pn.x,nn[gn]=kn+pn.x,nn[Tn+1]=jn+pn.y,nn[Vn+1]=zn+pn.y,nn[Rt+1]=On+pn.y,nn[gn+1]=cn+pn.y,nn[Tn+2]=Ln+pn.z,nn[Vn+2]=Fn+pn.z,nn[Rt+2]=$t+pn.z,nn[gn+2]=Xt+pn.z,tn[Tn]=mt.r,tn[Vn]=mt.r,tn[Rt]=mt.r,tn[gn]=mt.r,tn[Tn+1]=mt.g,tn[Vn+1]=mt.g,tn[Rt+1]=mt.g,tn[gn+1]=mt.g,tn[Tn+2]=mt.b,tn[Vn+2]=mt.b,tn[Rt+2]=mt.b,tn[gn+2]=mt.b,Zt=yt[0]*jt[hn].x+yt[3]*jt[hn].y+yt[6]*jt[hn].z,mn=yt[0]*jt[en].x+yt[3]*jt[en].y+yt[6]*jt[en].z,an=yt[0]*jt[xn].x+yt[3]*jt[xn].y+yt[6]*jt[xn].z,Rn=yt[0]*jt[Pn].x+yt[3]*jt[Pn].y+yt[6]*jt[Pn].z,Cn=yt[1]*jt[hn].x+yt[4]*jt[hn].y+yt[7]*jt[hn].z,Gt=yt[1]*jt[en].x+yt[4]*jt[en].y+yt[7]*jt[en].z,un=yt[1]*jt[xn].x+yt[4]*jt[xn].y+yt[7]*jt[xn].z,yn=yt[1]*jt[Pn].x+yt[4]*jt[Pn].y+yt[7]*jt[Pn].z,Mn=yt[5]*jt[hn].y+yt[8]*jt[hn].z,ln=yt[5]*jt[en].y+yt[8]*jt[en].z,wn=yt[5]*jt[xn].y+yt[8]*jt[xn].z,Ht=yt[5]*jt[Pn].y+yt[8]*jt[Pn].z,Qt===0?(dn[Tn]=Zt,dn[Rt]=an,dn[gn]=Rn,dn[Tn+1]=Cn,dn[Rt+1]=un,dn[gn+1]=yn,dn[Tn+2]=Mn,dn[Rt+2]=wn,dn[gn+2]=Ht,rn[Ft]=hn+Bt,rn[Ft+1]=xn+Bt,rn[Ft+2]=Pn+Bt,Lt.faceidx+=3):Qt===Dn-1?(dn[Tn]=Zt,dn[Vn]=mn,dn[Rt]=an,dn[Tn+1]=Cn,dn[Vn+1]=Gt,dn[Rt+1]=un,dn[Tn+2]=Mn,dn[Vn+2]=ln,dn[Rt+2]=wn,rn[Ft]=hn+Bt,rn[Ft+1]=en+Bt,rn[Ft+2]=xn+Bt,Lt.faceidx+=3):(dn[Tn]=Zt,dn[Vn]=mn,dn[gn]=Rn,dn[Tn+1]=Cn,dn[Vn+1]=Gt,dn[gn+1]=yn,dn[Tn+2]=Mn,dn[Vn+2]=ln,dn[gn+2]=Ht,dn[Vn]=mn,dn[Rt]=an,dn[gn]=Rn,dn[Vn+1]=Gt,dn[Rt+1]=un,dn[gn+1]=yn,dn[Vn+2]=ln,dn[Rt+2]=wn,dn[gn+2]=Ht,rn[Ft]=hn+Bt,rn[Ft+1]=en+Bt,rn[Ft+2]=Pn+Bt,rn[Ft+3]=en+Bt,rn[Ft+4]=xn+Bt,rn[Ft+5]=Pn+Bt,Lt.faceidx+=6)}}Lt.vertices+=It}st.drawCylinder=vt;function bt(ht,d,b,ft,mt){if(!d||!b)return;mt=mt||{r:0,g:0,b:0};let _t=new a.Vector3(b.x-d.x,b.y-d.y,b.z-d.z);var tt=nt(_t.x,_t.y,_t.z);_t=_t.normalize();var gt=xt.basisVectors.length,wt=xt.basisVectors,yt=gt+2,Tt=ht.updateGeoGroup(yt),Mt=Tt.vertices,Pt,It,Lt,zt,jt,Nt,kt=Tt.vertexArray,Ot=Tt.normalArray,Bt=Tt.colorArray,Ut=Tt.faceArray;for(Pt=Mt*3,kt[Pt]=d.x,kt[Pt+1]=d.y,kt[Pt+2]=d.z,Ot[Pt]=-_t.x,Ot[Pt+1]=-_t.y,Ot[Pt+2]=-_t.z,Bt[Pt]=mt.r,Bt[Pt+1]=mt.g,Bt[Pt+2]=mt.b,kt[Pt+3]=b.x,kt[Pt+4]=b.y,kt[Pt+5]=b.z,Ot[Pt+3]=_t.x,Ot[Pt+4]=_t.y,Ot[Pt+5]=_t.z,Bt[Pt+3]=mt.r,Bt[Pt+4]=mt.g,Bt[Pt+5]=mt.b,Pt+=6,Lt=0;Lt<gt;++Lt){var Ft=wt[Lt].clone();Ft.multiplyScalar(ft),zt=tt[0]*Ft.x+tt[3]*Ft.y+tt[6]*Ft.z,jt=tt[1]*Ft.x+tt[4]*Ft.y+tt[7]*Ft.z,Nt=tt[5]*Ft.y+tt[8]*Ft.z,kt[Pt]=zt+d.x,kt[Pt+1]=jt+d.y,kt[Pt+2]=Nt+d.z,Ot[Pt]=zt,Ot[Pt+1]=jt,Ot[Pt+2]=Nt,Bt[Pt]=mt.r,Bt[Pt+1]=mt.g,Bt[Pt+2]=mt.b,Pt+=3}for(Tt.vertices+=gt+2,It=Tt.faceidx,Lt=0;Lt<gt;Lt++){var Wt=Mt+2+Lt,_i=Mt+2+(Lt+1)%gt;Ut[It]=Wt,Ut[It+1]=_i,Ut[It+2]=Mt,It+=3,Ut[It]=Wt,Ut[It+1]=_i,Ut[It+2]=Mt+1,It+=3}Tt.faceidx+=6*gt}st.drawCone=bt;class St{constructor(){this.cache=new Map}getVerticesForRadius(d,b){b=b||2,this.cache.has(b)||this.cache.set(b,new Map);let ft=this.cache.get(b);if(ft.has(d))return ft.get(d);var mt={vertices:[],verticesRows:[],normals:[]},_t=16*b,tt=10*b;d<1&&(_t=10*b,tt=8*b);var gt=0,wt=Math.PI*2,yt=0,Tt=Math.PI,Mt,Pt;for(Pt=0;Pt<=tt;Pt++){let Lt=[];for(Mt=0;Mt<=_t;Mt++){let zt=Mt/_t,jt=Pt/tt,Nt=-d*Math.cos(gt+zt*wt)*Math.sin(yt+jt*Tt),kt=d*Math.cos(yt+jt*Tt),Ot=d*Math.sin(gt+zt*wt)*Math.sin(yt+jt*Tt);var It=new a.Vector3(Nt,kt,Ot);It.normalize(),mt.vertices.push({x:Nt,y:kt,z:Ot}),mt.normals.push(It),Lt.push(mt.vertices.length-1)}mt.verticesRows.push(Lt)}return ft.set(d,mt),mt}}var Et=new St;function Ct(ht,d,b,ft,mt){var _t=Et.getVerticesForRadius(b,mt),tt=_t.vertices,gt=_t.normals,wt=ht.updateGeoGroup(tt.length),yt=wt.vertices,Tt=wt.vertexArray,Mt=wt.colorArray,Pt=wt.faceArray,It=wt.lineArray,Lt=wt.normalArray;for(let Nt=0,kt=tt.length;Nt<kt;++Nt){let Ot=3*(yt+Nt),Bt=tt[Nt];Tt[Ot]=Bt.x+d.x,Tt[Ot+1]=Bt.y+d.y,Tt[Ot+2]=Bt.z+d.z,Mt[Ot]=ft.r,Mt[Ot+1]=ft.g,Mt[Ot+2]=ft.b}wt.vertices+=tt.length;let zt=_t.verticesRows,jt=zt.length-1;for(let Nt=0;Nt<jt;Nt++){let kt=zt[Nt].length-1;for(let Ot=0;Ot<kt;Ot++){let Bt=wt.faceidx,Ut=wt.lineidx,Ft=zt[Nt][Ot+1]+yt,Wt=Ft*3,_i=zt[Nt][Ot]+yt,Qt=_i*3,on=zt[Nt+1][Ot]+yt,nn=on*3,dn=zt[Nt+1][Ot+1]+yt,tn=dn*3,rn=gt[Ft-yt],En=gt[_i-yt],bn=gt[on-yt],Dn=gt[dn-yt];Math.abs(tt[Ft-yt].y)===b?(Lt[Wt]=rn.x,Lt[nn]=bn.x,Lt[tn]=Dn.x,Lt[Wt+1]=rn.y,Lt[nn+1]=bn.y,Lt[tn+1]=Dn.y,Lt[Wt+2]=rn.z,Lt[nn+2]=bn.z,Lt[tn+2]=Dn.z,Pt[Bt]=Ft,Pt[Bt+1]=on,Pt[Bt+2]=dn,It[Ut]=Ft,It[Ut+1]=on,It[Ut+2]=Ft,It[Ut+3]=dn,It[Ut+4]=on,It[Ut+5]=dn,wt.faceidx+=3,wt.lineidx+=6):Math.abs(tt[on-yt].y)===b?(Lt[Wt]=rn.x,Lt[Qt]=En.x,Lt[nn]=bn.x,Lt[Wt+1]=rn.y,Lt[Qt+1]=En.y,Lt[nn+1]=bn.y,Lt[Wt+2]=rn.z,Lt[Qt+2]=En.z,Lt[nn+2]=bn.z,Pt[Bt]=Ft,Pt[Bt+1]=_i,Pt[Bt+2]=on,It[Ut]=Ft,It[Ut+1]=_i,It[Ut+2]=Ft,It[Ut+3]=on,It[Ut+4]=_i,It[Ut+5]=on,wt.faceidx+=3,wt.lineidx+=6):(Lt[Wt]=rn.x,Lt[Qt]=En.x,Lt[tn]=Dn.x,Lt[Wt+1]=rn.y,Lt[Qt+1]=En.y,Lt[tn+1]=Dn.y,Lt[Wt+2]=rn.z,Lt[Qt+2]=En.z,Lt[tn+2]=Dn.z,Lt[Qt]=En.x,Lt[nn]=bn.x,Lt[tn]=Dn.x,Lt[Qt+1]=En.y,Lt[nn+1]=bn.y,Lt[tn+1]=Dn.y,Lt[Qt+2]=En.z,Lt[nn+2]=bn.z,Lt[tn+2]=Dn.z,Pt[Bt]=Ft,Pt[Bt+1]=_i,Pt[Bt+2]=dn,Pt[Bt+3]=_i,Pt[Bt+4]=on,Pt[Bt+5]=dn,It[Ut]=Ft,It[Ut+1]=_i,It[Ut+2]=Ft,It[Ut+3]=dn,It[Ut+4]=_i,It[Ut+5]=on,It[Ut+6]=on,It[Ut+7]=dn,wt.faceidx+=6,wt.lineidx+=8)}}}st.drawSphere=Ct})(h||(h={}))},"./src/GLModel.ts":(e,i,s)=>{s.r(i),s.d(i,{GLModel:()=>Ct});var a=s("./src/WebGL/index.ts"),c=s("./src/WebGL/shapes/index.ts"),h=s("./src/WebGL/math/index.ts"),st=s("./src/colors.ts"),nt=s("./src/GLDraw.ts"),ot=s("./src/glcartoon.ts"),xt=s("./src/utilities.ts"),vt=s("./src/Gradient.ts"),bt=s("./src/parsers/index.ts"),St=s("./node_modules/netcdfjs/lib-esm/index.js"),Et=s("./src/parsers/utils/assignBonds.ts");class Ct{static sameObj(d,b){return d&&b?JSON.stringify(d)==JSON.stringify(b):d==b}constructor(d,b){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new h.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=st.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=b||{},this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:st.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=d}getRadiusFromStyle(d,b){var ft=this.defaultSphereRadius;if(typeof b.radius<"u")ft=b.radius;else if(Ct.vdwRadii[d.elem])ft=Ct.vdwRadii[d.elem];else if(d.elem.length>1){let mt=d.elem;mt=mt[0].toUpperCase()+mt[1].toLowerCase(),Ct.vdwRadii[mt]&&(ft=Ct.vdwRadii[mt])}return typeof b.scale<"u"&&(ft*=b.scale),ft}drawAtomCross(d,b){if(d.style.cross){var ft=d.style.cross;if(!ft.hidden){var mt=ft.linewidth||Ct.defaultlineWidth;b[mt]||(b[mt]=new a.Geometry);var _t=b[mt].updateGeoGroup(6),tt=this.getRadiusFromStyle(d,ft),gt=[[tt,0,0],[-tt,0,0],[0,tt,0],[0,-tt,0],[0,0,tt],[0,0,-tt]],wt=d.clickable||d.hoverable;wt&&d.intersectionShape===void 0&&(d.intersectionShape={sphere:[],cylinder:[],line:[]});for(var yt=(0,xt.getColorFromStyle)(d,ft),Tt=_t.vertexArray,Mt=_t.colorArray,Pt=0;Pt<6;Pt++){var It=_t.vertices*3;if(_t.vertices++,Tt[It]=d.x+gt[Pt][0],Tt[It+1]=d.y+gt[Pt][1],Tt[It+2]=d.z+gt[Pt][2],Mt[It]=yt.r,Mt[It+1]=yt.g,Mt[It+2]=yt.b,wt){var Lt=new h.Vector3(gt[Pt][0],gt[Pt][1],gt[Pt][2]);Lt.multiplyScalar(.1),Lt.set(Lt.x+d.x,Lt.y+d.y,Lt.z+d.z),d.intersectionShape.line.push(Lt)}}}}}getGoodCross(d,b,ft,mt){for(var _t=null,tt=-1,gt=0,wt=d.bonds.length;gt<wt;gt++)if(d.bonds[gt]!=b.index){let Tt=d.bonds[gt],Mt=this.atoms[Tt],It=new h.Vector3(Mt.x,Mt.y,Mt.z).clone();It.sub(ft);let Lt=It.clone();Lt.cross(mt);var yt=Lt.lengthSq();if(yt>tt&&(tt=yt,_t=Lt,tt>.1))return _t}return _t}getSideBondV(d,b,ft){var mt,_t,tt,gt,wt,yt=new h.Vector3(d.x,d.y,d.z),Tt=new h.Vector3(b.x,b.y,b.z),Mt=Tt.clone(),Pt=null;if(Mt.sub(yt),d.bonds.length===1)b.bonds.length===1?(Pt=Mt.clone(),Math.abs(Pt.x)>1e-4?Pt.y+=1:Pt.x+=1):(mt=(ft+1)%b.bonds.length,_t=b.bonds[mt],tt=this.atoms[_t],tt.index==d.index&&(mt=(mt+1)%b.bonds.length,_t=b.bonds[mt],tt=this.atoms[_t]),gt=new h.Vector3(tt.x,tt.y,tt.z),wt=gt.clone(),wt.sub(yt),Pt=wt.clone(),Pt.cross(Mt));else if(Pt=this.getGoodCross(d,b,yt,Mt),Pt.lengthSq()<.01){var It=this.getGoodCross(b,d,yt,Mt);It!=null&&(Pt=It)}return Pt.lengthSq()<.01&&(Pt=Mt.clone(),Math.abs(Pt.x)>1e-4?Pt.y+=1:Pt.x+=1),Pt.cross(Mt),Pt.normalize(),Pt}addLine(d,b,ft,mt,_t,tt){d[ft]=mt.x,d[ft+1]=mt.y,d[ft+2]=mt.z,b[ft]=tt.r,b[ft+1]=tt.g,b[ft+2]=tt.b,d[ft+3]=_t.x,d[ft+4]=_t.y,d[ft+5]=_t.z,b[ft+3]=tt.r,b[ft+4]=tt.g,b[ft+5]=tt.b}drawBondLines(d,b,ft){if(d.style.line){var mt=d.style.line;if(!mt.hidden){var _t,tt,gt,wt,yt=mt.linewidth||Ct.defaultlineWidth;ft[yt]||(ft[yt]=new a.Geometry);for(var Tt=ft[yt].updateGeoGroup(6*d.bonds.length),Mt=Tt.vertexArray,Pt=Tt.colorArray,It=0;It<d.bonds.length;It++){var Lt=d.bonds[It],zt=b[Lt];if(zt.style.line&&!(d.index>=zt.index)){var jt=new h.Vector3(d.x,d.y,d.z),Nt=new h.Vector3(zt.x,zt.y,zt.z),kt=jt.clone().add(Nt).multiplyScalar(.5),Ot=!1,Bt=d.clickable||d.hoverable,Ut=zt.clickable||zt.hoverable;(Bt||Ut)&&(Bt&&(d.intersectionShape===void 0&&(d.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),d.intersectionShape.line.push(jt),d.intersectionShape.line.push(kt)),Ut&&(zt.intersectionShape===void 0&&(zt.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),zt.intersectionShape.line.push(kt),zt.intersectionShape.line.push(Nt)));var Ft=(0,xt.getColorFromStyle)(d,d.style.line),Wt=(0,xt.getColorFromStyle)(zt,zt.style.line);if(d.bondStyles&&d.bondStyles[It]){var _i=d.bondStyles[It];if(!_i.iswire)continue;_i.singleBond&&(Ot=!0),typeof _i.color1<"u"&&(Ft=st.CC.color(_i.color1)),typeof _i.color2<"u"&&(Wt=st.CC.color(_i.color2))}var Qt=Tt.vertices*3,on,nn;if(d.bondOrder[It]>1&&d.bondOrder[It]<4&&!Ot){var dn=this.getSideBondV(d,zt,It),tn=Nt.clone();tn.sub(jt),d.bondOrder[It]==2?(dn.multiplyScalar(.1),_t=jt.clone(),_t.add(dn),tt=jt.clone(),tt.sub(dn),gt=_t.clone(),gt.add(tn),wt=tt.clone(),wt.add(tn),Ft==Wt?(Tt.vertices+=4,this.addLine(Mt,Pt,Qt,_t,gt,Ft),this.addLine(Mt,Pt,Qt+6,tt,wt,Ft)):(Tt.vertices+=8,tn.multiplyScalar(.5),on=_t.clone(),on.add(tn),nn=tt.clone(),nn.add(tn),this.addLine(Mt,Pt,Qt,_t,on,Ft),this.addLine(Mt,Pt,Qt+6,on,gt,Wt),this.addLine(Mt,Pt,Qt+12,tt,nn,Ft),this.addLine(Mt,Pt,Qt+18,nn,wt,Wt))):d.bondOrder[It]==3&&(dn.multiplyScalar(.1),_t=jt.clone(),_t.add(dn),tt=jt.clone(),tt.sub(dn),gt=_t.clone(),gt.add(tn),wt=tt.clone(),wt.add(tn),Ft==Wt?(Tt.vertices+=6,this.addLine(Mt,Pt,Qt,jt,Nt,Ft),this.addLine(Mt,Pt,Qt+6,_t,gt,Ft),this.addLine(Mt,Pt,Qt+12,tt,wt,Ft)):(Tt.vertices+=12,tn.multiplyScalar(.5),on=_t.clone(),on.add(tn),nn=tt.clone(),nn.add(tn),this.addLine(Mt,Pt,Qt,jt,kt,Ft),this.addLine(Mt,Pt,Qt+6,kt,Nt,Wt),this.addLine(Mt,Pt,Qt+12,_t,on,Ft),this.addLine(Mt,Pt,Qt+18,on,gt,Wt),this.addLine(Mt,Pt,Qt+24,tt,nn,Ft),this.addLine(Mt,Pt,Qt+30,nn,wt,Wt)))}else Ft==Wt?(Tt.vertices+=2,this.addLine(Mt,Pt,Qt,jt,Nt,Ft)):(Tt.vertices+=4,this.addLine(Mt,Pt,Qt,jt,kt,Ft),this.addLine(Mt,Pt,Qt+6,kt,Nt,Wt))}}}}}drawAtomSphere(d,b){if(d.style.sphere){var ft=d.style.sphere;if(!ft.hidden){var mt=(0,xt.getColorFromStyle)(d,ft),_t=this.getRadiusFromStyle(d,ft);if((d.clickable===!0||d.hoverable)&&d.intersectionShape!==void 0){var tt=new h.Vector3(d.x,d.y,d.z);d.intersectionShape.sphere.push(new c.Sphere(tt,_t))}nt.GLDraw.drawSphere(b,d,_t,mt)}}}drawAtomClickSphere(d){if(d.style.clicksphere){var b=d.style.clicksphere;if(!b.hidden){var ft=this.getRadiusFromStyle(d,b);if((d.clickable===!0||d.hoverable)&&d.intersectionShape!==void 0){var mt=new h.Vector3(d.x,d.y,d.z);d.intersectionShape.sphere.push(new c.Sphere(mt,ft))}}}}drawAtomInstanced(d,b){if(d.style.sphere){var ft=d.style.sphere;if(!ft.hidden){var mt=this.getRadiusFromStyle(d,ft),_t=(0,xt.getColorFromStyle)(d,ft),tt=b.updateGeoGroup(1),gt=tt.vertices,wt=gt*3,yt=tt.vertexArray,Tt=tt.colorArray,Mt=tt.radiusArray;if(yt[wt]=d.x,yt[wt+1]=d.y,yt[wt+2]=d.z,Tt[wt]=_t.r,Tt[wt+1]=_t.g,Tt[wt+2]=_t.b,Mt[gt]=mt,(d.clickable===!0||d.hoverable)&&d.intersectionShape!==void 0){var Pt=new h.Vector3(d.x,d.y,d.z);d.intersectionShape.sphere.push(new c.Sphere(Pt,mt))}tt.vertices+=1}}}drawSphereImposter(d,b,ft,mt){var _t=d.updateGeoGroup(4),tt,gt=_t.vertices,wt=gt*3,yt=_t.vertexArray,Tt=_t.colorArray;for(tt=0;tt<4;tt++)yt[wt+3*tt]=b.x,yt[wt+3*tt+1]=b.y,yt[wt+3*tt+2]=b.z;var Mt=_t.normalArray;for(tt=0;tt<4;tt++)Tt[wt+3*tt]=mt.r,Tt[wt+3*tt+1]=mt.g,Tt[wt+3*tt+2]=mt.b;Mt[wt+0]=-ft,Mt[wt+1]=ft,Mt[wt+2]=0,Mt[wt+3]=-ft,Mt[wt+4]=-ft,Mt[wt+5]=0,Mt[wt+6]=ft,Mt[wt+7]=-ft,Mt[wt+8]=0,Mt[wt+9]=ft,Mt[wt+10]=ft,Mt[wt+11]=0,_t.vertices+=4;var Pt=_t.faceArray,It=_t.faceidx;Pt[It+0]=gt,Pt[It+1]=gt+1,Pt[It+2]=gt+2,Pt[It+3]=gt+2,Pt[It+4]=gt+3,Pt[It+5]=gt,_t.faceidx+=6}drawAtomImposter(d,b){if(d.style.sphere){var ft=d.style.sphere;if(!ft.hidden){var mt=this.getRadiusFromStyle(d,ft),_t=(0,xt.getColorFromStyle)(d,ft);if((d.clickable===!0||d.hoverable)&&d.intersectionShape!==void 0){var tt=new h.Vector3(d.x,d.y,d.z);d.intersectionShape.sphere.push(new c.Sphere(tt,mt))}this.drawSphereImposter(b,d,mt,_t)}}}calculateDashes(d,b,ft,mt,_t){var tt=Math.sqrt(Math.pow(d.x-b.x,2)+Math.pow(d.y-b.y,2)+Math.pow(d.z-b.z,2));ft=Math.max(ft,0),_t=Math.max(_t,0)+2*ft,mt=Math.max(mt,.001),mt+_t>tt&&(mt=tt,_t=0);var gt=Math.floor((tt-mt)/(mt+_t))+1,wt=gt*mt;_t=(tt-wt)/gt;for(var yt,Tt=new h.Vector3(d.x,d.y,d.z),Mt=new h.Vector3((b.x-d.x)/(tt/_t),(b.y-d.y)/(tt/_t),(b.z-d.z)/(tt/_t)),Pt=new h.Vector3((b.x-d.x)/(tt/mt),(b.y-d.y)/(tt/mt),(b.z-d.z)/(tt/mt)),It=[],Lt=0;Lt<gt;Lt++)yt=new h.Vector3(Tt.x+Pt.x,Tt.y+Pt.y,Tt.z+Pt.z),It.push({from:Tt,to:yt}),Tt=new h.Vector3(yt.x+Mt.x,yt.y+Mt.y,yt.z+Mt.z);return It}static drawStickImposter(d,b,ft,mt,_t,tt=0,gt=0){for(var wt=d.updateGeoGroup(4),yt=wt.vertices,Tt=yt*3,Mt=wt.vertexArray,Pt=wt.colorArray,It=wt.radiusArray,Lt=wt.normalArray,zt=_t.r,jt=_t.g,Nt=_t.b,kt=function(Wt){var _i=-Wt;return _i==0&&(_i=-1e-4),_i},Ot=Tt,Bt=0;Bt<4;Bt++)Mt[Ot]=b.x,Lt[Ot]=ft.x,Pt[Ot]=zt,Ot++,Mt[Ot]=b.y,Lt[Ot]=ft.y,Pt[Ot]=jt,Ot++,Mt[Ot]=b.z,Lt[Ot]=ft.z,Bt<2?Pt[Ot]=Nt:Pt[Ot]=kt(Nt),Ot++;wt.vertices+=4,It[yt]=-mt,It[yt+1]=mt,It[yt+2]=-mt,It[yt+3]=mt;var Ut=wt.faceArray,Ft=wt.faceidx;Ut[Ft+0]=yt,Ut[Ft+1]=yt+1,Ut[Ft+2]=yt+2,Ut[Ft+3]=yt+2,Ut[Ft+4]=yt+3,Ut[Ft+5]=yt,wt.faceidx+=6}drawBondSticks(d,b,ft){var mt,_t;if(d.style.stick){var tt=d.style.stick;if(!tt.hidden){var gt=tt.radius||this.defaultStickRadius,wt=tt.doubleBondScaling||.4,yt=tt.tripleBondScaling||.25,Tt=((mt=tt.dashedBondConfig)===null||mt===void 0?void 0:mt.dashLength)||.1,Mt=((_t=tt.dashedBondConfig)===null||_t===void 0?void 0:_t.gapLength)||.25,Pt=gt,It=tt.singleBonds||!1,Lt=tt.dashedBonds||!1,zt=0,jt=0,Nt,kt,Ot,Bt,Ut,Ft,Wt,_i,Qt,on,nn,dn=(0,xt.getColorFromStyle)(d,tt),tn,rn,En;!d.capDrawn&&d.bonds.length<4&&(zt=2);var bn=un=>{var yn=ft.imposter?Ct.drawStickImposter:nt.GLDraw.drawCylinder;return!Lt&&un>=1?yn:(Mn,ln,wn,Ht,Tn,Vn=0,Rt=0,gn=.1,pn=.25)=>{var Kt=this.calculateDashes(ln,wn,Ht,gn,pn);Kt.forEach(sn=>{yn(Mn,sn.from,sn.to,Ht,Tn,Vn,Rt)})}};for(Ot=0;Ot<d.bonds.length;Ot++){var Dn=bn(d.bondOrder[Ot]),hn=d.bonds[Ot],en=b[hn];if(tn=rn=En=null,d.index<en.index){var xn=en.style;if(!xn.stick||xn.stick.hidden)continue;var Pn=(0,xt.getColorFromStyle)(en,xn.stick);if(Pt=gt,Bt=It,d.bondStyles&&d.bondStyles[Ot]){if(Ut=d.bondStyles[Ot],Ut.iswire)continue;Ut.radius&&(Pt=Ut.radius),Ut.singleBond&&(Bt=!0),typeof Ut.color1<"u"&&(dn=st.CC.color(Ut.color1)),typeof Ut.color2<"u"&&(Pn=st.CC.color(Ut.color2))}var In=new h.Vector3(d.x,d.y,d.z),Nn=new h.Vector3(en.x,en.y,en.z);if(d.bondOrder[Ot]<=1||Bt||d.bondOrder[Ot]>3){if(d.bondOrder[Ot]<1&&(Pt*=d.bondOrder[Ot]),!en.capDrawn&&en.bonds.length<4&&(jt=2),dn!=Pn?(tn=new h.Vector3().addVectors(In,Nn).multiplyScalar(.5),Dn(ft,In,tn,Pt,dn,zt,0,Tt,Mt),Dn(ft,tn,Nn,Pt,Pn,0,jt,Tt,Mt)):Dn(ft,In,Nn,Pt,dn,zt,jt,Tt,Mt),Nt=d.clickable||d.hoverable,kt=en.clickable||en.hoverable,Nt||kt){if(tn||(tn=new h.Vector3().addVectors(In,Nn).multiplyScalar(.5)),Nt){var Un=new c.Cylinder(In,tn,Pt),kn=new c.Sphere(In,Pt);d.intersectionShape.cylinder.push(Un),d.intersectionShape.sphere.push(kn)}if(kt){var jn=new c.Cylinder(Nn,tn,Pt),zn=new c.Sphere(Nn,Pt);en.intersectionShape.cylinder.push(jn),en.intersectionShape.sphere.push(zn)}}}else if(d.bondOrder[Ot]>1){var On=0,cn=0;Pt!=gt&&(On=2,cn=2);var Ln=Nn.clone(),Fn=null;Ln.sub(In);var $t,Xt,Zt,mn,an;Fn=this.getSideBondV(d,en,Ot),d.bondOrder[Ot]==2?($t=Pt*wt,Fn.multiplyScalar($t*1.5),Xt=In.clone(),Xt.add(Fn),Zt=In.clone(),Zt.sub(Fn),mn=Xt.clone(),mn.add(Ln),an=Zt.clone(),an.add(Ln),dn!=Pn?(tn=new h.Vector3().addVectors(Xt,mn).multiplyScalar(.5),rn=new h.Vector3().addVectors(Zt,an).multiplyScalar(.5),Dn(ft,Xt,tn,$t,dn,On,0),Dn(ft,tn,mn,$t,Pn,0,cn),Dn(ft,Zt,rn,$t,dn,On,0),Dn(ft,rn,an,$t,Pn,0,cn)):(Dn(ft,Xt,mn,$t,dn,On,cn),Dn(ft,Zt,an,$t,dn,On,cn)),Nt=d.clickable||d.hoverable,kt=en.clickable||en.hoverable,(Nt||kt)&&(tn||(tn=new h.Vector3().addVectors(Xt,mn).multiplyScalar(.5)),rn||(rn=new h.Vector3().addVectors(Zt,an).multiplyScalar(.5)),Nt&&(Ft=new c.Cylinder(Xt,tn,$t),Wt=new c.Cylinder(Zt,rn,$t),d.intersectionShape.cylinder.push(Ft),d.intersectionShape.cylinder.push(Wt)),kt&&(Qt=new c.Cylinder(mn,tn,$t),on=new c.Cylinder(an,rn,$t),en.intersectionShape.cylinder.push(Qt),en.intersectionShape.cylinder.push(on)))):d.bondOrder[Ot]==3&&($t=Pt*yt,Fn.cross(Ln),Fn.normalize(),Fn.multiplyScalar($t*3),Xt=In.clone(),Xt.add(Fn),Zt=In.clone(),Zt.sub(Fn),mn=Xt.clone(),mn.add(Ln),an=Zt.clone(),an.add(Ln),dn!=Pn?(tn=new h.Vector3().addVectors(Xt,mn).multiplyScalar(.5),rn=new h.Vector3().addVectors(Zt,an).multiplyScalar(.5),En=new h.Vector3().addVectors(In,Nn).multiplyScalar(.5),Dn(ft,Xt,tn,$t,dn,On,0),Dn(ft,tn,mn,$t,Pn,0,cn),Dn(ft,In,En,$t,dn,zt,0),Dn(ft,En,Nn,$t,Pn,0,jt),Dn(ft,Zt,rn,$t,dn,On,0),Dn(ft,rn,an,$t,Pn,0,cn)):(Dn(ft,Xt,mn,$t,dn,On,cn),Dn(ft,In,Nn,$t,dn,zt,jt),Dn(ft,Zt,an,$t,dn,On,cn)),Nt=d.clickable||d.hoverable,kt=en.clickable||en.hoverable,(Nt||kt)&&(tn||(tn=new h.Vector3().addVectors(Xt,mn).multiplyScalar(.5)),rn||(rn=new h.Vector3().addVectors(Zt,an).multiplyScalar(.5)),En||(En=new h.Vector3().addVectors(In,Nn).multiplyScalar(.5)),Nt&&(Ft=new c.Cylinder(Xt.clone(),tn.clone(),$t),Wt=new c.Cylinder(Zt.clone(),rn.clone(),$t),_i=new c.Cylinder(In.clone(),En.clone(),$t),d.intersectionShape.cylinder.push(Ft),d.intersectionShape.cylinder.push(Wt),d.intersectionShape.cylinder.push(_i)),kt&&(Qt=new c.Cylinder(mn.clone(),tn.clone(),$t),on=new c.Cylinder(an.clone(),rn.clone(),$t),nn=new c.Cylinder(Nn.clone(),En.clone(),$t),en.intersectionShape.cylinder.push(Qt),en.intersectionShape.cylinder.push(on),en.intersectionShape.cylinder.push(nn))))}}}var Rn=!1,Cn=0,Gt=!1;for(Ot=0;Ot<d.bonds.length;Ot++)Bt=It,d.bondStyles&&d.bondStyles[Ot]&&(Ut=d.bondStyles[Ot],Ut.singleBond&&(Bt=!0),Ut.radius&&Ut.radius!=gt&&(Gt=!0)),(Bt||d.bondOrder[Ot]==1)&&Cn++;Gt?Cn>0&&(Rn=!0):Cn==0&&(d.bonds.length>0||tt.showNonBonded)&&(Rn=!0),Rn&&(Pt=gt,ft.imposter?this.drawSphereImposter(ft.sphereGeometry,d,Pt,dn):nt.GLDraw.drawSphere(ft,d,Pt,dn))}}}createMolObj(d,b){b=b||{};var ft=new a.Object3D,mt=[],_t={},tt={},gt=this.drawAtomSphere,wt=null,yt=null;b.supportsImposters?(gt=this.drawAtomImposter,wt=new a.Geometry(!0),wt.imposter=!0,yt=new a.Geometry(!0,!0),yt.imposter=!0,yt.sphereGeometry=new a.Geometry(!0),yt.sphereGeometry.imposter=!0,yt.drawnCaps={}):b.supportsAIA?(gt=this.drawAtomInstanced,wt=new a.Geometry(!1,!0,!0),wt.instanced=!0,yt=new a.Geometry(!0)):(wt=new a.Geometry(!0),yt=new a.Geometry(!0));var Tt,Mt,Pt,It,Lt={},zt=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(Tt=0,Pt=d.length;Tt<Pt;Tt++){var jt=d[Tt];if(jt&&jt.style){(jt.clickable||jt.hoverable)&&jt.intersectionShape===void 0&&(jt.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),It={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(Mt in It)jt.style[Mt]?jt.style[Mt].opacity?It[Mt]=parseFloat(jt.style[Mt].opacity):It[Mt]=1:It[Mt]=void 0,Lt[Mt]?It[Mt]!=null&&Lt[Mt]!=It[Mt]&&(console.log("Warning: "+Mt+" opacity is ambiguous"),Lt[Mt]=1):Lt[Mt]=It[Mt];gt.call(this,jt,wt),this.drawAtomClickSphere(jt),this.drawAtomCross(jt,tt),this.drawBondLines(jt,d,_t),this.drawBondSticks(jt,d,yt),typeof jt.style.cartoon<"u"&&!jt.style.cartoon.hidden&&(jt.style.cartoon.color==="spectrum"&&typeof jt.resi=="number"&&!jt.hetflag&&(jt.resi<zt[0]&&(zt[0]=jt.resi),jt.resi>zt[1]&&(zt[1]=jt.resi)),mt.push(jt))}}if(mt.length>0&&(0,ot.drawCartoon)(ft,mt,zt,this.defaultCartoonQuality),wt&&wt.vertices>0){wt.initTypedArrays();var Nt=null,kt=null;wt.imposter?Nt=new a.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):wt.instanced?(kt=new a.Geometry(!0),nt.GLDraw.drawSphere(kt,{x:0,y:0,z:0},1,new st.Color(.5,.5,.5)),kt.initTypedArrays(),Nt=new a.InstancedMaterial({sphereMaterial:new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:kt})):Nt=new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),Lt.sphere<1&&Lt.sphere>=0&&(Nt.transparent=!0,Nt.opacity=Lt.sphere),kt=new a.Mesh(wt,Nt),ft.add(kt)}if(yt.vertices>0){var Ot=null,Bt=null,Ut=yt.sphereGeometry;(!Ut||typeof Ut.vertices>"u"||Ut.vertices==0)&&(Ut=null),yt.initTypedArrays(),Ut&&Ut.initTypedArrays();var Ft={ambient:0,vertexColors:!0,reflectivity:0};yt.imposter?(Ot=new a.StickImposterMaterial(Ft),Bt=new a.SphereImposterMaterial(Ft)):(Ot=new a.MeshLambertMaterial(Ft),Bt=new a.MeshLambertMaterial(Ft),Ot.wireframe&&(yt.setUpWireframe(),Ut&&Ut.setUpWireframe())),Lt.stick<1&&Lt.stick>=0&&(Ot.transparent=!0,Ot.opacity=Lt.stick,Bt.transparent=!0,Bt.opacity=Lt.stick);var Wt=new a.Mesh(yt,Ot);if(ft.add(Wt),Ut){var _i=new a.Mesh(Ut,Bt);ft.add(_i)}}var Qt;for(Tt in _t)if(_t.hasOwnProperty(Tt)){Qt=Tt;var on=new a.LineBasicMaterial({linewidth:Qt,vertexColors:!0});Lt.line<1&&Lt.line>=0&&(on.transparent=!0,on.opacity=Lt.line),_t[Tt].initTypedArrays();var nn=new a.Line(_t[Tt],on,a.LineStyle.LinePieces);ft.add(nn)}for(Tt in tt)if(tt.hasOwnProperty(Tt)){Qt=Tt;var dn=new a.LineBasicMaterial({linewidth:Qt,vertexColors:!0});Lt.cross<1&&Lt.cross>=0&&(dn.transparent=!0,dn.opacity=Lt.cross),tt[Tt].initTypedArrays();var tn=new a.Line(tt[Tt],dn,a.LineStyle.LinePieces);ft.add(tn)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var rn=new a.Object3D,En;for(En=0;En<this.modelData.symmetries.length;En++){var bn=new a.Object3D;bn=ft.clone(),bn.matrix.copy(this.modelData.symmetries[En]),bn.matrixAutoUpdate=!1,rn.add(bn)}return rn}return ft}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(d){this.atoms=d.atoms,this.frames=d.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const d=this.modelData.cryst;this.modelData.cryst.matrix=(0,h.conversionMatrix3)(d.a,d.b,d.c,d.alpha,d.beta,d.gamma)}return this.modelData.cryst}else return null}setCrystData(d,b,ft,mt,_t,tt){d=d||1,b=b||1,ft=ft||1,mt=mt||90,_t=_t||90,tt=tt||90;const gt=(0,h.conversionMatrix3)(d,b,ft,mt,_t,tt);this.modelData.cryst={a:d,b,c:ft,alpha:mt,beta:_t,gamma:tt,matrix:gt}}setCrystMatrix(d){d=d||new h.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:d}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(d){typeof d>"u"?this.modelData.symmetries=[this.idMatrix]:this.modelData.symmetries=d}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(d,b,ft,mt){var _t=b-d;return _t<-ft?b+mt:_t>ft?b-mt:b}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var d=this.box[0],b=this.box[1],ft=this.box[2],mt=d*.9,_t=b*.9,tt=ft*.9,gt=0;gt<this.atomdfs.length;gt++)for(var wt=this.atomdfs[gt],yt=1;yt<wt.length;yt++){var Tt=this.atoms[wt[yt][0]],Mt=this.atoms[wt[yt][1]];Tt.x=this.adjustCoord(Mt.x,Tt.x,mt,d),Tt.y=this.adjustCoord(Mt.y,Tt.y,_t,b),Tt.z=this.adjustCoord(Mt.z,Tt.z,tt,ft)}}setFrame(d,b){var ft=this.getNumFrames();let mt=this;return new Promise(function(_t,tt){if(ft==0&&_t(),(d<0||d>=ft)&&(d=ft-1),mt.frames.url!=null){var gt=mt.frames.url;(0,xt.getbin)(gt+"/traj/frame/"+d+"/"+mt.frames.path,void 0,"POST",void 0).then(function(wt){for(var yt=new Float32Array(wt,44),Tt=0,Mt=0;Mt<mt.atoms.length;Mt++)mt.atoms[Mt].x=yt[Tt++],mt.atoms[Mt].y=yt[Tt++],mt.atoms[Mt].z=yt[Tt++];mt.box&&mt.atomdfs&&mt.adjustCoordinatesToBox(),_t()}).catch(tt)}else mt.atoms=mt.frames[d],_t();mt.molObj=null,mt.modelDatas&&d<mt.modelDatas.length&&(mt.modelData=mt.modelDatas[d],mt.unitCellObjects&&b&&(b.removeUnitCell(mt),b.addUnitCell(mt)))})}addFrame(d){this.frames.push(d)}vibrate(d=10,b=1,ft=!1,mt,_t){var tt=0,gt=d;ft&&(tt=-d,gt=d),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),tt<gt&&(this.frames=[]),ft&&(this.frames.origIndex=d);for(var wt=tt;wt<gt;wt++){var yt=[],Tt=this.frames.length;if(wt==0&&!_t){this.frames.push(this.atoms);continue}for(var Mt=0;Mt<this.atoms.length;Mt++){var Pt=(0,xt.getAtomProperty)(this.atoms[Mt],"dx"),It=(0,xt.getAtomProperty)(this.atoms[Mt],"dy"),Lt=(0,xt.getAtomProperty)(this.atoms[Mt],"dz"),zt=new h.Vector3(Pt,It,Lt),jt=new h.Vector3(this.atoms[Mt].x,this.atoms[Mt].y,this.atoms[Mt].z),Nt=wt*b/d;zt.multiplyScalar(Nt),jt.add(zt);var kt={};for(var Ot in this.atoms[Mt])kt[Ot]=this.atoms[Mt][Ot];if(kt.x=jt.x,kt.y=jt.y,kt.z=jt.z,yt.push(kt),mt&&_t){var Bt=(0,xt.extend)({},_t),Ut=new h.Vector3(Pt,It,Lt);if(Ut.multiplyScalar(b),Ut.add(jt),Bt.start=jt,Bt.end=Ut,Bt.frame=Tt,!Bt.color){var Ft=kt.style.sphere;Ft||(Ft=kt.style.stick),Ft||(Ft=kt.style.line),Bt.color=(0,xt.getColorFromStyle)(kt,Ft)}mt.addArrow(Bt)}}this.frames.push(yt)}}setAtomDefaults(d){for(let b=0;b<d.length;b++){let ft=d[b];ft&&(ft.style=ft.style||(0,xt.deepCopy)(Ct.defaultAtomStyle),ft.color=ft.color||this.ElementColors[ft.elem]||this.defaultColor,ft.model=this.id,(ft.clickable||ft.hoverable)&&(ft.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(d,b,ft={}){var mt=Ct.parseMolData(d,b,ft);this.dontDuplicateAtoms=!ft.duplicateAssemblyAtoms;var _t=mt.modelData;if(_t&&(Array.isArray(_t)?(this.modelData=_t[0],ft.frames&&(this.modelDatas=_t)):this.modelData=_t),mt.box?this.box=mt.box:this.box=null,this.frames.length==0){for(let gt=0;gt<mt.length;gt++)mt[gt].length!=0&&this.frames.push(mt[gt]);this.frames[0]&&(this.atoms=this.frames[0])}else if(ft.frames)for(let gt=0;gt<mt.length;gt++)this.frames.push(mt[gt]);else for(var tt=0;tt<mt.length;tt++)this.addAtoms(mt[tt]);for(let gt=0;gt<this.frames.length;gt++)this.setAtomDefaults(this.frames[gt]);ft.vibrate&&ft.vibrate.frames&&ft.vibrate.amplitude&&this.vibrate(ft.vibrate.frames,ft.vibrate.amplitude),ft.style&&this.setStyle({},ft.style)}setDontDuplicateAtoms(d){this.dontDuplicateAtoms=d}setModelData(d){this.modelData=d}propertyMatches(d,b){if(d==b)return!0;if(typeof b=="string"&&typeof d=="number"){var ft=b.match(/(-?\d+)\s*-\s*(-?\d+)/);if(ft){var mt=parseInt(ft[1]),_t=parseInt(ft[2]);if(ft&&d>=mt&&d<=_t)return!0}}return!1}static deepCopyAndCache(d,b){if(typeof d!="object"||d==null||d.__cache_created)return d;const ft={};for(const mt in d){const _t=d[mt];if(Array.isArray(_t)){ft[mt]=[];for(let tt=0;tt<_t.length;tt++)ft[mt].push(Ct.deepCopyAndCache(_t[tt],b))}else typeof _t=="object"&&mt!="properties"&&mt!="model"?ft[mt]=Ct.deepCopyAndCache(_t,b):ft[mt]=_t;if(mt=="and"||mt=="or"){const tt=[];for(const gt of ft[mt]){const wt=new Set;for(const yt of b.selectedAtoms(gt))wt.add(yt.index);tt.push(wt)}if(mt=="and"){const gt=function(yt,Tt){const Mt=new Set;for(const Pt of Tt)yt.has(Pt)&&Mt.add(Pt);return Mt};let wt=new Set(tt[0]);for(const yt of tt.splice(1))wt=gt(wt,yt);ft[mt].__cached_results=wt}else if(mt=="or"){const gt=new Set;for(const wt of tt)for(const yt of wt)gt.add(yt);ft[mt].__cached_results=gt}}}return ft.__cache_created=!0,ft}atomIsSelected(d,b){if(typeof b>"u")return!0;var ft=!!b.invert,mt=!0;for(var _t in b)if(_t=="and"||_t=="or"||_t=="not"){if(_t=="not"){if(this.atomIsSelected(d,b[_t])){mt=!1;break}}else if(b[_t].__cached_results===void 0&&(b=Ct.deepCopyAndCache(b,this)),mt=b[_t].__cached_results.has(d.index),!mt)break}else if(_t==="predicate"){if(!b.predicate(d)){mt=!1;break}}else if(_t=="properties"&&d[_t]){for(var tt in b.properties)if(!tt.startsWith("__cache")){if(typeof d.properties[tt]>"u"){mt=!1;break}if(d.properties[tt]!=b.properties[tt]){mt=!1;break}}}else if(b.hasOwnProperty(_t)&&!Ct.ignoredKeys.has(_t)&&!_t.startsWith("__cache")){if(typeof d[_t]>"u"){mt=!1;break}var gt=!1;if(_t==="bonds"){var wt=b[_t];if(wt!=d.bonds.length){mt=!1;break}}else if(Array.isArray(b[_t])){var yt=b[_t],Tt=d[_t];for(let Mt=0;Mt<yt.length;Mt++)if(this.propertyMatches(Tt,yt[Mt])){gt=!0;break}if(!gt){mt=!1;break}}else{let Mt=b[_t];if(!this.propertyMatches(d[_t],Mt)){mt=!1;break}}}return ft?!mt:mt}static squaredDistance(d,b){var ft=b.x-d.x,mt=b.y-d.y,_t=b.z-d.z;return ft*ft+mt*mt+_t*_t}expandAtomList(d,b){if(b<=0)return d;for(var ft=(0,xt.getExtent)(d,void 0),mt=[[],[],[]],_t=0;_t<3;_t++)mt[0][_t]=ft[0][_t]-b,mt[1][_t]=ft[1][_t]+b,mt[2][_t]=ft[2][_t];var tt=[];for(let Tt=0;Tt<this.atoms.length;Tt++){var gt=this.atoms[Tt].x,wt=this.atoms[Tt].y,yt=this.atoms[Tt].z;gt>=mt[0][0]&&gt<=mt[1][0]&&wt>=mt[0][1]&&wt<=mt[1][1]&&yt>=mt[0][2]&&yt<=mt[1][2]&&(gt>=ft[0][0]&&gt<=ft[1][0]&&wt>=ft[0][1]&&wt<=ft[1][1]&&yt>=ft[0][2]&&yt<=ft[1][2]||tt.push(this.atoms[Tt]))}return tt}static getFloat(d){return typeof d=="number"?d:parseFloat(d)}selectedAtoms(d,b){var ft=[];d=Ct.deepCopyAndCache(d||{},this),b||(b=this.atoms);for(var mt=b.length,_t=0;_t<mt;_t++){var tt=b[_t];tt&&this.atomIsSelected(tt,d)&&ft.push(tt)}if(d.hasOwnProperty("expand")){const kt=Ct.getFloat(d.expand);let Ot=this.expandAtomList(ft,kt),Bt=ft.length;const Ut=kt*kt;for(let Ft=0;Ft<Ot.length;Ft++)for(let Wt=0;Wt<Bt;Wt++){var gt=Ct.squaredDistance(Ot[Ft],ft[Wt]);gt<Ut&&gt>0&&ft.push(Ot[Ft])}}if(d.hasOwnProperty("within")&&d.within.hasOwnProperty("sel")&&d.within.hasOwnProperty("distance")){var wt=this.selectedAtoms(d.within.sel,this.atoms),yt={};const kt=Ct.getFloat(d.within.distance),Ot=kt*kt;for(let Bt=0;Bt<wt.length;Bt++)for(let Ut=0;Ut<ft.length;Ut++){let Ft=Ct.squaredDistance(wt[Bt],ft[Ut]);Ft<Ot&&Ft>0&&(yt[Ut]=1)}var Tt=[];if(d.within.invert)for(let Bt=0;Bt<ft.length;Bt++)yt[Bt]||Tt.push(ft[Bt]);else for(let Bt in yt)Tt.push(ft[Bt]);ft=Tt}if(d.hasOwnProperty("byres")){var Mt={},Pt=[],It=[];for(let kt=0;kt<ft.length;kt++){let Ot=ft[kt];var Lt=Ot.chain,zt=Ot.resi;if(Mt[Lt]===void 0&&(Mt[Lt]={}),Ot.hasOwnProperty("resi")&&Mt[Lt][zt]===void 0){for(Mt[Lt][zt]=!0,It.push(Ot);It.length>0;)if(Ot=It.pop(),Lt=Ot.chain,zt=Ot.resi,Pt[Ot.index]===void 0){Pt[Ot.index]=!0;for(var jt=0;jt<Ot.bonds.length;jt++){var Nt=this.atoms[Ot.bonds[jt]];Pt[Nt.index]===void 0&&Nt.hasOwnProperty("resi")&&Nt.chain==Lt&&Nt.resi==zt&&(It.push(Nt),ft.push(Nt))}}}}}return ft}addAtoms(d){this.molObj=null;var b=this.atoms.length,ft=[],mt;for(mt=0;mt<d.length;mt++)typeof d[mt].index>"u"&&(d[mt].index=mt),typeof d[mt].serial>"u"&&(d[mt].serial=mt),ft[d[mt].index]=b+mt;for(mt=0;mt<d.length;mt++){var _t=d[mt],tt=ft[_t.index],gt=(0,xt.extend)({},_t);gt.index=tt,gt.bonds=[],gt.bondOrder=[],gt.model=this.id,gt.style=gt.style||(0,xt.deepCopy)(Ct.defaultAtomStyle),typeof gt.color>"u"&&(gt.color=this.ElementColors[gt.elem]||this.defaultColor);for(var wt=_t.bonds?_t.bonds.length:0,yt=0;yt<wt;yt++){var Tt=ft[_t.bonds[yt]];typeof Tt<"u"&&(gt.bonds.push(Tt),gt.bondOrder.push(_t.bondOrder?_t.bondOrder[yt]:1))}this.atoms.push(gt)}}assignBonds(){(0,Et.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(d){this.molObj=null;var b=[],ft;for(ft=0;ft<d.length;ft++)b[d[ft].index]=!0;var mt=[];for(ft=0;ft<this.atoms.length;ft++){var _t=this.atoms[ft];b[_t.index]||mt.push(_t)}this.atoms=[],this.addAtoms(mt)}setStyle(d,b,ft){typeof b>"u"&&typeof ft>"u"&&(b=d,d={}),d=d,typeof b=="string"&&(b=(0,xt.specStringToObject)(b));var mt=!1,_t=this,tt=function(wt){var yt=_t.selectedAtoms(d,wt);for(let Tt=0;Tt<wt.length;Tt++)wt[Tt]&&(wt[Tt].capDrawn=!1);for(let Tt=0;Tt<yt.length;Tt++){mt=!0,(yt[Tt].clickable||yt[Tt].hoverable)&&(yt[Tt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),ft||(yt[Tt].style={});for(let Mt in b)b.hasOwnProperty(Mt)&&(yt[Tt].style[Mt]=yt[Tt].style[Mt]||{},Object.assign(yt[Tt].style[Mt],b[Mt]))}};if(d.frame!==void 0&&d.frame<this.frames.length){let wt=d.frame;wt<0&&(wt=this.frames.length+wt),tt(this.frames[wt])}else{tt(this.atoms);for(var gt=0;gt<this.frames.length;gt++)this.frames[gt]!==this.atoms&&tt(this.frames[gt])}mt&&(this.molObj=null)}setClickable(d,b,ft){if(b=!!b,ft=(0,xt.makeFunction)(ft),ft===null){console.log("Callback is not a function");return}var mt=this.selectedAtoms(d,this.atoms),_t=mt.length;for(let tt=0;tt<_t;tt++)mt[tt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},mt[tt].clickable=b,ft&&(mt[tt].callback=ft);_t>0&&(this.molObj=null)}setHoverable(d,b,ft,mt){if(b=!!b,ft=(0,xt.makeFunction)(ft),mt=(0,xt.makeFunction)(mt),ft===null){console.log("Hover_callback is not a function");return}if(mt===null){console.log("Unhover_callback is not a function");return}var _t=this.selectedAtoms(d,this.atoms),tt=_t.length;for(let gt=0;gt<tt;gt++)_t[gt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},_t[gt].hoverable=b,ft&&(_t[gt].hover_callback=ft),mt&&(_t[gt].unhover_callback=mt);tt>0&&(this.molObj=null)}enableContextMenu(d,b){b=!!b;var ft,mt=this.selectedAtoms(d,this.atoms),_t=mt.length;for(ft=0;ft<_t;ft++)mt[ft].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},mt[ft].contextMenuEnabled=b;_t>0&&(this.molObj=null)}setColorByElement(d,b){if(!(this.molObj!==null&&Ct.sameObj(b,this.lastColors))){this.lastColors=b;var ft=this.selectedAtoms(d,ft);ft.length>0&&(this.molObj=null);for(var mt=0;mt<ft.length;mt++){var _t=ft[mt];typeof b[_t.elem]<"u"&&(_t.color=b[_t.elem])}}}setColorByProperty(d,b,ft,mt){var _t,tt,gt=this.selectedAtoms(d,gt);for(this.lastColors=null,gt.length>0&&(this.molObj=null),typeof ft=="string"&&typeof vt.Gradient.builtinGradients[ft]<"u"&&(ft=new vt.Gradient.builtinGradients[ft]),ft=ft,mt||(mt=ft.range()),mt||(mt=(0,xt.getPropertyRange)(gt,b)),_t=0;_t<gt.length;_t++){tt=gt[_t];var wt=(0,xt.getAtomProperty)(tt,b);wt!=null&&(tt.color=ft.valueToHex(parseFloat(tt.properties[b]),mt))}}setColorByFunction(d,b){var ft=this.selectedAtoms(d,ft);if(typeof b=="function"){this.lastColors=null,ft.length>0&&(this.molObj=null);for(let mt=0;mt<ft.length;mt++){let _t=ft[mt];_t.color=b(_t)}}}toCDObject(d=!1){var b={a:[],b:[]};d&&(b.s=[]);for(let mt=0;mt<this.atoms.length;mt++){let _t={},tt=this.atoms[mt];if(_t.x=tt.x,_t.y=tt.y,_t.z=tt.z,tt.elem!="C"&&(_t.l=tt.elem),d){for(var ft=0;ft<b.s.length&&JSON.stringify(tt.style)!==JSON.stringify(b.s[ft]);)ft++;ft===b.s.length&&b.s.push(tt.style),ft!==0&&(_t.s=ft)}b.a.push(_t);for(let gt=0;gt<tt.bonds.length;gt++){let wt=mt,yt=tt.bonds[gt];if(wt>=yt)continue;let Tt={b:wt,e:yt},Mt=tt.bondOrder[gt];Mt!=1&&(Tt.o=Mt),b.b.push(Tt)}}return b}globj(d,b){(this.molObj===null||b.regen)&&(this.molObj=this.createMolObj(this.atoms,b),this.renderedMolObj&&(d.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),d.add(this.renderedMolObj))}exportVRML(){var d=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return d.vrml()}removegl(d){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),d.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(d,b,ft,mt){for(var _t=this.selectedAtoms(b,_t),tt=(0,xt.deepCopy)(mt),gt=0;gt<_t.length;gt++){var wt=_t[gt],yt=null;typeof wt[d]<"u"?yt=String(wt[d]):typeof wt.properties[d]<"u"&&(yt=String(wt.properties[d])),yt!=null&&(tt.position=wt,ft.addLabel(yt,tt))}}addResLabels(d,b,ft,mt=!1){var _t=[],tt=function(wt,yt){for(var Tt=wt.selectedAtoms(d,Tt),Mt={},Pt=0;Pt<Tt.length;Pt++){var It=Tt[Pt],Lt=It.chain,zt=It.resn,jt=It.resi,Nt=zt+""+jt;Mt[Lt]||(Mt[Lt]={}),Mt[Lt][Nt]||(Mt[Lt][Nt]=[]),Mt[Lt][Nt].push(It)}var kt=(0,xt.deepCopy)(ft);for(let Bt in Mt)if(Mt.hasOwnProperty(Bt)){var Ot=Mt[Bt];for(let Ut in Ot)if(Ot.hasOwnProperty(Ut)){let Ft=Ot[Ut],Wt=new h.Vector3(0,0,0);for(let Qt=0;Qt<Ft.length;Qt++){let on=Ft[Qt];Wt.x+=on.x,Wt.y+=on.y,Wt.z+=on.z}Wt.divideScalar(Ft.length),kt.position=Wt,kt.frame=yt;let _i=b.addLabel(Ut,kt,void 0,!0);_t.push(_i)}}};if(mt){var gt=this.getNumFrames();let wt=this.atoms;for(let yt=0;yt<gt;yt++)this.frames[yt]&&(this.atoms=this.frames[yt],tt(this,yt));this.atoms=wt}else tt(this);return _t}setupDFS(){this.atomdfs=[];var d=this,b=new Int8Array(this.atoms.length);b.fill(0);for(var ft=function(gt,wt,yt){yt.push([gt,wt]);var Tt=d.atoms[gt];b[gt]=1;for(var Mt=0;Mt<Tt.bonds.length;Mt++){var Pt=Tt.bonds[Mt];d.atoms[Pt]&&!b[Pt]&&ft(Pt,gt,yt)}},mt=0;mt<this.atoms.length;mt++){var _t=this.atoms[mt];if(_t&&!b[mt]){var tt=[];ft(mt,-1,tt),this.atomdfs.push(tt)}}}setCoordinatesFromURL(d,b){this.frames=[];var ft=this;return this.box&&this.setupDFS(),d.startsWith("http")||(d="http://"+d),(0,xt.get)(d+"/traj/numframes/"+b,function(mt){if(!isNaN(parseInt(mt)))return ft.frames.push(ft.atoms),ft.frames.numFrames=mt,ft.frames.url=d,ft.frames.path=b,ft.setFrame(0)})}setCoordinates(d,b){if(b=b||"",!d)return[];if(/\.gz$/.test(b)){b=b.replace(/\.gz$/,"");try{d=(0,xt.inflateString)(d)}catch(Mt){console.log(Mt)}}var ft={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(ft.hasOwnProperty(b)){this.frames=[];for(var mt=this.atoms.length,_t=Ct.parseCrd(d,b),tt=0;tt<_t.length;){for(var gt=[],wt=0;wt<mt;wt++){var yt={};for(var Tt in this.atoms[wt])yt[Tt]=this.atoms[wt][Tt];gt[wt]=yt,gt[wt].x=_t[tt++],gt[wt].y=_t[tt++],gt[wt].z=_t[tt++]}this.frames.push(gt)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(d){}static parseCrd(d,b){var ft=[],mt=0;if(b=="pdb")for(var _t=d.indexOf(`
ATOM`);_t!=-1;){for(;d.slice(_t,_t+5)==`
ATOM`||d.slice(_t,_t+7)==`
HETATM`;)ft[mt++]=parseFloat(d.slice(_t+31,_t+39)),ft[mt++]=parseFloat(d.slice(_t+39,_t+47)),ft[mt++]=parseFloat(d.slice(_t+47,_t+55)),_t=d.indexOf(`
`,_t+54),d.slice(_t,_t+4)==`
TER`&&(_t=d.indexOf(`
`,_t+5));_t=d.indexOf(`
ATOM`,_t)}else if(b=="netcdf"){var tt=new St.NetCDFReader(d);ft=[].concat.apply([],tt.getDataVariable("coordinates"))}else{if(b=="array"||Array.isArray(d))return d.flat(2);{let gt=d.indexOf(`
`);b=="inpcrd"&&(gt=d.indexOf(`
`,gt+1)),d=d.slice(gt+1),ft=d.match(/\S+/g).map(parseFloat)}}return ft}static parseMolData(d,b="",ft){if(!d)return[];if(/\.gz$/.test(b)){b=b.replace(/\.gz$/,"");try{b.match(/bcif/i)?d=(0,xt.inflateString)(d,!1):d=(0,xt.inflateString)(d)}catch(tt){console.log(tt)}}typeof bt.Parsers[b]>"u"&&(b=b.split(".").pop(),typeof bt.Parsers[b]>"u"&&(console.log("Unknown format: "+b),d instanceof Uint8Array?b="bcif":d.match(/^@<TRIPOS>MOLECULE/gm)?b="mol2":d.match(/^data_/gm)&&d.match(/^loop_/gm)?b="cif":d.match(/^HETATM/gm)||d.match(/^ATOM/gm)?b="pdb":d.match(/ITEM: TIMESTEP/gm)?b="lammpstrj":d.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?b="sdf":d.match(/^%VERSION\s+VERSION_STAMP/gm)?b="prmtop":b="xyz",console.log("Best guess: "+b)));var mt=bt.Parsers[b],_t=mt(d,ft);return _t}}Ct.defaultAtomStyle={line:{}},Ct.defaultlineWidth=1,Ct.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},Ct.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])},"./src/GLShape.ts":(e,i,s)=>{s.r(i),s.d(i,{GLShape:()=>St,splitMesh:()=>Et});var a=s("./src/WebGL/index.ts"),c=s("./src/WebGL/shapes/index.ts"),h=s("./src/WebGL/math/index.ts"),st=s("./src/colors.ts"),nt=s("./src/ProteinSurface4.ts"),ot=s("./src/VolumeData.ts"),xt=s("./src/GLDraw.ts"),vt=s("./src/glcartoon.ts"),bt=s("./src/utilities.ts");class St{static finalizeGeo(ht){var d=ht.updateGeoGroup(0);d.vertices>0&&d.truncateArrayBuffers(!0,!0)}static updateColor(ht,d){d=d||st.CC.color(d),ht.colorsNeedUpdate=!0;var b,ft,mt;d.constructor!==Array&&(b=d.r,ft=d.g,mt=d.b);for(let _t in ht.geometryGroups){let tt=ht.geometryGroups[_t],gt=tt.colorArray;for(let wt=0,yt=tt.vertices;wt<yt;++wt){if(d.constructor===Array){let Tt=d[wt];b=Tt.r,ft=Tt.g,mt=Tt.b}gt[wt*3]=b,gt[wt*3+1]=ft,gt[wt*3+2]=mt}}}static drawArrow(ht,d,b){var ft=b.start,mt=b.end,_t=b.radius,tt=b.radiusRatio,gt=b.mid,wt=b.midpos;if(!(ft&&mt))return;var yt=d.updateGeoGroup(51),Tt=new h.Vector3(mt.x,mt.y,mt.z).sub(ft);if(wt){let ln=Tt.length();wt>0?gt=wt/ln:gt=(ln+wt)/ln}Tt.multiplyScalar(gt);var Mt=new h.Vector3(ft.x,ft.y,ft.z).add(Tt),Pt=Tt.clone().negate();let It=new h.Vector3(ft.x,ft.y,ft.z);ht.intersectionShape.cylinder.push(new c.Cylinder(It,Mt.clone(),_t)),ht.intersectionShape.sphere.push(new c.Sphere(It,_t));var Lt=[];Lt[0]=Tt.clone(),Math.abs(Lt[0].x)>1e-4?Lt[0].y+=1:Lt[0].x+=1,Lt[0].cross(Tt),Lt[0].normalize(),Lt[4]=Lt[0].clone(),Lt[4].crossVectors(Lt[0],Tt),Lt[4].normalize(),Lt[8]=Lt[0].clone().negate(),Lt[12]=Lt[4].clone().negate(),Lt[2]=Lt[0].clone().add(Lt[4]).normalize(),Lt[6]=Lt[4].clone().add(Lt[8]).normalize(),Lt[10]=Lt[8].clone().add(Lt[12]).normalize(),Lt[14]=Lt[12].clone().add(Lt[0]).normalize(),Lt[1]=Lt[0].clone().add(Lt[2]).normalize(),Lt[3]=Lt[2].clone().add(Lt[4]).normalize(),Lt[5]=Lt[4].clone().add(Lt[6]).normalize(),Lt[7]=Lt[6].clone().add(Lt[8]).normalize(),Lt[9]=Lt[8].clone().add(Lt[10]).normalize(),Lt[11]=Lt[10].clone().add(Lt[12]).normalize(),Lt[13]=Lt[12].clone().add(Lt[14]).normalize(),Lt[15]=Lt[14].clone().add(Lt[0]).normalize();var zt=yt.vertices,jt=yt.vertexArray,Nt=yt.faceArray,kt=yt.normalArray,Ot=yt.lineArray,Bt,Ut,Ft;for(Ut=0,Ft=Lt.length;Ut<Ft;++Ut){Bt=3*(zt+3*Ut);var Wt=Lt[Ut].clone().multiplyScalar(_t).add(ft),_i=Lt[Ut].clone().multiplyScalar(_t).add(Mt),Qt=Lt[Ut].clone().multiplyScalar(_t*tt).add(Mt);if(jt[Bt]=Wt.x,jt[Bt+1]=Wt.y,jt[Bt+2]=Wt.z,jt[Bt+3]=_i.x,jt[Bt+4]=_i.y,jt[Bt+5]=_i.z,jt[Bt+6]=Qt.x,jt[Bt+7]=Qt.y,jt[Bt+8]=Qt.z,Ut>0){var on=jt[Bt-3],nn=jt[Bt-2],dn=jt[Bt-1],tn=new h.Vector3(on,nn,dn),rn=new h.Vector3(mt.x,mt.y,mt.z),En=Mt.clone(),bn=new h.Vector3(Qt.x,Qt.y,Qt.z);ht.intersectionShape.triangle.push(new c.Triangle(bn,rn,tn)),ht.intersectionShape.triangle.push(new c.Triangle(tn.clone(),En,bn.clone()))}}yt.vertices+=48,Bt=yt.vertices*3,jt[Bt]=ft.x,jt[Bt+1]=ft.y,jt[Bt+2]=ft.z,jt[Bt+3]=Mt.x,jt[Bt+4]=Mt.y,jt[Bt+5]=Mt.z,jt[Bt+6]=mt.x,jt[Bt+7]=mt.y,jt[Bt+8]=mt.z,yt.vertices+=3;var Dn,hn,en,xn,Pn,In,Nn,Un,kn,jn,zn,On,cn,Ln,Fn,$t,Xt,Zt,mn,an=yt.vertices-3,Rn=yt.vertices-2,Cn=yt.vertices-1,Gt=an*3,un=Rn*3,yn=Cn*3;for(Ut=0,Ft=Lt.length-1;Ut<Ft;++Ut){var Mn=zt+3*Ut;Bt=Mn*3,hn=yt.faceidx,en=yt.lineidx,xn=Mn,jn=xn*3,Pn=Mn+1,zn=Pn*3,In=Mn+2,On=In*3,Nn=Mn+4,cn=Nn*3,Un=Mn+5,Ln=Un*3,kn=Mn+3,Fn=kn*3,$t=Xt=Lt[Ut],Zt=mn=Lt[Ut+1],kt[jn]=$t.x,kt[zn]=Xt.x,kt[Fn]=mn.x,kt[jn+1]=$t.y,kt[zn+1]=Xt.y,kt[Fn+1]=mn.y,kt[jn+2]=$t.z,kt[zn+2]=Xt.z,kt[Fn+2]=mn.z,kt[zn]=Xt.x,kt[cn]=Zt.x,kt[Fn]=mn.x,kt[zn+1]=Xt.y,kt[cn+1]=Zt.y,kt[Fn+1]=mn.y,kt[zn+2]=Xt.z,kt[cn+2]=Zt.z,kt[Fn+2]=mn.z,kt[On]=Xt.x,kt[Ln]=Zt.x,kt[On+1]=Xt.y,kt[Ln+1]=Zt.y,kt[On+2]=Xt.z,kt[Ln+2]=Zt.z,Nt[hn]=xn,Nt[hn+1]=Pn,Nt[hn+2]=kn,Nt[hn+3]=Pn,Nt[hn+4]=Nn,Nt[hn+5]=kn,Nt[hn+6]=xn,Nt[hn+7]=kn,Nt[hn+8]=an,Nt[hn+9]=In,Nt[hn+10]=Rn,Nt[hn+11]=Un,Nt[hn+12]=In,Nt[hn+13]=Cn,Nt[hn+14]=Un,Ot[en]=xn,Ot[en+1]=Pn,Ot[en+2]=xn,Ot[en+3]=kn,Ot[en+4]=Nn,Ot[en+5]=kn,Ot[en+6]=xn,Ot[en+7]=kn,Ot[en+8]=In,Ot[en+9]=Pn,Ot[en+10]=In,Ot[en+11]=Un,Ot[en+12]=Nn,Ot[en+13]=Un,Ot[en+14]=In,Ot[en+15]=Cn,Ot[en+16]=In,Ot[en+17]=Un,Ot[en+18]=Cn,Ot[en+19]=Un,yt.faceidx+=15,yt.lineidx+=20}Dn=[zt+45,zt+46,zt+1,zt,zt+47,zt+2],hn=yt.faceidx,en=yt.lineidx,xn=Dn[0],jn=xn*3,Pn=Dn[1],zn=Pn*3,In=Dn[4],On=In*3,Nn=Dn[2],cn=Nn*3,Un=Dn[5],Ln=Un*3,kn=Dn[3],Fn=kn*3,$t=Xt=Lt[15],Zt=mn=Lt[0],kt[jn]=$t.x,kt[zn]=Xt.x,kt[Fn]=mn.x,kt[jn+1]=$t.y,kt[zn+1]=Xt.y,kt[Fn+1]=mn.y,kt[jn+2]=$t.z,kt[zn+2]=Xt.z,kt[Fn+2]=mn.z,kt[zn]=Xt.x,kt[cn]=Zt.x,kt[Fn]=mn.x,kt[zn+1]=Xt.y,kt[cn+1]=Zt.y,kt[Fn+1]=mn.y,kt[zn+2]=Xt.z,kt[cn+2]=Zt.z,kt[Fn+2]=mn.z,kt[On]=Xt.x,kt[Ln]=Zt.x,kt[On+1]=Xt.y,kt[Ln+1]=Zt.y,kt[On+2]=Xt.z,kt[Ln+2]=Zt.z,Tt.normalize(),Pt.normalize(),kt[Gt]=Pt.x,kt[un]=kt[yn]=Tt.x,kt[Gt+1]=Pt.y,kt[un+1]=kt[yn+1]=Tt.y,kt[Gt+2]=Pt.z,kt[un+2]=kt[yn+2]=Tt.z,Nt[hn]=xn,Nt[hn+1]=Pn,Nt[hn+2]=kn,Nt[hn+3]=Pn,Nt[hn+4]=Nn,Nt[hn+5]=kn,Nt[hn+6]=xn,Nt[hn+7]=kn,Nt[hn+8]=an,Nt[hn+9]=In,Nt[hn+10]=Rn,Nt[hn+11]=Un,Nt[hn+12]=In,Nt[hn+13]=Cn,Nt[hn+14]=Un,Ot[en]=xn,Ot[en+1]=Pn,Ot[en+2]=xn,Ot[en+3]=kn,Ot[en+4]=Nn,Ot[en+5]=kn,Ot[en+6]=xn,Ot[en+7]=kn,Ot[en+8]=In,Ot[en+9]=Pn,Ot[en+10]=In,Ot[en+11]=Un,Ot[en+12]=Nn,Ot[en+13]=Un,Ot[en+14]=In,Ot[en+15]=Cn,Ot[en+16]=In,Ot[en+17]=Un,Ot[en+18]=Cn,Ot[en+19]=Un,yt.faceidx+=15,yt.lineidx+=20}static updateBoundingFromPoints(ht,d,b,ft){ht.center.set(0,0,0);let mt=1/0,_t=1/0,tt=1/0,gt=-1/0,wt=-1/0,yt=-1/0;ht.box&&(mt=ht.box.min.x,gt=ht.box.max.x,_t=ht.box.min.y,wt=ht.box.max.y,tt=ht.box.min.z,yt=ht.box.max.z);for(let It=0,Lt=ft;It<Lt;It++){var Tt=b[It*3],Mt=b[It*3+1],Pt=b[It*3+2];Tt<mt&&(mt=Tt),Mt<_t&&(_t=Mt),Pt<tt&&(tt=Pt),Tt>gt&&(gt=Tt),Mt>wt&&(wt=Mt),Pt>yt&&(yt=Pt)}ht.center.set((gt+mt)/2,(wt+_t)/2,(yt+tt)/2),ht.radius=ht.center.distanceTo({x:gt,y:wt,z:yt}),ht.box={min:{x:mt,y:_t,z:tt},max:{x:gt,y:wt,z:yt}}}static addCustomGeo(ht,d,b,ft,mt){var _t=d.addGeoGroup(),tt=b.vertexArr,gt=b.normalArr,wt=b.faceArr;_t.vertices=tt.length,_t.faceidx=wt.length;var yt,Tt,Mt,Pt,It,Lt,zt,jt,Nt,kt=_t.vertexArray,Ot=_t.colorArray;for(ft.constructor!==Array&&(jt=ft.r,Nt=ft.g,Pt=ft.b),Lt=0,zt=_t.vertices;Lt<zt;++Lt)yt=Lt*3,Tt=tt[Lt],kt[yt]=Tt.x,kt[yt+1]=Tt.y,kt[yt+2]=Tt.z,ft.constructor===Array&&(It=ft[Lt],jt=It.r,Nt=It.g,Pt=It.b),Ot[yt]=jt,Ot[yt+1]=Nt,Ot[yt+2]=Pt;if(mt)for(Lt=0,zt=_t.faceidx/3;Lt<zt;++Lt){yt=Lt*3,Mt=wt[yt],Pt=wt[yt+1],It=wt[yt+2];var Bt=new h.Vector3,Ut=new h.Vector3,Ft=new h.Vector3;ht.intersectionShape.triangle.push(new c.Triangle(Bt.copy(tt[Mt]),Ut.copy(tt[Pt]),Ft.copy(tt[It])))}if(mt){var Wt=new h.Vector3(0,0,0),_i=0;for(let nn=0;nn<d.geometryGroups.length;nn++)Wt.add(d.geometryGroups[nn].getCentroid()),_i++;Wt.divideScalar(_i),St.updateBoundingFromPoints(ht.boundingSphere,{centroid:Wt},kt,_t.vertices)}if(_t.faceArray=new Uint16Array(wt),_t.truncateArrayBuffers(!0,!0),gt.length<_t.vertices)_t.setNormals();else{var Qt=_t.normalArray=new Float32Array(_t.vertices*3),on;for(Lt=0,zt=_t.vertices;Lt<zt;++Lt)yt=Lt*3,on=gt[Lt],Qt[yt]=on.x,Qt[yt+1]=on.y,Qt[yt+2]=on.z}_t.setLineIndices(),_t.lineidx=_t.lineArray.length}static updateFromStyle(ht,d){typeof d.color<"u"?(ht.color=d.color||new st.Color,d.color instanceof st.Color||(ht.color=st.CC.color(d.color))):ht.color=st.CC.color(0),ht.wireframe=!!d.wireframe,ht.opacity=d.alpha?(0,h.clamp)(d.alpha,0,1):1,typeof d.opacity<"u"&&(ht.opacity=(0,h.clamp)(d.opacity,0,1)),ht.side=d.side!==void 0?d.side:a.DoubleSide,ht.linewidth=typeof d.linewidth>"u"?1:d.linewidth,ht.clickable=!!d.clickable,ht.callback=(0,bt.makeFunction)(d.callback),ht.hoverable=!!d.hoverable,ht.hover_callback=(0,bt.makeFunction)(d.hover_callback),ht.unhover_callback=(0,bt.makeFunction)(d.unhover_callback),ht.contextMenuEnabled=!!d.contextMenuEnabled,ht.hidden=d.hidden,ht.frame=d.frame}constructor(ht){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=a.DoubleSide,this.stylespec=ht||{},this.boundingSphere=new c.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},St.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new a.Geometry(!0),this.linegeo=new a.Geometry(!0)}updateStyle(ht){for(var d in ht)this.stylespec[d]=ht[d];if(St.updateFromStyle(this,this.stylespec),ht.voldata&&ht.volscheme){(0,bt.adjustVolumeStyle)(ht);const b=ht.volscheme,ft=ht.voldata,mt=st.CC,_t=b.range()||[-1,1];this.geo.setColors(function(tt,gt,wt){let yt=ft.getVal(tt,gt,wt);return mt.color(b.valueToHex(yt,_t))}),delete this.color}}addCustom(ht){ht.vertexArr=ht.vertexArr||[],ht.faceArr=ht.faceArr||[],ht.normalArr=ht.normalArr||[],St.drawCustom(this,this.geo,ht)}addSphere(ht){ht.center||(ht.center=new h.Vector3(0,0,0)),ht.radius=ht.radius?(0,h.clamp)(ht.radius,0,1/0):1.5,ht.color=st.CC.color(ht.color),this.intersectionShape.sphere.push(new c.Sphere(ht.center,ht.radius)),xt.GLDraw.drawSphere(this.geo,ht.center,ht.radius,ht.color,ht.quality),this.components.push({centroid:new h.Vector3(ht.center.x,ht.center.y,ht.center.z)});var d=this.geo.updateGeoGroup(0);St.updateBoundingFromPoints(this.boundingSphere,this.components,d.vertexArray,d.vertices)}addBox(ht){var d=ht.dimensions||{w:1,h:1,d:1},b;typeof d.w=="number"?b={x:d.w,y:0,z:0}:b=d.w;var ft;typeof d.h=="number"?ft={x:0,y:d.h,z:0}:ft=d.h;var mt;typeof d.d=="number"?mt={x:0,y:0,z:d.d}:mt=d.d;var _t=ht.corner;_t==null&&(ht.center!==void 0?_t={x:ht.center.x-.5*(b.x+ft.x+mt.x),y:ht.center.y-.5*(b.y+ft.y+mt.y),z:ht.center.z-.5*(b.z+ft.z+mt.z)}:_t={x:0,y:0,z:0});var tt=[{x:_t.x,y:_t.y,z:_t.z},{x:_t.x+b.x,y:_t.y+b.y,z:_t.z+b.z},{x:_t.x+ft.x,y:_t.y+ft.y,z:_t.z+ft.z},{x:_t.x+b.x+ft.x,y:_t.y+b.y+ft.y,z:_t.z+b.z+ft.z},{x:_t.x+mt.x,y:_t.y+mt.y,z:_t.z+mt.z},{x:_t.x+b.x+mt.x,y:_t.y+b.y+mt.y,z:_t.z+b.z+mt.z},{x:_t.x+ft.x+mt.x,y:_t.y+ft.y+mt.y,z:_t.z+ft.z+mt.z},{x:_t.x+b.x+ft.x+mt.x,y:_t.y+b.y+ft.y+mt.y,z:_t.z+b.z+ft.z+mt.z}],gt=[],wt=[];gt.splice(gt.length,0,tt[0],tt[1],tt[2],tt[3]),wt.splice(wt.length,0,0,2,1,1,2,3);var yt=4;gt.splice(gt.length,0,tt[2],tt[3],tt[6],tt[7]),wt.splice(wt.length,0,yt+0,yt+2,yt+1,yt+1,yt+2,yt+3),yt+=4,gt.splice(gt.length,0,tt[4],tt[5],tt[0],tt[1]),wt.splice(wt.length,0,yt+0,yt+2,yt+1,yt+1,yt+2,yt+3),yt+=4,gt.splice(gt.length,0,tt[6],tt[7],tt[4],tt[5]),wt.splice(wt.length,0,yt+0,yt+2,yt+1,yt+1,yt+2,yt+3),yt+=4,gt.splice(gt.length,0,tt[3],tt[1],tt[7],tt[5]),wt.splice(wt.length,0,yt+0,yt+2,yt+1,yt+1,yt+2,yt+3),yt+=4,gt.splice(gt.length,0,tt[2],tt[6],tt[0],tt[4]),wt.splice(wt.length,0,yt+0,yt+2,yt+1,yt+1,yt+2,yt+3),yt+=4;var Tt=(0,bt.extend)({},ht);Tt.vertexArr=gt,Tt.faceArr=wt,Tt.normalArr=[],St.drawCustom(this,this.geo,Tt);var Mt=new h.Vector3;this.components.push({centroid:Mt.addVectors(tt[0],tt[7]).multiplyScalar(.5)});var Pt=this.geo.updateGeoGroup(0);St.updateBoundingFromPoints(this.boundingSphere,this.components,Pt.vertexArray,Pt.vertices)}addCylinder(ht){var d,b;ht.start?d=new h.Vector3(ht.start.x||0,ht.start.y||0,ht.start.z||0):d=new h.Vector3(0,0,0),ht.end?(b=new h.Vector3(ht.end.x,ht.end.y||0,ht.end.z||0),typeof b.x>"u"&&(b.x=3)):b=new h.Vector3(0,0,0);var ft=ht.radius||.1,mt=st.CC.color(ht.color);this.intersectionShape.cylinder.push(new c.Cylinder(d,b,ft)),xt.GLDraw.drawCylinder(this.geo,d,b,ft,mt,ht.fromCap,ht.toCap);var _t=new h.Vector3;this.components.push({centroid:_t.addVectors(d,b).multiplyScalar(.5)});var tt=this.geo.updateGeoGroup(0);St.updateBoundingFromPoints(this.boundingSphere,this.components,tt.vertexArray,tt.vertices)}addDashedCylinder(ht){ht.dashLength=ht.dashLength||.25,ht.gapLength=ht.gapLength||.25;var d;ht.start?d=new h.Vector3(ht.start.x||0,ht.start.y||0,ht.start.z||0):d=new h.Vector3(0,0,0);var b;ht.end?(b=new h.Vector3(ht.end.x,ht.end.y||0,ht.end.z||0),typeof b.x>"u"&&(b.x=3)):b=new h.Vector3(3,0,0);for(var ft=ht.radius||.1,mt=st.CC.color(ht.color),_t=Math.sqrt(Math.pow(d.x-b.x,2)+Math.pow(d.y-b.y,2)+Math.pow(d.z-b.z,2)),tt=_t/(ht.gapLength+ht.dashLength),gt=new h.Vector3(ht.start.x||0,ht.start.y||0,ht.start.z||0),wt=new h.Vector3(ht.end.x,ht.end.y||0,ht.end.z||0),yt=new h.Vector3((b.x-d.x)/(_t/ht.gapLength),(b.y-d.y)/(_t/ht.gapLength),(b.z-d.z)/(_t/ht.gapLength)),Tt=new h.Vector3((b.x-d.x)/(_t/ht.dashLength),(b.y-d.y)/(_t/ht.dashLength),(b.z-d.z)/(_t/ht.dashLength)),Mt=0;Mt<tt;Mt++)wt=new h.Vector3(gt.x+Tt.x,gt.y+Tt.y,gt.z+Tt.z),this.intersectionShape.cylinder.push(new c.Cylinder(gt,wt,ft)),xt.GLDraw.drawCylinder(this.geo,gt,wt,ft,mt,ht.fromCap,ht.toCap),gt=new h.Vector3(wt.x+yt.x,wt.y+yt.y,wt.z+yt.z);var Pt=new h.Vector3;this.components.push({centroid:Pt.addVectors(d,b).multiplyScalar(.5)});var It=this.geo.updateGeoGroup(0);St.updateBoundingFromPoints(this.boundingSphere,this.components,It.vertexArray,It.vertices)}addCurve(ht){ht.points=ht.points||[],ht.smooth=ht.smooth||10,typeof ht.fromCap>"u"&&(ht.fromCap=2),typeof ht.toCap>"u"&&(ht.toCap=2);var d=(0,vt.subdivide_spline)(ht.points,ht.smooth);if(d.length<3){console.log("Too few points in addCurve");return}var b=ht.radius||.1,ft=st.CC.color(ht.color),mt=0,_t=d.length-1,tt=d[0].distanceTo(d[1]),gt=Math.ceil(2*b/tt);if(ht.toArrow){_t-=gt;let Mt={start:d[_t],end:d[d.length-1],radius:b,color:ft,mid:1e-4};this.addArrow(Mt)}if(ht.fromArrow){mt+=gt;let Mt={start:d[mt],end:d[0],radius:b,color:ft,mid:1e-4};this.addArrow(Mt)}for(var wt=Math.ceil(d.length/2),yt={radius:b,color:ft,fromCap:2,toCap:2},Tt=mt;Tt<_t;Tt++)yt.start=d[Tt],yt.end=d[Tt+1],yt.fromCap=2,yt.toCap=2,Tt<wt?(yt.fromCap=2,yt.toCap=0):Tt>wt?(yt.fromCap=0,yt.toCap=2):(yt.fromCap=2,yt.toCap=2),this.addCylinder(yt)}addLine(ht){var d,b;ht.start?d=new h.Vector3(ht.start.x||0,ht.start.y||0,ht.start.z||0):d=new h.Vector3(0,0,0),ht.end?(b=new h.Vector3(ht.end.x,ht.end.y||0,ht.end.z||0),typeof b.x>"u"&&(b.x=3)):b=new h.Vector3(3,0,0);var ft=this.geo.updateGeoGroup(2),mt=ft.vertices,_t=mt*3,tt=ft.vertexArray;tt[_t]=d.x,tt[_t+1]=d.y,tt[_t+2]=d.z,tt[_t+3]=b.x,tt[_t+4]=b.y,tt[_t+5]=b.z,ft.vertices+=2;var gt=ft.lineArray,wt=ft.lineidx;gt[wt]=mt,gt[wt+1]=mt+1,ft.lineidx+=2;var yt=new h.Vector3;this.components.push({centroid:yt.addVectors(d,b).multiplyScalar(.5)}),ft=this.geo.updateGeoGroup(0),St.updateBoundingFromPoints(this.boundingSphere,this.components,ft.vertexArray,ft.vertices)}addArrow(ht){if(ht.start?ht.start=new h.Vector3(ht.start.x||0,ht.start.y||0,ht.start.z||0):ht.start=new h.Vector3(0,0,0),ht.dir instanceof h.Vector3&&typeof ht.length=="number"){var d=ht.dir.clone().multiplyScalar(ht.length).add(ht.start);ht.end=d}else ht.end?(ht.end=new h.Vector3(ht.end.x,ht.end.y||0,ht.end.z||0),typeof ht.end.x>"u"&&(ht.end.x=3)):ht.end=new h.Vector3(3,0,0);ht.radius=ht.radius||.1,ht.radiusRatio=ht.radiusRatio||1.618034,ht.mid=0<ht.mid&&ht.mid<1?ht.mid:.618034,St.drawArrow(this,this.geo,ht);var b=new h.Vector3;this.components.push({centroid:b.addVectors(ht.start,ht.end).multiplyScalar(.5)});var ft=this.geo.updateGeoGroup(0);St.updateBoundingFromPoints(this.boundingSphere,this.components,ft.vertexArray,ft.vertices)}static distance_from(ht,d){return Math.sqrt(Math.pow(ht.x-d.x,2)+Math.pow(ht.y-d.y,2)+Math.pow(ht.z-d.z,2))}static inSelectedRegion(ht,d,b){for(var ft=0;ft<d.length;ft++)if(St.distance_from(d[ft],ht)<=b)return!0;return!1}addIsosurface(ht,d,b,ft){var mt=d.isoval!==void 0&&typeof d.isoval=="number"?d.isoval:0,_t=!!d.voxel,tt=d.smoothness===void 0?1:d.smoothness,gt=ht.size.x,wt=ht.size.y,yt=ht.size.z,Tt=new Int16Array(gt*wt*yt),Mt=ht.data,Pt,It;for(Pt=0,It=Tt.length;Pt<It;++Pt)Tt[Pt]=-1;var Lt=new Uint8Array(gt*wt*yt);for(Pt=0,It=Mt.length;Pt<It;++Pt){var zt=mt>=0?Mt[Pt]-mt:mt-Mt[Pt];zt>0&&(Lt[Pt]|=St.ISDONE)}var jt=[],Nt=[];nt.MarchingCube.march(Lt,jt,Nt,{fulltable:!0,voxel:_t,unitCube:ht.unit,origin:ht.origin,matrix:ht.matrix,nX:gt,nY:wt,nZ:yt}),!_t&&tt>0&&nt.MarchingCube.laplacianSmooth(tt,jt,Nt);var kt=[],Ot=[],Bt=[];if(d.selectedRegion&&d.coords===void 0&&(d.coords=d.selectedRegion),d.coords===void 0&&d.selection!==void 0&&(ft?d.coords=ft.selectedAtoms(d.selection):console.log("addIsosurface needs viewer is selection provided.")),d.coords!==void 0){var Ut=d.coords[0].x,Ft=d.coords[0].y,Wt=d.coords[0].z,_i=d.coords[0].x,Qt=d.coords[0].y,on=d.coords[0].z;for(let en=0;en<d.coords.length;en++)d.coords[en].x>Ut?Ut=d.coords[en].x:d.coords[en].x<_i&&(_i=d.coords[en].x),d.coords[en].y>Ft?Ft=d.coords[en].y:d.coords[en].y<Qt&&(Qt=d.coords[en].y),d.coords[en].z>Wt?Wt=d.coords[en].z:d.coords[en].z<on&&(on=d.coords[en].z);var nn=2;d.radius!==void 0&&(nn=d.radius),d.selectedOffset!==void 0&&(nn=d.selectedOffset),d.seldist!==void 0&&(nn=d.seldist),_i-=nn,Ut+=nn,Qt-=nn,Ft+=nn,on-=nn,Wt+=nn;for(let en=0;en<jt.length;en++)jt[en].x>_i&&jt[en].x<Ut&&jt[en].y>Qt&&jt[en].y<Ft&&jt[en].z>on&&jt[en].z<Wt&&St.inSelectedRegion(jt[en],d.coords,nn)?(kt.push(Ot.length),Ot.push(jt[en])):kt.push(-1);for(let en=0;en+2<Nt.length;en+=3)kt[Nt[en]]!==-1&&kt[Nt[en+1]]!==-1&&kt[Nt[en+2]]!==-1&&(Bt.push(Nt[en]-(Nt[en]-kt[Nt[en]])),Bt.push(Nt[en+1]-(Nt[en+1]-kt[Nt[en+1]])),Bt.push(Nt[en+2]-(Nt[en+2]-kt[Nt[en+2]])));jt=Ot,Nt=Bt}St.drawCustom(this,this.geo,{vertexArr:jt,faceArr:Nt,normalArr:[],clickable:d.clickable,hoverable:d.hoverable}),this.updateStyle(d);var dn=new h.Vector3(ht.origin.x,ht.origin.y,ht.origin.z),tn=new h.Vector3(ht.size.x*ht.unit.x,ht.size.y*ht.unit.y,ht.size.z*ht.unit.z),rn=new h.Vector3(0,0,0),En=dn.clone(),bn=dn.clone().add(tn);for(let en=0;en<jt.length;en++)rn.add(jt[en]),En.max(jt[en]),bn.min(jt[en]);rn.divideScalar(jt.length);var Dn=rn.distanceTo(bn),hn=rn.distanceTo(En);this.boundingSphere.center=rn,this.boundingSphere.radius=Math.max(Dn,hn),typeof b=="function"&&b()}addVolumetricData(ht,d,b){ht=new ot.VolumeData(ht,d),this.addIsosurface(ht,b)}finalize(){return St.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(ht){if(this.renderedShapeObj&&(ht.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){St.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&St.updateColor(this.geo,this.color),this.shapeObj=new a.Object3D;var d=null;this.side==a.DoubleSide?d=new a.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:a.Coloring.VertexColors}):d=new a.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:a.Coloring.VertexColors});var b=new a.Mesh(this.geo,d);if(this.shapeObj.add(b),this.linegeo&&this.linegeo.vertices>0){var ft=new a.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),mt=new a.Line(this.linegeo,ft,a.LineStyle.LinePieces);this.shapeObj.add(mt)}this.renderedShapeObj=this.shapeObj.clone(),ht.add(this.renderedShapeObj)}}removegl(ht){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),ht.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}St.ISDONE=2,St.drawCustom=function(Ct,ht,d){var b=d,ft=b.vertexArr,mt=b.faceArr;(ft.length===0||mt.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var _t=d.color;typeof _t>"u"&&(_t=Ct.color),_t=st.CC.color(_t);for(var tt=Et(b),gt=0,wt=tt.length;gt<wt;gt++)St.addCustomGeo(Ct,ht,tt[gt],tt[gt].colorArr?tt[gt].colorArr:_t,d.clickable)};function Et(Ct){var ht=64e3;if(Ct.vertexArr.length<ht)return[Ct];var d=[{vertexArr:[],normalArr:[],faceArr:[]}];Ct.colorArr&&(d.colorArr=[]);var b=[],ft=[],mt=0,_t=Ct.faceArr;for(let gt=0,wt=_t.length;gt<wt;gt+=3){let yt=d[mt];for(let Tt=0;Tt<3;Tt++){var tt=_t[gt+Tt];b[tt]!==mt&&(b[tt]=mt,ft[tt]=yt.vertexArr.length,yt.vertexArr.push(Ct.vertexArr[tt]),Ct.normalArr&&Ct.normalArr[tt]&&yt.normalArr.push(Ct.normalArr[tt]),Ct.colorArr&&Ct.colorArr[tt]&&yt.colorArr.push(Ct.colorArr[tt])),yt.faceArr.push(ft[tt])}yt.vertexArr.length>=ht&&(d.push({vertexArr:[],normalArr:[],faceArr:[]}),Ct.colorArr&&(d.colorArr=[]),mt++)}return d}},"./src/GLViewer.ts":(e,i,s)=>{s.r(i),s.d(i,{CONTEXTS_PER_VIEWPORT:()=>ht,GLViewer:()=>d,createStereoViewer:()=>mt,createViewer:()=>b,createViewerGrid:()=>ft});var a=s("./src/WebGL/index.ts"),c=s("./src/WebGL/math/index.ts"),h=s("./src/colors.ts"),st=s("./src/utilities.ts"),nt=s("./src/Gradient.ts"),ot=s("./src/GLModel.ts"),xt=s("./src/Label.ts"),vt=s("./src/GLShape.ts"),bt=s("./src/VolumeData.ts"),St=s("./src/ProteinSurface4.ts"),Et=s("./src/VolumetricRender.ts"),Ct=s("./node_modules/upng-js/UPNG.js");const ht=16;class d{getWidth(){let tt=this.container,gt=tt.offsetWidth;if(gt==0&&tt.style.display==="none"){let wt=tt.style.position,yt=tt.style.visibility;tt.style.display="block",tt.style.visibility="hidden",tt.style.position="absolute",gt=tt.offsetWidth,tt.style.display="none",tt.style.visibility=yt,tt.style.position=wt}return gt}getHeight(){let tt=this.container,gt=tt.offsetHeight;if(gt==0&&tt.style.display==="none"){let wt=tt.style.position,yt=tt.style.visibility;tt.style.display="block",tt.style.visibility="hidden",tt.style.position="absolute",gt=tt.offsetHeight,tt.style.display="none",tt.style.visibility=yt,tt.style.position=wt}return gt}setupRenderer(){this.renderer=new a.Renderer({antialias:this.config.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:this.config.id,row:this.config.row,col:this.config.col,rows:this.config.rows,cols:this.config.cols,canvas:this.config.canvas,containerWidth:this.WIDTH,containerHeight:this.HEIGHT,ambientOcclusion:this.config.ambientOcclusion,outline:this.config.outline}),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new a.Scene,this.scene.fog=new a.Fog(this.bgColor,100,200),this.modelGroup=new a.Object3D,this.rotationGroup=new a.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new c.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var tt=new a.Light(16777215);tt.position=new c.Vector3(.2,.2,1).normalize(),tt.intensity=1,this.scene.add(tt)}_handleLostContext(tt){const gt=function(wt){const yt=wt.getBoundingClientRect();return!(yt.right<0||yt.bottom<0||yt.top>(window.innerHeight||document.documentElement.clientHeight)||yt.left>(window.innerWidth||document.documentElement.clientWidth))};if(gt(this.container)){let wt=0;for(let yt of document.getElementsByTagName("canvas"))if(gt(yt)&&yt._3dmol_viewer!=null&&(yt._3dmol_viewer.resize(),wt+=1,wt>=ht))break}}initContainer(tt){this.container=tt,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var tt=0;for(let wt in this.surfaces)if(this.surfaces.hasOwnProperty(wt)){var gt=parseInt(wt);isNaN(gt)||gt>tt&&(tt=gt)}return tt+1}setSlabAndFog(){let tt=this.camera.position.z-this.rotationGroup.position.z;tt<1&&(tt=1),this.camera.near=tt+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=tt+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=tt*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far,this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(tt){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!tt&&this.linkedViewers.length>0))for(var gt=this._viewer.getView(),wt=0;wt<this.linkedViewers.length;wt++){var yt=this.linkedViewers[wt];yt.setView(gt,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let tt=0,gt=this.models.length;tt<gt;tt++){let wt=this.models[tt];if(wt){let yt=wt.selectedAtoms({clickable:!0}),Tt=wt.selectedAtoms({hoverable:!0}),Mt=wt.selectedAtoms({contextMenuEnabled:!0});for(let Pt=0;Pt<Tt.length;Pt++)this.hoverables.push(Tt[Pt]);for(let Pt=0;Pt<yt.length;Pt++)this.clickables.push(yt[Pt]);for(let Pt=0;Pt<Mt.length;Pt++)this.contextMenuEnabledObjects.push(Mt[Pt])}}for(let tt=0,gt=this.shapes.length;tt<gt;tt++){let wt=this.shapes[tt];wt&&wt.clickable&&this.clickables.push(wt),wt&&wt.hoverable&&this.hoverables.push(wt),wt&&wt.contextMenuEnabled&&this.contextMenuEnabledObjects.push(wt)}}handleClickSelection(tt,gt,wt){let yt=this.targetedObjects(tt,gt,this.clickables);if(yt.length){var Tt=yt[0].clickable;Tt.callback!==void 0&&(typeof Tt.callback!="function"&&(Tt.callback=(0,st.makeFunction)(Tt.callback)),typeof Tt.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(Tt)&&this.userContextMenuHandler||Tt.callback(Tt,this._viewer,wt,this.container,yt)))}}canvasOffset(){let tt=this.glDOM,gt=tt.getBoundingClientRect(),wt=tt.ownerDocument,yt=wt.documentElement,Tt=wt.defaultView;return{top:gt.top+Tt.pageYOffset-yt.clientTop,left:gt.left+Tt.pageXOffset-yt.clientLeft}}setHover(tt,gt,wt){this.current_hover!=tt&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,st.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,gt,this.container,wt)),this.current_hover=tt,tt&&tt.hover_callback!==void 0&&(typeof tt.hover_callback!="function"&&(tt.hover_callback=(0,st.makeFunction)(tt.hover_callback)),typeof tt.hover_callback=="function"&&tt.hover_callback(tt,this._viewer,gt,this.container,wt)))}handleHoverSelection(tt,gt,wt){if(this.hoverables.length==0)return;let yt=this.targetedObjects(tt,gt,this.hoverables);if(yt.length){var Tt=yt[0].clickable;this.setHover(Tt,wt,yt),this.current_hover=Tt}else this.setHover(null)}handleHoverContinue(tt,gt){let wt=this.targetedObjects(tt,gt,this.hoverables);(wt.length==0||wt[0]===void 0)&&this.setHover(null),wt[0]!==void 0&&wt[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(tt,{allowTolerance:gt=tt.targetTouches,tolerance:wt=5}={}){const yt=this.getX(tt),Tt=this.getY(tt);if(gt){const Mt=Math.abs(yt-this.mouseStartX),Pt=Math.abs(Tt-this.mouseStartY);return Mt<=wt&&Pt<=wt}else return yt===this.mouseStartX&&Tt===this.mouseStartY}calcTouchDistance(tt){var gt=tt.targetTouches[0].pageX-tt.targetTouches[1].pageX,wt=tt.targetTouches[0].pageY-tt.targetTouches[1].pageY;return Math.hypot(gt,wt)}getX(tt){var gt=tt.pageX;return gt==null&&(gt=tt.pageX),tt.targetTouches&&tt.targetTouches[0]?gt=tt.targetTouches[0].pageX:tt.changedTouches&&tt.changedTouches[0]&&(gt=tt.changedTouches[0].pageX),gt}getY(tt){var gt=tt.pageY;return gt==null&&(gt=tt.pageY),tt.targetTouches&&tt.targetTouches[0]?gt=tt.targetTouches[0].pageY:tt.changedTouches&&tt.changedTouches[0]&&(gt=tt.changedTouches[0].pageY),gt}isInViewer(tt,gt){if(this.viewers!=null){var wt=this.WIDTH/this.cols,yt=this.HEIGHT/this.rows,Tt=this.canvasOffset(),Mt=tt-Tt.left,Pt=gt-Tt.top,It=this.rows-Math.floor(Pt/yt)-1,Lt=Math.floor(Mt/wt);if(It!=this.row||Lt!=this.col)return!1}return!0}adjustZoomToLimits(tt){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let gt=this.CAMERA_Z-this.config.lowerZoomLimit;tt>gt&&(tt=gt)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let gt=this.CAMERA_Z-this.config.upperZoomLimit;tt<gt&&(tt=gt)}return tt>this.CAMERA_Z-1&&(tt=this.CAMERA_Z-1),tt}static slerp(tt,gt,wt){if(wt==1)return gt.clone();if(wt==0)return tt.clone();let yt=tt.x*gt.x+tt.y*gt.y+tt.z*gt.z+tt.w*gt.w;if(yt>.9995){let jt=new c.Quaternion(tt.x+wt*(gt.x-tt.x),tt.y+wt*(gt.y-tt.y),tt.z+wt*(gt.z-tt.z),tt.w+wt*(gt.w-tt.w));return jt.normalize(),jt}yt<0&&(gt=gt.clone().multiplyScalar(-1),yt=-yt),yt>1?yt=1:yt<-1&&(yt=-1);var Tt=Math.acos(yt),Mt=Tt*wt,Pt=gt.clone();Pt.sub(tt.clone().multiplyScalar(yt)),Pt.normalize();var It=Math.cos(Mt),Lt=Math.sin(Mt),zt=new c.Quaternion(tt.x*It+Pt.x*Lt,tt.y*It+Pt.y*Lt,tt.z*It+Pt.z*Lt,tt.w*It+Pt.w*Lt);return zt.normalize(),zt}constructor(tt,gt={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.cq=new c.Quaternion(0,0,0,1),this.dq=new c.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=gt,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=h.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=h.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=tt,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new a.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new c.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new c.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new a.Raycaster(new c.Vector3(0,0,0),new c.Vector3(0,0,0)),this.projector=new a.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=h.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let wt=(yt,Tt)=>{yt.forEach(Mt=>{Mt.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(wt),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(wt){console.log("error with glviewer callback: "+wt)}}targetedObjects(tt,gt,wt){var yt={x:tt,y:gt,z:-1};return Array.isArray(wt)||(wt=this.selectedAtoms(wt)),wt.length==0?[]:(this.raycaster.setFromCamera(yt,this.camera),this.raycaster.intersectObjects(this.modelGroup,wt))}modelToScreen(tt){let gt=!1;Array.isArray(tt)||(tt=[tt],gt=!0);let wt=this.renderer.getXRatio(),yt=this.renderer.getYRatio(),Tt=this.col,Mt=this.row,Pt=Tt*(this.WIDTH/wt),It=(yt-Mt-1)*(this.HEIGHT/yt),Lt=[],zt=this.canvasOffset();return tt.forEach(jt=>{let Nt=new c.Vector3(jt.x,jt.y,jt.z);Nt.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Nt,this.camera);let kt=this.WIDTH/wt*(Nt.x+1)/2+zt.left+Pt,Ot=-(this.HEIGHT/yt)*(Nt.y-1)/2+zt.top+It;Lt.push({x:kt,y:Ot})}),gt&&(Lt=Lt[0]),Lt}screenOffsetToModel(tt,gt,wt){var yt=tt/this.WIDTH,Tt=gt/this.HEIGHT,Mt=wt===void 0?this.rotationGroup.position.z:wt,Pt=this.rotationGroup.quaternion,It=new c.Vector3(0,0,Mt);return this.projector.projectVector(It,this.camera),It.x+=yt*2,It.y-=Tt*2,this.projector.unprojectVector(It,this.camera),It.z=0,It.applyQuaternion(Pt),It}screenToModelDistance(tt,gt){let wt=this.canvasOffset(),yt=new c.Vector3(gt.x,gt.y,gt.z);yt.applyMatrix4(this.modelGroup.matrixWorld);let Tt=yt.clone();this.projector.projectVector(yt,this.camera);let Mt=new c.Vector3((tt.x-wt.left)*2/this.WIDTH-1,(tt.y-wt.top)*2/-this.HEIGHT+1,yt.z);return this.projector.unprojectVector(Mt,this.camera),Mt.distanceTo(Tt)}setViewChangeCallback(tt){(typeof tt=="function"||tt==null)&&(this.viewChangeCallback=tt)}setStateChangeCallback(tt){(typeof tt=="function"||tt==null)&&(this.stateChangeCallback=tt)}getConfig(){return this.config}setConfig(tt){this.config=tt,tt.ambientOcclusion&&this.renderer.enableAmbientOcclusion(tt.ambientOcclusion)}getInternalState(){var tt={models:[],surfaces:[],shapes:[],labels:[]};for(let gt=0;gt<this.models.length;gt++)this.models[gt]&&(tt.models[gt]=this.models[gt].getInternalState());return tt}setInternalState(tt){this.clear();var gt=tt.models;for(let wt=0;wt<gt.length;wt++)gt[wt]&&(this.models[wt]=new ot.GLModel(wt),this.models[wt].setInternalState(gt[wt]));this.render()}setZoomLimits(tt,gt){typeof tt<"u"&&(this.config.lowerZoomLimit=tt),gt&&(this.config.upperZoomLimit=gt),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(tt){tt.fov!==void 0&&(this.fov=tt.fov,this.camera.fov=this.fov),tt.z!==void 0&&(this.CAMERA_Z=tt.z,this.camera.z=this.CAMERA_Z),tt.orthographic!==void 0&&(this.camera.ortho=tt.orthographic),this.setSlabAndFog()}_handleMouseDown(tt){if(tt.preventDefault(),!this.scene)return;var gt=this.getX(tt),wt=this.getY(tt);if(gt===void 0)return;this.isDragging=!0,this.mouseButton=tt.which,this.mouseStartX=gt,this.mouseStartY=wt,this.touchHold=!0,this.touchDistanceStart=0,tt.targetTouches&&tt.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(tt)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let yt=this;tt.targetTouches&&tt.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(yt.touchHold==!0){yt.glDOM=yt.renderer.domElement;const Tt=tt.targetTouches[0],Mt=new PointerEvent("contextmenu",Object.assign(Object.assign({},tt),{pageX:Tt.pageX,pageY:Tt.pageY,screenX:Tt.screenX,screenY:Tt.screenY,clientX:Tt.clientX,clientY:Tt.clientY}));yt.glDOM.dispatchEvent(Mt)}},this.longTouchDuration))}_handleMouseUp(tt){if(this.touchHold=!1,this.isDragging&&this.scene){var gt=this.getX(tt),wt=this.getY(tt);if(this.closeEnoughForClick(tt)&&this.isInViewer(gt,wt)){let yt=this.mouseXY(gt,wt);this.handleClickSelection(yt.x,yt.y,tt)}}this.isDragging=!1}_handleMouseScroll(tt){if(tt.preventDefault(),!!this.scene){var gt=this.getX(tt),wt=this.getY(tt);if(gt!==void 0&&!(!this.control_all&&!this.isInViewer(gt,wt))){var yt=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,Tt=1;if(tt.ctrlKey&&(Tt=-1),tt.detail)this.rotationGroup.position.z+=Tt*yt*tt.detail/10;else if(tt.wheelDelta){let Mt=tt.wheelDelta*600/(tt.wheelDelta+600);this.rotationGroup.position.z-=Tt*yt*Mt/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(tt){let gt=this;return tt=tt||1,new Promise(function(wt){let yt=0,Tt=gt.viewChangeCallback,Mt=[],Pt=[],It=Date.now();gt.viewChangeCallback=function(){Pt.push(Date.now()-It),It=Date.now(),Mt.push(new Promise(Lt=>{gt.getCanvas().toBlob(function(zt){zt.arrayBuffer().then(Lt)},"image/png")})),yt+=1,yt==tt&&(gt.viewChangeCallback=Tt,Promise.all(Mt).then(Lt=>{let zt=[];for(let Ut=0;Ut<Lt.length;Ut++){let Ft=(0,Ct.decode)(Lt[Ut]);zt.push((0,Ct.toRGBA8)(Ft)[0])}let jt=gt.getCanvas().width,Nt=gt.getCanvas().height,kt=(0,Ct.encode)(zt,jt,Nt,0,Pt),Ot=new Blob([kt],{type:"image/png"}),Bt=new FileReader;Bt.onload=function(Ut){wt(Ut.target.result)},Bt.readAsDataURL(Ot)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(tt){this.hoverDuration=tt}mouseXY(tt,gt){let wt=this.canvasOffset(),yt=this.renderer.getXRatio(),Tt=this.renderer.getYRatio(),Mt=this.col,Pt=this.row,It=Mt*(this.WIDTH/yt),Lt=(Tt-Pt-1)*(this.HEIGHT/Tt),zt=(tt-wt.left-It)/(this.WIDTH/yt)*2-1,jt=-((gt-wt.top-Lt)/(this.HEIGHT/Tt))*2+1;return{x:zt,y:jt}}_handleMouseMove(tt){clearTimeout(this.hoverTimeout),tt.preventDefault();let gt=this.getX(tt),wt=this.getY(tt);if(gt===void 0)return;let yt=this.renderer.getXRatio(),Tt=this.renderer.getYRatio(),Mt=this.mouseXY(gt,wt),Pt=this;this.current_hover!==null&&this.handleHoverContinue(Mt.x,Mt.y);var It=0;if(!(!this.control_all&&!this.isInViewer(gt,wt))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){Pt.handleHoverSelection(Mt.x,Mt.y,tt)},this.hoverDuration)),!!this.isDragging)){tt.targetTouches&&(tt.targetTouches.length>1||tt.targetTouches.length===1&&!this.closeEnoughForClick(tt))&&clearTimeout(this.longTouchTimeout);var Lt=(gt-this.mouseStartX)/this.WIDTH,zt=(wt-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&tt.targetTouches&&tt.targetTouches.length==2){var jt=this.calcTouchDistance(tt);It=2,zt=(jt-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else tt.targetTouches&&tt.targetTouches.length==3&&(It=1);Lt*=yt,zt*=Tt;var Nt=Math.hypot(Lt,zt),kt;if(It==3||this.mouseButton==3&&tt.ctrlKey)this.slabNear=this.cslabNear+Lt*100,this.slabFar=this.cslabFar-zt*100;else if(It==2||this.mouseButton==3||tt.shiftKey)kt=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,kt<80&&(kt=80),this.rotationGroup.position.z=this.cz+zt*kt,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(It==1||this.mouseButton==2||tt.ctrlKey){var Ot=this.screenOffsetToModel(yt*(gt-this.mouseStartX),Tt*(wt-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,Ot)}else if((It===0||this.mouseButton==1)&&Nt!==0){var Bt=Math.sin(Nt*Math.PI)/Nt;this.dq.x=Math.cos(Nt*Math.PI),this.dq.y=0,this.dq.z=Bt*Lt,this.dq.w=-Bt*zt,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(tt){if(tt.preventDefault(),this.closeEnoughForClick(tt)){var yt=this.mouseStartX,Tt=this.mouseStartY,wt=this.canvasOffset();let Mt=this.mouseXY(yt,Tt),Pt=Mt.x,It=Mt.y,Lt=this.targetedObjects(Pt,It,this.contextMenuEnabledObjects);var gt=null;Lt.length&&(gt=Lt[0].clickable);var wt=this.canvasOffset(),yt=this.mouseStartX-wt.left,Tt=this.mouseStartY-wt.top;this.userContextMenuHandler&&(this.userContextMenuHandler(gt,yt,Tt,Lt,tt),this.isDragging=!1)}}setContainer(tt){let gt=(0,st.getElement)(tt)||this.container;return this.initContainer(gt),this}setBackgroundColor(tt,gt){(typeof gt>"u"||gt<0||gt>1)&&(gt=1);var wt=h.CC.color(tt);return this.scene.fog.color=wt,this.bgColor=wt.getHex(),this.renderer.setClearColorHex(wt.getHex(),gt),this.show(),this}setProjection(tt){this.camera.ortho=tt==="orthographic",this.setSlabAndFog()}setViewStyle(tt){if(tt=tt||{},tt.style=tt.style||"",tt.style.includes("outline")?this.renderer.enableOutline(tt):this.renderer.disableOutline(),tt.style.includes("ambientOcclusion")){var gt={};tt.strength&&(gt.strength=tt.strength),tt.radius&&(gt.radius=tt.radius),this.renderer.enableAmbientOcclusion(gt)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(tt){return this.WIDTH=tt||this.WIDTH,this.updateSize(),this}setHeight(tt){return this.HEIGHT=tt||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let tt=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let gt=!1,wt=this.container.querySelector("canvas");wt&&wt!=this.renderer.getCanvas()?this.config.canvas=wt:(wt.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,gt=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),tt=!0,gt&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),tt){let gt=this.renderer.supportedExtensions();if(gt.regen=!0,this.viewers)for(let wt=0,yt=this.viewers.length;wt<yt;wt++)for(let Tt=0,Mt=this.viewers[wt].length;Tt<Mt;Tt++)this.viewers[wt][Tt].render(null,gt);this._viewer.render(null,gt)}else this.show();return this}getModel(tt){return tt===void 0?this.models.length==0?null:this.models[this.models.length-1]:tt instanceof ot.GLModel?tt:tt in this.models?this.models[tt]:this.models.length==0?null:this.models[this.models.length-1]}spin(tt,gt=1,wt=!1){if(clearInterval(this.spinInterval),typeof tt>"u"&&(tt="y"),typeof tt=="boolean")if(tt)tt="y";else return;Array.isArray(tt)&&(tt={x:tt[0],y:tt[1],z:tt[2]});var yt=this;this.spinInterval=setInterval(function(){!yt.getCanvas().isConnected&&yt.renderer.isLost()&&clearInterval(yt.spinInterval),(!wt||yt.container.checkVisibility&&yt.container.checkVisibility())&&yt.rotate(1*gt,tt)},25)}animateMotion(tt,gt,wt,yt,Tt,Mt){var Pt=20,It=Math.ceil(tt/Pt);It<1&&(It=1),this.incAnim();var Lt={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(gt){let Nt=new Array(It);for(let Ut=0;Ut<It;Ut++){let Ft=(Ut+1)/It,Wt={mpos:Lt.mpos,rz:Lt.rz,rot:Lt.rot};Wt.mpos=wt.clone().sub(Lt.mpos).multiplyScalar(Ft).add(Lt.mpos),Wt.rz=Lt.rz+Ft*(yt-Lt.rz),Wt.rot=d.slerp(Lt.rot,Tt,Ft),Wt.cam=Mt.clone().sub(Lt.cam).multiplyScalar(Ft).add(Lt.cam),Nt[Ut]=Wt}let kt=0,Ot=this,Bt=function(){var Ut=Nt[kt];kt+=1,Ot.modelGroup.position=Ut.mpos,Ot.rotationGroup.position.z=Ut.rz,Ot.rotationGroup.quaternion=Ut.rot,Ot.camera.lookAt(Ut.cam),kt<Nt.length?setTimeout(Bt,Pt):Ot.decAnim(),Ot.show()};setTimeout(Bt,Pt)}else{var zt={};let Nt=1/It;if(wt&&(zt.mpos=wt.clone().sub(Lt.mpos).multiplyScalar(Nt)),typeof yt<"u"&&yt!=null&&(zt.rz=Nt*(yt-Lt.rz)),Tt){var jt=d.slerp(Lt.rot,Tt,Nt);zt.rot=Lt.rot.clone().inverse().multiply(jt)}Mt&&(zt.cam=Mt.clone().sub(Lt.cam).multiplyScalar(Nt));let kt=0,Ot=this,Bt=function(){kt+=1,zt.mpos&&Ot.modelGroup.position.add(zt.mpos),zt.rz&&(Ot.rotationGroup.position.z+=zt.rz),zt.rot&&Ot.rotationGroup.quaternion.multiply(zt.rot),zt.cam&&(Ot.lookingAt.add(zt.cam),Ot.camera.lookAt(Ot.lookingAt)),kt<It?setTimeout(Bt,Pt):Ot.decAnim(),Ot.show()};setTimeout(Bt,Pt)}}rotate(tt,gt="y",wt=0,yt=!1){if(gt=="x"?gt={x:1,y:0,z:0}:gt=="y"?gt={x:0,y:1,z:0}:gt=="z"&&(gt={x:0,y:0,z:1}),gt=="vx"?gt={vx:1,vy:0,vz:0}:gt=="vy"?gt={vx:0,vy:1,vz:0}:gt=="vz"&&(gt={vx:0,vy:0,vz:1}),typeof gt.vx<"u"){var Tt=new c.Vector3(gt.vx,gt.vy,gt.vz);Tt.applyQuaternion(this.rotationGroup.quaternion),gt={x:Tt.x,y:Tt.y,z:Tt.z}}var Mt=function(zt){var jt=Math.sin(zt/2),Nt=Math.cos(zt/2),kt=0,Ot=0,Bt=0;return kt=gt.x*jt,Ot=gt.y*jt,Bt=gt.z*jt,new c.Quaternion(kt,Ot,Bt,Nt).normalize()},Pt=Math.PI*tt/180,It=Mt(Pt);if(wt){var Lt=new c.Quaternion().copy(this.rotationGroup.quaternion).multiply(It);this.animateMotion(wt,yt,this.modelGroup.position,this.rotationGroup.position.z,Lt,this.lookingAt)}else this.rotationGroup.quaternion.multiply(It),this.show();return this}surfacesFinished(){for(var tt in this.surfaces)if(!this.surfaces[tt][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var tt=this.modelGroup.position,gt=this.rotationGroup.quaternion;return[tt.x,tt.y,tt.z,this.rotationGroup.position.z,gt.x,gt.y,gt.z,gt.w]}setView(tt,gt){return tt===void 0||!(tt instanceof Array||tt.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=tt[0],this.modelGroup.position.y=tt[1],this.modelGroup.position.z=tt[2],this.rotationGroup.position.z=tt[3],this.rotationGroup.quaternion.x=tt[4],this.rotationGroup.quaternion.y=tt[5],this.rotationGroup.quaternion.z=tt[6],this.rotationGroup.quaternion.w=tt[7],typeof tt[8]<"u"&&(this.rotationGroup.position.x=tt[8],this.rotationGroup.position.y=tt[9]),this.show(gt),this)}render(tt,gt){this.renderer.setViewport(),this.updateClickables();var wt=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var yt,Tt;for(gt||(gt=this.renderer.supportedExtensions()),yt=0;yt<this.models.length;yt++)this.models[yt]&&this.models[yt].globj(this.modelGroup,gt);for(yt=0;yt<this.shapes.length;yt++)this.shapes[yt]&&(typeof this.shapes[yt].frame>"u"||this.viewer_frame<0||this.shapes[yt].frame<0||this.shapes[yt].frame==this.viewer_frame?this.shapes[yt].globj(this.modelGroup,gt):this.shapes[yt].removegl(this.modelGroup));for(yt=0;yt<this.labels.length;yt++)gt.regen&&(this.labels[yt].dispose(),this.modelGroup.remove(this.labels[yt].sprite),this.labels[yt].setContext(),this.modelGroup.add(this.labels[yt].sprite)),this.labels[yt]&&typeof this.labels[yt].frame<"u"&&this.labels[yt].frame>=0&&(this.modelGroup.remove(this.labels[yt].sprite),(this.viewer_frame<0||this.labels[yt].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[yt].sprite));for(yt in this.surfaces)if(this.surfaces.hasOwnProperty(yt)){var Mt=this.surfaces[yt];for(Tt=0;Tt<Mt.length;Tt++)if(Mt.hasOwnProperty(Tt)){var Pt=Mt[Tt].geo;if(!Mt[Tt].finished||gt.regen){Pt.verticesNeedUpdate=!0,Pt.elementsNeedUpdate=!0,Pt.normalsNeedUpdate=!0,Pt.colorsNeedUpdate=!0,Pt.buffersNeedUpdate=!0,Mt[Tt].mat.needsUpdate=!0,Mt[Tt].done&&(Mt[Tt].finished=!0),Mt[Tt].lastGL&&this.modelGroup.remove(Mt[Tt].lastGL);var It=null;if(Mt[Tt].mat instanceof a.LineBasicMaterial?It=new a.Line(Pt,Mt[Tt].mat):It=new a.Mesh(Pt,Mt[Tt].mat),Mt[Tt].mat.transparent&&Mt[Tt].mat.opacity==0?It.visible=!1:It.visible=!0,Mt[Tt].symmetries.length>1||Mt[Tt].symmetries.length==1&&!Mt[Tt].symmetries[Tt].isIdentity()){var Lt,zt=new a.Object3D;for(Lt=0;Lt<Mt[Tt].symmetries.length;Lt++){var jt=It.clone();jt.matrix=Mt[Tt].symmetries[Lt],jt.matrixAutoUpdate=!1,zt.add(jt)}Mt[Tt].lastGL=zt,this.modelGroup.add(zt)}else Mt[Tt].lastGL=It,this.modelGroup.add(It)}}}return this.setView(wt),typeof tt=="function"&&tt(this),this}getModelList(tt){let gt=[];if(typeof tt>"u"||typeof tt.model>"u")for(let yt=0;yt<this.models.length;yt++)this.models[yt]&&gt.push(this.models[yt]);else{let yt=tt.model;Array.isArray(yt)||(yt=[yt]);for(let Tt=0;Tt<yt.length;Tt++)if(typeof yt[Tt]=="number"){var wt=yt[Tt];wt<0&&(wt+=this.models.length),gt.push(this.models[wt])}else gt.push(yt[Tt])}return gt}getAtomsFromSel(tt){var gt=[];typeof tt>"u"&&(tt={});var wt=this.getModelList(tt);for(let yt=0;yt<wt.length;yt++)gt=gt.concat(wt[yt].selectedAtoms(tt));return gt}atomIsSelected(tt,gt){typeof gt>"u"&&(gt={});for(var wt=this.getModelList(gt),yt=0;yt<wt.length;yt++)if(wt[yt].atomIsSelected(tt,gt))return!0;return!1}selectedAtoms(tt){return this.getAtomsFromSel(tt)}getUniqueValues(tt,gt){typeof gt>"u"&&(gt={});var wt=this.getAtomsFromSel(gt),yt={};for(var Tt in wt)if(wt[Tt].hasOwnProperty(tt)){var Mt=wt[Tt][tt];yt[Mt]=!0}return Object.keys(yt)}pdbData(tt){for(var gt=this.getAtomsFromSel(tt),wt="",yt=0,Tt=gt.length;yt<Tt;++yt)wt+=gt[yt].pdbline+`
`;return wt}zoom(tt=2,gt=0,wt=!1){var yt=(this.CAMERA_Z-this.rotationGroup.position.z)/tt,Tt=this.CAMERA_Z-yt;return gt>0?this.animateMotion(gt,wt,this.modelGroup.position,this.adjustZoomToLimits(Tt),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(Tt),this.show()),this}translate(tt,gt,wt=0,yt=!1){var Tt=tt/this.WIDTH,Mt=gt/this.HEIGHT,Pt=new c.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(Pt,this.camera),Pt.x-=Tt,Pt.y-=Mt,this.projector.unprojectVector(Pt,this.camera),Pt.z=0;var It=this.lookingAt.clone().add(Pt);return wt>0?this.animateMotion(wt,yt,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,It):(this.lookingAt=It,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(tt,gt,wt=0,yt=!1){var Tt=this.screenOffsetToModel(tt,gt),Mt=this.modelGroup.position.clone().add(Tt);return wt>0?this.animateMotion(wt,yt,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Mt,this.show()),this}fitSlab(tt){tt=tt||{};var gt=this.getAtomsFromSel(tt),wt=(0,st.getExtent)(gt),yt=wt[1][0]-wt[0][0],Tt=wt[1][1]-wt[0][1],Mt=wt[1][2]-wt[0][2],Pt=Math.hypot(yt,Tt,Mt);return Pt<5&&(Pt=5),this.slabNear=-Pt/1.9,this.slabFar=Pt/2,this}center(tt={},gt=0,wt=!1){var yt,Tt,Mt=this.getAtomsFromSel(tt),Pt=(0,st.getExtent)(Mt);(0,st.isEmptyObject)(tt)?(this.shapes.forEach(Ft=>{if(Ft&&Ft.boundingSphere&&Ft.boundingSphere.center){var Wt=Ft.boundingSphere.center,_i=Ft.boundingSphere.radius;_i>0?(Mt.push(new c.Vector3(Wt.x+_i,Wt.y,Wt.z)),Mt.push(new c.Vector3(Wt.x-_i,Wt.y,Wt.z)),Mt.push(new c.Vector3(Wt.x,Wt.y+_i,Wt.z)),Mt.push(new c.Vector3(Wt.x,Wt.y-_i,Wt.z)),Mt.push(new c.Vector3(Wt.x,Wt.y,Wt.z+_i)),Mt.push(new c.Vector3(Wt.x,Wt.y,Wt.z-_i))):Mt.push(Wt)}}),Pt=(0,st.getExtent)(Mt),yt=Mt,Tt=Pt):(yt=this.getAtomsFromSel({}),Tt=(0,st.getExtent)(yt));var It=new c.Vector3(Pt[2][0],Pt[2][1],Pt[2][2]),Lt=Tt[1][0]-Tt[0][0],zt=Tt[1][1]-Tt[0][1],jt=Tt[1][2]-Tt[0][2],Nt=Math.hypot(Lt,zt,jt);Nt<5&&(Nt=5),this.slabNear=-Nt/1.9,this.slabFar=Nt/2,Lt=Pt[1][0]-Pt[0][0],zt=Pt[1][1]-Pt[0][1],jt=Pt[1][2]-Pt[0][2],Nt=Math.hypot(Lt,zt,jt),Nt<5&&(Nt=5);for(var kt=25,Ot=0;Ot<Mt.length;Ot++)if(Mt[Ot]){var Bt=It.distanceToSquared(Mt[Ot]);Bt>kt&&(kt=Bt)}Nt=Math.sqrt(kt)*2;var Ut=It.clone().multiplyScalar(-1);return gt>0?this.animateMotion(gt,wt,Ut,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Ut,this.show()),this}zoomTo(tt={},gt=0,wt=!1){let yt=this.getAtomsFromSel(tt),Tt=(0,st.getExtent)(yt),Mt=Tt;if((0,st.isEmptyObject)(tt)){let Wt=yt&&yt.length;if(this.shapes.forEach(_i=>{if(_i&&_i.boundingSphere){if(_i.boundingSphere.box){let nn=_i.boundingSphere.box;yt.push(new c.Vector3(nn.min.x,nn.min.y,nn.min.z)),yt.push(new c.Vector3(nn.max.x,nn.max.y,nn.max.z))}else if(_i.boundingSphere.center){var Qt=_i.boundingSphere.center,on=_i.boundingSphere.radius;on>0?(yt.push(new c.Vector3(Qt.x+on,Qt.y,Qt.z)),yt.push(new c.Vector3(Qt.x-on,Qt.y,Qt.z)),yt.push(new c.Vector3(Qt.x,Qt.y+on,Qt.z)),yt.push(new c.Vector3(Qt.x,Qt.y-on,Qt.z)),yt.push(new c.Vector3(Qt.x,Qt.y,Qt.z+on)),yt.push(new c.Vector3(Qt.x,Qt.y,Qt.z-on))):yt.push(Qt)}}}),Mt=(0,st.getExtent)(yt),!Wt)for(let _i=0;_i<3;_i++)Tt[2][_i]=(Mt[0][_i]+Mt[1][_i])/2}else{let Wt=this.getAtomsFromSel({});Mt=(0,st.getExtent)(Wt)}var Pt=new c.Vector3(Tt[2][0],Tt[2][1],Tt[2][2]),It=Mt[1][0]-Mt[0][0],Lt=Mt[1][1]-Mt[0][1],zt=Mt[1][2]-Mt[0][2],jt=Math.hypot(It,Lt,zt);jt<5&&(jt=5),this.slabNear=-jt/1.9,this.slabFar=jt/2,Object.keys(tt).length===0&&(this.slabNear=Math.min(-jt*2,-50),this.slabFar=Math.max(jt*2,50));var Nt=this.config.minimumZoomToDistance||5;It=Tt[1][0]-Tt[0][0],Lt=Tt[1][1]-Tt[0][1],zt=Tt[1][2]-Tt[0][2],jt=Math.hypot(It,Lt,zt),jt<Nt&&(jt=Nt);for(var kt=Nt*Nt,Ot=0;Ot<yt.length;Ot++)if(yt[Ot]){var Bt=Pt.distanceToSquared(yt[Ot]);Bt>kt&&(kt=Bt)}jt=Math.sqrt(kt)*2;var Ut=Pt.clone().multiplyScalar(-1),Ft=-(jt*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return Ft=this.adjustZoomToLimits(Ft),gt>0?this.animateMotion(gt,wt,Ut,Ft,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Ut,this.rotationGroup.position.z=Ft,this.show()),this}setSlab(tt,gt){this.slabNear=tt,this.slabFar=gt}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(tt,gt={},wt,yt=!1){if(wt){var Tt=(0,st.getExtent)(this.getAtomsFromSel(wt));gt.position={x:Tt[2][0],y:Tt[2][1],z:Tt[2][2]}}var Mt=new xt.Label(tt,gt);return Mt.setContext(),this.modelGroup.add(Mt.sprite),this.labels.push(Mt),yt||this.show(),Mt}addResLabels(tt,gt,wt=!1){let yt=this.labels.length;return this.applyToModels("addResLabels",tt,this,gt,wt),this.show(),this.labels.slice(yt)}addPropertyLabels(tt,gt,wt){return this.applyToModels("addPropertyLabels",tt,gt,this,wt),this.show(),this}removeLabel(tt){for(var gt=0;gt<this.labels.length;gt++)if(this.labels[gt]==tt){this.labels.splice(gt,1),tt.dispose(),this.modelGroup.remove(tt.sprite);break}return this.show(),this}removeAllLabels(){for(var tt=0;tt<this.labels.length;tt++)this.labels[tt]&&this.labels[tt].sprite&&this.modelGroup.remove(this.labels[tt].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var tt=0;tt<this.labels.length;tt++)this.labels[tt]&&this.labels[tt].hide();return this.show(),this}showAllLabels(){for(var tt=0;tt<this.labels.length;tt++)this.labels[tt]&&this.labels[tt].show();return this.show(),this}setLabelStyle(tt,gt){return this.modelGroup.remove(tt.sprite),tt.dispose(),tt.stylespec=gt,tt.setContext(),this.modelGroup.add(tt.sprite),this.show(),tt}setLabelText(tt,gt){return this.modelGroup.remove(tt.sprite),tt.dispose(),tt.text=gt,tt.setContext(),this.modelGroup.add(tt.sprite),this.show(),tt}addShape(tt){tt=tt||{};var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,this.shapes.push(gt),gt}removeShape(tt){if(!tt)return this;for(tt.removegl(this.modelGroup),delete this.shapes[tt.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var tt=0;tt<this.shapes.length;tt++){var gt=this.shapes[tt];gt&&gt.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(tt){if(tt.hasOwnProperty("x")&&tt.hasOwnProperty("y")&&tt.hasOwnProperty("z"))return tt;var gt=this.getAtomsFromSel(tt);if(gt.length==0)return{x:0,y:0,z:0};var wt=(0,st.getExtent)(gt);return{x:wt[0][0]+(wt[1][0]-wt[0][0])/2,y:wt[0][1]+(wt[1][1]-wt[0][1])/2,z:wt[0][2]+(wt[1][2]-wt[0][2])/2}}addSphere(tt){tt=tt||{},tt.center=this.getSelectionCenter(tt.center);var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,gt.addSphere(tt),this.shapes.push(gt),gt.finalize(),gt}addBox(tt={}){tt.corner!=null&&(tt.corner=this.getSelectionCenter(tt.corner)),tt.center!=null&&(tt.center=this.getSelectionCenter(tt.center));var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,gt.addBox(tt),this.shapes.push(gt),gt.finalize(),gt}addArrow(tt={}){tt.start=this.getSelectionCenter(tt.start),tt.end=this.getSelectionCenter(tt.end);var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,gt.addArrow(tt),this.shapes.push(gt),gt.finalize(),gt}addCylinder(tt={}){tt.start=this.getSelectionCenter(tt.start),tt.end=this.getSelectionCenter(tt.end);var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,tt.dashed?gt.addDashedCylinder(tt):gt.addCylinder(tt),this.shapes.push(gt),gt.finalize(),gt}addCurve(tt={}){var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,gt.addCurve(tt),this.shapes.push(gt),gt.finalize(),gt}addLine(tt={}){tt.start=this.getSelectionCenter(tt.start),tt.end=this.getSelectionCenter(tt.end),tt.wireframe=!0;var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,tt.dashed?gt=this.addLineDashed(tt,gt):gt.addLine(tt),this.shapes.push(gt),gt.finalize(),gt}addUnitCell(tt,gt){tt=this.getModel(tt),gt=gt||{alabel:"a",blabel:"b",clabel:"c"},gt.box=gt.box||{},gt.astyle=gt.astyle||{color:"red",radius:.1,midpos:-1},gt.bstyle=gt.bstyle||{color:"green",radius:.1,midpos:-1},gt.cstyle=gt.cstyle||{color:"blue",radius:.1,midpos:-1},gt.alabelstyle=gt.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},gt.blabelstyle=gt.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},gt.clabelstyle=gt.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},tt.unitCellObjects&&this.removeUnitCell(tt),tt.unitCellObjects={shapes:[],labels:[]};var wt=tt.getCrystData(),yt=null;if(wt){if(wt.matrix)yt=wt.matrix;else{var Tt=wt.a,Mt=wt.b,Pt=wt.c,It=wt.alpha,Lt=wt.beta,zt=wt.gamma;It=It*Math.PI/180,Lt=Lt*Math.PI/180,zt=zt*Math.PI/180;var jt,Nt,kt;jt=Math.cos(Lt),Nt=(Math.cos(It)-Math.cos(Lt)*Math.cos(zt))/Math.sin(zt),kt=Math.sqrt(Math.max(0,1-jt*jt-Nt*Nt)),yt=new c.Matrix3(Tt,Mt*Math.cos(zt),Pt*jt,0,Mt*Math.sin(zt),Pt*Nt,0,0,Pt*kt)}var Ot=[new c.Vector3(0,0,0),new c.Vector3(1,0,0),new c.Vector3(0,1,0),new c.Vector3(0,0,1),new c.Vector3(1,1,0),new c.Vector3(0,1,1),new c.Vector3(1,0,1),new c.Vector3(1,1,1)];if(wt.matrix4)for(let Ut=0;Ut<Ot.length;Ut++)wt.size&&Ot[Ut].multiplyVectors(Ot[Ut],wt.size),Ot[Ut]=Ot[Ut].applyMatrix4(wt.matrix4);else for(let Ut=0;Ut<Ot.length;Ut++)Ot[Ut]=Ot[Ut].applyMatrix3(yt);if(gt.box&&!gt.box.hidden){gt.box.wireframe=!0;var Bt=new vt.GLShape(gt.box);Bt.shapePosition=this.shapes.length,Bt.addLine({start:Ot[0],end:Ot[1]}),Bt.addLine({start:Ot[0],end:Ot[2]}),Bt.addLine({start:Ot[1],end:Ot[4]}),Bt.addLine({start:Ot[2],end:Ot[4]}),Bt.addLine({start:Ot[0],end:Ot[3]}),Bt.addLine({start:Ot[3],end:Ot[5]}),Bt.addLine({start:Ot[2],end:Ot[5]}),Bt.addLine({start:Ot[1],end:Ot[6]}),Bt.addLine({start:Ot[4],end:Ot[7]}),Bt.addLine({start:Ot[6],end:Ot[7]}),Bt.addLine({start:Ot[3],end:Ot[6]}),Bt.addLine({start:Ot[5],end:Ot[7]}),this.shapes.push(Bt),tt.unitCellObjects.shapes.push(Bt),Bt.finalize()}if(!gt.astyle.hidden){gt.astyle.start=Ot[0],gt.astyle.end=Ot[1];let Ut=this.addArrow(gt.astyle);tt.unitCellObjects.shapes.push(Ut)}if(!gt.bstyle.hidden){gt.bstyle.start=Ot[0],gt.bstyle.end=Ot[2];let Ut=this.addArrow(gt.bstyle);tt.unitCellObjects.shapes.push(Ut)}if(!gt.cstyle.hidden){gt.cstyle.start=Ot[0],gt.cstyle.end=Ot[3];let Ut=this.addArrow(gt.cstyle);tt.unitCellObjects.shapes.push(Ut)}if(gt.alabel){gt.alabelstyle.position=Ot[1];let Ut=this.addLabel(gt.alabel,gt.alabelstyle);tt.unitCellObjects.labels.push(Ut)}if(gt.blabel){gt.blabelstyle.position=Ot[2];let Ut=this.addLabel(gt.blabel,gt.blabelstyle);tt.unitCellObjects.labels.push(Ut)}if(gt.clabel){gt.clabelstyle.position=Ot[3];let Ut=this.addLabel(gt.clabel,gt.clabelstyle);tt.unitCellObjects.labels.push(Ut)}}}removeUnitCell(tt){if(tt=this.getModel(tt),tt.unitCellObjects){let gt=this;tt.unitCellObjects.shapes.forEach(function(wt){gt.removeShape(wt)}),tt.unitCellObjects.labels.forEach(function(wt){gt.removeLabel(wt)})}delete tt.unitCellObjects}replicateUnitCell(tt=3,gt=tt,wt=gt,yt,Tt,Mt){yt=this.getModel(yt);let Pt=yt.getCrystData();if(Pt){const It=yt.selectedAtoms({}),Lt=Pt.matrix;let zt=function(Nt){return Nt%2==0?-Nt/2:Math.ceil(Nt/2)};tt<=1&&gt<=1&&wt<=1&&(Mt=!0,tt=gt=wt=3);let jt=function(Nt,kt,Ot){return!1};if(Mt){const Nt=new c.Matrix3().getInverse3(Lt);jt=function(kt,Ot,Bt){let Ut=new c.Vector3(kt,Ot,Bt).applyMatrix3(Nt);return!(Ut.x>-1e-4&&Ut.x<1.0001&&Ut.y>-1e-4&&Ut.y<1.0001&&Ut.z>-1e-4&&Ut.z<1.0001)}}for(let Nt=0;Nt<tt;Nt++)for(let kt=0;kt<gt;kt++)for(let Ot=0;Ot<wt;Ot++){if(Nt==0&&kt==0&&Ot==0)continue;let Bt=new c.Vector3(zt(Nt),zt(kt),zt(Ot));Bt.applyMatrix3(Lt);let Ut=[];for(let Ft=0;Ft<It.length;Ft++){let Wt=It[Ft].x+Bt.x,_i=It[Ft].y+Bt.y,Qt=It[Ft].z+Bt.z;if(jt(Wt,_i,Qt))continue;let on={};for(let nn in It[Ft])on[nn]=It[Ft][nn];on.x=Wt,on.y=_i,on.z=Qt,Ut.push(on)}yt.addAtoms(Ut)}Tt&&yt.assignBonds()}}addLineDashed(tt,gt){tt.dashLength=tt.dashLength||.5,tt.gapLength=tt.gapLength||.5;var wt;tt.start?wt=new c.Vector3(tt.start.x||0,tt.start.y||0,tt.start.z||0):wt=new c.Vector3(0,0,0);var yt;tt.end?yt=new c.Vector3(tt.end.x,tt.end.y||0,tt.end.z||0):yt=new c.Vector3(0,0,0);var Tt=new c.Vector3,Mt=new c.Vector3,Pt=new c.Vector3,It,Lt,zt,jt=wt.clone(),Nt=0;for(Tt.subVectors(yt,wt),It=Tt.length(),Tt.normalize(),Mt=Tt.clone(),Pt=Tt.clone(),Mt.multiplyScalar(tt.dashLength),Pt.multiplyScalar(tt.gapLength),Lt=Mt.length(),zt=Pt.length();Nt<It;){if(Nt+Lt>It){tt.start=wt,tt.end=yt,gt.addLine(tt);break}jt.addVectors(wt,Mt),tt.start=wt,tt.end=jt,gt.addLine(tt),wt=jt.clone(),Nt+=Lt,jt.addVectors(wt,Pt),wt=jt.clone(),Nt+=zt}return gt.finalize(),gt}addCustom(tt){tt=tt||{};var gt=new vt.GLShape(tt);return gt.shapePosition=this.shapes.length,gt.addCustom(tt),this.shapes.push(gt),gt.finalize(),gt}addVolumetricData(tt,gt,wt={}){var yt=new bt.VolumeData(tt,gt);return wt.hasOwnProperty("transferfn")?this.addVolumetricRender(yt,wt):this.addIsosurface(yt,wt)}addIsosurface(tt,gt={},wt){var yt=new vt.GLShape(gt);return yt.shapePosition=this.shapes.length,yt.addIsosurface(tt,gt,wt,this),this.shapes.push(yt),yt}addVolumetricRender(tt,gt){gt=gt||{};var wt=new Et.GLVolumetricRender(tt,gt,this);return wt.shapePosition=this.shapes.length,this.shapes.push(wt),wt}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(tt){tt?this.scene.fog=new a.Fog(this.bgColor,100,200):(this.config.disableFog=!0,this.show())}setFrame(tt){this.viewer_frame=tt;let gt=this;return new Promise(function(wt){var yt=gt.models.map(function(Tt){return Tt.setFrame(tt,gt)});Promise.all(yt).then(function(){wt()})})}getFrame(){return this.viewer_frame}getNumFrames(){var tt=0;for(let gt=0;gt<this.models.length;gt++)this.models[gt].getNumFrames()>tt&&(tt=this.models[gt].getNumFrames());for(let gt=0;gt<this.shapes.length;gt++)this.shapes[gt].frame&&this.shapes[gt].frame>=tt&&(tt=this.shapes[gt].frame+1);for(let gt=0;gt<this.labels.length;gt++)this.labels[gt].frame&&this.labels[gt].frame>=tt&&(tt=this.labels[gt].frame+1);return tt}animate(tt){this.incAnim();var gt=100,wt="forward",yt=1/0;tt=tt||{},tt.interval&&(gt=tt.interval),tt.loop&&(wt=tt.loop),tt.reps&&(yt=tt.reps);var Tt=this.getNumFrames(),Mt=this,Pt=0;tt.startFrame&&(Pt=tt.startFrame%Tt);var It=1;tt.step&&(It=tt.step,yt/=It);var Lt=0,zt=Tt*yt,jt=new Date,Nt,kt,Ot=function(Bt){jt=new Date,Bt=="forward"?Mt.setFrame(Pt).then(function(){Pt=(Pt+It)%Tt,Nt()}):Bt=="backward"?Mt.setFrame(Tt-1-Pt).then(function(){Pt=(Pt+It)%Tt,Nt()}):Mt.setFrame(Pt).then(function(){Pt+=It,It*=Pt%(Tt-1)==0?-1:1,Nt()})};return Nt=function(){if(Mt.render(),!Mt.getCanvas().isConnected)Mt.stopAnimate();else if(++Lt>=zt||!Mt.isAnimated())kt.cancel(),Mt.animationTimers.delete(kt),Mt.decAnim();else{var Bt=gt-(new Date().getTime()-jt.getTime());Bt=Bt>0?Bt:0,Mt.animationTimers.delete(kt),kt=new st.PausableTimer(Ot,Bt,wt),Mt.animationTimers.add(kt)}},kt=new st.PausableTimer(Ot,0,wt),this.animationTimers.add(kt),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(tt){tt.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(tt){tt.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(tt){tt.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(tt){return tt&&!tt.defaultcolors?(tt.defaultcolors=this.defaultcolors,tt.cartoonQuality=tt.cartoonQuality||this.config.cartoonQuality):typeof tt>"u"&&(tt={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),tt}addModel(tt,gt="",wt){wt=this.getModelOpt(wt);var yt=new ot.GLModel(this.models.length,wt);return yt.addMolData(tt,gt,wt),this.models.push(yt),yt}addModels(tt,gt,wt){wt=this.getModelOpt(wt),wt.multimodel=!0,wt.frames=!0;for(var yt=ot.GLModel.parseMolData(tt,gt,wt),Tt=0;Tt<yt.length;Tt++){var Mt=new ot.GLModel(this.models.length,wt);Mt.setAtomDefaults(yt[Tt]),Mt.addFrame(yt[Tt]),Mt.setFrame(0),yt.modelData&&Mt.setModelData(yt.modelData[Tt]),Mt.setDontDuplicateAtoms(!wt.duplicateAssemblyAtoms),this.models.push(Mt)}return this.models}addModelsAsFrames(tt,gt,wt){wt=this.getModelOpt(wt),wt.multimodel=!0,wt.frames=!0;var yt=new ot.GLModel(this.models.length,wt);return yt.addMolData(tt,gt,wt),this.models.push(yt),yt}addAsOneMolecule(tt,gt,wt){wt=this.getModelOpt(wt),wt.multimodel=!0,wt.onemol=!0;var yt=new ot.GLModel(this.models.length,wt);return yt.addMolData(tt,gt,wt),this.models.push(yt),yt}removeModel(tt){if(tt=this.getModel(tt),!!tt){for(tt.removegl(this.modelGroup),delete this.models[tt.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var tt=0;tt<this.models.length;tt++){var gt=this.models[tt];gt&&gt.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(tt,gt){var wt={};return gt===void 0?wt.m=this.models.map(function(yt){return yt.toCDObject(tt)}):wt.m=[this.models[gt].toCDObject()],JSON.stringify(wt)}exportVRML(){var tt=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new a.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var gt=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=tt,gt}createModelFrom(tt,gt=!1){for(var wt=new ot.GLModel(this.models.length,this.defaultcolors),yt=0;yt<this.models.length;yt++)if(this.models[yt]){var Tt=this.models[yt].selectedAtoms(tt);wt.addAtoms(Tt),gt&&this.models[yt].removeAtoms(Tt)}return this.models.push(wt),wt}applyToModels(tt,gt,wt,yt,Tt,Mt,Pt){for(var It=this.getModelList(gt),Lt=0;Lt<It.length;Lt++)It[Lt][tt](gt,wt,yt,Tt,Mt,Pt)}setStyle(tt,gt){return typeof gt>"u"&&(gt=tt,tt={}),this.applyToModels("setStyle",tt,gt,!1),this}addStyle(tt,gt){return typeof gt>"u"&&(gt=tt,tt={}),this.applyToModels("setStyle",tt,gt,!0),this}setClickable(tt,gt,wt){return this.applyToModels("setClickable",tt,gt,wt),this}setHoverable(tt,gt,wt,yt){return this.applyToModels("setHoverable",tt,gt,wt,yt),this}enableContextMenu(tt,gt){return this.applyToModels("enableContextMenu",tt,gt),this}vibrate(tt,gt,wt,yt){return this.applyToModels("vibrate",tt,gt,wt,this,yt),this}setColorByProperty(tt,gt,wt,yt){return this.applyToModels("setColorByProperty",tt,gt,wt,yt),this}setColorByElement(tt,gt){return this.applyToModels("setColorByElement",tt,gt),this}static getAtomsWithin(tt,gt){var wt=[];for(let Tt=0;Tt<tt.length;Tt++){var yt=tt[Tt];typeof yt>"u"||yt.x<gt[0][0]||yt.x>gt[1][0]||yt.y<gt[0][1]||yt.y>gt[1][1]||yt.z<gt[0][2]||yt.z>gt[1][2]||wt.push(yt)}return wt}static volume(tt){var gt=tt[1][0]-tt[0][0],wt=tt[1][1]-tt[0][1],yt=tt[1][2]-tt[0][2];return gt*wt*yt}carveUpExtent(tt,gt,wt){let yt=[],Tt={};for(let jt=0,Nt=gt.length;jt<Nt;jt++)Tt[gt[jt].index]=jt;let Mt=function(jt){let Nt=[];for(let kt=0,Ot=jt.length;kt<Ot;kt++)jt[kt].index in Tt&&Nt.push(Tt[jt[kt].index]);return Nt},Pt=function(jt){let Nt=[];return Nt[0]=[jt[0][0],jt[0][1],jt[0][2]],Nt[1]=[jt[1][0],jt[1][1],jt[1][2]],Nt},It=function(jt){if(d.volume(jt)<d.maxVolume)return[jt];var Nt=jt[1][0]-jt[0][0],kt=jt[1][1]-jt[0][1],Ot=jt[1][2]-jt[0][2],Bt;Nt>kt&&Nt>Ot?Bt=0:kt>Nt&&kt>Ot?Bt=1:Bt=2;var Ut=Pt(jt),Ft=Pt(jt),Wt=(jt[1][Bt]-jt[0][Bt])/2+jt[0][Bt];Ut[1][Bt]=Wt,Ft[0][Bt]=Wt;var _i=It(Ut),Qt=It(Ft);return _i.concat(Qt)},Lt=It(tt),zt=6;for(let jt=0,Nt=Lt.length;jt<Nt;jt++){let kt=Pt(Lt[jt]);kt[0][0]-=zt,kt[0][1]-=zt,kt[0][2]-=zt,kt[1][0]+=zt,kt[1][1]+=zt,kt[1][2]+=zt;let Ot=d.getAtomsWithin(gt,kt),Bt=d.getAtomsWithin(wt,Lt[jt]);yt.push({extent:Lt[jt],atoms:Mt(Ot),toshow:Mt(Bt)})}return yt}static generateSurfaceMesh(tt,gt,wt){var yt=new a.Geometry(!0),Tt=yt.updateGeoGroup(0),Mt=[];for(let hn=0,en=tt.length;hn<en;hn++){var Pt=tt[hn];Pt&&(typeof Pt.surfaceColor<"u"?Mt[hn]=Pt.surfaceColor:Pt.color&&(Mt[hn]=h.CC.color(Pt.color)))}var It=Tt.vertexArray,Lt=gt.vertices;for(let hn=0,en=Lt.length;hn<en;hn++){let xn=Tt.vertices*3;It[xn]=Lt[hn].x,It[xn+1]=Lt[hn].y,It[xn+2]=Lt[hn].z,Tt.vertices++}var zt=Tt.colorArray;let jt=Tt.atomArray;if(wt.voldata&&wt.volscheme){var Nt=wt.volscheme,kt=wt.voldata,Ot=Nt.range()||[-1,1];for(let hn=0,en=Lt.length;hn<en;hn++){let xn=Lt[hn].atomid,Pn=kt.getVal(Lt[hn].x,Lt[hn].y,Lt[hn].z),In=h.CC.color(Nt.valueToHex(Pn,Ot)),Nn=hn*3;zt[Nn]=In.r,zt[Nn+1]=In.g,zt[Nn+2]=In.b,jt[hn]=tt[xn]}}else if(Mt.length>0)for(let hn=0,en=Lt.length;hn<en;hn++){let xn=Lt[hn].atomid,Pn=hn*3;zt[Pn]=Mt[xn].r,zt[Pn+1]=Mt[xn].g,zt[Pn+2]=Mt[xn].b,jt[hn]=tt[xn]}var Bt=gt.faces;Tt.faceidx=Bt.length,yt.initTypedArrays();var Ut=Tt.vertexArray,Ft=Tt.normalArray,Wt,_i,Qt,on;for(let hn=0,en=Bt.length;hn<en;hn+=3){var nn=Bt[hn],dn=Bt[hn+1],tn=Bt[hn+2],rn=nn*3,En=dn*3,bn=tn*3;Wt=new c.Vector3(Ut[rn],Ut[rn+1],Ut[rn+2]),_i=new c.Vector3(Ut[En],Ut[En+1],Ut[En+2]),Qt=new c.Vector3(Ut[bn],Ut[bn+1],Ut[bn+2]),Qt.subVectors(Qt,_i),Wt.subVectors(Wt,_i),Qt.cross(Wt),on=Qt,on.normalize(),Ft[rn]+=on.x,Ft[En]+=on.x,Ft[bn]+=on.x,Ft[rn+1]+=on.y,Ft[En+1]+=on.y,Ft[bn+1]+=on.y,Ft[rn+2]+=on.z,Ft[En+2]+=on.z,Ft[bn+2]+=on.z}Tt.faceArray=new Uint16Array(Bt);var Dn=new a.Mesh(yt,wt);return Dn}static generateMeshSyncHelper(tt,gt,wt,yt,Tt,Mt){var Pt=new St.ProteinSurface;return Pt.initparm(gt,tt!==1,Mt),Pt.fillvoxels(Tt,wt),Pt.buildboundary(),(tt==St.SurfaceType.SES||tt==St.SurfaceType.MS)&&(Pt.fastdistancemap(),Pt.boundingatom(!1),Pt.fillvoxelswaals(Tt,wt)),Pt.marchingcube(tt),Pt.getFacesAndVertices(yt)}static getMatWithStyle(tt){let gt=null;tt.onesided?gt=new a.MeshLambertMaterial:gt=new a.MeshDoubleLambertMaterial,gt.vertexColors=a.Coloring.VertexColors;for(var wt in tt)wt==="color"||wt==="map"||tt.hasOwnProperty(wt)&&(gt[wt]=tt[wt]);return tt.opacity!==void 0&&(tt.opacity===1?gt.transparent=!1:gt.transparent=!0),gt}addMesh(tt){var gt={geo:tt.geometry,mat:tt.material,done:!0,finished:!1},wt=this.nextSurfID();return this.surfaces[wt]=[gt],wt}static shallowCopy(tt){var gt=[];let wt=tt.length;for(let yt=0;yt<wt;yt++)gt[yt]=(0,st.extend)({},tt[yt]);return gt}addSurface(tt,gt={},wt={},yt,Tt,Mt){let Pt=this.nextSurfID(),It=null,Lt=this,zt=St.SurfaceType.VDW;typeof tt=="string"?d.surfaceTypeMap[tt.toUpperCase()]!==void 0?zt=d.surfaceTypeMap[tt]:console.log("Surface type : "+tt+" is not recognized"):typeof tt=="number"&&(zt=tt);var jt=null,Nt=null,kt=d.shallowCopy(this.getAtomsFromSel(wt));yt?jt=d.shallowCopy(this.getAtomsFromSel(yt)):jt=kt,(0,st.adjustVolumeStyle)(gt);var Ot=!1,Bt;for(Bt=0;Bt<this.models.length;Bt++)if(this.models[Bt]){var Ut=this.models[Bt].getSymmetries();if(Ut.length>1||Ut.length==1&&!Ut[0].isIdentity()){Ot=!0;break}}var Ft=function(tn,rn,En){Tt?Nt=d.shallowCopy(Lt.getAtomsFromSel(Tt)):Nt=En;var bn,Dn=(0,st.getExtent)(En,!0);if(gt.map&&gt.map.prop){var hn=gt.map.prop;let cn=(0,nt.getGradient)(gt.map.scheme||gt.map.gradient||new nt.Gradient.RWB),Ln=cn.range();Ln||(Ln=(0,st.getPropertyRange)(En,hn)),gt.colorscheme={prop:hn,gradient:cn}}for(let cn=0,Ln=rn.length;cn<Ln;cn++)bn=rn[cn],bn.surfaceColor=(0,st.getColorFromStyle)(bn,gt);var en=d.volume(Dn),xn=Lt.carveUpExtent(Dn,rn,En);if(Nt&&Nt.length&&Nt.length>0){var Pn=(0,st.getExtent)(Nt,!0),In=function(cn,Ln){var Fn=function(Zt,mn){var an=Zt.extent,Rn=an[1][0]-an[0][0],Cn=an[1][1]-an[0][1],Gt=an[1][2]-an[0][2],un=Rn-mn[2][0];un*=un;var yn=Cn-mn[2][1];yn*=yn;var Mn=Gt-mn[2][2];return Mn*=Mn,un+yn+Mn},$t=Fn(cn,Pn),Xt=Fn(Ln,Pn);return $t-Xt};xn.sort(In)}var Nn=[];for(let cn=0,Ln=rn.length;cn<Ln;cn++)bn=rn[cn],Nn[cn]={x:bn.x,y:bn.y,z:bn.z,serial:cn,elem:bn.elem};var Un=!!St.syncSurface;if(Un){var kn=function(Ln){return new Promise(function(Fn){for(var $t=d.generateMeshSyncHelper(zt,xn[Ln].extent,xn[Ln].atoms,xn[Ln].toshow,Nn,en),Xt=(0,vt.splitMesh)({vertexArr:$t.vertices,faceArr:$t.faces}),Zt=0,mn=Xt.length;Zt<mn;Zt++){$t={vertices:Xt[Zt].vertexArr,faces:Xt[Zt].faceArr};var an=d.generateSurfaceMesh(rn,$t,It);(0,st.mergeGeos)(tn.geo,an)}Lt.render(),Fn()})},jn=[];for(let cn=0;cn<xn.length;cn++)jn.push(kn(cn));return Promise.all(jn).then(function(){return tn.done=!0,Promise.resolve(Pt)})}else{var zn=[];zt<0&&(zt=0);for(let cn=0,Ln=d.numWorkers;cn<Ln;cn++){var On=new Worker($3Dmol.SurfaceWorker);zn.push(On),On.postMessage({type:-1,atoms:Nn,volume:en})}return new Promise(function(cn,Ln){var Fn=0,$t=function(){!zn||!zn.length||zn.forEach(function(an){an&&an.terminate&&an.terminate()})},Xt=function(an){for(var Rn=(0,vt.splitMesh)({vertexArr:an.data.vertices,faceArr:an.data.faces}),Cn=0,Gt=Rn.length;Cn<Gt;Cn++){var un={vertices:Rn[Cn].vertexArr,faces:Rn[Cn].faceArr},yn=d.generateSurfaceMesh(rn,un,It);(0,st.mergeGeos)(tn.geo,yn)}Lt.render(),Fn++,Fn==xn.length&&(tn.done=!0,$t(),cn(Pt))},Zt=function(an){$t(),console.log(an.message+" ("+an.filename+":"+an.lineno+")"),Ln(an)};for(let an=0;an<xn.length;an++){var mn=zn[an%zn.length];mn.onmessage=Xt,mn.onerror=Zt,mn.postMessage({type:zt,expandedExtent:xn[an].extent,extendedAtoms:xn[an].atoms,atomsToShow:xn[an].toshow})}})}};gt=gt||{},It=d.getMatWithStyle(gt);var Wt=[];Wt.style=gt,Wt.atomsel=wt,Wt.allsel=yt,Wt.focus=Tt;var _i=null;if(Ot){var Qt={},on={};for(Bt=0;Bt<this.models.length;Bt++)Qt[Bt]=[],on[Bt]=[];for(Bt=0;Bt<jt.length;Bt++)Qt[jt[Bt].model].push(jt[Bt]);for(Bt=0;Bt<kt.length;Bt++)on[kt[Bt].model].push(kt[Bt]);var nn=[];for(Bt=0;Bt<this.models.length;Bt++)on[Bt].length>0&&(Wt.push({geo:new a.Geometry(!0),mat:It,done:!1,finished:!1,symmetries:this.models[Bt].getSymmetries()}),nn.push(Ft(Wt[Wt.length-1],Qt[Bt],on[Bt])));_i=Promise.all(nn)}else Wt.push({geo:new a.Geometry(!0),mat:It,done:!1,finished:!1,symmetries:[new c.Matrix4]}),_i=Ft(Wt[Wt.length-1],jt,kt);return this.surfaces[Pt]=Wt,_i.surfid=Pt,Mt&&typeof Mt=="function"?(_i.then(function(dn){Mt(dn)}),Pt):_i}setSurfaceMaterialStyle(tt,gt){if((0,st.adjustVolumeStyle)(gt),this.surfaces[tt]){var wt=this.surfaces[tt];for(let Tt=0;Tt<wt.length;Tt++){var yt=wt[Tt].mat=d.getMatWithStyle(gt);if(wt[Tt].mat.side=a.FrontSide,gt.color){wt[Tt].mat.color=h.CC.color(gt.color),wt[Tt].geo.colorsNeedUpdate=!0;const Mt=h.CC.color(gt.color);wt[Tt].geo.setColor(Mt)}else if(yt.voldata&&yt.volscheme){const Mt=yt.volscheme,Pt=yt.voldata,It=h.CC,Lt=Mt.range()||[-1,1];wt[Tt].geo.setColors(function(zt,jt,Nt){let kt=Pt.getVal(zt,jt,Nt);return It.color(Mt.valueToHex(kt,Lt))})}else{wt[Tt].geo.colorsNeedUpdate=!0;for(let Mt of wt[Tt].geo.geometryGroups)for(let Pt=0;Pt<Mt.vertices;Pt++){let It=(0,st.getColorFromStyle)(Mt.atomArray[Pt],gt),Lt=3*Pt;Mt.colorArray[Lt]=It.r,Mt.colorArray[Lt+1]=It.g,Mt.colorArray[Lt+2]=It.b}}wt[Tt].finished=!1}}return this}getSurface(tt){return this.surfaces[tt]}removeSurface(tt){for(var gt=this.surfaces[tt],wt=0;wt<gt.length;wt++)gt[wt]&&gt[wt].lastGL&&(gt[wt].geo!==void 0&&gt[wt].geo.dispose(),gt[wt].mat!==void 0&&gt[wt].mat.dispose(),this.modelGroup.remove(gt[wt].lastGL));return delete this.surfaces[tt],this.show(),this}removeAllSurfaces(){for(var tt in this.surfaces)if(this.surfaces.hasOwnProperty(tt)){for(var gt=this.surfaces[tt],wt=0;wt<gt.length;wt++)gt[wt]&&gt[wt].lastGL&&(gt[wt].geo!==void 0&&gt[wt].geo.dispose(),gt[wt].mat!==void 0&&gt[wt].mat.dispose(),this.modelGroup.remove(gt[wt].lastGL));delete this.surfaces[tt]}return this.show(),this}jmolMoveTo(){var tt=this.modelGroup.position,gt="center { "+-tt.x+" "+-tt.y+" "+-tt.z+" }; ",wt=this.rotationGroup.quaternion;return gt+="moveto .5 quaternion { "+wt.x+" "+wt.y+" "+wt.z+" "+wt.w+" };",gt}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(tt,gt){gt=gt||{};var wt=this.getAtomsFromSel(gt);if(typeof tt=="function")for(let Mt=0,Pt=wt.length;Mt<Pt;Mt++){let It=wt[Mt];tt(It)}else for(let Mt=0,Pt=wt.length;Mt<Pt;Mt++){var yt=wt[Mt];for(let It=0,Lt=tt.length;It<Lt;It++){let zt=tt[It];if(zt.props)for(var Tt in zt.props)zt.props.hasOwnProperty(Tt)&&this.atomIsSelected(yt,zt)&&(yt.properties||(yt.properties={}),yt.properties[Tt]=zt.props[Tt])}}return this}linkViewer(tt){return this.linkedViewers.push(tt),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(tt){this.rotationGroup.position.z=this.CAMERA_Z-tt}setAutoEyeSeparation(tt,gt){var wt=this.getPerceivedDistance();return gt||(gt=5),tt||this.camera.position.x>0?this.camera.position.x=wt*Math.tan(Math.PI/180*gt):this.camera.position.x=-wt*Math.tan(Math.PI/180*gt),this.camera.lookAt(new c.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(tt){this.config.cartoonQuality=tt}}d.numWorkers=4,d.maxVolume=64e3,d.surfaceTypeMap={VDW:St.SurfaceType.VDW,MS:St.SurfaceType.MS,SAS:St.SurfaceType.SAS,SES:St.SurfaceType.SES};function b(_t,tt){if(_t=(0,st.getElement)(_t),!!_t){tt=tt||{};try{var gt=new d(_t,tt);return gt}catch(wt){throw"error creating viewer: "+wt}}}function ft(_t,tt={},gt={}){if(_t=(0,st.getElement)(_t),!!_t){var wt=[],yt=document.createElement("canvas");gt.rows=tt.rows,gt.cols=tt.cols,gt.control_all=tt.control_all!=null?tt.control_all:!1,_t.appendChild(yt);try{for(var Tt=0;Tt<tt.rows;Tt++){for(var Mt=[],Pt=0;Pt<tt.cols;Pt++){gt.row=Tt,gt.col=Pt,gt.canvas=yt,gt.viewers=wt,gt.control_all=tt.control_all;var It=b(_t,(0,st.extend)({},gt));Mt.push(It)}wt.unshift(Mt)}}catch(Lt){throw"error creating viewer grid: "+Lt}return wt}}function mt(_t){var tt=this;if(_t=(0,st.getElement)(_t),!!_t){var gt=ft(_t,{rows:1,cols:2,control_all:!0});this.glviewer1=gt[0][0],this.glviewer2=gt[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var wt=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(Tt){return typeof tt.glviewer1[Tt]=="function"}),yt=0;yt<wt.length;yt++)this[wt[yt]]=function(Tt){return function(){var Mt=this.glviewer1[Tt].apply(this.glviewer1,arguments),Pt=this.glviewer2[Tt].apply(this.glviewer2,arguments);return[Mt,Pt]}}(wt[yt]);this.setCoordinates=function(Tt,Mt,Pt){for(var It=0;It<Tt.length;It++)Tt[It].setCoordinates(Mt,Pt)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(Tt){this.glviewer1.render(),this.glviewer2.render(),Tt&&Tt(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}},"./src/Gradient.ts":(e,i,s)=>{s.r(i),s.d(i,{CustomLinear:()=>vt,Gradient:()=>St,GradientType:()=>c,ROYGB:()=>ot,RWB:()=>nt,Sinebow:()=>xt,builtinGradients:()=>bt,getGradient:()=>st,normalizeValue:()=>h});var a=s("./src/colors.ts");class c{}function h(Et,Ct,ht){return Ct>=Et?(ht<Et&&(ht=Et),ht>Ct&&(ht=Ct),{lo:Et,hi:Ct,val:ht}):(ht>Et&&(ht=Et),ht<Ct&&(ht=Ct),ht=Et-ht+Ct,{lo:Ct,hi:Et,val:ht})}function st(Et){if(Et instanceof c)return Et;if(Et.gradient!==void 0&&bt[Et.gradient]){let Ct=Et.min===void 0?-1:Et.min,ht=Et.max===void 0?1:Et.max;return Et.mid===void 0?Et.colors===void 0?new bt[Et.gradient](Ct,ht):new bt[Et.gradient](Ct,ht,Et.colors):new bt[Et.gradient](Ct,ht,Et.mid)}else if(typeof Et.gradient=="string"&&Et.gradient.startsWith("linear_")){let Ct=Et.gradient.split("_");Ct.shift();let ht=Et.min===void 0?-1:Et.min,d=Et.max===void 0?1:Et.max;return new vt(ht,d,Ct)}return Et}class nt extends c{constructor(Ct,ht,d){super(),this.gradient="RWB",this.mult=1,this.mid=d,this.min=Ct,this.max=ht,typeof ht>"u"&&Array.isArray(Ct)&&Ct.length>=2?(this.max=Ct[1],this.min=Ct[0]):Ct&&ht&&!Array.isArray(Ct)&&(this.min=Ct,this.max=ht)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(Ct,ht){var d,b;if(Ct=this.mult*Ct,ht?(d=ht[0],b=ht[1]):(d=this.min,b=this.max),Ct===void 0)return 16777215;var ft=h(d,b,Ct);d=ft.lo,b=ft.hi,Ct=ft.val;var mt=(b+d)/2;ht&&typeof ht[2]<"u"?mt=ht[2]:typeof this.mid<"u"?mt=this.mid:mt=(d+b)/2;var _t,tt;return Ct<mt?(_t=Math.floor(255*Math.sqrt((Ct-d)/(mt-d))),tt=16711680+256*_t+_t,tt):Ct>mt?(_t=Math.floor(255*Math.sqrt(1-(Ct-mt)/(b-mt))),tt=65536*_t+256*_t+255,tt):16777215}}class ot extends c{constructor(Ct,ht){super(),this.gradient="ROYGB",this.mult=1,this.min=Ct,this.max=ht,typeof ht>"u"&&Array.isArray(Ct)&&Ct.length>=2?(this.max=Ct[1],this.min=Ct[0]):Ct&&ht&&!Array.isArray(Ct)&&(this.min=Ct,this.max=ht)}valueToHex(Ct,ht){var d,b;if(Ct=this.mult*Ct,ht?(d=ht[0],b=ht[1]):(d=this.min,b=this.max),typeof Ct>"u")return 16777215;var ft=h(d,b,Ct);d=ft.lo,b=ft.hi,Ct=ft.val;var mt=(d+b)/2,_t=(d+mt)/2,tt=(mt+b)/2,gt,wt;return Ct<_t?(gt=Math.floor(255*Math.sqrt((Ct-d)/(_t-d))),wt=16711680+256*gt+0,wt):Ct<mt?(gt=Math.floor(255*Math.sqrt(1-(Ct-_t)/(mt-_t))),wt=65536*gt+65280+0,wt):Ct<tt?(gt=Math.floor(255*Math.sqrt((Ct-mt)/(tt-mt))),wt=65280+1*gt,wt):(gt=Math.floor(255*Math.sqrt(1-(Ct-tt)/(b-tt))),wt=0+256*gt+255,wt)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class xt extends c{constructor(Ct,ht){super(),this.gradient="Sinebow",this.mult=1,this.min=Ct,this.max=ht,typeof ht>"u"&&Array.isArray(Ct)&&Ct.length>=2&&(this.max=Ct[1],this.min=Ct[0]),ht<Ct&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(Ct,ht){var d,b;if(Ct=this.mult*Ct,ht?(d=ht[0],b=ht[1]):(d=this.min,b=this.max),typeof Ct>"u")return 16777215;var ft=St.normalizeValue(d,b,Ct);d=ft.lo,b=ft.hi,Ct=ft.val;var mt=(Ct-d)/(b-d),_t=5*mt/6+.5,tt=Math.sin(Math.PI*_t);tt*=tt*255;var gt=Math.sin(Math.PI*(_t+1/3));gt*=gt*255;var wt=Math.sin(Math.PI*(_t+2/3));return wt*=wt*255,65536*Math.floor(tt)+256*Math.floor(wt)+1*Math.floor(gt)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class vt extends c{constructor(Ct,ht,d){super(),this.gradient="linear",this.colors=new Array;var b;if(Array.isArray(Ct)&&Ct.length>=2?(this.max=Ct[1],this.min=Ct[0],b=ht):(this.min=Ct,this.max=ht,b=d),b)for(let ft of b)this.colors.push(a.CC.color(ft));else this.colors.push(a.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(Ct,ht){var d,b;if(ht?(d=ht[0],b=ht[1]):(d=this.min,b=this.max),Ct===void 0)return 16777215;var ft=h(d,b,Ct);d=ft.lo,b=ft.hi,Ct=ft.val;let mt=this.colors.length,_t=(b-d)/mt,tt=Math.min(Math.floor((Ct-d)/_t),mt-1),gt=Math.min(tt+1,mt-1),wt=(Ct-d-tt*_t)/_t,yt=this.colors[tt],Tt=this.colors[gt];return new a.Color(yt.r+wt*(Tt.r-yt.r),yt.g+wt*(Tt.g-yt.g),yt.b+wt*(Tt.b-yt.b)).getHex()}}const bt={rwb:nt,RWB:nt,roygb:ot,ROYGB:ot,sinebow:xt,linear:vt};class St extends c{valueToHex(Ct,ht){return 0}range(){return null}}St.RWB=nt,St.ROYGB=ot,St.Sinebow=xt,St.CustomLinear=vt,St.builtinGradients=bt,St.normalizeValue=h,St.getGradient=st},"./src/Label.ts":(e,i,s)=>{s.r(i),s.d(i,{Label:()=>xt,LabelCount:()=>st});var a=s("./src/WebGL/index.ts"),c=s("./src/Gradient.ts"),h=s("./src/colors.ts");let st=0;function nt(vt,bt,St,Et,Ct,ht,d){vt.beginPath(),vt.moveTo(bt+ht,St),vt.lineTo(bt+Et-ht,St),vt.quadraticCurveTo(bt+Et,St,bt+Et,St+ht),vt.lineTo(bt+Et,St+Ct-ht),vt.quadraticCurveTo(bt+Et,St+Ct,bt+Et-ht,St+Ct),vt.lineTo(bt+ht,St+Ct),vt.quadraticCurveTo(bt,St+Ct,bt,St+Ct-ht),vt.lineTo(bt,St+ht),vt.quadraticCurveTo(bt,St,bt+ht,St),vt.closePath(),vt.fill(),d&&vt.stroke()}function ot(vt,bt,St){var Et=St;return typeof vt<"u"&&(vt instanceof h.Color?Et=vt.scaled():(Et=h.CC.color(vt),typeof Et.scaled<"u"&&(Et=Et.scaled()))),typeof bt<"u"&&(Et.a=parseFloat(bt)),Et}class xt{constructor(bt,St){this.id=st++,this.stylespec=St||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new a.Sprite,this.text=bt,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var bt=this.stylespec,St=typeof bt.useScreen>"u"?!1:bt.useScreen,Et=bt.showBackground;(Et==="0"||Et==="false")&&(Et=!1),typeof Et>"u"&&(Et=!0);var Ct=bt.font?bt.font:"sans-serif",ht=parseInt(bt.fontSize)?parseInt(bt.fontSize):18,d=ot(bt.fontColor,bt.fontOpacity,{r:255,g:255,b:255,a:1}),b=bt.padding?bt.padding:4,ft=bt.borderThickness?bt.borderThickness:0,mt=ot(bt.backgroundColor,bt.backgroundOpacity,{r:0,g:0,b:0,a:1}),_t=ot(bt.borderColor,bt.borderOpacity,mt),tt=bt.position?bt.position:{x:-10,y:1,z:1},gt=bt.inFront!==void 0?bt.inFront:!0;(gt==="false"||gt==="0")&&(gt=!1);var wt=bt.alignment||a.SpriteAlignment.topLeft;typeof wt=="string"&&wt in a.SpriteAlignment&&(wt=a.SpriteAlignment[wt]);var yt="";bt.bold&&(yt="bold "),this.context.font=yt+ht+"px  "+Ct;var Tt=this.context.measureText(this.text),Mt=Tt.width;Et||(ft=0);var Pt=Mt+2.5*ft+2*b,It=ht*1.25+2*ft+2*b;if(bt.backgroundImage){var Lt=bt.backgroundImage,zt=bt.backgroundWidth?bt.backgroundWidth:Lt.width,jt=bt.backgroundHeight?bt.backgroundHeight:Lt.height;zt>Pt&&(Pt=zt),jt>It&&(It=jt)}if(this.canvas.width=Pt,this.canvas.height=It,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),yt="",bt.bold&&(yt="bold "),this.context.font=yt+ht+"px  "+Ct,this.context.fillStyle="rgba("+mt.r+","+mt.g+","+mt.b+","+mt.a+")",this.context.strokeStyle="rgba("+_t.r+","+_t.g+","+_t.b+","+_t.a+")",bt.backgroundGradient){let kt=this.context.createLinearGradient(0,It/2,Pt,It/2),Ot=c.Gradient.getGradient(bt.backgroundGradient),Bt=Ot.range(),Ut=-1,Ft=1;Bt&&(Ut=Bt[0],Ft=Bt[1]);let Wt=Ft-Ut;for(let _i=0;_i<1.01;_i+=.1){let Qt=ot(Ot.valueToHex(Ut+Wt*_i)),on="rgba("+Qt.r+","+Qt.g+","+Qt.b+","+Qt.a+")";kt.addColorStop(_i,on)}this.context.fillStyle=kt}this.context.lineWidth=ft,Et&&nt(this.context,ft,ft,Pt-2*ft,It-2*ft,6,ft>0),bt.backgroundImage&&this.context.drawImage(Lt,0,0,Pt,It),this.context.fillStyle="rgba("+d.r+","+d.g+","+d.b+","+d.a+")",this.context.fillText(this.text,ft+b,ht+ft+b,Mt);var Nt=new a.Texture(this.canvas);Nt.needsUpdate=!0,this.sprite.material=new a.SpriteMaterial({map:Nt,useScreenCoordinates:St,alignment:wt,depthTest:!gt,screenOffset:bt.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(tt.x,tt.y,tt.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}},"./src/ProteinSurface4.ts":(e,i,s)=>{s.r(i),s.d(i,{MarchingCube:()=>ot,MarchingCubeInitializer:()=>nt,PointGrid:()=>xt,ProteinSurface:()=>vt,SurfaceType:()=>c,setSyncSurface:()=>st,syncSurface:()=>h});var a=s("./src/WebGL/math/index.ts"),c;(function(bt){bt[bt.VDW=1]="VDW",bt[bt.MS=2]="MS",bt[bt.SAS=3]="SAS",bt[bt.SES=4]="SES"})(c||(c={}));var h=!1;function st(bt){h=bt}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(h=!0);class nt{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(St,Et,Ct,ht){let d=!!ht.fulltable,b=ht.hasOwnProperty("origin")&&ht.origin.hasOwnProperty("x")?ht.origin:{x:0,y:0,z:0},ft=!!ht.voxel,mt=ht.matrix,_t=ht.nX||0,tt=ht.nY||0,gt=ht.nZ||0,wt=ht.scale||1,yt=null;ht.unitCube?yt=ht.unitCube:yt={x:wt,y:wt,z:wt};let Tt=new Int32Array(_t*tt*gt),Mt,Pt;for(Mt=0,Pt=Tt.length;Mt<Pt;++Mt)Tt[Mt]=-1;let It=function(Nt,kt,Ot,Bt,Ut,Ft){let Wt={x:0,y:0,z:0},_i=!!(Bt&1<<Ut),Qt=!!(Bt&1<<Ft),on=Ut;if(!_i&&Qt&&(on=Ft),on&1&&Ot++,on&2&&kt++,on&4&&Nt++,mt){let dn=new a.Vector3(Nt,kt,Ot);dn=dn.applyMatrix4(mt),Wt={x:dn.x,y:dn.y,z:dn.z}}else Wt.x=b.x+yt.x*Nt,Wt.y=b.y+yt.y*kt,Wt.z=b.z+yt.z*Ot;let nn=(tt*Nt+kt)*gt+Ot;return ft?(Et.push(Wt),Et.length-1):(Tt[nn]<0&&(Tt[nn]=Et.length,Et.push(Wt)),Tt[nn])},Lt=new Int32Array(12),zt=d?this.edgeTable2:this.edgeTable,jt=d?this.triTable2:this.triTable;for(Mt=0;Mt<_t-1;++Mt)for(let Nt=0;Nt<tt-1;++Nt)for(let kt=0;kt<gt-1;++kt){let Ot=0;for(let Ft=0;Ft<8;++Ft){let Wt=(tt*(Mt+((Ft&4)>>2))+Nt+((Ft&2)>>1))*gt+kt+(Ft&1),_i=!!(St[Wt]&this.ISDONE);Ot|=_i<<Ft}if(Ot===0||Ot===255)continue;let Bt=zt[Ot];if(Bt===0)continue;let Ut=jt[Ot];Bt&1&&(Lt[0]=It(Mt,Nt,kt,Ot,0,1)),Bt&2&&(Lt[1]=It(Mt,Nt,kt,Ot,1,3)),Bt&4&&(Lt[2]=It(Mt,Nt,kt,Ot,3,2)),Bt&8&&(Lt[3]=It(Mt,Nt,kt,Ot,2,0)),Bt&16&&(Lt[4]=It(Mt,Nt,kt,Ot,4,5)),Bt&32&&(Lt[5]=It(Mt,Nt,kt,Ot,5,7)),Bt&64&&(Lt[6]=It(Mt,Nt,kt,Ot,7,6)),Bt&128&&(Lt[7]=It(Mt,Nt,kt,Ot,6,4)),Bt&256&&(Lt[8]=It(Mt,Nt,kt,Ot,0,4)),Bt&512&&(Lt[9]=It(Mt,Nt,kt,Ot,1,5)),Bt&1024&&(Lt[10]=It(Mt,Nt,kt,Ot,3,7)),Bt&2048&&(Lt[11]=It(Mt,Nt,kt,Ot,2,6));for(let Ft=0;Ft<Ut.length;Ft+=3){let Wt=Lt[Ut[Ft]],_i=Lt[Ut[Ft+1]],Qt=Lt[Ut[Ft+2]];ft&&Ft>=3&&(Et.push(Et[Wt]),Wt=Et.length-1,Et.push(Et[_i]),_i=Et.length-1,Et.push(Et[Qt]),Qt=Et.length-1),Ct.push(Wt),Ct.push(_i),Ct.push(Qt)}}}laplacianSmooth(St,Et,Ct){let ht=new Array(Et.length),d,b,ft,mt,_t;for(d=0,b=Et.length;d<b;d++)ht[d]={x:0,y:0,z:0};let tt=new Array(20),gt;for(d=0;d<20;d++)tt[d]=new Array(Et.length);for(d=0,b=Et.length;d<b;d++)tt[0][d]=0;for(d=0,b=Ct.length/3;d<b;d++){let Tt=d*3,Mt=d*3+1,Pt=d*3+2;for(gt=!0,ft=0,mt=tt[0][Ct[Tt]];ft<mt;ft++)if(Ct[Mt]==tt[ft+1][Ct[Tt]]){gt=!1;break}for(gt&&(tt[0][Ct[Tt]]++,tt[tt[0][Ct[Tt]]][Ct[Tt]]=Ct[Mt]),gt=!0,ft=0,mt=tt[0][Ct[Tt]];ft<mt;ft++)if(Ct[Pt]==tt[ft+1][Ct[Tt]]){gt=!1;break}for(gt&&(tt[0][Ct[Tt]]++,tt[tt[0][Ct[Tt]]][Ct[Tt]]=Ct[Pt]),gt=!0,ft=0,mt=tt[0][Ct[Mt]];ft<mt;ft++)if(Ct[Tt]==tt[ft+1][Ct[Mt]]){gt=!1;break}for(gt&&(tt[0][Ct[Mt]]++,tt[tt[0][Ct[Mt]]][Ct[Mt]]=Ct[Tt]),gt=!0,ft=0,mt=tt[0][Ct[Mt]];ft<mt;ft++)if(Ct[Pt]==tt[ft+1][Ct[Mt]]){gt=!1;break}for(gt&&(tt[0][Ct[Mt]]++,tt[tt[0][Ct[Mt]]][Ct[Mt]]=Ct[Pt]),gt=!0,ft=0;ft<tt[0][Ct[Pt]];ft++)if(Ct[Tt]==tt[ft+1][Ct[Pt]]){gt=!1;break}for(gt&&(tt[0][Ct[Pt]]++,tt[tt[0][Ct[Pt]]][Ct[Pt]]=Ct[Tt]),gt=!0,ft=0,mt=tt[0][Ct[Pt]];ft<mt;ft++)if(Ct[Mt]==tt[ft+1][Ct[Pt]]){gt=!1;break}gt&&(tt[0][Ct[Pt]]++,tt[tt[0][Ct[Pt]]][Ct[Pt]]=Ct[Mt])}let wt=1,yt=.5;for(_t=0;_t<St;_t++){for(d=0,b=Et.length;d<b;d++)if(tt[0][d]<3)ht[d].x=Et[d].x,ht[d].y=Et[d].y,ht[d].z=Et[d].z;else if(tt[0][d]==3||tt[0][d]==4){for(ht[d].x=0,ht[d].y=0,ht[d].z=0,ft=0,mt=tt[0][d];ft<mt;ft++)ht[d].x+=Et[tt[ft+1][d]].x,ht[d].y+=Et[tt[ft+1][d]].y,ht[d].z+=Et[tt[ft+1][d]].z;ht[d].x+=yt*Et[d].x,ht[d].y+=yt*Et[d].y,ht[d].z+=yt*Et[d].z,ht[d].x/=yt+tt[0][d],ht[d].y/=yt+tt[0][d],ht[d].z/=yt+tt[0][d]}else{for(ht[d].x=0,ht[d].y=0,ht[d].z=0,ft=0,mt=tt[0][d];ft<mt;ft++)ht[d].x+=Et[tt[ft+1][d]].x,ht[d].y+=Et[tt[ft+1][d]].y,ht[d].z+=Et[tt[ft+1][d]].z;ht[d].x+=wt*Et[d].x,ht[d].y+=wt*Et[d].y,ht[d].z+=wt*Et[d].z,ht[d].x/=wt+tt[0][d],ht[d].y/=wt+tt[0][d],ht[d].z/=wt+tt[0][d]}for(d=0,b=Et.length;d<b;d++)Et[d].x=ht[d].x,Et[d].y=ht[d].y,Et[d].z=ht[d].z}}}let ot=new nt;class xt{constructor(St,Et,Ct){this.data=new Int32Array(St*Et*Ct*3),this.width=Et,this.height=Ct}set(St,Et,Ct,ht){let d=((St*this.width+Et)*this.height+Ct)*3;this.data[d]=ht.ix,this.data[d+1]=ht.iy,this.data[d+2]=ht.iz}get(St,Et,Ct){let ht=((St*this.width+Et)*this.height+Ct)*3;return{ix:this.data[ht],iy:this.data[ht+1],iz:this.data[ht+2]}}}class vt{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],vt.MarchingCube||(vt.MarchingCube=new nt)}getVDWIndex(St){return!St.elem||typeof this.vdwRadii[St.elem]>"u"?"X":St.elem}getFacesAndVertices(St){let Et={};for(let d=0,b=St.length;d<b;d++)Et[St[d]]=!0;let Ct=this.verts;for(let d=0,b=Ct.length;d<b;d++)Ct[d].x=Ct[d].x/this.scaleFactor-this.ptranx,Ct[d].y=Ct[d].y/this.scaleFactor-this.ptrany,Ct[d].z=Ct[d].z/this.scaleFactor-this.ptranz;let ht=[];for(let d=0,b=this.faces.length;d<b;d+=3){let ft=this.faces[d],mt=this.faces[d+1],_t=this.faces[d+2],tt=Ct[ft].atomid,gt=Ct[mt].atomid,wt=Ct[_t].atomid,yt=tt;gt<yt&&(yt=gt),wt<yt&&(yt=wt),Et[yt]&&ft!==mt&&mt!==_t&&ft!==_t&&(ht.push(ft),ht.push(mt),ht.push(_t))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:Ct,faces:ht}}initparm(St,Et,Ct){Ct>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let ht=1/this.scaleFactor*5.5;this.pminx=St[0][0],this.pmaxx=St[1][0],this.pminy=St[0][1],this.pmaxy=St[1][1],this.pminz=St[0][2],this.pmaxz=St[1][2],Et?(this.pminx-=this.probeRadius+ht,this.pminy-=this.probeRadius+ht,this.pminz-=this.probeRadius+ht,this.pmaxx+=this.probeRadius+ht,this.pmaxy+=this.probeRadius+ht,this.pmaxz+=this.probeRadius+ht):(this.pminx-=ht,this.pminy-=ht,this.pminz-=ht,this.pmaxx+=ht,this.pmaxy+=ht,this.pmaxz+=ht),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(Et),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(St){let Et={};for(const Ct in this.vdwRadii){let ht=this.vdwRadii[Ct];St?Et[Ct]=(ht+this.probeRadius)*this.scaleFactor+.5:Et[Ct]=ht*this.scaleFactor+.5;let d=Et[Ct]*Et[Ct];this.widxz[Ct]=Math.floor(Et[Ct])+1,this.depty[Ct]=new Int32Array(this.widxz[Ct]*this.widxz[Ct]);let b=0;for(let ft=0;ft<this.widxz[Ct];ft++)for(let mt=0;mt<this.widxz[Ct];mt++){let _t=ft*ft+mt*mt;if(_t>d)this.depty[Ct][b]=-1;else{let tt=Math.sqrt(d-_t);this.depty[Ct][b]=Math.floor(tt)}b++}}}fillvoxels(St,Et){for(let Ct=0,ht=this.vpBits.length;Ct<ht;Ct++)this.vpBits[Ct]=0,this.vpDistance[Ct]=-1,this.vpAtomID[Ct]=-1;for(let Ct in Et){let ht=St[Et[Ct]];ht!==void 0&&this.fillAtom(ht,St)}for(let Ct=0,ht=this.vpBits.length;Ct<ht;Ct++)this.vpBits[Ct]&this.INOUT&&(this.vpBits[Ct]|=this.ISDONE)}fillAtom(St,Et){let Ct=Math.floor(.5+this.scaleFactor*(St.x+this.ptranx)),ht=Math.floor(.5+this.scaleFactor*(St.y+this.ptrany)),d=Math.floor(.5+this.scaleFactor*(St.z+this.ptranz)),b=this.getVDWIndex(St),ft=0,mt=this.pWidth*this.pHeight;for(let _t=0,tt=this.widxz[b];_t<tt;_t++)for(let gt=0;gt<tt;gt++){if(this.depty[b][ft]!=-1){for(let wt=-1;wt<2;wt++)for(let yt=-1;yt<2;yt++)for(let Tt=-1;Tt<2;Tt++)if(wt!==0&&yt!==0&&Tt!==0){let Mt=wt*_t,Pt=Tt*gt;for(let It=0;It<=this.depty[b][ft];It++){let Lt=It*yt,zt=Ct+Mt,jt=ht+Lt,Nt=d+Pt;if(zt<0||jt<0||Nt<0||zt>=this.pLength||jt>=this.pWidth||Nt>=this.pHeight)continue;let kt=zt*mt+jt*this.pHeight+Nt;if(!(this.vpBits[kt]&this.INOUT))this.vpBits[kt]|=this.INOUT,this.vpAtomID[kt]=St.serial;else{let Ot=Et[this.vpAtomID[kt]];if(Ot.serial!=St.serial){let Bt=Ct+Mt-Math.floor(.5+this.scaleFactor*(Ot.x+this.ptranx)),Ut=ht+Lt-Math.floor(.5+this.scaleFactor*(Ot.y+this.ptrany)),Ft=d+Pt-Math.floor(.5+this.scaleFactor*(Ot.z+this.ptranz));Mt*Mt+Lt*Lt+Pt*Pt<Bt*Bt+Ut*Ut+Ft*Ft&&(this.vpAtomID[kt]=St.serial)}}}}}ft++}}fillvoxelswaals(St,Et){for(let Ct=0,ht=this.vpBits.length;Ct<ht;Ct++)this.vpBits[Ct]&=~this.ISDONE;for(let Ct in Et){let ht=St[Et[Ct]];ht!==void 0&&this.fillAtomWaals(ht,St)}}fillAtomWaals(St,Et){let Ct=0,ht=Math.floor(.5+this.scaleFactor*(St.x+this.ptranx)),d=Math.floor(.5+this.scaleFactor*(St.y+this.ptrany)),b=Math.floor(.5+this.scaleFactor*(St.z+this.ptranz)),ft=this.getVDWIndex(St),mt=this.pWidth*this.pHeight;for(let _t=0,tt=this.widxz[ft];_t<tt;_t++)for(let gt=0;gt<tt;gt++){if(this.depty[ft][Ct]!=-1){for(let wt=-1;wt<2;wt++)for(let yt=-1;yt<2;yt++)for(let Tt=-1;Tt<2;Tt++)if(wt!==0&&yt!==0&&Tt!==0){let Mt=wt*_t,Pt=Tt*gt;for(let It=0;It<=this.depty[ft][Ct];It++){let Lt=It*yt,zt=ht+Mt,jt=d+Lt,Nt=b+Pt;if(zt<0||jt<0||Nt<0||zt>=this.pLength||jt>=this.pWidth||Nt>=this.pHeight)continue;let kt=zt*mt+jt*this.pHeight+Nt;if(!(this.vpBits[kt]&this.ISDONE))this.vpBits[kt]|=this.ISDONE,this.vpAtomID[kt]=St.serial;else{let Ot=Et[this.vpAtomID[kt]];if(Ot.serial!=St.serial){let Bt=ht+Mt-Math.floor(.5+this.scaleFactor*(Ot.x+this.ptranx)),Ut=d+Lt-Math.floor(.5+this.scaleFactor*(Ot.y+this.ptrany)),Ft=b+Pt-Math.floor(.5+this.scaleFactor*(Ot.z+this.ptranz));Mt*Mt+Lt*Lt+Pt*Pt<Bt*Bt+Ut*Ut+Ft*Ft&&(this.vpAtomID[kt]=St.serial)}}}}}Ct++}}buildboundary(){let St=this.pWidth*this.pHeight;for(let Et=0;Et<this.pLength;Et++)for(let Ct=0;Ct<this.pHeight;Ct++)for(let ht=0;ht<this.pWidth;ht++){let d=Et*St+ht*this.pHeight+Ct;if(this.vpBits[d]&this.INOUT){let b=0;for(;b<26;){let ft=Et+this.nb[b][0],mt=Ct+this.nb[b][2],_t=ht+this.nb[b][1];if(ft>-1&&ft<this.pLength&&_t>-1&&_t<this.pWidth&&mt>-1&&mt<this.pHeight&&!(this.vpBits[ft*St+_t*this.pHeight+mt]&this.INOUT)){this.vpBits[d]|=this.ISBOUND;break}else b++}}}}fastdistancemap(){let St=new xt(this.pLength,this.pWidth,this.pHeight),Et=this.pWidth*this.pHeight,Ct=this.cutRadius*this.cutRadius,ht=[],d=[],b;for(let _t=0;_t<this.pLength;_t++)for(let tt=0;tt<this.pWidth;tt++)for(let gt=0;gt<this.pHeight;gt++)if(b=_t*Et+tt*this.pHeight+gt,this.vpBits[b]&=~this.ISDONE,this.vpBits[b]&this.INOUT&&this.vpBits[b]&this.ISBOUND){let wt={ix:_t,iy:tt,iz:gt};St.set(_t,tt,gt,wt),ht.push(wt),this.vpDistance[b]=0,this.vpBits[b]|=this.ISDONE,this.vpBits[b]&=~this.ISBOUND}do{d=this.fastoneshell(ht,St),ht=[];for(let _t=0,tt=d.length;_t<tt;_t++)b=Et*d[_t].ix+this.pHeight*d[_t].iy+d[_t].iz,this.vpBits[b]&=~this.ISBOUND,this.vpDistance[b]<=1.0404*Ct&&ht.push({ix:d[_t].ix,iy:d[_t].iy,iz:d[_t].iz})}while(ht.length!==0);ht=[],d=[],St=null;let ft=this.scaleFactor-.5;ft<0&&(ft=0);let mt=Ct-.5/(.1+ft);for(let _t=0;_t<this.pLength;_t++)for(let tt=0;tt<this.pWidth;tt++)for(let gt=0;gt<this.pHeight;gt++)b=_t*Et+tt*this.pHeight+gt,this.vpBits[b]&=~this.ISBOUND,this.vpBits[b]&this.INOUT&&(!(this.vpBits[b]&this.ISDONE)||this.vpBits[b]&this.ISDONE&&this.vpDistance[b]>=mt)&&(this.vpBits[b]|=this.ISBOUND)}fastoneshell(St,Et){let Ct,ht,d,b,ft,mt,_t,tt,gt,wt=[];if(St.length===0)return wt;let yt={ix:-1,iy:-1,iz:-1},Tt=this.pWidth*this.pHeight;for(let Mt=0,Pt=St.length;Mt<Pt;Mt++){Ct=St[Mt].ix,ht=St[Mt].iy,d=St[Mt].iz,tt=Et.get(Ct,ht,d);for(let It=0;It<6;It++)yt.ix=Ct+this.nb[It][0],yt.iy=ht+this.nb[It][1],yt.iz=d+this.nb[It][2],yt.ix<this.pLength&&yt.ix>-1&&yt.iy<this.pWidth&&yt.iy>-1&&yt.iz<this.pHeight&&yt.iz>-1&&(gt=yt.ix*Tt+this.pHeight*yt.iy+yt.iz,this.vpBits[gt]&this.INOUT&&!(this.vpBits[gt]&this.ISDONE)?(Et.set(yt.ix,yt.iy,d+this.nb[It][2],tt),b=yt.ix-tt.ix,ft=yt.iy-tt.iy,mt=yt.iz-tt.iz,_t=b*b+ft*ft+mt*mt,this.vpDistance[gt]=_t,this.vpBits[gt]|=this.ISDONE,this.vpBits[gt]|=this.ISBOUND,wt.push({ix:yt.ix,iy:yt.iy,iz:yt.iz})):this.vpBits[gt]&this.INOUT&&this.vpBits[gt]&this.ISDONE&&(b=yt.ix-tt.ix,ft=yt.iy-tt.iy,mt=yt.iz-tt.iz,_t=b*b+ft*ft+mt*mt,_t<this.vpDistance[gt]&&(Et.set(yt.ix,yt.iy,yt.iz,tt),this.vpDistance[gt]=_t,this.vpBits[gt]&this.ISBOUND||(this.vpBits[gt]|=this.ISBOUND,wt.push({ix:yt.ix,iy:yt.iy,iz:yt.iz})))))}for(let Mt=0,Pt=St.length;Mt<Pt;Mt++){Ct=St[Mt].ix,ht=St[Mt].iy,d=St[Mt].iz,tt=Et.get(Ct,ht,d);for(let It=6;It<18;It++)yt.ix=Ct+this.nb[It][0],yt.iy=ht+this.nb[It][1],yt.iz=d+this.nb[It][2],yt.ix<this.pLength&&yt.ix>-1&&yt.iy<this.pWidth&&yt.iy>-1&&yt.iz<this.pHeight&&yt.iz>-1&&(gt=yt.ix*Tt+this.pHeight*yt.iy+yt.iz,this.vpBits[gt]&this.INOUT&&!(this.vpBits[gt]&this.ISDONE)?(Et.set(yt.ix,yt.iy,d+this.nb[It][2],tt),b=yt.ix-tt.ix,ft=yt.iy-tt.iy,mt=yt.iz-tt.iz,_t=b*b+ft*ft+mt*mt,this.vpDistance[gt]=_t,this.vpBits[gt]|=this.ISDONE,this.vpBits[gt]|=this.ISBOUND,wt.push({ix:yt.ix,iy:yt.iy,iz:yt.iz})):this.vpBits[gt]&this.INOUT&&this.vpBits[gt]&this.ISDONE&&(b=yt.ix-tt.ix,ft=yt.iy-tt.iy,mt=yt.iz-tt.iz,_t=b*b+ft*ft+mt*mt,_t<this.vpDistance[gt]&&(Et.set(yt.ix,yt.iy,yt.iz,tt),this.vpDistance[gt]=_t,this.vpBits[gt]&this.ISBOUND||(this.vpBits[gt]|=this.ISBOUND,wt.push({ix:yt.ix,iy:yt.iy,iz:yt.iz})))))}for(let Mt=0,Pt=St.length;Mt<Pt;Mt++){Ct=St[Mt].ix,ht=St[Mt].iy,d=St[Mt].iz,tt=Et.get(Ct,ht,d);for(let It=18;It<26;It++)yt.ix=Ct+this.nb[It][0],yt.iy=ht+this.nb[It][1],yt.iz=d+this.nb[It][2],yt.ix<this.pLength&&yt.ix>-1&&yt.iy<this.pWidth&&yt.iy>-1&&yt.iz<this.pHeight&&yt.iz>-1&&(gt=yt.ix*Tt+this.pHeight*yt.iy+yt.iz,this.vpBits[gt]&this.INOUT&&!(this.vpBits[gt]&this.ISDONE)?(Et.set(yt.ix,yt.iy,d+this.nb[It][2],tt),b=yt.ix-tt.ix,ft=yt.iy-tt.iy,mt=yt.iz-tt.iz,_t=b*b+ft*ft+mt*mt,this.vpDistance[gt]=_t,this.vpBits[gt]|=this.ISDONE,this.vpBits[gt]|=this.ISBOUND,wt.push({ix:yt.ix,iy:yt.iy,iz:yt.iz})):this.vpBits[gt]&this.INOUT&&this.vpBits[gt]&this.ISDONE&&(b=yt.ix-tt.ix,ft=yt.iy-tt.iy,mt=yt.iz-tt.iz,_t=b*b+ft*ft+mt*mt,_t<this.vpDistance[gt]&&(Et.set(yt.ix,yt.iy,yt.iz,tt),this.vpDistance[gt]=_t,this.vpBits[gt]&this.ISBOUND||(this.vpBits[gt]|=this.ISBOUND,wt.push({ix:yt.ix,iy:yt.iy,iz:yt.iz})))))}return wt}marchingcubeinit(St){for(let Et=0,Ct=this.vpBits.length;Et<Ct;Et++)St==1?this.vpBits[Et]&=~this.ISBOUND:St==4?(this.vpBits[Et]&=~this.ISDONE,this.vpBits[Et]&this.ISBOUND&&(this.vpBits[Et]|=this.ISDONE),this.vpBits[Et]&=~this.ISBOUND):St==2?this.vpBits[Et]&this.ISBOUND&&this.vpBits[Et]&this.ISDONE?this.vpBits[Et]&=~this.ISBOUND:this.vpBits[Et]&this.ISBOUND&&!(this.vpBits[Et]&this.ISDONE)&&(this.vpBits[Et]|=this.ISDONE):St==3&&(this.vpBits[Et]&=~this.ISBOUND)}marchingcube(St){this.marchingcubeinit(St),this.verts=[],this.faces=[],vt.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let Et=this.pWidth*this.pHeight;for(let Ct=0,ht=this.verts.length;Ct<ht;Ct++)this.verts[Ct].atomid=this.vpAtomID[this.verts[Ct].x*Et+this.pHeight*this.verts[Ct].y+this.verts[Ct].z];vt.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}vt.MarchingCube=new nt},"./src/VolumeData.ts":(e,i,s)=>{s.r(i),s.d(i,{VolumeData:()=>ot});var a=s("./src/utilities.ts"),c=s("./src/WebGL/math/index.ts"),h=s("./src/parsers/VASP.ts"),st=s("./src/parsers/CUBE.ts"),nt=s("./node_modules/pako/dist/pako.esm.mjs");class ot{constructor(vt,bt,St){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(b){var ft=b/(this.size.y*this.size.z),mt=b%(this.size.y*this.size.z),_t=b%this.size.z;return ft*=this.unit.x,mt*=this.unit.y,_t*=this.unit.z,ft+=this.origin.x,mt+=this.origin.y,_t+=this.origin.z,{x:ft,y:mt,z:_t}},this.vasp=function(b){var ft=b.replace(/^\s+/,"").split(/[\n\r]/),mt=(0,h.VASP)(b)[0],_t=mt.length;if(_t==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var tt=1.889725992,gt=.036749309,wt=parseFloat(ft[1]),yt;yt=ft[2].replace(/^\s+/,"").split(/\s+/);var Tt=new c.Vector3(parseFloat(yt[0]),parseFloat(yt[1]),parseFloat(yt[2])).multiplyScalar(wt*tt);yt=ft[3].replace(/^\s+/,"").split(/\s+/);var Mt=new c.Vector3(parseFloat(yt[0]),parseFloat(yt[1]),parseFloat(yt[2])).multiplyScalar(wt*tt);yt=ft[4].replace(/^\s+/,"").split(/\s+/);var Pt=new c.Vector3(parseFloat(yt[0]),parseFloat(yt[1]),parseFloat(yt[2])).multiplyScalar(wt*tt),It=Tt.x*(Mt.y*Pt.z-Pt.y*Mt.z)-Mt.x*(Tt.y*Pt.z-Pt.y*Tt.z)+Pt.x*(Tt.y*Mt.z-Mt.y*Tt.z);It=Math.abs(It)/Math.pow(tt,3);var Lt=1/It;ft.splice(0,8+_t+1);var zt=ft[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),jt=Math.abs(parseFloat(zt[0])),Nt=Math.abs(parseFloat(zt[1])),kt=Math.abs(parseFloat(zt[2])),Ot=this.origin=new c.Vector3(0,0,0);this.size={x:jt,y:Nt,z:kt},this.unit=new c.Vector3(Tt.x,Mt.y,Pt.z),Tt=Tt.multiplyScalar(1/(tt*jt)),Mt=Mt.multiplyScalar(1/(tt*Nt)),Pt=Pt.multiplyScalar(1/(tt*kt)),(Tt.y!=0||Tt.z!=0||Mt.x!=0||Mt.z!=0||Pt.x!=0||Pt.y!=0)&&(this.matrix=new c.Matrix4(Tt.x,Mt.x,Pt.x,0,Tt.y,Mt.y,Pt.y,0,Tt.z,Mt.z,Pt.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new c.Matrix4().makeTranslation(Ot.x,Ot.y,Ot.z)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1)),ft.splice(0,1);var Bt=ft.join(" ");Bt=Bt.replace(/^\s+/,"");var Ut=Bt.split(/[\s\r]+/);Ut.splice(jt*Nt*kt+1);for(var Ft=Float32Array.from(Ut,parseFloat),Wt=0;Wt<Ft.length;Wt++)Ft[Wt]=Ft[Wt]*Lt*gt;this.data=Ft},this.dx=function(b){var ft=b.split(/[\n\r]+/),mt,_t=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,tt=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,gt=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,wt=/data follows/,yt=0;for(yt=0;yt<ft.length;yt++){var Tt=ft[yt];if(mt=_t.exec(Tt)){var Mt=parseInt(mt[1]),Pt=parseInt(mt[2]),It=parseInt(mt[3]);this.size={x:Mt,y:Pt,z:It}}else if(mt=gt.exec(Tt)){var Lt=parseFloat(mt[1]);if((parseFloat(mt[2])!=0||parseFloat(mt[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),yt+=1,Tt=ft[yt],mt=gt.exec(Tt),mt==null){console.error("Parse error in dx delta matrix");return}var zt=parseFloat(mt[2]);if((parseFloat(mt[1])!=0||parseFloat(mt[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),yt+=1,Tt=ft[yt],mt=gt.exec(Tt),mt==null){console.error("Parse error in dx delta matrix");return}var jt=parseFloat(mt[3]);(parseFloat(mt[1])!=0||parseFloat(mt[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new c.Vector3(Lt,zt,jt)}else if(mt=tt.exec(Tt)){var Nt=parseFloat(mt[1]),kt=parseFloat(mt[2]),Ot=parseFloat(mt[3]);this.origin=new c.Vector3(Nt,kt,Ot)}else if(mt=wt.exec(Tt))break}if(yt+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var Bt=ft.splice(yt).join(" "),Ut=Bt.split(/[\s\r]+/);this.data=Float32Array.from(Ut,parseFloat)},bt=bt.toLowerCase(),/\.gz$/.test(bt)){bt=bt.replace(/\.gz$/,"");try{this[bt]&&this.isbinary.has(bt)?(typeof vt=="string"&&(vt=(0,a.base64ToArray)(vt)),vt=(0,nt.inflate)(vt)):vt=new TextDecoder("utf-8").decode((0,nt.inflate)(vt))}catch(b){console.error(b)}}if(this[bt]&&(this.isbinary.has(bt)&&typeof vt=="string"&&(vt=(0,a.base64ToArray)(vt)),this[bt](vt)),St){if(St.negate)for(let b=0,ft=this.data.length;b<ft;b++)this.data[b]=-this.data[b];if(St.normalize){var Et=0;for(let b=0,ft=this.data.length;b<ft;b++)Et+=this.data[b];var Ct=Et/this.data.length;Et=0;for(let b=0,ft=this.data.length;b<ft;b++){var ht=this.data[b]-Ct;Et+=ht*ht}var d=Et/this.data.length;for(let b=0,ft=this.data.length;b<ft;b++)this.data[b]=(this.data[b]-Ct)/d}}}getIndex(vt,bt,St){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new c.Matrix4().getInverse(this.matrix));var Et=new c.Vector3(vt,bt,St);Et=Et.applyMatrix4(this.inversematrix),vt=Et.x,bt=Et.y,St=Et.z}else vt-=this.origin.x,bt-=this.origin.y,St-=this.origin.z,vt/=this.unit.x,bt/=this.unit.y,St/=this.unit.z;return vt=Math.round(vt),bt=Math.round(bt),St=Math.round(St),vt<0||vt>=this.size.x||bt<0||bt>=this.size.y||St<0||St>=this.size.z?-1:vt*this.size.y*this.size.z+bt*this.size.z+St}getVal(vt,bt,St){let Et=this.getIndex(vt,bt,St);return Et<0?0:this.data[Et]}cube(vt){var bt=vt.split(/\r?\n/);if(!(bt.length<6)){var St=(0,st.CUBE)(vt,{}).modelData[0].cryst,Et=bt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Ct=parseFloat(Et[0]),ht=Math.abs(Ct);this.origin=St.origin,this.size=St.size,this.unit=St.unit,this.matrix=St.matrix4;var d=6;Ct<0&&d++;var b=bt.splice(ht+d).join(" ");b=b.replace(/^\s+/,"");var ft=b.split(/[\s\r]+/);this.data=Float32Array.from(ft,parseFloat)}}ccp4(vt){var bt={};vt=new Int8Array(vt);var St=new Int32Array(vt.buffer,0,56),Et=new Float32Array(vt.buffer,0,56),Ct=new DataView(vt.buffer);if(bt.MAP=String.fromCharCode(Ct.getUint8(208),Ct.getUint8(209),Ct.getUint8(210),Ct.getUint8(211)),bt.MACHST=[Ct.getUint8(212),Ct.getUint8(213)],bt.MACHST[0]===17&&bt.MACHST[1]===17)for(var ht=vt.byteLength,d=0;d<ht;d+=4)Ct.setFloat32(d,Ct.getFloat32(d),!0);bt.NX=St[0],bt.NY=St[1],bt.NZ=St[2],bt.MODE=St[3],bt.NXSTART=St[4],bt.NYSTART=St[5],bt.NZSTART=St[6],bt.MX=St[7],bt.MY=St[8],bt.MZ=St[9],bt.xlen=Et[10],bt.ylen=Et[11],bt.zlen=Et[12],bt.alpha=Et[13],bt.beta=Et[14],bt.gamma=Et[15],bt.MAPC=St[16],bt.MAPR=St[17],bt.MAPS=St[18],bt.DMIN=Et[19],bt.DMAX=Et[20],bt.DMEAN=Et[21],bt.ISPG=St[22],bt.NSYMBT=St[23],bt.LSKFLG=St[24],bt.originX=Et[49],bt.originY=Et[50],bt.originZ=Et[51],bt.ARMS=Et[54];var b=bt,ft=[b.xlen,0,0],mt=[b.ylen*Math.cos(Math.PI/180*b.gamma),b.ylen*Math.sin(Math.PI/180*b.gamma),0],_t=[b.zlen*Math.cos(Math.PI/180*b.beta),b.zlen*(Math.cos(Math.PI/180*b.alpha)-Math.cos(Math.PI/180*b.gamma)*Math.cos(Math.PI/180*b.beta))/Math.sin(Math.PI/180*b.gamma),0];_t[2]=Math.sqrt(b.zlen*b.zlen*Math.sin(Math.PI/180*b.beta)*Math.sin(Math.PI/180*b.beta)-_t[1]*_t[1]);var tt=[0,ft,mt,_t],gt=[0,b.MX,b.MY,b.MZ],wt=[0,b.MAPC,b.MAPR,b.MAPS];this.matrix=new c.Matrix4,this.matrix.set(tt[wt[1]][0]/gt[wt[1]],tt[wt[2]][0]/gt[wt[2]],tt[wt[3]][0]/gt[wt[3]],0,tt[wt[1]][1]/gt[wt[1]],tt[wt[2]][1]/gt[wt[2]],tt[wt[3]][1]/gt[wt[3]],0,tt[wt[1]][2]/gt[wt[1]],tt[wt[2]][2]/gt[wt[2]],tt[wt[3]][2]/gt[wt[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new c.Matrix4().makeTranslation(b.NXSTART+b.originX,b.NYSTART+b.originY,b.NZSTART+b.originZ)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1),this.size={x:bt.NX,y:bt.NY,z:bt.NZ},this.dimensionorder=[bt.MAPC,bt.MAPR,bt.MAPS];var yt=new Float32Array(vt.buffer,1024+bt.NSYMBT),Tt=bt.NX,Mt=bt.NY,Pt=bt.NZ;this.data=new Float32Array(Tt*Mt*Pt);for(let It=0;It<Tt;It++)for(let Lt=0;Lt<Mt;Lt++)for(let zt=0;zt<Pt;zt++)this.data[(It*Mt+Lt)*Pt+zt]=yt[(zt*Mt+Lt)*Tt+It]}}},"./src/VolumetricRender.ts":(e,i,s)=>{s.r(i),s.d(i,{GLVolumetricRender:()=>ot});var a=s("./src/WebGL/shapes/index.ts"),c=s("./src/WebGL/math/index.ts"),h=s("./src/WebGL/index.ts"),st=s("./src/colors.ts"),nt=s("./src/GLShape.ts");class ot{static interpolateArray(vt,bt){function St(_t,tt,gt){return _t+(tt-_t)*gt}var Et=[],Ct=(vt.length-1)/(bt-1);Et[0]=vt[0];for(var ht=1;ht<bt-1;ht++){var d=ht*Ct,b=Math.floor(d),ft=Math.ceil(d),mt=d-b;Et[ht]=St(vt[b],vt[ft],mt)}return Et[bt-1]=vt[vt.length-1],Et}constructor(vt,bt,St){this.hidden=!1,this.boundingSphere=new a.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,bt=bt||{};var Et=Object.assign([],bt.transferfn);this.subsamples=bt.subsamples||5;let Ct=256;Et.forEach(function(Mt){Mt.value=parseFloat(Mt.value)}),Et.sort(function(Mt,Pt){return Mt.value-Pt.value}),this.min=Et[0].value,Et.length==0&&Et.push(Et[0]),this.max=Et[Et.length-1].value;var ht,d,b,ft,mt,_t,tt,gt,wt,yt;for(let Mt=0;Mt<Et.length-1;Mt++)if(b=st.CC.color(Et[Mt].color),ft=st.CC.color(Et[Mt+1].color),wt=Et[Mt].opacity,yt=Et[Mt+1].opacity,ht=Math.floor((Et[Mt].value-this.min)*Ct/(this.max-this.min)),d=Math.floor((Et[Mt+1].value-this.min)*Ct/(this.max-this.min)),ht!=d){mt=ot.interpolateArray([b.r*255,ft.r*255],d-ht),_t=ot.interpolateArray([b.g*255,ft.g*255],d-ht),tt=ot.interpolateArray([b.b*255,ft.b*255],d-ht),gt=ot.interpolateArray([wt*255,yt*255],d-ht);for(let Pt=0;Pt<mt.length;Pt++)this.transferfunctionbuffer.push(mt[Pt]),this.transferfunctionbuffer.push(_t[Pt]),this.transferfunctionbuffer.push(tt[Pt]),this.transferfunctionbuffer.push(gt[Pt])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),vt.matrix){let Mt=new c.Vector3(0,0,0),Pt=new c.Vector3(vt.size.x,vt.size.y,vt.size.z),It=new c.Vector3(1,1,1);Mt.applyMatrix4(vt.matrix),Pt.applyMatrix4(vt.matrix),It.applyMatrix4(vt.matrix).sub(Mt),this.extent=[[Mt.x,Mt.y,Mt.z],[Pt.x,Pt.y,Pt.z]];for(let Nt=1;Nt<7;Nt++)Pt.x=Nt&1?vt.size.x:0,Pt.y=Nt&2?vt.size.y:0,Pt.z=Nt&4?vt.size.z:0,Pt.applyMatrix4(vt.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Pt.x),this.extent[0][1]=Math.min(this.extent[0][1],Pt.y),this.extent[0][2]=Math.min(this.extent[0][2],Pt.z),this.extent[1][0]=Math.max(this.extent[1][0],Pt.x),this.extent[1][1]=Math.max(this.extent[1][1],Pt.y),this.extent[1][2]=Math.max(this.extent[1][2],Pt.z);let Lt=Pt.x-Mt.x,zt=Pt.y-Mt.y,jt=Pt.z-Mt.z;this.maxdepth=Math.sqrt(Lt*Lt+zt*zt+jt*jt),this.minunit=Math.min(Math.min(It.x,It.y),It.z),this.texmatrix=new c.Matrix4().identity().scale({x:vt.size.x,y:vt.size.y,z:vt.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(vt.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new c.Matrix4().identity();let Mt=vt.unit.x*vt.size.x,Pt=vt.unit.y*vt.size.y,It=vt.unit.z*vt.size.z;this.texmatrix.makeTranslation(-vt.origin.x/Mt,-vt.origin.y/Pt,-vt.origin.z/It),this.texmatrix.scale({x:1/Mt,y:1/Pt,z:1/It}),this.minunit=Math.min(Math.min(vt.unit.x,vt.unit.y),vt.unit.z),this.extent=[[vt.origin.x,vt.origin.y,vt.origin.z],[vt.origin.x+Mt,vt.origin.y+Pt,vt.origin.z+It]],this.maxdepth=Math.sqrt(Mt*Mt+Pt*Pt+It*It)}var Tt=new nt.GLShape({});if(Tt.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=Tt.finalize(),this.boundingSphere.center=new c.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,bt.coords===void 0&&bt.selection!==void 0&&(St?bt.coords=St.selectedAtoms(bt.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),bt.coords!==void 0&&bt.seldist!==void 0){let Mt=new Uint8Array(vt.data.length),Pt=bt.seldist,It=Pt*Pt;for(let Lt=0,zt=bt.coords.length;Lt<zt;Lt++){let jt=bt.coords[Lt],Nt=jt.x-Pt,kt=jt.y-Pt,Ot=jt.z-Pt,Bt=jt.x+Pt,Ut=jt.y+Pt,Ft=jt.z+Pt;if(vt.getIndex(Nt,kt,Ot)>=0||vt.getIndex(Bt,Ut,Ft)>=0)for(let Wt=Nt;Wt<Bt;Wt+=this.minunit)for(let _i=kt;_i<Ut;_i+=this.minunit)for(let Qt=Ot;Qt<Ft;Qt+=this.minunit){let on=vt.getIndex(Wt,_i,Qt);on>=0&&!Mt[on]&&(Wt-jt.x)*(Wt-jt.x)+(_i-jt.y)*(_i-jt.y)+(Qt-jt.z)*(Qt-jt.z)<It&&(Mt[on]=1)}}for(let Lt=0,zt=vt.data.length;Lt<zt;Lt++)Mt[Lt]==0&&(vt.data[Lt]=1/0)}this.data=vt}globj(vt){if(this.renderedShapeObj&&(vt.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new h.Object3D;var bt=null,St=new h.Texture(this.data,!0),Et=new h.Texture(this.transferfunctionbuffer,!1);St.needsUpdate=!0,Et.needsUpdate=!0,Et.flipY=!1,bt=new h.VolumetricMaterial({transferfn:Et,transfermin:this.min,transfermax:this.max,map:St,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var Ct=new h.Mesh(this.geo,bt);this.shapeObj.add(Ct),this.renderedShapeObj=this.shapeObj.clone(),vt.add(this.renderedShapeObj)}}removegl(vt){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),vt.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}},"./src/WebGL/Camera.ts":(e,i,s)=>{s.r(i),s.d(i,{Camera:()=>h});var a=s("./src/WebGL/core/index.ts"),c=s("./src/WebGL/math/index.ts");class h extends a.Object3D{constructor(nt=50,ot=1,xt=.1,vt=2e3,bt=!1){super(),this.projectionMatrix=new c.Matrix4,this.projectionMatrixInverse=new c.Matrix4,this.matrixWorldInverse=new c.Matrix4,this.fov=nt,this.aspect=ot,this.near=xt,this.far=vt;var St=this.position.z;this.right=St*Math.tan(Math.PI/180*nt),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!bt,this.updateProjectionMatrix()}lookAt(nt){this.matrix.lookAt(this.position,nt,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof c.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}},"./src/WebGL/Fog.ts":(e,i,s)=>{s.r(i),s.d(i,{Fog:()=>c});var a=s("./src/colors.ts");class c{constructor(st,nt=1,ot=1e3){this.name="",this.color=new a.Color(st),this.near=nt,this.far=ot}clone(){return new c(this.color.getHex(),this.near,this.far)}}},"./src/WebGL/Renderer.ts":(e,i,s)=>{s.r(i),s.d(i,{Renderer:()=>ht});var a=s("./src/WebGL/Camera.ts"),c=s("./src/WebGL/constants/Sides.ts"),h=s("./src/WebGL/constants/TextureConstants.ts"),st=s("./src/WebGL/core/index.ts"),nt=s("./src/colors.ts"),ot=s("./src/WebGL/materials/index.ts"),xt=s("./src/WebGL/math/index.ts"),vt=s("./src/WebGL/objects/index.ts"),bt=s("./src/WebGL/shaders/index.ts"),St=s("./src/WebGL/SpritePlugin.ts"),Et=null,Ct=null;class ht{constructor(b){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new xt.Vector3,this._worldInverse=new xt.Matrix4,this._projInverse=new xt.Matrix4,this._textureMatrix=new xt.Matrix4,this._fullProjModelMatrix=new xt.Matrix4,this._fullProjModelMatrixInv=new xt.Matrix4,this._direction=new xt.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new St.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,b=b||{},this.row=b.row,this.col=b.col,this.rows=b.rows,this.cols=b.cols,this._canvas=b.canvas!==void 0?b.canvas:document.createElement("canvas"),this._precision=b.precision!==void 0?b.precision:"highp",this._alpha=b.alpha!==void 0?b.alpha:!0,this._premultipliedAlpha=b.premultipliedAlpha!==void 0?b.premultipliedAlpha:!0,this._antialias=b.antialias!==void 0?b.antialias:!1,this._preserveDrawingBuffer=b.preserveDrawingBuffer!==void 0?b.preserveDrawingBuffer:!1,this._clearColor=b.clearColor!==void 0?new nt.Color(b.clearColor):new nt.Color(0),this._clearAlpha=b.clearAlpha!==void 0?b.clearAlpha:0,this._outlineMaterial=new ot.MeshOutlineMaterial(b.outline),this._outlineSphereImposterMaterial=new ot.SphereImposterOutlineMaterial(b.outline),this._outlineStickImposterMaterial=new ot.StickImposterOutlineMaterial(b.outline),this._outlineEnabled=!!b.outline,this._AOEnabled=!!b.ambientOcclusion,b.ambientOcclusion&&typeof b.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(b.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),b.ambientOcclusion&&typeof b.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(b.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=b.id,!(b.containerWidth==0||b.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(b,ft){this._clearColor.setHex(b),this._clearAlpha=ft,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(b){this._outlineMaterial=new ot.MeshOutlineMaterial(b),this._outlineSphereImposterMaterial=new ot.SphereImposterOutlineMaterial(b),this._outlineStickImposterMaterial=new ot.StickImposterOutlineMaterial(b),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(b){b&&(b.strength&&(this._AOstrength=b.strength),b.scale&&(this._AOradius=b.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var b=this._canvas.width/this.cols,ft=this._canvas.height/this.rows;this._viewportWidth=b,this._viewportHeight=ft,this.isLost()||(this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(b*this.col,ft*this.row,b,ft),this._gl.viewport(b*this.col,ft*this.row,b,ft))}}setSize(b,ft){if(this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._antialias&&this.devicePixelRatio<2&&(this.devicePixelRatio*=2),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var mt=b/this.cols,_t=ft/this.rows;this._canvas.width=b*this.devicePixelRatio,this._canvas.height=ft*this.devicePixelRatio,this._viewportWidth=mt*this.devicePixelRatio,this._viewportHeight=_t*this.devicePixelRatio,this._canvas.style.width=b+"px",this._canvas.style.height=ft+"px",this.setViewport()}else this._viewportWidth=this._canvas.width=b*this.devicePixelRatio,this._viewportHeight=this._canvas.height=ft*this.devicePixelRatio,this._canvas.style.width=b+"px",this._canvas.style.height=ft+"px",this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight);this.initFrameBuffer()}clear(b,ft,mt){var _t=0;(b===void 0||b)&&(_t|=this._gl.COLOR_BUFFER_BIT),(ft===void 0||ft)&&(_t|=this._gl.DEPTH_BUFFER_BIT),(mt===void 0||mt)&&(_t|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(_t)}setMaterialFaces(b,ft){var mt=b.side===c.DoubleSide,_t=b.side===c.BackSide;b.imposter||(_t=ft?!_t:_t),this._oldDoubleSided!==mt&&(mt?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=mt),this._oldFlipSided!==_t&&(_t?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=_t),this._gl.cullFace(this._gl.BACK)}setDepthTest(b){this._oldDepthTest!==b&&(b?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=b)}setDepthWrite(b){this._oldDepthWrite!==b&&(this._gl.depthMask(b),this._oldDepthWrite=b)}setBlending(b){b?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(b,ft,mt,_t){b.addEventListener("dispose",this.onMaterialDispose.bind(this));var tt,gt;if(gt=b.shaderID,gt){var wt=bt.ShaderLib[gt];b.vertexShader=wt.vertexShader,b.fragmentShader=wt.fragmentShader,b.uniforms=bt.ShaderUtils.clone(wt.uniforms),b.shaded&&b.makeShaded(this.SHADE_TEXTURE)}tt={wireframe:b.wireframe,fragdepth:b.imposter,volumetric:b.volumetric,shaded:b.shaded},b.program=this.buildProgram(b.fragmentShader,b.vertexShader,b.uniforms,tt)}renderBuffer(b,ft,mt,_t,tt,gt){if(_t.visible){var wt,yt;if(wt=this.setProgram(b,ft,mt,_t,gt,this),!!wt){yt=wt.attributes;var Tt=!1,Mt=_t.wireframe?1:0,Pt=tt.id*16777215+wt.id*2+Mt;Pt!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=Pt,Tt=!0),Tt&&(this.disableAttributes(),yt.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,tt.__webglVertexBuffer),this.enableAttribute(yt.position),this._gl.vertexAttribPointer(yt.position,3,this._gl.FLOAT,!1,0,0)),yt.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,tt.__webglColorBuffer),this.enableAttribute(yt.color),this._gl.vertexAttribPointer(yt.color,3,this._gl.FLOAT,!1,0,0)),yt.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,tt.__webglNormalBuffer),this.enableAttribute(yt.normal),this._gl.vertexAttribPointer(yt.normal,3,this._gl.FLOAT,!1,0,0)),yt.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,tt.__webglOffsetBuffer),this.enableAttribute(yt.offset),this._gl.vertexAttribPointer(yt.offset,3,this._gl.FLOAT,!1,0,0)),yt.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,tt.__webglRadiusBuffer),this.enableAttribute(yt.radius),this._gl.vertexAttribPointer(yt.radius,1,this._gl.FLOAT,!1,0,0)));var It,Lt;if(gt instanceof vt.Mesh){if(_t.shaderID==="instanced"){var zt=_t.sphere.geometryGroups[0];Tt&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,tt.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,zt.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,tt.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,zt.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,tt.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,zt.faceArray,this._gl.STATIC_DRAW)),It=zt.faceidx,this._extInstanced.vertexAttribDivisorANGLE(yt.offset,1),this._extInstanced.vertexAttribDivisorANGLE(yt.radius,1),this._extInstanced.vertexAttribDivisorANGLE(yt.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,It,this._gl.UNSIGNED_SHORT,0,tt.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(yt.offset,0),this._extInstanced.vertexAttribDivisorANGLE(yt.radius,0),this._extInstanced.vertexAttribDivisorANGLE(yt.color,0)}else _t.wireframe?(Lt=tt.lineidx,this.setLineWidth(_t.wireframeLinewidth),Tt&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,tt.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Lt,this._gl.UNSIGNED_SHORT,0)):(It=tt.faceidx,Tt&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,tt.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,It,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=It,this.info.render.faces+=It/3}else gt instanceof vt.Line&&(Lt=tt.vertices,this.setLineWidth(_t.linewidth),this._gl.drawArrays(this._gl.LINES,0,Lt),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(b,ft,mt){let _t=b.__lights,tt=b.fog,gt=[];for(let Tt=0,Mt=b.__webglObjects.length;Tt<Mt;Tt++){let Pt=b.__webglObjects[Tt];Pt.render&&Pt[mt]&&gt.push(Pt)}if(gt.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(b.__webglObjects,!0,mt+"Depth",ft,_t,tt,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let wt=this._AOshader.uniforms;this._gl.uniform1f(wt.total_strength,this._AOstrength),this._gl.uniform1f(wt.radius,this._AOradius),this._fullProjModelMatrix=new xt.Matrix4,this._fullProjModelMatrixInv=new xt.Matrix4;let yt=gt[0].object;this._fullProjModelMatrix.multiplyMatrices(ft.projectionMatrix,yt._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(wt.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(wt.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(b,ft){if(!(ft instanceof a.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var mt,_t,tt,gt,wt,yt=b.__lights,Tt=b.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&b.updateMatrixWorld(),ft.parent===void 0&&ft.updateMatrixWorld(),ft.matrixWorldInverse.getInverse(ft.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(b),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),wt=b.__webglObjects;let Mt=!1,Pt=this._AOEnabled;for(mt=0,_t=wt.length;mt<_t;mt++)tt=wt[mt],gt=tt.object,tt.render=!1,gt.visible&&(this.setupMatrices(gt,ft),this.unrollBufferMaterial(tt),tt.render=!0,tt.volumetric&&(Mt=!0),tt.hasAO&&(Pt=!0));if(this.setBlending(!1),Pt&&this.setShading(b,ft,"opaque"),this.renderObjects(b.__webglObjects,!0,"opaque",ft,yt,Tt,!1),Pt&&this.clearShading(),this.renderSprites(b,ft,!1),this.renderObjects(b.__webglObjects,!0,"transparentDepth",ft,yt,Tt,!0),this.renderObjects(b.__webglObjects,!1,"transparent",ft,yt,Tt,!0),Mt&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(b.__webglObjects,!1,"volumetric",ft,yt,Tt,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(b,ft,!0),this._bitmap){const It=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(It),It.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let b=this._viewportWidth,ft=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,b,ft),this._gl.viewport(0,0,b,ft),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,b,ft,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,b,ft,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,b,ft,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,b,ft,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let b=this._viewportWidth,ft=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,b,ft),this._gl.viewport(0,0,b,ft),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var mt=this._antialias?bt.ShaderLib.screenaa:bt.ShaderLib.screen;this._screenshader=this.buildProgram(mt.fragmentShader,mt.vertexShader,mt.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var _t=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(_t),this._gl.STATIC_DRAW);let tt=bt.ShaderLib.ssao;this._AOshader=this.buildProgram(tt.fragmentShader,tt.vertexShader,tt.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let gt=bt.ShaderLib.blur;this._blurshader=this.buildProgram(gt.fragmentShader,gt.vertexShader,gt.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(b){if(b.__webglObjects||(b.__webglObjects=[],b.__webglObjectsImmediate=[],b.__webglSprites=[],b.__webglFlares=[]),b.__objectsAdded.length){for(;b.__objectsAdded.length;)this.addObject(b.__objectsAdded[0],b),b.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;b.__objectsRemoved.length;)this.removeObject(b.__objectsRemoved[0],b),b.__objectsRemoved.splice(0,1);for(var ft=0,mt=b.__webglObjects.length;ft<mt;ft++)this.updateObject(b.__webglObjects[ft].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(b,ft){(b==null||ft==null)&&(b=this._canvas.width,ft=this._canvas.height);var mt=b/ft;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var _t=b/this.cols,tt=ft/this.rows;mt=_t/tt}return mt}setTexture(b,ft,mt){if(b.needsUpdate){b.__webglInit||(b.__webglInit=!0,b.addEventListener("dispose",this.onTextureDispose.bind(this)),b.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+ft);var _t=mt?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(_t,b.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,b.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,b.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,b.unpackAlignment);var tt=this.paramToGL(b.format),gt=this.paramToGL(b.type);if(mt)this.setTextureParameters(this._gl.TEXTURE_3D,b),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,b.image.size.z,b.image.size.y,b.image.size.x,0,this._gl.RED,this._gl.FLOAT,b.image.data);else{var wt=b.image,yt=wt.width,Tt=wt.height;typeof yt>"u"&&(yt=wt.length,tt==this._gl.RGBA&&(yt/=4),Tt=1),this.setTextureParameters(this._gl.TEXTURE_2D,b),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,tt,tt,gt,b.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,tt,yt,Tt,0,tt,gt,b.image)}b.needsUpdate=!1,b.onUpdate&&b.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+ft),mt?this._gl.bindTexture(this._gl.TEXTURE_3D,b.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,b.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(b){this._enabledAttributes[b]||(this._gl.enableVertexAttribArray(b),this._enabledAttributes[b]=!0)}disableAttributes(){for(let b in this._enabledAttributes)this._enabledAttributes[b]&&(this._gl.disableVertexAttribArray(b),this._enabledAttributes[b]=!1)}setPolygonOffset(b,ft,mt){this._oldPolygonOffset!==b&&(b?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(b){b!==this._oldLineWidth&&(this._gl.lineWidth(b),this._oldLineWidth=b)}deallocateGeometry(b){if(b.__webglInit=void 0,b.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(b.__webglVertexBuffer),b.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(b.__webglColorBuffer),b.geometryGroups!==void 0)for(var ft=0,mt=b.groups;ft<mt;ft++){var _t=b.geometryGroups[ft];_t.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(_t.__webglVertexBuffer),_t.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(_t.__webglColorBuffer),_t.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(_t.__webglNormalBuffer),_t.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(_t.__webglFaceBuffer),_t.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(_t.__webglLineBuffer)}}deallocateMaterial(b){var ft=b.program;if(ft!==void 0){b.program=void 0;var mt,_t,tt,gt=!1;for(mt=0,_t=this._programs.length;mt<_t;mt++)if(tt=this._programs[mt],tt.program===ft){tt.usedTimes--,tt.usedTimes===0&&(gt=!0);break}if(gt===!0){var wt=[];for(mt=0,_t=this._programs.length;mt<_t;mt++)tt=this._programs[mt],tt.program!==ft&&wt.push(tt);this._programs=wt,this._gl.deleteProgram(ft),this.info.memory.programs--}}}deallocateTexture(b){if(b.image&&b.image.__webglTextureCube)this._gl.deleteTexture(b.image.__webglTextureCube);else{if(!b.__webglInit)return;b.__webglInit=!1,this._gl.deleteTexture(b.__webglTexture)}}onGeometryDispose(b){var ft=b.target;ft.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(ft),this.info.memory.geometries--}onTextureDispose(b){var ft=b.target;ft.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(ft),this.info.memory.textures--}onMaterialDispose(b){var ft=b.target;ft.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(ft)}getShader(b,ft){var mt;return!this.isWebGL1()&&!ft.startsWith("#version")&&(ft=ft.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),b=="fragment"?ft=ft.replace(/varying/g,"in"):ft=ft.replace(/varying/g,"out"),ft=ft.replace(/attribute/g,"in"),ft=ft.replace(/texture2D/g,"texture"),ft=ft.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),ft=ft.replace(/gl_FragColor/g,"glFragColor"),ft=`#version 300 es
`+ft),b==="fragment"?mt=this._gl.createShader(this._gl.FRAGMENT_SHADER):b==="vertex"&&(mt=this._gl.createShader(this._gl.VERTEX_SHADER)),mt==null?null:(this._gl.shaderSource(mt,ft),this._gl.compileShader(mt),this._gl.getShaderParameter(mt,this._gl.COMPILE_STATUS)?mt:(console.error(this._gl.getShaderInfoLog(mt)),console.error("could not initialize shader"),null))}buildProgram(b,ft,mt,_t){var tt,gt,wt,yt,Tt=[];Tt.push(b),Tt.push(ft);for(tt in _t)Tt.push(tt),Tt.push(_t[tt]);for(yt=Tt.join(),tt=0,gt=this._programs.length;tt<gt;tt++){var Mt=this._programs[tt];if(Mt.code===yt)return Mt.usedTimes++,Mt.program}if(this.isWebGL1()&&_t.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(wt=this._gl.createProgram(),wt==null)return null;var Pt=this._precision,It="precision "+Pt+" float;",Lt=[_t.volumetric?"#version 300 es":"",It].join(`
`),zt=[_t.volumetric?"#version 300 es":"",_t.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",_t.shaded?"#define SHADED 1":"",_t.wireframe?"#define WIREFRAME 1":"",It].join(`
`),jt=this.getShader("fragment",zt+b),Nt=this.getShader("vertex",Lt+ft);Nt!=null&&this._gl.attachShader(wt,Nt),jt!=null&&this._gl.attachShader(wt,jt),this._gl.linkProgram(wt),this._gl.getProgramParameter(wt,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),wt.uniforms={},wt.attributes={};var kt,Ot,Bt;kt=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(Ot in mt)kt.push(Ot);for(Bt=0;Bt<kt.length;Bt++){var Ut=kt[Bt];wt.uniforms[Ut]=this._gl.getUniformLocation(wt,Ut)}for(kt=["position","normal","color","lineDistance","offset","radius"],Bt=0;Bt<kt.length;Bt++){var Ft=kt[Bt];wt.attributes[Ft]=this._gl.getAttribLocation(wt,Ft)}return wt.id=this._programs_counter++,this._programs.push({program:wt,code:yt,usedTimes:1}),this.info.memory.programs=this._programs.length,wt}setProgram(b,ft,mt,_t,tt,gt){if(_t.needsUpdate&&(_t.program&&this.deallocateMaterial(_t),this.initMaterial(_t,ft,mt,tt),_t.needsUpdate=!1),_t.program==null)return null;var wt=!1,yt=_t.program,Tt=yt.uniforms,Mt=_t.uniforms;if(yt!=this._currentProgram&&(this._gl.useProgram(yt),this._currentProgram=yt,wt=!0),_t.id!=this._currentMaterialId&&(this._currentMaterialId=_t.id,wt=!0),b!=this._currentCamera&&(this._currentCamera=b,wt=!0),Tt.projectionMatrix&&this._gl.uniformMatrix4fv(Tt.projectionMatrix,!1,b.projectionMatrix.elements),Tt.modelViewMatrix&&this._gl.uniformMatrix4fv(Tt.modelViewMatrix,!1,tt._modelViewMatrix.elements),Tt.normalMatrix&&this._gl.uniformMatrix3fv(Tt.normalMatrix,!1,tt._normalMatrix.elements),Tt.projinv&&(this._projInverse.getInverse(b.projectionMatrix),this._gl.uniformMatrix4fv(Tt.projinv,!1,this._projInverse.elements)),Tt.viewMatrix&&this._gl.uniformMatrix4fv(Tt.viewMatrix,!1,b.matrixWorldInverse.elements),Tt.vWidth&&this._gl.uniform1f(Tt.vWidth,this._viewportWidth),Tt.vHeight&&this._gl.uniform1f(Tt.vHeight,this._viewportHeight),wt){if(Mt.fogColor.value=mt.color,Mt.fogNear.value=mt.near,Mt.fogFar.value=mt.far,_t.shaderID.startsWith("lambert")||_t.shaderID==="instanced"||_t.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(yt,ft),this._lightsNeedUpdate=!1),Mt.directionalLightColor.value=this._lights.directional.colors,Mt.directionalLightDirection.value=this._lights.directional.positions;else if(_t.shaderID.endsWith("outline"))Mt.outlineColor.value=_t.outlineColor,Mt.outlineWidth.value=_t.outlineWidth,Mt.outlinePushback.value=_t.outlinePushback,Mt.outlineMaxPixels.value=_t.outlineMaxPixels*this.devicePixelRatio;else if(_t.shaderID==="volumetric"){tt._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(tt._modelViewMatrix),this._projInverse.getInverse(b.projectionMatrix),this._textureMatrix.multiplyMatrices(tt.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(Tt.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(Tt.projinv,!1,this._projInverse.elements);let Pt=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Mt.step.value=tt.material.unit*Pt,Mt.maxdepth.value=tt.material.maxdepth*Pt,Mt.transfermax.value=tt.material.transfermax,Mt.transfermin.value=tt.material.transfermin,Mt.subsamples.value=tt.material.subsamples,gt.setTexture(tt.material.transferfn,4,!1),gt.setTexture(tt.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Mt.opacity.value=_t.opacity,this.loadMaterialUniforms(Tt,Mt)}return Mt.shading&&(Mt.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),yt}loadMaterialUniforms(b,ft){var mt,_t,tt,gt;for(mt in ft)b[mt]&&(_t=ft[mt].type,tt=ft[mt].value,gt=b[mt],_t==="f"?this._gl.uniform1f(gt,tt):_t==="i"?this._gl.uniform1i(gt,tt):_t==="fv"?this._gl.uniform3fv(gt,tt):_t==="c"?this._gl.uniform3f(gt,tt.r,tt.g,tt.b):_t==="f4"&&this._gl.uniform4f(gt,tt[0],tt[1],tt[2],tt[3]))}addObject(b,ft){var mt,_t,tt,gt;if(!b.__webglInit&&(b.__webglInit=!0,b._modelViewMatrix=new xt.Matrix4,b._normalMatrix=new xt.Matrix3,b.geometry!==void 0&&b.geometry.__webglInit===void 0&&(b.geometry.__webglInit=!0,b.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),b instanceof vt.Mesh||b instanceof vt.Line))for(tt=b.geometry,mt=0,_t=tt.geometryGroups.length;mt<_t;mt++)gt=tt.geometryGroups[mt],gt.id=this._geometryGroupCounter++,gt.__webglVertexBuffer||(b instanceof vt.Mesh?(this.createMeshBuffers(gt),tt.elementsNeedUpdate=!0,tt.normalsNeedUpdate=!0):b instanceof vt.Line&&this.createLineBuffers(gt),tt.verticesNeedUpdate=!0,tt.colorsNeedUpdate=!0);if(!b.__webglActive){if(b instanceof vt.Mesh||b instanceof vt.Line)for(tt=b.geometry,mt=0,_t=tt.geometryGroups.length;mt<_t;mt++)gt=tt.geometryGroups[mt],this.addBuffer(ft.__webglObjects,gt,b);else b instanceof vt.Sprite&&ft.__webglSprites.push(b);b.__webglActive=!0}}updateObject(b){var ft=b.geometry,mt;if(b instanceof vt.Mesh||b instanceof vt.Line){for(var _t=0,tt=ft.geometryGroups.length;_t<tt;_t++)mt=ft.geometryGroups[_t],(ft.verticesNeedUpdate||ft.elementsNeedUpdate||ft.colorsNeedUpdate||ft.normalsNeedUpdate)&&this.setBuffers(mt,this._gl.STATIC_DRAW);ft.verticesNeedUpdate=!1,ft.elementsNeedUpdate=!1,ft.normalsNeedUpdate=!1,ft.colorsNeedUpdate=!1,ft.buffersNeedUpdate=!1}}removeObject(b,ft){b instanceof vt.Mesh||b instanceof vt.Line?this.removeInstances(ft.__webglObjects,b):b instanceof vt.Sprite&&this.removeInstancesDirect(ft.__webglSprites,b),b.__webglActive=!1}removeInstances(b,ft){for(var mt=b.length-1;mt>=0;--mt)b[mt].object===ft&&b.splice(mt,1)}removeInstancesDirect(b,ft){for(var mt=b.length-1;mt>=0;--mt)b[mt]===ft&&b.splice(mt,1)}unrollBufferMaterial(b){var ft=b.object,mt=ft.material;if(mt.volumetric)b.opaque=null,b.transparent=null,b.volumetric=mt;else if(mt.transparent){if(b.opaque=null,b.volumetric=null,b.transparent=mt,!mt.wireframe){let _t=mt.clone();_t.opacity=0,b.transparentDepth=_t}}else{if(b.opaque=mt,b.transparent=null,b.volumetric=null,!mt.wireframe){let _t=mt.clone();_t.opacity=0,b.opaqueDepth=_t}mt.hasAO&&(b.hasAO=!0),(this._AOEnabled||b.hasAO)&&(b.opaqueShaded=mt.clone(),b.opaqueShaded.shaded=!0)}}setBuffers(b,ft){var mt=b.vertexArray,_t=b.colorArray;if(b.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,b.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,mt,ft)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,b.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,mt,ft)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,b.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,_t,ft),b.normalArray&&b.__webglNormalBuffer!==void 0){var tt=b.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,b.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,tt,ft)}if(b.radiusArray&&b.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,b.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,b.radiusArray,ft)),b.faceArray&&b.__webglFaceBuffer!==void 0){var gt=b.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,b.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,gt,ft)}if(b.lineArray&&b.__webglLineBuffer!==void 0){var wt=b.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,b.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,wt,ft)}}createMeshBuffers(b){b.radiusArray&&(b.__webglRadiusBuffer=this._gl.createBuffer()),b.useOffset&&(b.__webglOffsetBuffer=this._gl.createBuffer()),b.__webglVertexBuffer=this._gl.createBuffer(),b.__webglNormalBuffer=this._gl.createBuffer(),b.__webglColorBuffer=this._gl.createBuffer(),b.__webglFaceBuffer=this._gl.createBuffer(),b.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(b){b.__webglVertexBuffer=this._gl.createBuffer(),b.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(b,ft,mt){b.push({buffer:ft,object:mt,opaque:null,transparent:null})}setupMatrices(b,ft){b._modelViewMatrix.multiplyMatrices(ft.matrixWorldInverse,b.matrixWorld),b._normalMatrix.getInverse(b._modelViewMatrix),b._normalMatrix.transpose()}filterFallback(b){return this._gl.LINEAR}setTextureParameters(b,ft){b==this._gl.TEXTURE_2D?(this._gl.texParameteri(b,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(b,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(b,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(ft.magFilter)),this._gl.texParameteri(b,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(ft.minFilter))):(this._gl.texParameteri(b,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(b,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(b,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(b,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(b,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(b,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(b,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(b){return b===h.UnsignedByteType?this._gl.UNSIGNED_BYTE:b===h.RGBAFormat?this._gl.RGBA:b===h.NearestFilter?this._gl.NEAREST:0}setupLights(b,ft){var mt,_t,tt,gt=0,wt=0,yt=0,Tt,Mt,Pt=this._lights,It=Pt.directional.colors,Lt=Pt.directional.positions,zt=0,jt=0;for(mt=0,_t=ft.length;mt<_t;mt++)if(tt=ft[mt],Tt=tt.color,Mt=tt.intensity,tt instanceof st.Light){if(this._direction.getPositionFromMatrix(tt.matrixWorld),this._vector3.getPositionFromMatrix(tt.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Lt[jt]=this._direction.x,Lt[jt+1]=this._direction.y,Lt[jt+2]=this._direction.z,It[jt]=Tt.r*Mt,It[jt+1]=Tt.g*Mt,It[jt+2]=Tt.b*Mt,jt+=3,zt++}Pt.ambient[0]=gt,Pt.ambient[1]=wt,Pt.ambient[2]=yt,Pt.directional.length=zt}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(Ct==null||Ct.isContextLost())&&(Et=new OffscreenCanvas(this._canvas.width,this._canvas.height),Ct=Et.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=Et,this._gl=Ct,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var b=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(b[6])}catch(ft){console.error(ft)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(b,ft,mt,_t,tt,gt,wt){var yt,Tt,Mt,Pt,It,Lt,zt;ft?(It=b.length-1,Lt=-1,zt=-1):(It=0,Lt=b.length,zt=1);for(var jt=It;jt!==Lt;jt+=zt)if(yt=b[jt],yt.render){if(Tt=yt.object,Mt=yt.buffer,Pt=yt[mt],(yt.hasAO||this._AOEnabled)&&yt[mt+"Shaded"]&&(Pt=yt[mt+"Shaded"]),!Pt)continue;this.setBlending(wt),this.setDepthTest(Pt.depthTest),this.setDepthWrite(Pt.depthWrite),this.setPolygonOffset(Pt.polygonOffset,Pt.polygonOffsetFactor,Pt.polygonOffsetUnits);var Nt=Tt._modelViewMatrix.isReflected();if(this.setMaterialFaces(Pt,Nt),this.renderBuffer(_t,tt,gt,Pt,Mt,Tt),(this._outlineEnabled||Pt.outline)&&!Pt.wireframe&&Pt.shaderID!=="basic"&&Pt.opacity!==0){let kt=this._outlineMaterial;Pt.shaderID=="sphereimposter"?kt=this._outlineSphereImposterMaterial:Pt.shaderID=="stickimposter"&&(kt=this._outlineStickImposterMaterial),this.renderBuffer(_t,tt,gt,kt,Mt,Tt)}}}renderSprites(b,ft,mt){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(b,ft,this._currentWidth,this._currentHeight,mt),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},"./src/WebGL/SpritePlugin.ts":(e,i,s)=>{s.r(i),s.d(i,{SpritePlugin:()=>c});var a=s("./src/WebGL/shaders/index.ts");class c{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(nt){this.gl=nt.context,this.renderer=nt,this.precision=nt.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var ot=0;this.sprite.vertices[ot++]=-1,this.sprite.vertices[ot++]=-1,this.sprite.vertices[ot++]=0,this.sprite.vertices[ot++]=0,this.sprite.vertices[ot++]=1,this.sprite.vertices[ot++]=-1,this.sprite.vertices[ot++]=1,this.sprite.vertices[ot++]=0,this.sprite.vertices[ot++]=1,this.sprite.vertices[ot++]=1,this.sprite.vertices[ot++]=1,this.sprite.vertices[ot++]=1,this.sprite.vertices[ot++]=-1,this.sprite.vertices[ot++]=1,this.sprite.vertices[ot++]=0,this.sprite.vertices[ot++]=1,ot=0,this.sprite.faces[ot++]=0,this.sprite.faces[ot++]=1,this.sprite.faces[ot++]=2,this.sprite.faces[ot++]=0,this.sprite.faces[ot++]=2,this.sprite.faces[ot++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(a.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const xt={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),xt.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),xt.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),xt.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),xt.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),xt.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),xt.color=this.gl.getUniformLocation(this.sprite.program,"color"),xt.map=this.gl.getUniformLocation(this.sprite.program,"map"),xt.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),xt.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),xt.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),xt.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),xt.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),xt.fogType=this.gl.getUniformLocation(this.sprite.program,"fogType"),xt.fogDensity=this.gl.getUniformLocation(this.sprite.program,"fogDensity"),xt.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),xt.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),xt.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),xt.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=xt}render(nt,ot,xt,vt,bt){var St,Et,Ct,ht,d,b,ft,mt,_t,tt;if(!this.gl)throw new Error("WebGLRenderer not initialized");let gt=[];(St=nt==null?void 0:nt.__webglSprites)===null||St===void 0||St.forEach(_i=>{(bt&&_i.material.depthTest==!1||!bt&&_i.material.depthTest)&&gt.push(_i)});let wt=gt.length;if(!wt)return;const yt=this.sprite.attributes,Tt=this.sprite.uniforms;if(!Tt)throw new Error("Uniforms not defined");var Mt=xt*.5,Pt=vt*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(yt.position),this.gl.enableVertexAttribArray(yt.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(yt.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(yt.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(Tt.projectionMatrix,!1,ot.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(Tt.map,0);var It=0,Lt=0,zt=nt.fog;zt?(this.gl.uniform3f(Tt.fogColor,zt.color.r,zt.color.g,zt.color.b),this.gl.uniform1f(Tt.fogNear,zt.near),this.gl.uniform1f(Tt.fogFar,zt.far),this.gl.uniform1i(Tt.fogType,1),It=1,Lt=1):(this.gl.uniform1i(Tt.fogType,0),It=0,Lt=0);var jt;let Nt,kt,Ot,Bt,Ut=[];for(jt=0;jt<wt;jt++)Nt=gt[jt],kt=Nt.material,kt&&(kt.depthTest==!1&&!bt||!Nt.visible||kt.opacity===0||(kt.useScreenCoordinates?Nt.z=-Nt.position.z:(Nt._modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,Nt.matrixWorld),Nt.z=-Nt._modelViewMatrix.elements[14])));for(gt.sort(h),jt=0;jt<wt;jt++)if(Nt=gt[jt],kt=Nt.material,!!kt&&!(!Nt.visible||kt.opacity===0)&&kt.map&&kt.map.image&&kt.map.image.width){this.gl.uniform1f((Tt==null?void 0:Tt.alphaTest)||null,kt.alphaTest);var Ft=kt.map.image.width,Wt=kt.map.image.height;Ut[0]=Ft*this.renderer.devicePixelRatio/xt,Ut[1]=Wt*this.renderer.devicePixelRatio/vt,kt.useScreenCoordinates===!0?(this.gl.uniform1i(Tt.useScreenCoordinates,1),this.gl.uniform3f(Tt.screenPosition,(Nt.position.x*this.renderer.devicePixelRatio-Mt)/Mt,(Pt-Nt.position.y*this.renderer.devicePixelRatio)/Pt,Math.max(0,Math.min(1,Nt.position.z)))):(this.gl.uniform1i(Tt.useScreenCoordinates,0),this.gl.uniformMatrix4fv(Tt.modelViewMatrix,!1,Nt._modelViewMatrix.elements)),nt.fog&&kt.fog?Bt=Lt:Bt=0,It!==Bt&&(this.gl.uniform1i(Tt.fogType,Bt),It=Bt),Ot=1/(kt.scaleByViewport?vt:1),Ut[0]*=Ot*Nt.scale.x,Ut[1]*=Ot*Nt.scale.y;let _i=(Et=kt==null?void 0:kt.alignment)===null||Et===void 0?void 0:Et.x,Qt=(Ct=kt==null?void 0:kt.alignment)===null||Ct===void 0?void 0:Ct.y;kt.screenOffset&&(_i=(_i||0)+2*kt.screenOffset.x/Ft,Qt=(Qt||0)+2*kt.screenOffset.y/Wt),this.gl.uniform2f(Tt.uvScale,((ht=kt==null?void 0:kt.uvScale)===null||ht===void 0?void 0:ht.x)||1,((d=kt==null?void 0:kt.uvScale)===null||d===void 0?void 0:d.y)||1),this.gl.uniform2f(Tt.uvOffset,((b=kt==null?void 0:kt.uvOffset)===null||b===void 0?void 0:b.x)||0,((ft=kt==null?void 0:kt.uvOffset)===null||ft===void 0?void 0:ft.y)||0),this.gl.uniform2f(Tt.alignment,_i||0,Qt||0),this.gl.uniform1f(Tt.opacity,kt.opacity),this.gl.uniform3f(Tt.color,((mt=kt==null?void 0:kt.color)===null||mt===void 0?void 0:mt.r)||0,((_t=kt==null?void 0:kt.color)===null||_t===void 0?void 0:_t.g)||0,((tt=kt==null?void 0:kt.color)===null||tt===void 0?void 0:tt.b)||0),this.gl.uniform1f(Tt.rotation,Nt.rotation),this.gl.uniform2fv(Tt.scale,Ut),this.renderer.setDepthTest(kt.depthTest),this.renderer.setDepthWrite(kt.depthWrite),this.renderer.setTexture(kt.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(nt,ot){if(!this.gl)throw new Error("WebGL Rendering context not found");var xt=this.gl.createProgram();if(!xt)throw new Error("Error creating webgl program");var vt=this.gl.createShader(this.gl.FRAGMENT_SHADER),bt=this.gl.createShader(this.gl.VERTEX_SHADER);if(!vt)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!bt)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var St="precision "+ot+` float;
`;if(this.gl.shaderSource(vt,St+nt.fragmentShader),this.gl.shaderSource(bt,St+nt.vertexShader),this.gl.compileShader(vt),this.gl.compileShader(bt),!this.gl.getShaderParameter(vt,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(bt,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(vt)} 
      ${this.gl.getShaderInfoLog(bt)}`);return this.gl.attachShader(xt,vt),this.gl.attachShader(xt,bt),this.gl.linkProgram(xt),this.gl.getProgramParameter(xt,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),xt}}function h(st,nt){return st.z!==nt.z?nt.z-st.z:nt.id-st.id}},"./src/WebGL/constants/Coloring.ts":(e,i,s)=>{s.r(i),s.d(i,{Coloring:()=>a});var a;(function(c){c[c.NoColors=0]="NoColors",c[c.FaceColors=1]="FaceColors",c[c.VertexColors=2]="VertexColors"})(a||(a={}))},"./src/WebGL/constants/Shading.ts":(e,i,s)=>{s.r(i),s.d(i,{Shading:()=>a});var a;(function(c){c[c.NoShading=0]="NoShading",c[c.FlatShading=1]="FlatShading",c[c.SmoothShading=2]="SmoothShading"})(a||(a={}))},"./src/WebGL/constants/Sides.ts":(e,i,s)=>{s.r(i),s.d(i,{BackSide:()=>c,DoubleSide:()=>h,FrontSide:()=>a});const a=0,c=1,h=2},"./src/WebGL/constants/SpriteAlignment.ts":(e,i,s)=>{s.r(i),s.d(i,{SpriteAlignment:()=>c});var a=s("./src/WebGL/math/index.ts");const c={topLeft:new a.Vector2(1,-1),topCenter:new a.Vector2(0,-1),topRight:new a.Vector2(-1,-1),centerLeft:new a.Vector2(1,0),center:new a.Vector2(0,0),centerRight:new a.Vector2(-1,0),bottomLeft:new a.Vector2(1,1),bottomCenter:new a.Vector2(0,1),bottomRight:new a.Vector2(-1,1)}},"./src/WebGL/constants/TextureConstants.ts":(e,i,s)=>{s.r(i),s.d(i,{ClampToEdgeWrapping:()=>a,FloatType:()=>ot,LinearFilter:()=>c,LinearMipMapLinearFilter:()=>st,NearestFilter:()=>h,R32Format:()=>bt,RFormat:()=>vt,RGBAFormat:()=>xt,UnsignedByteType:()=>nt});const a=1001,c=1006,h=1007,st=1008,nt=1009,ot=1010,xt=1021,vt=1022,bt=1023},"./src/WebGL/constants/TextureOperations.ts":(e,i,s)=>{s.r(i),s.d(i,{TextureOperations:()=>a});var a;(function(c){c[c.MultiplyOperation=0]="MultiplyOperation",c[c.MixOperation=1]="MixOperation",c[c.AddOperation=2]="AddOperation"})(a||(a={}))},"./src/WebGL/constants/index.ts":(e,i,s)=>{s.r(i),s.d(i,{BackSide:()=>c.BackSide,ClampToEdgeWrapping:()=>nt.ClampToEdgeWrapping,Coloring:()=>a.Coloring,DoubleSide:()=>c.DoubleSide,FloatType:()=>nt.FloatType,FrontSide:()=>c.FrontSide,LinearFilter:()=>nt.LinearFilter,LinearMipMapLinearFilter:()=>nt.LinearMipMapLinearFilter,NearestFilter:()=>nt.NearestFilter,R32Format:()=>nt.R32Format,RFormat:()=>nt.RFormat,RGBAFormat:()=>nt.RGBAFormat,Shading:()=>h.Shading,SpriteAlignment:()=>st.SpriteAlignment,TextureOperations:()=>ot.TextureOperations,UnsignedByteType:()=>nt.UnsignedByteType});var a=s("./src/WebGL/constants/Coloring.ts"),c=s("./src/WebGL/constants/Sides.ts"),h=s("./src/WebGL/constants/Shading.ts"),st=s("./src/WebGL/constants/SpriteAlignment.ts"),nt=s("./src/WebGL/constants/TextureConstants.ts"),ot=s("./src/WebGL/constants/TextureOperations.ts")},"./src/WebGL/core/EventDispatcher.ts":(e,i,s)=>{s.r(i),s.d(i,{EventDispatcher:()=>a});class a{constructor(){this.listeners={}}dispatchEvent(h){var st=this.listeners[h.type];if(st!==void 0){h.target=this;for(var nt=0,ot=st.length;nt<ot;nt++)st[nt].call(this,h)}}removeEventListener(h,st){if(!st)this.listeners[h]=[];else{var nt=this.listeners[h].indexOf(st);nt!==-1&&this.listeners[h].splice(nt,1)}}addEventListener(h,st){this.listeners[h]===void 0&&(this.listeners[h]=[]),this.listeners[h].indexOf(st)===-1&&this.listeners[h].push(st)}}},"./src/WebGL/core/Geometry.ts":(e,i,s)=>{s.r(i),s.d(i,{Geometry:()=>xt,GeometryGroup:()=>ot,GeometryIDCount:()=>vt});var a=s("./src/WebGL/materials/LineBasicMaterial.ts"),c=s("./src/WebGL/core/EventDispatcher.ts"),h=s("./src/WebGL/math/index.ts"),st=s("./src/colors.ts");const nt=65535;class ot{constructor(St=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=St}setColor(St){var Et=this.vertexArray,Ct=this.colorArray;if(!Et)throw new Error("vertex array not initialized");if(!Ct)throw new Error("color array not initialized");let ht=st.CC.color(St);for(var d=0;d<Et.length;d+=3)Ct[d]=ht.r,Ct[d+1]=ht.g,Ct[d+2]=ht.b}setColors(St){var Et=this.vertexArray,Ct=this.colorArray;if(!Et)throw new Error("vertex array not initialized");if(!Ct)throw new Error("color array not initialized");if(Et.length!=Ct.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var ht=0;ht<Et.length;ht+=3){var d=St(Et[ht],Et[ht+1],Et[ht+2]);d instanceof st.Color||(d=st.CC.color(d)),Ct[ht]=d.r,Ct[ht+1]=d.g,Ct[ht+2]=d.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var St=new h.Vector3,Et,Ct,ht,d,b=0;b<this.vertices;++b)Et=b*3,Ct=this.vertexArray[Et],ht=this.vertexArray[Et+1],d=this.vertexArray[Et+2],St.x+=Ct,St.y+=ht,St.z+=d;return St.divideScalar(this.vertices),St}setNormals(){var St=this.faceArray,Et=this.vertexArray,Ct=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!St)throw new Error("face array not initialized");if(!Et)throw new Error("vertex array not initialized");if(!Ct)throw new Error("normal array not initialized");for(var ht,d,b,ft,mt,_t,tt,gt=0;gt<St.length/3;++gt)ht=St[gt*3]*3,d=St[gt*3+1]*3,b=St[gt*3+2]*3,ft=new h.Vector3(Et[ht],Et[ht+1],Et[ht+2]),mt=new h.Vector3(Et[d],Et[d+1],Et[d+2]),_t=new h.Vector3(Et[b],Et[b+1],Et[b+2]),ft.subVectors(ft,mt),_t.subVectors(_t,mt),_t.cross(ft),tt=_t,tt.normalize(),Ct[ht]+=tt.x,Ct[d]+=tt.x,Ct[b]+=tt.x,Ct[ht+1]+=tt.y,Ct[d+1]+=tt.y,Ct[b+1]+=tt.y,Ct[ht+2]+=tt.z,Ct[d+2]+=tt.z,Ct[b+2]+=tt.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var St=this.faceArray,Et=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!St)throw new Error("face array not initialized");for(var Ct=0;Ct<this.faceidx/3;++Ct){var ht=Ct*3,d=ht*2,b=St[ht],ft=St[ht+1],mt=St[ht+2];Et[d]=b,Et[d+1]=ft,Et[d+2]=b,Et[d+3]=mt,Et[d+4]=ft,Et[d+5]=mt}}}vrml(St,Et){var Ct,ht,d,b,ft,mt,_t,tt,gt,wt,yt,Tt,Mt,Pt,It,Lt,zt,jt,Nt="";if(Nt+=St+`Shape {
`+St+` appearance Appearance {
`+St+`  material Material {
`+St+"   diffuseColor "+((Ct=Et==null?void 0:Et.color)===null||Ct===void 0?void 0:Ct.r)+" "+((ht=Et==null?void 0:Et.color)===null||ht===void 0?void 0:ht.g)+" "+((d=Et==null?void 0:Et.color)===null||d===void 0?void 0:d.b)+`
`,Et.wireframe&&this.colorArray){let Ot=this.colorArray;Nt+=St+"    emissiveColor "+Ot[0]+" "+Ot[1]+" "+Ot[2]+`
`}Et!=null&&Et.transparent&&(Nt+=St+"   transparency "+(1-Et.opacity)+`
`),Nt+=St+`  }
`,Nt+=St+` }
`;var kt=St;if(St+=" ",Et instanceof a.LineBasicMaterial||Et.wireframe){Nt+=St+`geometry IndexedLineSet {
`+St+` colorPerVertex TRUE
`+St+` coord Coordinate {
`+St+`  point [
`;let Ot,Bt,Ut;for(let Ft=0;Ft<this.vertices;++Ft){let Wt=Ft*3;Ot=(b=this.vertexArray)===null||b===void 0?void 0:b[Wt],Bt=(ft=this.vertexArray)===null||ft===void 0?void 0:ft[Wt+1],Ut=(mt=this.vertexArray)===null||mt===void 0?void 0:mt[Wt+2],Nt+=St+"   "+Ot+" "+Bt+" "+Ut+`,
`}if(Nt+=St+`  ]
`,Nt+=St+` }
`,this.colorArray&&!Et.wireframe){Nt+=St+` color Color {
`+St+`  color [
`;for(let Ft=0;Ft<this.vertices;++Ft){let Wt=Ft*3;Ot=this.colorArray[Wt],Bt=this.colorArray[Wt+1],Ut=this.colorArray[Wt+2],Nt+=St+"   "+Ot+" "+Bt+" "+Ut+`,
`}Nt+=St+`  ]
`,Nt+=St+` }
`}if(Nt+=St+` coordIndex [
`,Et.wireframe&&this.faceArray)for(let Ft=0;Ft<this.faceidx;Ft+=3)Ot=(_t=this.faceArray)===null||_t===void 0?void 0:_t[Ft],Bt=(tt=this.faceArray)===null||tt===void 0?void 0:tt[Ft+1],Ut=(gt=this.faceArray)===null||gt===void 0?void 0:gt[Ft+2],Nt+=St+"  "+Ot+", "+Bt+", "+Ut+`, -1,
`;else for(let Ft=0;Ft<this.vertices-1;Ft+=2)Nt+=St+"  "+Ft+", "+(Ft+1)+`, -1,
`;Nt+=St+` ]
`,Nt+=St+`}
`}else{Nt+=St+`geometry IndexedFaceSet {
`+St+` colorPerVertex TRUE
`+St+` normalPerVertex TRUE
`+St+` solid FALSE
`,Nt+=St+` coord Coordinate {
`+St+`  point [
`;let Ot,Bt,Ut;for(let Ft=0;Ft<this.vertices;++Ft){let Wt=Ft*3;Ot=(wt=this.vertexArray)===null||wt===void 0?void 0:wt[Wt],Bt=(yt=this.vertexArray)===null||yt===void 0?void 0:yt[Wt+1],Ut=(Tt=this.vertexArray)===null||Tt===void 0?void 0:Tt[Wt+2],Nt+=St+"   "+Ot+" "+Bt+" "+Ut+`,
`}Nt+=St+`  ]
`,Nt+=St+` }
`,Nt+=St+` normal Normal {
`+St+`  vector [
`;for(let Ft=0;Ft<this.vertices;++Ft){let Wt=Ft*3;Ot=(Mt=this.normalArray)===null||Mt===void 0?void 0:Mt[Wt],Bt=(Pt=this.normalArray)===null||Pt===void 0?void 0:Pt[Wt+1],Ut=(It=this.normalArray)===null||It===void 0?void 0:It[Wt+2],Nt+=St+"   "+Ot+" "+Bt+" "+Ut+`,
`}if(Nt+=St+`  ]
`,Nt+=St+` }
`,this.colorArray){Nt+=St+` color Color {
`+St+`  color [
`;for(let Ft=0;Ft<this.vertices;++Ft){let Wt=Ft*3;Ot=this.colorArray[Wt],Bt=this.colorArray[Wt+1],Ut=this.colorArray[Wt+2],Nt+=St+"   "+Ot+" "+Bt+" "+Ut+`,
`}Nt+=St+`  ]
`,Nt+=St+` }
`}Nt+=St+` coordIndex [
`;for(let Ft=0;Ft<this.faceidx;Ft+=3)Ot=(Lt=this.faceArray)===null||Lt===void 0?void 0:Lt[Ft],Bt=(zt=this.faceArray)===null||zt===void 0?void 0:zt[Ft+1],Ut=(jt=this.faceArray)===null||jt===void 0?void 0:jt[Ft+2],Nt+=St+"  "+Ot+", "+Bt+", "+Ut+`, -1,
`;Nt+=St+` ]
`,Nt+=St+`}
`}return Nt+=kt+"}",Nt}truncateArrayBuffers(St=!0,Et=!1){var Ct=this.vertexArray,ht=this.colorArray,d=this.normalArray,b=this.faceArray,ft=this.lineArray,mt=this.radiusArray;this.vertexArray=(Ct==null?void 0:Ct.subarray(0,this.vertices*3))||null,this.colorArray=(ht==null?void 0:ht.subarray(0,this.vertices*3))||null,St?(this.normalArray=(d==null?void 0:d.subarray(0,this.vertices*3))||null,this.faceArray=(b==null?void 0:b.subarray(0,this.faceidx))||null,this.lineidx>0?this.lineArray=(ft==null?void 0:ft.subarray(0,this.lineidx))||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),mt&&(this.radiusArray=mt.subarray(0,this.vertices)),Et&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class xt extends c.EventDispatcher{constructor(St=!1,Et=!1,Ct=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=vt++,this.mesh=St,this.radii=Et,this.offset=Ct}updateGeoGroup(St=0){var Et,Ct=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!Ct||Ct.vertices+St>(((Et=Ct==null?void 0:Ct.vertexArray)===null||Et===void 0?void 0:Et.length)||0)/3)&&(Ct=this.addGeoGroup()),Ct}vrml(St,Et){for(var Ct="",ht=this.geometryGroups.length,d=0;d<ht;d++){var b=this.geometryGroups[d];Ct+=b.vrml(St,Et)+`,
`}return Ct}addGeoGroup(){var St=new ot(this.geometryGroups.length);return this.geometryGroups.push(St),this.groups=this.geometryGroups.length,St.vertexArray=new Float32Array(nt*3),St.colorArray=new Float32Array(nt*3),this.mesh&&(St.normalArray=new Float32Array(nt*3),St.faceArray=new Uint16Array(nt*6),St.lineArray=new Uint16Array(nt*6)),this.radii&&(St.radiusArray=new Float32Array(nt)),St.useOffset=this.offset,St}setUpNormals(...St){for(var Et=0;Et<this.groups;Et++){var Ct=this.geometryGroups[Et];Ct.setNormals(...St)}}setColors(...St){for(var Et=this.geometryGroups.length,Ct=0;Ct<Et;Ct++){var ht=this.geometryGroups[Ct];ht.setColors(...St)}}setColor(...St){for(var Et=this.geometryGroups.length,Ct=0;Ct<Et;Ct++){var ht=this.geometryGroups[Ct];ht.setColor(...St)}}setUpWireframe(...St){for(var Et=0;Et<this.groups;Et++){var Ct=this.geometryGroups[Et];Ct.setLineIndices(...St)}}initTypedArrays(){for(var St=0;St<this.groups;St++){var Et=this.geometryGroups[St];Et.__inittedArrays!==!0&&Et.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var St=0,Et=0;Et<this.groups;Et++)St+=this.geometryGroups[Et].vertices;return St}}let vt=0},"./src/WebGL/core/Object3D.ts":(e,i,s)=>{s.r(i),s.d(i,{Light:()=>ot,Object3D:()=>st,Object3DIDCount:()=>h,Scene:()=>nt});var a=s("./src/WebGL/math/index.ts"),c=s("./src/colors.ts");let h=0;class st{constructor(){this.id=h++,this.name="",this.children=[],this.position=new a.Vector3,this.rotation=new a.Vector3,this.matrix=new a.Matrix4,this.matrixWorld=new a.Matrix4,this.quaternion=new a.Quaternion,this.eulerOrder="XYZ",this.up=new a.Vector3(0,1,0),this.scale=new a.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(vt){this.matrix.lookAt(vt,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof a.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(vt){if(vt===this){console.error("Can't add $3Dmol.Object3D to itself");return}vt.parent=this,this.children.push(vt);for(var bt=this;bt.parent!==void 0;)bt=bt.parent;bt!==void 0&&bt instanceof nt&&bt.__addObject(vt)}remove(vt){var bt=this.children.indexOf(vt);if(bt!==-1){vt.parent=void 0,this.children.splice(bt,1);for(var St=this;St.parent!==void 0;)St=St.parent;St!==void 0&&St instanceof nt&&St.__removeObject(vt)}}vrml(vt){vt||(vt=" ");var bt=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),St=0,Et=0,Ct=0;if(bt!=0){let b=Math.sin(bt/2);St=this.quaternion.x/b,Et=this.quaternion.y/b,Ct=this.quaternion.z/b}var ht=vt+`Transform {
`+vt+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+vt+" rotation "+St+" "+Et+" "+Ct+" "+bt+`
`+vt+` children [
`;this.geometry&&(ht+=this.geometry.vrml(vt,this.material));for(var d=0;d<this.children.length;d++)ht+=this.children[d].vrml(vt+" ")+`,
`;return ht+=` ]
`,ht+="}",ht}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof a.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(vt){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||vt===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var bt=0;bt<this.children.length;bt++)this.children[bt].updateMatrixWorld(!0)}clone(vt){vt===void 0&&(vt=new st),vt.name=this.name,vt.up.copy(this.up),vt.position.copy(this.position),vt.rotation instanceof a.Vector3&&this.rotation instanceof a.Vector3?vt.rotation.copy(this.rotation):vt.rotation=this.rotation,vt.eulerOrder=this.eulerOrder,vt.scale.copy(this.scale),vt.rotationAutoUpdate=this.rotationAutoUpdate,vt.matrix.copy(this.matrix),vt.matrixWorld.copy(this.matrixWorld),vt.quaternion.copy(this.quaternion),vt.matrixAutoUpdate=this.matrixAutoUpdate,vt.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,vt.useQuaternion=this.useQuaternion,vt.visible=this.visible;for(var bt=0;bt<this.children.length;bt++){var St=this.children[bt];vt.add(St.clone())}return vt}setVisible(vt){this.visible=vt;for(var bt=0;bt<this.children.length;bt++){var St=this.children[bt];St.setVisible(vt)}}}class nt extends st{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(vt){if(vt instanceof ot)this.__lights.indexOf(vt)===-1&&this.__lights.push(vt),vt.target&&vt.target.parent===void 0&&this.add(vt.target);else if(this.__objects.indexOf(vt)===-1){this.__objects.push(vt),this.__objectsAdded.push(vt);var bt=this.__objectsRemoved.indexOf(vt);bt!==-1&&this.__objectsRemoved.splice(bt,1)}for(var St=0;St<vt.children.length;St++)this.__addObject(vt.children[St])}__removeObject(vt){var bt;if(vt instanceof ot)bt=this.__lights.indexOf(vt),bt!==-1&&this.__lights.splice(bt,1);else if(bt=this.__objects.indexOf(vt),bt!==-1){this.__objects.splice(bt,1),this.__objectsRemoved.push(vt);var St=this.__objectsAdded.indexOf(vt);St!==-1&&this.__objectsAdded.splice(bt,1)}for(var Et=0;Et<vt.children.length;Et++)this.__removeObject(vt.children[Et])}}class ot extends st{constructor(vt,bt=1){super(),this.position=new a.Vector3(0,1,0),this.target=new st,this.castShadow=!1,this.onlyShadow=!1,this.color=new c.Color(vt),this.intensity=bt}}},"./src/WebGL/core/Projector.ts":(e,i,s)=>{s.r(i),s.d(i,{Projector:()=>h});var a=s("./src/WebGL/math/index.ts");const c=new a.Matrix4;class h{static unprojectVector(nt,ot){return ot.projectionMatrixInverse.getInverse(ot.projectionMatrix),c.multiplyMatrices(ot.matrixWorld,ot.projectionMatrixInverse),nt.applyProjection(c)}static projectVector(nt,ot){return ot.matrixWorldInverse.getInverse(ot.matrixWorld),c.multiplyMatrices(ot.projectionMatrix,ot.matrixWorldInverse),nt.applyProjection(c)}projectVector(nt,ot){return h.projectVector(nt,ot)}unprojectVector(nt,ot){return h.unprojectVector(nt,ot)}}},"./src/WebGL/core/Raycaster.ts":(e,i,s)=>{s.r(i),s.d(i,{Raycaster:()=>nt,intersectObject:()=>b});var a=s("./src/WebGL/math/index.ts"),c=s("./src/WebGL/shapes/index.ts");const h=(ft,mt)=>ft.distance-mt.distance,st=new a.Matrix4;class nt{constructor(mt,_t,tt,gt){this.precision=1e-4,this.linePrecision=.2,this.ray=new a.Ray(mt,_t),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=gt||0,this.far=tt||1/0}set(mt,_t){this.ray.set(mt,_t)}setFromCamera(mt,_t){_t.ortho?(this.ray.origin.set(mt.x,mt.y,(_t.near+_t.far)/(_t.near-_t.far)).unproject(_t),this.ray.direction.set(0,0,-1).transformDirection(_t.matrixWorld)):(this.ray.origin.setFromMatrixPosition(_t.matrixWorld),this.ray.direction.set(mt.x,mt.y,mt.z),_t.projectionMatrixInverse.getInverse(_t.projectionMatrix),st.multiplyMatrices(_t.matrixWorld,_t.projectionMatrixInverse),this.ray.direction.applyProjection(st),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(mt,_t){for(var tt=[],gt=0,wt=_t.length;gt<wt;gt++)b(mt,_t[gt],this,tt);return tt.sort(h),tt}}const ot=ft=>Math.min(Math.max(ft,-1),1);var xt=new c.Sphere,vt=new c.Cylinder,bt=new c.Triangle,St=new a.Vector3,Et=new a.Vector3,Ct=new a.Vector3,ht=new a.Vector3,d=new a.Vector3;function b(ft,mt,_t,tt){if(d.getPositionFromMatrix(ft.matrixWorld),mt.intersectionShape===void 0)return tt;var gt=mt.intersectionShape,wt=_t.linePrecision;wt*=ft.matrixWorld.getMaxScaleOnAxis();var yt=wt*wt;if(mt.boundingSphere!==void 0&&mt.boundingSphere instanceof c.Sphere&&(xt.copy(mt.boundingSphere),xt.applyMatrix4(ft.matrixWorld),!_t.ray.isIntersectionSphere(xt)))return tt;var Tt,Mt,Pt,It,Lt,zt,jt,Nt,kt,Ot,Bt,Ut,Ft,Wt;for(Tt=0,Mt=gt.triangle.length;Tt<Mt;Tt++)if(gt.triangle[Tt]instanceof c.Triangle){if(bt.copy(gt.triangle[Tt]),bt.applyMatrix4(ft.matrixWorld),Pt=bt.getNormal(),It=_t.ray.direction.dot(Pt),It>=0||(St.subVectors(bt.a,_t.ray.origin),jt=Pt.dot(St)/It,jt<0))continue;Et.copy(_t.ray.direction).multiplyScalar(jt).add(_t.ray.origin),Et.sub(bt.a),Ct.copy(bt.b).sub(bt.a),ht.copy(bt.c).sub(bt.a);var _i=Ct.dot(ht),Qt=Ct.lengthSq(),on=ht.lengthSq();if(Ut=(Qt*Et.dot(ht)-_i*Et.dot(Ct))/(Qt*on-_i*_i),Ut<0||Ut>1||(Bt=(Et.dot(Ct)-Ut*_i)/Qt,Bt<0||Bt>1||Bt+Ut>1))continue;tt.push({clickable:mt,distance:jt})}for(Tt=0,Mt=gt.cylinder.length;Tt<Mt;Tt++)if(gt.cylinder[Tt]instanceof c.Cylinder){if(vt.copy(gt.cylinder[Tt]),vt.applyMatrix4(ft.matrixWorld),St.subVectors(vt.c1,_t.ray.origin),Lt=St.dot(vt.direction),zt=St.dot(_t.ray.direction),It=ot(_t.ray.direction.dot(vt.direction)),kt=1-It*It,kt===0)continue;Ft=(It*zt-Lt)/kt,Wt=(zt-It*Lt)/kt,Et.copy(vt.direction).multiplyScalar(Ft).add(vt.c1),Ct.copy(_t.ray.direction).multiplyScalar(Wt).add(_t.ray.origin),Nt=ht.subVectors(Et,Ct).lengthSq();var nn=vt.radius*vt.radius;if(Nt<=nn){if(Ot=(It*Lt-zt)*(It*Lt-zt)-kt*(St.lengthSq()-Lt*Lt-nn),Ot<=0?Ut=jt=Math.sqrt(Nt):Ut=jt=(zt-It*Lt-Math.sqrt(Ot))/kt,Bt=It*Ut-Lt,Bt<0||Bt*Bt>vt.lengthSq()||Ut<0)continue;tt.push({clickable:mt,distance:jt})}}for(Tt=0,Mt=gt.line.length;Tt<Mt;Tt+=2){Et.copy(gt.line[Tt]),Et.applyMatrix4(ft.matrixWorld),Ct.copy(gt.line[Tt+1]),Ct.applyMatrix4(ft.matrixWorld),ht.subVectors(Ct,Et);var dn=ht.lengthSq();ht.normalize(),St.subVectors(Et,_t.ray.origin);var tn=St.dot(ht);zt=St.dot(_t.ray.direction),It=ot(_t.ray.direction.dot(ht)),kt=1-It*It,kt!==0&&(Ft=(It*zt-tn)/kt,Wt=(zt-It*tn)/kt,Et.add(ht.multiplyScalar(Ft)),Ct.copy(_t.ray.direction).multiplyScalar(Wt).add(_t.ray.origin),Nt=ht.subVectors(Ct,Et).lengthSq(),Nt<yt&&Ft*Ft<dn&&tt.push({clickable:mt,distance:Wt}))}for(Tt=0,Mt=gt.sphere.length;Tt<Mt;Tt++)if(gt.sphere[Tt]instanceof c.Sphere&&(xt.copy(gt.sphere[Tt]),xt.applyMatrix4(ft.matrixWorld),_t.ray.isIntersectionSphere(xt))){Et.subVectors(xt.center,_t.ray.origin);var rn=Et.dot(_t.ray.direction);if(Ot=rn*rn-(Et.lengthSq()-xt.radius*xt.radius),rn<0)return tt;Ot<=0?jt=rn:jt=rn-Math.sqrt(Ot),tt.push({clickable:mt,distance:jt})}return tt}},"./src/WebGL/core/Texture.ts":(e,i,s)=>{s.r(i),s.d(i,{Texture:()=>nt,TextureIdCount:()=>ot});var a=s("./src/WebGL/constants/TextureConstants.ts"),c=s("./src/WebGL/math/index.ts"),h=s("./src/WebGL/core/EventDispatcher.ts"),st=s("./src/WebGL/core/UVMapping.ts");class nt extends h.EventDispatcher{constructor(vt,bt){super(),this.id=ot++,this.name="",this.image=vt,this.mapping=new st.UVMapping,this.wrapS=a.ClampToEdgeWrapping,this.wrapT=a.ClampToEdgeWrapping,this.anisotropy=1,bt?(this.format=a.RFormat,this.type=a.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=a.NearestFilter,this.minFilter=a.NearestFilter):(this.format=a.RGBAFormat,this.type=a.UnsignedByteType,this.offset=new c.Vector2(0,0),this.repeat=new c.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=a.LinearFilter,this.minFilter=a.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(vt=new nt){return vt.image=this.image,vt.mapping=this.mapping,vt.wrapS=this.wrapS,vt.wrapT=this.wrapT,vt.magFilter=this.magFilter,vt.minFilter=this.minFilter,vt.anisotropy=this.anisotropy,vt.format=this.format,vt.type=this.type,vt.offset.copy(this.offset),vt.repeat.copy(this.repeat),vt.premultiplyAlpha=this.premultiplyAlpha,vt.flipY=this.flipY,vt.unpackAlignment=this.unpackAlignment,vt}dispose(){this.dispatchEvent({type:"dispose"})}}let ot=0},"./src/WebGL/core/UVMapping.ts":(e,i,s)=>{s.r(i),s.d(i,{UVMapping:()=>a});class a{}},"./src/WebGL/core/index.ts":(e,i,s)=>{s.r(i),s.d(i,{EventDispatcher:()=>a.EventDispatcher,Geometry:()=>c.Geometry,GeometryGroup:()=>c.GeometryGroup,GeometryIDCount:()=>c.GeometryIDCount,Light:()=>h.Light,Object3D:()=>h.Object3D,Object3DIDCount:()=>h.Object3DIDCount,Projector:()=>st.Projector,Raycaster:()=>nt.Raycaster,Scene:()=>h.Scene,Texture:()=>ot.Texture,TextureIdCount:()=>ot.TextureIdCount,UVMapping:()=>xt.UVMapping,intersectObject:()=>nt.intersectObject});var a=s("./src/WebGL/core/EventDispatcher.ts"),c=s("./src/WebGL/core/Geometry.ts"),h=s("./src/WebGL/core/Object3D.ts"),st=s("./src/WebGL/core/Projector.ts"),nt=s("./src/WebGL/core/Raycaster.ts"),ot=s("./src/WebGL/core/Texture.ts"),xt=s("./src/WebGL/core/UVMapping.ts")},"./src/WebGL/index.ts":(e,i,s)=>{s.r(i),s.d(i,{BackSide:()=>a.BackSide,Camera:()=>vt.Camera,ClampToEdgeWrapping:()=>a.ClampToEdgeWrapping,Coloring:()=>a.Coloring,Cylinder:()=>xt.Cylinder,DoubleSide:()=>a.DoubleSide,EventDispatcher:()=>c.EventDispatcher,FloatType:()=>a.FloatType,Fog:()=>bt.Fog,FrontSide:()=>a.FrontSide,Geometry:()=>c.Geometry,GeometryGroup:()=>c.GeometryGroup,GeometryIDCount:()=>c.GeometryIDCount,ImposterMaterial:()=>h.ImposterMaterial,InstancedMaterial:()=>h.InstancedMaterial,Light:()=>c.Light,Line:()=>nt.Line,LineBasicMaterial:()=>h.LineBasicMaterial,LineStyle:()=>nt.LineStyle,LinearFilter:()=>a.LinearFilter,LinearMipMapLinearFilter:()=>a.LinearMipMapLinearFilter,Material:()=>h.Material,MaterialIdCount:()=>h.MaterialIdCount,Matrix3:()=>st.Matrix3,Matrix4:()=>st.Matrix4,Mesh:()=>nt.Mesh,MeshDoubleLambertMaterial:()=>h.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>h.MeshLambertMaterial,MeshOutlineMaterial:()=>h.MeshOutlineMaterial,NearestFilter:()=>a.NearestFilter,Object3D:()=>c.Object3D,Object3DIDCount:()=>c.Object3DIDCount,Projector:()=>c.Projector,Quaternion:()=>st.Quaternion,R32Format:()=>a.R32Format,RFormat:()=>a.RFormat,RGBAFormat:()=>a.RGBAFormat,Ray:()=>st.Ray,Raycaster:()=>c.Raycaster,Renderer:()=>St.Renderer,Scene:()=>c.Scene,ShaderLib:()=>ot.ShaderLib,ShaderUtils:()=>ot.ShaderUtils,Shading:()=>a.Shading,Sphere:()=>xt.Sphere,SphereImposterMaterial:()=>h.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>h.SphereImposterOutlineMaterial,Sprite:()=>nt.Sprite,SpriteAlignment:()=>a.SpriteAlignment,SpriteMaterial:()=>h.SpriteMaterial,SpritePlugin:()=>Et.SpritePlugin,StickImposterMaterial:()=>h.StickImposterMaterial,StickImposterOutlineMaterial:()=>h.StickImposterOutlineMaterial,Texture:()=>c.Texture,TextureIdCount:()=>c.TextureIdCount,TextureOperations:()=>a.TextureOperations,Triangle:()=>xt.Triangle,UVMapping:()=>c.UVMapping,UnsignedByteType:()=>a.UnsignedByteType,Vector2:()=>st.Vector2,Vector3:()=>st.Vector3,VolumetricMaterial:()=>h.VolumetricMaterial,basic:()=>ot.basic,clamp:()=>st.clamp,clone:()=>ot.clone,conversionMatrix3:()=>st.conversionMatrix3,degToRad:()=>st.degToRad,instanced:()=>ot.instanced,intersectObject:()=>c.intersectObject,lambert:()=>ot.lambert,lambertdouble:()=>ot.lambertdouble,outline:()=>ot.outline,screen:()=>ot.screen,screenaa:()=>ot.screenaa,sphereimposter:()=>ot.sphereimposter,sphereimposteroutline:()=>ot.sphereimposteroutline,sprite:()=>ot.sprite,stickimposter:()=>ot.stickimposter,stickimposteroutline:()=>ot.stickimposteroutline,volumetric:()=>ot.volumetric});var a=s("./src/WebGL/constants/index.ts"),c=s("./src/WebGL/core/index.ts"),h=s("./src/WebGL/materials/index.ts"),st=s("./src/WebGL/math/index.ts"),nt=s("./src/WebGL/objects/index.ts"),ot=s("./src/WebGL/shaders/index.ts"),xt=s("./src/WebGL/shapes/index.ts"),vt=s("./src/WebGL/Camera.ts"),bt=s("./src/WebGL/Fog.ts"),St=s("./src/WebGL/Renderer.ts"),Et=s("./src/WebGL/SpritePlugin.ts")},"./src/WebGL/materials/ImposterMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{ImposterMaterial:()=>ot});var a=s("./src/WebGL/constants/Coloring.ts"),c=s("./src/WebGL/constants/Shading.ts"),h=s("./src/colors.ts"),st=s("./src/WebGL/math/index.ts"),nt=s("./src/WebGL/materials/Material.ts");class ot extends nt.Material{constructor(vt){super(),this.color=new h.Color(16777215),this.ambient=new h.Color(1048575),this.emissive=new h.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new st.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=c.Shading.SmoothShading,this.shaderID=null,this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.setValues(vt)}clone(vt=new ot){return super.clone.call(this,vt),vt.color.copy(this.color),vt.ambient.copy(this.ambient),vt.emissive.copy(this.emissive),vt.wrapAround=this.wrapAround,vt.wrapRGB.copy(this.wrapRGB),vt.map=this.map,vt.lightMap=this.lightMap,vt.specularMap=this.specularMap,vt.envMap=this.envMap,vt.combine=this.combine,vt.reflectivity=this.reflectivity,vt.refractionRatio=this.refractionRatio,vt.fog=this.fog,vt.shading=this.shading,vt.shaderID=this.shaderID,vt.vertexColors=this.vertexColors,vt.skinning=this.skinning,vt.morphTargets=this.morphTargets,vt.morphNormals=this.morphNormals,vt}}},"./src/WebGL/materials/InstancedMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{InstancedMaterial:()=>ot});var a=s("./src/WebGL/constants/Coloring.ts"),c=s("./src/WebGL/constants/Shading.ts"),h=s("./src/colors.ts"),st=s("./src/WebGL/math/index.ts"),nt=s("./src/WebGL/materials/Material.ts");class ot extends nt.Material{constructor(vt){super(),this.color=new h.Color(16777215),this.ambient=new h.Color(1048575),this.emissive=new h.Color(0),this.wrapAround=!1,this.wrapRGB=new st.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=c.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(vt)}clone(vt=new ot){return super.clone.call(this,vt),vt.color.copy(this.color),vt.ambient.copy(this.ambient),vt.emissive.copy(this.emissive),vt.wrapAround=this.wrapAround,vt.wrapRGB.copy(this.wrapRGB),vt.map=this.map,vt.lightMap=this.lightMap,vt.specularMap=this.specularMap,vt.envMap=this.envMap,vt.combine=this.combine,vt.reflectivity=this.reflectivity,vt.refractionRatio=this.refractionRatio,vt.fog=this.fog,vt.shading=this.shading,vt.shaderID=this.shaderID,vt.vertexColors=this.vertexColors,vt.skinning=this.skinning,vt.morphTargets=this.morphTargets,vt.morphNormals=this.morphNormals,vt.sphere=this.sphere,vt}}},"./src/WebGL/materials/LineBasicMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{LineBasicMaterial:()=>h});var a=s("./src/colors.ts"),c=s("./src/WebGL/materials/Material.ts");class h extends c.Material{constructor(nt){super(),this.color=new a.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(nt)}clone(nt=new h){return super.clone.call(this,nt),nt.color.copy(this.color),nt}}},"./src/WebGL/materials/Material.ts":(e,i,s)=>{s.r(i),s.d(i,{Material:()=>nt,MaterialIdCount:()=>ot});var a=s("./src/WebGL/constants/Sides.ts"),c=s("./src/WebGL/core/index.ts"),h=s("./src/WebGL/math/index.ts"),st=s("./src/colors.ts");class nt extends c.EventDispatcher{constructor(){super(...arguments),this.id=ot++,this.name="",this.side=a.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(vt={}){if(vt!==void 0)for(var bt in vt){var St=vt[bt];if(St===void 0){console.warn("$3Dmol.Material: '"+bt+"' parameter is undefined.");continue}if(bt in this){var Et=this[bt];Et instanceof st.Color&&St instanceof st.Color?Et.copy(St):Et instanceof st.Color?Et.set(St):Et instanceof h.Vector3&&St instanceof h.Vector3?Et.copy(St):this[bt]=St}}}clone(vt=new nt){return vt.name=this.name,vt.side=this.side,vt.opacity=this.opacity,vt.transparent=this.transparent,vt.depthTest=this.depthTest,vt.depthWrite=this.depthWrite,vt.polygonOffset=this.polygonOffset,vt.polygonOffsetFactor=this.polygonOffsetFactor,vt.polygonOffsetUnits=this.polygonOffsetUnits,vt.alphaTest=this.alphaTest,vt.overdraw=this.overdraw,vt.visible=this.visible,vt}makeShaded(vt){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:vt},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let ot=0},"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{MeshDoubleLambertMaterial:()=>h});var a=s("./src/WebGL/constants/Sides.ts"),c=s("./src/WebGL/materials/MeshLambertMaterial.ts");class h extends c.MeshLambertMaterial{constructor(nt){super(nt),this.shaderID="lambertdouble",this.side=a.DoubleSide,this.outline=!1}clone(nt=new h){return super.clone.call(this,nt),nt}}},"./src/WebGL/materials/MeshLambertMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{MeshLambertMaterial:()=>ot});var a=s("./src/WebGL/constants/Coloring.ts"),c=s("./src/WebGL/constants/Shading.ts"),h=s("./src/WebGL/materials/Material.ts"),st=s("./src/colors.ts"),nt=s("./src/WebGL/math/index.ts");class ot extends h.Material{constructor(vt){super(),this.color=new st.Color(16777215),this.ambient=new st.Color(1048575),this.emissive=new st.Color(0),this.wrapAround=!1,this.wrapRGB=new nt.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=c.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.setValues(vt)}clone(vt=new ot){return super.clone.call(this,vt),vt.color.copy(this.color),vt.ambient.copy(this.ambient),vt.emissive.copy(this.emissive),vt.wrapAround=this.wrapAround,vt.wrapRGB.copy(this.wrapRGB),vt.map=this.map,vt.lightMap=this.lightMap,vt.specularMap=this.specularMap,vt.envMap=this.envMap,vt.combine=this.combine,vt.reflectivity=this.reflectivity,vt.refractionRatio=this.refractionRatio,vt.fog=this.fog,vt.shading=this.shading,vt.shaderID=this.shaderID,vt.vertexColors=this.vertexColors,vt.skinning=this.skinning,vt.morphTargets=this.morphTargets,vt.morphNormals=this.morphNormals,vt}}},"./src/WebGL/materials/MeshOutlineMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{MeshOutlineMaterial:()=>h});var a=s("./src/colors.ts"),c=s("./src/WebGL/materials/Material.ts");class h extends c.Material{constructor(nt){super(),nt=nt||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=a.CC.color(nt.color||new a.Color(0,0,0)),this.outlineWidth=nt.width||.1,this.outlinePushback=nt.pushback||1,this.outlineMaxPixels=nt.maxpixels||0}clone(nt=new h){return super.clone.call(this,nt),nt.fog=this.fog,nt.shaderID=this.shaderID,nt.wireframe=this.wireframe,nt.outlineColor=this.outlineColor,nt.outlineWidth=this.outlineWidth,nt.outlinePushback=this.outlinePushback,nt.outlineMaxPixels=this.outlineMaxPixels,nt}}},"./src/WebGL/materials/SphereImposterMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{SphereImposterMaterial:()=>c});var a=s("./src/WebGL/materials/ImposterMaterial.ts");class c extends a.ImposterMaterial{constructor(st){super(st),this.shaderID="sphereimposter",this.setValues(st)}clone(st=new c){return super.clone.call(this,st),st}}},"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{SphereImposterOutlineMaterial:()=>h});var a=s("./src/colors.ts"),c=s("./src/WebGL/materials/ImposterMaterial.ts");class h extends c.ImposterMaterial{constructor(nt){super(nt),nt=nt||{},this.shaderID="sphereimposteroutline",this.outlineColor=a.CC.color(nt.color||new a.Color(0,0,0)),this.outlineWidth=nt.width||.1,this.outlinePushback=nt.pushback||1,this.outlineMaxPixels=nt.maxpixels||0,this.setValues(nt)}clone(nt=new h){return super.clone.call(this,nt),nt.outlineColor=this.outlineColor,nt.outlineWidth=this.outlineWidth,nt.outlinePushback=this.outlinePushback,nt.outlineMaxPixels=this.outlineMaxPixels,nt}}},"./src/WebGL/materials/SpriteMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{SpriteMaterial:()=>ot});var a=s("./src/WebGL/constants/SpriteAlignment.ts"),c=s("./src/WebGL/core/Texture.ts"),h=s("./src/colors.ts"),st=s("./src/WebGL/math/index.ts"),nt=s("./src/WebGL/materials/Material.ts");class ot extends nt.Material{constructor(vt){super(),this.color=new h.Color(16777215),this.map=new c.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new st.Vector2(0,0),this.uvScale=new st.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=a.SpriteAlignment.center.clone(),this.setValues(vt),vt=vt||{},vt.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),vt.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),vt.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(vt=new ot){return super.clone.call(this,vt),vt.color.copy(this.color),vt.map=this.map,vt.useScreenCoordinates=this.useScreenCoordinates,vt.screenOffset=this.screenOffset,vt.sizeAttenuation=this.sizeAttenuation,vt.scaleByViewport=this.scaleByViewPort,vt.alignment.copy(this.alignment),vt.uvOffset.copy(this.uvOffset),vt}}},"./src/WebGL/materials/StickImposterMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{StickImposterMaterial:()=>c});var a=s("./src/WebGL/materials/ImposterMaterial.ts");class c extends a.ImposterMaterial{constructor(st){super(st),this.shaderID="stickimposter",this.setValues(st)}clone(st=new c){return super.clone.call(this,st),st}}},"./src/WebGL/materials/StickImposterOutlineMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{StickImposterOutlineMaterial:()=>h});var a=s("./src/colors.ts"),c=s("./src/WebGL/materials/ImposterMaterial.ts");class h extends c.ImposterMaterial{constructor(nt={}){super(nt),this.shaderID="stickimposteroutline",this.outlineColor=new a.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,nt.color&&(this.outlineColor=a.CC.color(nt.color)),nt.width&&(this.outlineWidth=nt.width),nt.pushback&&(this.outlinePushback=nt.pushback),nt.maxpixels&&(this.outlineMaxPixels=nt.maxpixels),this.setValues(nt)}clone(nt=new h){return super.clone.call(this,nt),nt.outlineColor=this.outlineColor,nt.outlineWidth=this.outlineWidth,nt.outlinePushback=this.outlinePushback,nt.outlineMaxPixels=this.outlineMaxPixels,nt}}},"./src/WebGL/materials/VolumetricMaterial.ts":(e,i,s)=>{s.r(i),s.d(i,{VolumetricMaterial:()=>st});var a=s("./src/WebGL/constants/Sides.ts"),c=s("./src/colors.ts"),h=s("./src/WebGL/materials/Material.ts");class st extends h.Material{constructor(ot){super(),this.transparent=!1,this.volumetric=!0,this.color=new c.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=a.FrontSide,this.setValues(ot)}clone(ot=new st){return super.clone.call(this,ot),ot.transparent=this.transparent,ot.volumetric=this.volumetric,ot.color=this.color,ot.transferfn=this.transferfn,ot.map=this.map,ot.extent=this.extent,ot.maxdepth=this.maxdepth,ot.unit=this.unit,ot.texmatrix=this.texmatrix,ot.transfermin=this.transfermin,ot.transfermax=this.transfermax,ot.subsamples=this.subsamples,ot.shaderID=this.shaderID,ot.side=this.side,ot}}},"./src/WebGL/materials/index.ts":(e,i,s)=>{s.r(i),s.d(i,{ImposterMaterial:()=>a.ImposterMaterial,InstancedMaterial:()=>c.InstancedMaterial,LineBasicMaterial:()=>h.LineBasicMaterial,Material:()=>st.Material,MaterialIdCount:()=>st.MaterialIdCount,MeshDoubleLambertMaterial:()=>nt.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>ot.MeshLambertMaterial,MeshOutlineMaterial:()=>xt.MeshOutlineMaterial,SphereImposterMaterial:()=>vt.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>bt.SphereImposterOutlineMaterial,SpriteMaterial:()=>St.SpriteMaterial,StickImposterMaterial:()=>Et.StickImposterMaterial,StickImposterOutlineMaterial:()=>Ct.StickImposterOutlineMaterial,VolumetricMaterial:()=>ht.VolumetricMaterial});var a=s("./src/WebGL/materials/ImposterMaterial.ts"),c=s("./src/WebGL/materials/InstancedMaterial.ts"),h=s("./src/WebGL/materials/LineBasicMaterial.ts"),st=s("./src/WebGL/materials/Material.ts"),nt=s("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),ot=s("./src/WebGL/materials/MeshLambertMaterial.ts"),xt=s("./src/WebGL/materials/MeshOutlineMaterial.ts"),vt=s("./src/WebGL/materials/SphereImposterMaterial.ts"),bt=s("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),St=s("./src/WebGL/materials/SpriteMaterial.ts"),Et=s("./src/WebGL/materials/StickImposterMaterial.ts"),Ct=s("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),ht=s("./src/WebGL/materials/VolumetricMaterial.ts")},"./src/WebGL/math/Quaternion.ts":(e,i,s)=>{s.r(i),s.d(i,{Quaternion:()=>a});class a{constructor(h,st,nt,ot){this.x=h||0,this.y=st||0,this.z=nt||0,this.w=ot!==void 0?ot:1}set(h,st,nt,ot){return this.x=h,this.y=st,this.z=nt,this.w=ot,this}copy(h){return this.x=h.x,this.y=h.y,this.z=h.z,this.w=h.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let h=this.length();return h===0?(this.x=0,this.y=0,this.z=0,this.w=1):(h=1/h,this.x*=h,this.y*=h,this.z*=h,this.w*=h),this}multiply(h){return this.multiplyQuaternions(this,h)}multiplyScalar(h){return this.x*=h,this.y*=h,this.z*=h,this.w*=h,this}multiplyQuaternions(h,st){const nt=h.x,ot=h.y,xt=h.z,vt=h.w,bt=st.x,St=st.y,Et=st.z,Ct=st.w;return this.x=nt*Ct+vt*bt+ot*Et-xt*St,this.y=ot*Ct+vt*St+xt*bt-nt*Et,this.z=xt*Ct+vt*Et+nt*St-ot*bt,this.w=vt*Ct-nt*bt-ot*St-xt*Et,this}sub(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z,this.w-=h.w,this}clone(){return new a(this.x,this.y,this.z,this.w)}setFromEuler(h){const st=Math.cos(h.x/2),nt=Math.cos(h.y/2),ot=Math.cos(h.z/2),xt=Math.sin(h.x/2),vt=Math.sin(h.y/2),bt=Math.sin(h.z/2);return this.x=xt*nt*ot+st*vt*bt,this.y=st*vt*ot-xt*nt*bt,this.z=st*nt*bt+xt*vt*ot,this.w=st*nt*ot-xt*vt*bt,this}}},"./src/WebGL/math/Vector2.ts":(e,i,s)=>{s.r(i),s.d(i,{Vector2:()=>a});class a{constructor(h,st){this.x=h||0,this.y=st||0}set(h,st){return this.x=h,this.y=st,this}subVectors(h,st){return this.x=h.x-st.x,this.y=h.y-st.y,this}copy(h){return this.x=h.x,this.y=h.y,this}clone(){return new a(this.x,this.y)}}},"./src/WebGL/math/index.ts":(e,i,s)=>{s.r(i),s.d(i,{Matrix3:()=>ot.Matrix3,Matrix4:()=>ot.Matrix4,Quaternion:()=>a.Quaternion,Ray:()=>ot.Ray,Vector2:()=>c.Vector2,Vector3:()=>ot.Vector3,clamp:()=>h.clamp,conversionMatrix3:()=>st.conversionMatrix3,degToRad:()=>nt.degToRad});var a=s("./src/WebGL/math/Quaternion.ts"),c=s("./src/WebGL/math/Vector2.ts"),h=s("./src/WebGL/math/utils/clamp.ts"),st=s("./src/WebGL/math/utils/conversionMatrix3.ts"),nt=s("./src/WebGL/math/utils/degToRad.ts"),ot=s("./src/WebGL/math/math.ts")},"./src/WebGL/math/math.ts":(e,i,s)=>{s.r(i),s.d(i,{Matrix3:()=>St,Matrix4:()=>vt,Ray:()=>Et,Vector3:()=>bt});var a=s("./src/WebGL/math/utils/degToRad.ts"),c=s("./src/WebGL/math/utils/clamp.ts"),h,st,nt,ot,xt;class vt{constructor(ht=1,d=0,b=0,ft=0,mt=0,_t=1,tt=0,gt=0,wt=0,yt=0,Tt=1,Mt=0,Pt=0,It=0,Lt=0,zt=1){typeof ht<"u"&&typeof ht!="number"?this.elements=new Float32Array(ht):(this.elements=new Float32Array(16),this.elements[0]=ht,this.elements[4]=d,this.elements[8]=b,this.elements[12]=ft,this.elements[1]=mt,this.elements[5]=_t,this.elements[9]=tt,this.elements[13]=gt,this.elements[2]=wt,this.elements[6]=yt,this.elements[10]=Tt,this.elements[14]=Mt,this.elements[3]=Pt,this.elements[7]=It,this.elements[11]=Lt,this.elements[15]=zt)}makeScale(ht,d,b){throw new Error("Method not implemented.")}set(ht,d,b,ft,mt,_t,tt,gt,wt,yt,Tt,Mt,Pt,It,Lt,zt){const jt=this.elements;return jt[0]=ht,jt[4]=d,jt[8]=b,jt[12]=ft,jt[1]=mt,jt[5]=_t,jt[9]=tt,jt[13]=gt,jt[2]=wt,jt[6]=yt,jt[10]=Tt,jt[14]=Mt,jt[3]=Pt,jt[7]=It,jt[11]=Lt,jt[15]=zt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(ht){const d=ht.elements;return this.set(d[0],d[4],d[8],d[12],d[1],d[5],d[9],d[13],d[2],d[6],d[10],d[14],d[3],d[7],d[11],d[15]),this}matrix3FromTopLeft(){const ht=this.elements;return new St(ht[0],ht[4],ht[8],ht[1],ht[5],ht[9],ht[2],ht[6],ht[10])}setRotationFromEuler(ht,d){const b=this.elements,{x:ft,y:mt,z:_t}=ht,tt=Math.cos(ft),gt=Math.sin(ft),wt=Math.cos(mt),yt=Math.sin(mt),Tt=Math.cos(_t),Mt=Math.sin(_t);if(d===void 0||d==="XYZ"){const Pt=tt*Tt,It=tt*Mt,Lt=gt*Tt,zt=gt*Mt;b[0]=wt*Tt,b[4]=-wt*Mt,b[8]=yt,b[1]=It+Lt*yt,b[5]=Pt-zt*yt,b[9]=-gt*wt,b[2]=zt-Pt*yt,b[6]=Lt+It*yt,b[10]=tt*wt}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${d}`);return this}setRotationFromQuaternion(ht){const d=this.elements,{x:b,y:ft,z:mt,w:_t}=ht,tt=b+b,gt=ft+ft,wt=mt+mt,yt=b*tt,Tt=b*gt,Mt=b*wt,Pt=ft*gt,It=ft*wt,Lt=mt*wt,zt=_t*tt,jt=_t*gt,Nt=_t*wt;return d[0]=1-(Pt+Lt),d[4]=Tt-Nt,d[8]=Mt+jt,d[1]=Tt+Nt,d[5]=1-(yt+Lt),d[9]=It-zt,d[2]=Mt-jt,d[6]=It+zt,d[10]=1-(yt+Pt),this}multiplyMatrices(ht,d){const b=ht.elements,ft=d.elements,mt=this.elements,_t=b[0],tt=b[4],gt=b[8],wt=b[12],yt=b[1],Tt=b[5],Mt=b[9],Pt=b[13],It=b[2],Lt=b[6],zt=b[10],jt=b[14],Nt=b[3],kt=b[7],Ot=b[11],Bt=b[15],Ut=ft[0],Ft=ft[4],Wt=ft[8],_i=ft[12],Qt=ft[1],on=ft[5],nn=ft[9],dn=ft[13],tn=ft[2],rn=ft[6],En=ft[10],bn=ft[14],Dn=ft[3],hn=ft[7],en=ft[11],xn=ft[15];return mt[0]=_t*Ut+tt*Qt+gt*tn+wt*Dn,mt[4]=_t*Ft+tt*on+gt*rn+wt*hn,mt[8]=_t*Wt+tt*nn+gt*En+wt*en,mt[12]=_t*_i+tt*dn+gt*bn+wt*xn,mt[1]=yt*Ut+Tt*Qt+Mt*tn+Pt*Dn,mt[5]=yt*Ft+Tt*on+Mt*rn+Pt*hn,mt[9]=yt*Wt+Tt*nn+Mt*En+Pt*en,mt[13]=yt*_i+Tt*dn+Mt*bn+Pt*xn,mt[2]=It*Ut+Lt*Qt+zt*tn+jt*Dn,mt[6]=It*Ft+Lt*on+zt*rn+jt*hn,mt[10]=It*Wt+Lt*nn+zt*En+jt*en,mt[14]=It*_i+Lt*dn+zt*bn+jt*xn,mt[3]=Nt*Ut+kt*Qt+Ot*tn+Bt*Dn,mt[7]=Nt*Ft+kt*on+Ot*rn+Bt*hn,mt[11]=Nt*Wt+kt*nn+Ot*En+Bt*en,mt[15]=Nt*_i+kt*dn+Ot*bn+Bt*xn,this}multiplyScalar(ht){const d=this.elements;return d[0]*=ht,d[4]*=ht,d[8]*=ht,d[12]*=ht,d[1]*=ht,d[5]*=ht,d[9]*=ht,d[13]*=ht,d[2]*=ht,d[6]*=ht,d[10]*=ht,d[14]*=ht,d[3]*=ht,d[7]*=ht,d[11]*=ht,d[15]*=ht,this}makeTranslation(ht,d,b){return this.set(1,0,0,ht,0,1,0,d,0,0,1,b,0,0,0,1),this}snap(ht){const d=Math.pow(10,4),b=this.elements;for(let ft=0;ft<16;ft++){const mt=Math.round(b[ft]);mt===Math.round(b[ft]*d)/d&&(b[ft]=mt)}return this}transpose(){const ht=this.elements;let d;return d=ht[1],ht[1]=ht[4],ht[4]=d,d=ht[2],ht[2]=ht[8],ht[8]=d,d=ht[6],ht[6]=ht[9],ht[9]=d,d=ht[3],ht[3]=ht[12],ht[12]=d,d=ht[7],ht[7]=ht[13],ht[13]=d,d=ht[11],ht[11]=ht[14],ht[14]=d,this}setPosition(ht){const d=this.elements;return d[12]=ht.x,d[13]=ht.y,d[14]=ht.z,this}translate(ht){const d=this.elements;return d[12]+=ht.x,d[13]+=ht.y,d[14]+=ht.z,this}getInverse(ht,d){const b=this.elements,ft=ht.elements,mt=ft[0],_t=ft[4],tt=ft[8],gt=ft[12],wt=ft[1],yt=ft[5],Tt=ft[9],Mt=ft[13],Pt=ft[2],It=ft[6],Lt=ft[10],zt=ft[14],jt=ft[3],Nt=ft[7],kt=ft[11],Ot=ft[15];b[0]=Tt*zt*Nt-Mt*Lt*Nt+Mt*It*kt-yt*zt*kt-Tt*It*Ot+yt*Lt*Ot,b[4]=gt*Lt*Nt-tt*zt*Nt-gt*It*kt+_t*zt*kt+tt*It*Ot-_t*Lt*Ot,b[8]=tt*Mt*Nt-gt*Tt*Nt+gt*yt*kt-_t*Mt*kt-tt*yt*Ot+_t*Tt*Ot,b[12]=gt*Tt*It-tt*Mt*It-gt*yt*Lt+_t*Mt*Lt+tt*yt*zt-_t*Tt*zt,b[1]=Mt*Lt*jt-Tt*zt*jt-Mt*Pt*kt+wt*zt*kt+Tt*Pt*Ot-wt*Lt*Ot,b[5]=tt*zt*jt-gt*Lt*jt+gt*Pt*kt-mt*zt*kt-tt*Pt*Ot+mt*Lt*Ot,b[9]=gt*Tt*jt-tt*Mt*jt-gt*wt*kt+mt*Mt*kt+tt*wt*Ot-mt*Tt*Ot,b[13]=tt*Mt*Pt-gt*Tt*Pt+gt*wt*Lt-mt*Mt*Lt-tt*wt*zt+mt*Tt*zt,b[2]=yt*zt*jt-Mt*It*jt+Mt*Pt*Nt-wt*zt*Nt-yt*Pt*Ot+wt*It*Ot,b[6]=gt*It*jt-_t*zt*jt-gt*Pt*Nt+mt*zt*Nt+_t*Pt*Ot-mt*It*Ot,b[10]=_t*Mt*jt-gt*yt*jt+gt*wt*Nt-mt*Mt*Nt-_t*wt*Ot+mt*yt*Ot,b[14]=gt*yt*Pt-_t*Mt*Pt-gt*wt*It+mt*Mt*It+_t*wt*zt-mt*yt*zt,b[3]=Tt*It*jt-yt*Lt*jt-Tt*Pt*Nt+wt*Lt*Nt+yt*Pt*kt-wt*It*kt,b[7]=_t*Lt*jt-tt*It*jt+tt*Pt*Nt-mt*Lt*Nt-_t*Pt*kt+mt*It*kt,b[11]=tt*yt*jt-_t*Tt*jt-tt*wt*Nt+mt*Tt*Nt+_t*wt*kt-mt*yt*kt,b[15]=_t*Tt*Pt-tt*yt*Pt+tt*wt*It-mt*Tt*It-_t*wt*Lt+mt*yt*Lt;const Bt=mt*b[0]+wt*b[4]+Pt*b[8]+jt*b[12];if(Bt===0){const Ut="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(d)throw new Error(Ut);return console.warn(Ut),this.identity(),this}return this.multiplyScalar(1/Bt),this}isReflected(){const ht=this.elements,d=ht[0],b=ht[4],ft=ht[8],mt=ht[1],_t=ht[5],tt=ht[9],gt=ht[2],wt=ht[6],yt=ht[10];return d*_t*yt+mt*wt*ft+gt*b*tt-gt*_t*ft-mt*b*yt-d*wt*tt<0}scale(ht){const d=this.elements,{x:b}=ht,{y:ft}=ht,{z:mt}=ht;return d[0]*=b,d[4]*=ft,d[8]*=mt,d[1]*=b,d[5]*=ft,d[9]*=mt,d[2]*=b,d[6]*=ft,d[10]*=mt,d[3]*=b,d[7]*=ft,d[11]*=mt,this}getMaxScaleOnAxis(){const ht=this.elements,d=ht[0]*ht[0]+ht[1]*ht[1]+ht[2]*ht[2],b=ht[4]*ht[4]+ht[5]*ht[5]+ht[6]*ht[6],ft=ht[8]*ht[8]+ht[9]*ht[9]+ht[10]*ht[10];return Math.sqrt(Math.max(d,Math.max(b,ft)))}makeFrustum(ht,d,b,ft,mt,_t){const tt=this.elements,gt=2*mt/(d-ht),wt=2*mt/(ft-b),yt=(d+ht)/(d-ht),Tt=(ft+b)/(ft-b),Mt=-(_t+mt)/(_t-mt),Pt=-2*_t*mt/(_t-mt);return tt[0]=gt,tt[4]=0,tt[8]=yt,tt[12]=0,tt[1]=0,tt[5]=wt,tt[9]=Tt,tt[13]=0,tt[2]=0,tt[6]=0,tt[10]=Mt,tt[14]=Pt,tt[3]=0,tt[7]=0,tt[11]=-1,tt[15]=0,this}makePerspective(ht,d,b,ft){const mt=b*Math.tan((0,a.degToRad)(ht*.5)),_t=-mt,tt=_t*d,gt=mt*d;return this.makeFrustum(tt,gt,_t,mt,b,ft)}makeOrthographic(ht,d,b,ft,mt,_t){const tt=this.elements,gt=1/(d-ht),wt=1/(b-ft),yt=1/(_t-mt),Tt=(d+ht)*gt,Mt=(b+ft)*wt,Pt=(_t+mt)*yt;return tt[0]=2*gt,tt[4]=0,tt[8]=0,tt[12]=-Tt,tt[1]=0,tt[5]=2*wt,tt[9]=0,tt[13]=-Mt,tt[2]=0,tt[6]=0,tt[10]=-2*yt,tt[14]=-Pt,tt[3]=0,tt[7]=0,tt[11]=0,tt[15]=1,this}isEqual(ht){const d=ht.elements,b=this.elements;return b[0]===d[0]&&b[4]===d[4]&&b[8]===d[8]&&b[12]===d[12]&&b[1]===d[1]&&b[5]===d[5]&&b[9]===d[9]&&b[13]===d[13]&&b[2]===d[2]&&b[6]===d[6]&&b[10]===d[10]&&b[14]===d[14]&&b[3]===d[3]&&b[7]===d[7]&&b[11]===d[11]&&b[15]===d[15]}clone(){const ht=this.elements;return new vt(ht[0],ht[4],ht[8],ht[12],ht[1],ht[5],ht[9],ht[13],ht[2],ht[6],ht[10],ht[14],ht[3],ht[7],ht[11],ht[15])}isIdentity(){const ht=this.elements;return ht[0]===1&&ht[4]===0&&ht[8]===0&&ht[12]===0&&ht[1]===0&&ht[5]===1&&ht[9]===0&&ht[13]===0&&ht[2]===0&&ht[6]===0&&ht[10]===1&&ht[14]===0&&ht[3]===0&&ht[7]===0&&ht[11]===0&&ht[15]===1}isNearlyIdentity(ht){return this.clone().snap(ht).isIdentity()}getScale(ht){const d=this.elements;return ht=ht||new bt,nt.set(d[0],d[1],d[2]),ot.set(d[4],d[5],d[6]),xt.set(d[8],d[9],d[10]),ht.x=nt.length(),ht.y=ot.length(),ht.z=xt.length(),ht}lookAt(ht,d,b){const ft=this.elements;return xt.subVectors(ht,d).normalize(),xt.length()===0&&(xt.z=1),nt.crossVectors(b,xt).normalize(),nt.length()===0&&(xt.x+=1e-4,nt.crossVectors(b,xt).normalize()),ot.crossVectors(xt,nt),ft[0]=nt.x,ft[4]=ot.x,ft[8]=xt.x,ft[1]=nt.y,ft[5]=ot.y,ft[9]=xt.y,ft[2]=nt.z,ft[6]=ot.z,ft[10]=xt.z,this}compose(ht,d,b){const ft=this.elements;return h.identity(),h.setRotationFromQuaternion(d),st.makeScale(b.x,b.y,b.z),this.multiplyMatrices(h,st),ft[12]=ht.x,ft[13]=ht.y,ft[14]=ht.z,this}}h=new vt,st=new vt;class bt{constructor(ht,d,b){this.x=ht||0,this.y=d||0,this.z=b||0,this.atomid=void 0}set(ht,d,b){return this.x=ht,this.y=d,this.z=b,this}copy(ht){return this.x=ht.x,this.y=ht.y,this.z=ht.z,this}add(ht){return this.x+=ht.x,this.y+=ht.y,this.z+=ht.z,this}addVectors(ht,d){return this.x=ht.x+d.x,this.y=ht.y+d.y,this.z=ht.z+d.z,this}multiplyVectors(ht,d){return this.x=ht.x*d.x,this.y=ht.y*d.y,this.z=ht.z*d.z,this}sub(ht){return this.x-=ht.x,this.y-=ht.y,this.z-=ht.z,this}subVectors(ht,d){return this.x=ht.x-d.x,this.y=ht.y-d.y,this.z=ht.z-d.z,this}multiplyScalar(ht){return this.x*=ht,this.y*=ht,this.z*=ht,this}divideScalar(ht){return ht!==0?(this.x/=ht,this.y/=ht,this.z/=ht):(this.x=0,this.y=0,this.z=0),this}max(ht){return this.x=Math.max(this.x,ht.x),this.y=Math.max(this.y,ht.y),this.z=Math.max(this.z,ht.z),this}min(ht){return this.x=Math.min(this.x,ht.x),this.y=Math.min(this.y,ht.y),this.z=Math.min(this.z,ht.z),this}distanceTo(ht){return Math.sqrt(this.distanceToSquared(ht))}distanceToSquared(ht){const d=this.x-ht.x,b=this.y-ht.y,ft=this.z-ht.z;return d*d+b*b+ft*ft}applyMatrix3(ht){const{x:d}=this,{y:b}=this,{z:ft}=this,mt=ht.elements;return this.x=mt[0]*d+mt[3]*b+mt[6]*ft,this.y=mt[1]*d+mt[4]*b+mt[7]*ft,this.z=mt[2]*d+mt[5]*b+mt[8]*ft,this}applyMatrix4(ht){const{x:d}=this,{y:b}=this,{z:ft}=this,mt=ht.elements;return this.x=mt[0]*d+mt[4]*b+mt[8]*ft+mt[12],this.y=mt[1]*d+mt[5]*b+mt[9]*ft+mt[13],this.z=mt[2]*d+mt[6]*b+mt[10]*ft+mt[14],this}applyProjection(ht){const{x:d}=this,{y:b}=this,{z:ft}=this,mt=ht.elements,_t=mt[3]*d+mt[7]*b+mt[11]*ft+mt[15];return this.x=(mt[0]*d+mt[4]*b+mt[8]*ft+mt[12])/_t,this.y=(mt[1]*d+mt[5]*b+mt[9]*ft+mt[13])/_t,this.z=(mt[2]*d+mt[6]*b+mt[10]*ft+mt[14])/_t,this}applyQuaternion(ht){const{x:d}=this,{y:b}=this,{z:ft}=this,mt=ht.x,_t=ht.y,tt=ht.z,gt=ht.w,wt={};wt.x=2*(b*tt-ft*_t),wt.y=2*(ft*mt-d*tt),wt.z=2*(d*_t-b*mt);const yt={};return yt.x=wt.y*tt-wt.z*_t,yt.y=wt.z*mt-wt.x*tt,yt.z=wt.x*_t-wt.y*mt,this.x=d+gt*wt.x+yt.x,this.y=b+gt*wt.y+yt.y,this.z=ft+gt*wt.z+yt.z,this}negate(){return this.multiplyScalar(-1)}dot(ht){return this.x*ht.x+this.y*ht.y+this.z*ht.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(ht){const{x:d}=this,{y:b}=this,{z:ft}=this;return this.x=b*ht.z-ft*ht.y,this.y=ft*ht.x-d*ht.z,this.z=d*ht.y-b*ht.x,this}crossVectors(ht,d){return this.x=ht.y*d.z-ht.z*d.y,this.y=ht.z*d.x-ht.x*d.z,this.z=ht.x*d.y-ht.y*d.x,this}equals(ht){return this.x==ht.x&&this.y==ht.y&&this.z==ht.z}getPositionFromMatrix(ht){return this.x=ht.elements[12],this.y=ht.elements[13],this.z=ht.elements[14],this}setEulerFromRotationMatrix(ht,d){const b=ht.elements,ft=b[0],mt=b[4],_t=b[8],tt=b[5],gt=b[9],wt=b[6],yt=b[10];return d===void 0||d==="XYZ"?(this.y=Math.asin((0,c.clamp)(_t,-1,1)),Math.abs(_t)<.99999?(this.x=Math.atan2(-gt,yt),this.z=Math.atan2(-mt,ft)):(this.x=Math.atan2(wt,tt),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${d}`),this}rotateAboutVector(ht,d){ht.normalize();const b=Math.cos(d),ft=Math.sin(d),mt=this.clone().multiplyScalar(b),_t=ht.clone().cross(this).multiplyScalar(ft),tt=ht.clone().multiplyScalar(ht.clone().dot(this)).multiplyScalar(1-b),gt=mt.add(_t).add(tt);return this.x=gt.x,this.y=gt.y,this.z=gt.z,this}setFromMatrixPosition(ht){const d=ht.elements;return this.x=d[12],this.y=d[13],this.z=d[14],this}transformDirection(ht){const{x:d}=this,{y:b}=this,{z:ft}=this,mt=ht.elements;return this.x=mt[0]*d+mt[4]*b+mt[8]*ft,this.y=mt[1]*d+mt[5]*b+mt[9]*ft,this.z=mt[2]*d+mt[6]*b+mt[10]*ft,this.normalize()}clone(){return new bt(this.x,this.y,this.z)}unproject(ht){const d=h;return d.multiplyMatrices(ht.matrixWorld,d.getInverse(ht.projectionMatrix)),this.applyMatrix4(d)}}nt=new bt,ot=new bt,xt=new bt;class St{constructor(ht=1,d=0,b=0,ft=0,mt=1,_t=0,tt=0,gt=0,wt=1){this.elements=new Float32Array(9),this.set(ht,d,b,ft,mt,_t,tt,gt,wt)}set(ht,d,b,ft,mt,_t,tt,gt,wt){const yt=this.elements;return yt[0]=ht,yt[3]=d,yt[6]=b,yt[1]=ft,yt[4]=mt,yt[7]=_t,yt[2]=tt,yt[5]=gt,yt[8]=wt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(ht){const d=ht.elements;this.set(d[0],d[3],d[6],d[1],d[4],d[7],d[2],d[5],d[8])}multiplyScalar(ht){const d=this.elements;return d[0]*=ht,d[3]*=ht,d[6]*=ht,d[1]*=ht,d[4]*=ht,d[7]*=ht,d[2]*=ht,d[5]*=ht,d[8]*=ht,this}getInverse3(ht){const d=ht.elements,b=this.elements;b[0]=d[4]*d[8]-d[5]*d[7],b[3]=d[6]*d[5]-d[3]*d[8],b[6]=d[3]*d[7]-d[6]*d[4],b[1]=d[7]*d[2]-d[1]*d[8],b[4]=d[0]*d[8]-d[6]*d[2],b[7]=d[1]*d[6]-d[0]*d[7],b[2]=d[1]*d[5]-d[2]*d[4],b[5]=d[2]*d[3]-d[0]*d[5],b[8]=d[0]*d[4]-d[1]*d[3];const ft=d[0]*b[0]+d[3]*b[1]+d[6]*b[2];return this.multiplyScalar(1/ft),this}getInverse(ht,d){const b=ht.elements,ft=this.elements;ft[0]=b[10]*b[5]-b[6]*b[9],ft[1]=-b[10]*b[1]+b[2]*b[9],ft[2]=b[6]*b[1]-b[2]*b[5],ft[3]=-b[10]*b[4]+b[6]*b[8],ft[4]=b[10]*b[0]-b[2]*b[8],ft[5]=-b[6]*b[0]+b[2]*b[4],ft[6]=b[9]*b[4]-b[5]*b[8],ft[7]=-b[9]*b[0]+b[1]*b[8],ft[8]=b[5]*b[0]-b[1]*b[4];const mt=b[0]*ft[0]+b[1]*ft[3]+b[2]*ft[6];if(mt===0){const _t="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(d)throw new Error(_t);return console.warn(_t),this.identity(),this}return this.multiplyScalar(1/mt),this}getDeterminant(){const ht=this.elements;return ht[0]*ht[4]*ht[8]+ht[1]*ht[5]*ht[6]+ht[2]*ht[3]*ht[7]-ht[2]*ht[4]*ht[6]-ht[1]*ht[3]*ht[8]-ht[0]*ht[5]*ht[7]}transpose(){let ht;const d=this.elements;return ht=d[1],d[1]=d[3],d[3]=ht,ht=d[2],d[2]=d[6],d[6]=ht,ht=d[5],d[5]=d[7],d[7]=ht,this}clone(){const ht=this.elements;return new St(ht[0],ht[3],ht[6],ht[1],ht[4],ht[7],ht[2],ht[5],ht[8])}getMatrix4(){const ht=this.elements;return new vt(ht[0],ht[3],ht[6],0,ht[1],ht[4],ht[7],0,ht[2],ht[5],ht[8],0)}}class Et{constructor(ht,d){this.origin=ht!==void 0?ht:new bt,this.direction=d!==void 0?d:new bt}set(ht,d){return this.origin.copy(ht),this.direction.copy(d),this}copy(ht){return this.origin.copy(ht.origin),this.direction.copy(ht.direction),this}at(ht,d){return(d||new bt).copy(this.direction).multiplyScalar(ht).add(this.origin)}recast(ht){const d=nt;return this.origin.copy(this.at(ht,d)),this}closestPointToPoint(ht,d){const b=d||new bt;b.subVectors(ht,this.origin);const ft=b.dot(this.direction);return b.copy(this.direction).multiplyScalar(ft).add(this.origin)}distanceToPoint(ht){const d=nt,b=d.subVectors(ht,this.origin).dot(this.direction);return d.copy(this.direction).multiplyScalar(b).add(this.origin),d.distanceTo(ht)}isIntersectionCylinder(){}isIntersectionSphere(ht){return this.distanceToPoint(ht.center)<=ht.radius}isIntersectionPlane(ht){return ht.normal.dot(this.direction)!==0||ht.distanceToPoint(this.origin)===0}distanceToPlane(ht){const d=ht.normal.dot(this.direction);return d===0?ht.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(ht.normal)+ht.constant)/d}intersectPlane(ht,d){const b=this.distanceToPlane(ht);if(b!==void 0)return this.at(b,d)}applyMatrix4(ht){return this.direction.add(this.origin).applyMatrix4(ht),this.origin.applyMatrix4(ht),this.direction.sub(this.origin),this}clone(){return new Et().copy(this)}}},"./src/WebGL/math/utils/clamp.ts":(e,i,s)=>{s.r(i),s.d(i,{clamp:()=>a});function a(c,h,st){return Math.min(Math.max(c,h),st)}},"./src/WebGL/math/utils/conversionMatrix3.ts":(e,i,s)=>{s.r(i),s.d(i,{conversionMatrix3:()=>c});var a=s("./src/WebGL/math/math.ts");function c(h,st,nt,ot,xt,vt){ot=ot*Math.PI/180,xt=xt*Math.PI/180,vt=vt*Math.PI/180;const bt=b=>b*b,St=Math.cos(ot),Et=Math.cos(xt),Ct=Math.cos(vt),ht=Math.sin(vt);return new a.Matrix3(h,st*Ct,nt*Et,0,st*ht,nt*(St-Et*Ct)/ht,0,0,nt*Math.sqrt(1-bt(St)-bt(Et)-bt(Ct)+2*St*Et*Ct)/ht)}},"./src/WebGL/math/utils/degToRad.ts":(e,i,s)=>{s.r(i),s.d(i,{degToRad:()=>c});const a=Math.PI/180;function c(h){return h*a}},"./src/WebGL/objects/Line.ts":(e,i,s)=>{s.r(i),s.d(i,{Line:()=>st,LineStyle:()=>h});var a=s("./src/WebGL/materials/index.ts"),c=s("./src/WebGL/core/index.ts"),h;(function(nt){nt[nt.LineStrip=0]="LineStrip",nt[nt.LinePieces=1]="LinePieces"})(h||(h={}));class st extends c.Object3D{constructor(ot,xt=new a.LineBasicMaterial({color:Math.random()*16777215}),vt=h.LineStrip){super(),this.geometry=ot,this.material=xt,this.type=vt}clone(ot=new st(this.geometry,this.material,this.type)){return super.clone.call(this,ot),ot}}},"./src/WebGL/objects/Mesh.ts":(e,i,s)=>{s.r(i),s.d(i,{Mesh:()=>c});var a=s("./src/WebGL/core/index.ts");class c extends a.Object3D{constructor(st,nt){super(),this.geometry=st,this.material=nt}clone(st){return st===void 0&&(st=new c(this.geometry,this.material)),super.clone.call(this,st),st}}},"./src/WebGL/objects/Sprite.ts":(e,i,s)=>{s.r(i),s.d(i,{Sprite:()=>h});var a=s("./src/WebGL/materials/index.ts"),c=s("./src/WebGL/core/index.ts");class h extends c.Object3D{constructor(nt=new a.SpriteMaterial){super(),this.material=nt,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(nt=new h(this.material)){return c.Object3D.prototype.clone.call(this,nt),nt}}},"./src/WebGL/objects/index.ts":(e,i,s)=>{s.r(i),s.d(i,{Line:()=>a.Line,LineStyle:()=>a.LineStyle,Mesh:()=>c.Mesh,Sprite:()=>h.Sprite});var a=s("./src/WebGL/objects/Line.ts"),c=s("./src/WebGL/objects/Mesh.ts"),h=s("./src/WebGL/objects/Sprite.ts")},"./src/WebGL/shaders/ShaderType.ts":(e,i,s)=>{s.r(i)},"./src/WebGL/shaders/index.ts":(e,i,s)=>{s.r(i),s.d(i,{ShaderLib:()=>a.ShaderLib,ShaderUtils:()=>c.ShaderUtils,basic:()=>a.basic,clone:()=>c.clone,instanced:()=>a.instanced,lambert:()=>a.lambert,lambertdouble:()=>a.lambertdouble,outline:()=>a.outline,screen:()=>a.screen,screenaa:()=>a.screenaa,sphereimposter:()=>a.sphereimposter,sphereimposteroutline:()=>a.sphereimposteroutline,sprite:()=>a.sprite,stickimposter:()=>a.stickimposter,stickimposteroutline:()=>a.stickimposteroutline,volumetric:()=>a.volumetric});var a=s("./src/WebGL/shaders/lib/index.ts"),c=s("./src/WebGL/shaders/utils/index.ts");s("./src/WebGL/shaders/ShaderType.ts")},"./src/WebGL/shaders/lib/basic/index.ts":(e,i,s)=>{s.r(i),s.d(i,{basic:()=>st});var a=s("./src/WebGL/shaders/lib/basic/uniforms.ts"),c=s("./src/WebGL/shaders/lib/basic/basic.frag"),h=s("./src/WebGL/shaders/lib/basic/basic.vert");const st={vertexShader:h.default.replace("#define GLSLIFY 1",""),fragmentShader:c.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/basic/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},"./src/WebGL/shaders/lib/blur/index.ts":(e,i,s)=>{s.r(i),s.d(i,{blur:()=>st});var a=s("./src/WebGL/shaders/lib/blur/uniforms.ts"),c=s("./src/WebGL/shaders/lib/blur/blur.frag"),h=s("./src/WebGL/shaders/lib/blur/blur.vert");const st={fragmentShader:c.default,vertexShader:h.default,uniforms:a.uniforms}},"./src/WebGL/shaders/lib/blur/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>a});const a={}},"./src/WebGL/shaders/lib/index.ts":(e,i,s)=>{s.r(i),s.d(i,{ShaderLib:()=>ft,basic:()=>a.basic,instanced:()=>c.instanced,lambert:()=>h.lambert,lambertdouble:()=>st.lambertdouble,outline:()=>nt.outline,screen:()=>ot.screen,screenaa:()=>xt.screenaa,sphereimposter:()=>vt.sphereimposter,sphereimposteroutline:()=>bt.sphereimposteroutline,sprite:()=>St.sprite,stickimposter:()=>Et.stickimposter,stickimposteroutline:()=>Ct.stickimposteroutline,volumetric:()=>ht.volumetric});var a=s("./src/WebGL/shaders/lib/basic/index.ts"),c=s("./src/WebGL/shaders/lib/instanced/index.ts"),h=s("./src/WebGL/shaders/lib/lambert/index.ts"),st=s("./src/WebGL/shaders/lib/lambertdouble/index.ts"),nt=s("./src/WebGL/shaders/lib/outline/index.ts"),ot=s("./src/WebGL/shaders/lib/screen/index.ts"),xt=s("./src/WebGL/shaders/lib/screenaa/index.ts"),vt=s("./src/WebGL/shaders/lib/sphereimposter/index.ts"),bt=s("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),St=s("./src/WebGL/shaders/lib/sprite/index.ts"),Et=s("./src/WebGL/shaders/lib/stickimposter/index.ts"),Ct=s("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),ht=s("./src/WebGL/shaders/lib/volumetric/index.ts"),d=s("./src/WebGL/shaders/lib/ssao/index.ts"),b=s("./src/WebGL/shaders/lib/blur/index.ts");const ft={basic:a.basic,blur:b.blur,instanced:c.instanced,lambert:h.lambert,lambertdouble:st.lambertdouble,outline:nt.outline,screen:ot.screen,screenaa:xt.screenaa,ssao:d.ssao,sphereimposter:vt.sphereimposter,sphereimposteroutline:bt.sphereimposteroutline,sprite:St.sprite,stickimposter:Et.stickimposter,stickimposteroutline:Ct.stickimposteroutline,volumetric:ht.volumetric}},"./src/WebGL/shaders/lib/instanced/index.ts":(e,i,s)=>{s.r(i),s.d(i,{instanced:()=>st});var a=s("./src/WebGL/shaders/lib/instanced/uniforms.ts"),c=s("./src/WebGL/shaders/lib/instanced/instanced.frag"),h=s("./src/WebGL/shaders/lib/instanced/instanced.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/instanced/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambert/index.ts":(e,i,s)=>{s.r(i),s.d(i,{lambert:()=>st});var a=s("./src/WebGL/shaders/lib/lambert/uniforms.ts"),c=s("./src/WebGL/shaders/lib/lambert/lambert.frag"),h=s("./src/WebGL/shaders/lib/lambert/lambert.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/lambert/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambertdouble/index.ts":(e,i,s)=>{s.r(i),s.d(i,{lambertdouble:()=>st});var a=s("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),c=s("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),h=s("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/outline/index.ts":(e,i,s)=>{s.r(i),s.d(i,{outline:()=>st});var a=s("./src/WebGL/shaders/lib/outline/uniforms.ts"),c=s("./src/WebGL/shaders/lib/outline/outline.frag"),h=s("./src/WebGL/shaders/lib/outline/outline.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/outline/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/screen/index.ts":(e,i,s)=>{s.r(i),s.d(i,{screen:()=>st});var a=s("./src/WebGL/shaders/lib/screen/uniforms.ts"),c=s("./src/WebGL/shaders/lib/screen/screen.frag"),h=s("./src/WebGL/shaders/lib/screen/screen.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/screen/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>a});const a={}},"./src/WebGL/shaders/lib/screenaa/index.ts":(e,i,s)=>{s.r(i),s.d(i,{screenaa:()=>st});var a=s("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),c=s("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),h=s("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/screenaa/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>a});const a={}},"./src/WebGL/shaders/lib/sphereimposter/index.ts":(e,i,s)=>{s.r(i),s.d(i,{sphereimposter:()=>st});var a=s("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),c=s("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),h=s("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const st={vertexShader:h.default.replace("#define GLSLIFY 1",""),fragmentShader:c.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":(e,i,s)=>{s.r(i),s.d(i,{sphereimposteroutline:()=>st});var a=s("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),c=s("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),h=s("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/sprite/index.ts":(e,i,s)=>{s.r(i),s.d(i,{sprite:()=>st});var a=s("./src/WebGL/shaders/lib/sprite/uniforms.ts"),c=s("./src/WebGL/shaders/lib/sprite/sprite.frag"),h=s("./src/WebGL/shaders/lib/sprite/sprite.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/sprite/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>a});const a={}},"./src/WebGL/shaders/lib/ssao/index.ts":(e,i,s)=>{s.r(i),s.d(i,{ssao:()=>st});var a=s("./src/WebGL/shaders/lib/ssao/uniforms.ts"),c=s("./src/WebGL/shaders/lib/ssao/ssao.frag"),h=s("./src/WebGL/shaders/lib/ssao/ssao.vert");const st={fragmentShader:c.default,vertexShader:h.default,uniforms:a.uniforms}},"./src/WebGL/shaders/lib/ssao/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>a});const a={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/stickimposter/index.ts":(e,i,s)=>{s.r(i),s.d(i,{stickimposter:()=>ot});var a=s("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),c=s("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),h=s("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),st=s("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const ot={fragmentShader:[c.default,h.default].join(`
`),vertexShader:st.default,uniforms:a.uniforms}},"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":(e,i,s)=>{s.r(i),s.d(i,{stickimposteroutline:()=>nt});var a=s("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),c=s("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),h=s("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const nt={fragmentShader:c.default+"gl_FragColor = vec4(color,1.0);}",vertexShader:h.default,uniforms:a.uniforms}},"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new a.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/volumetric/index.ts":(e,i,s)=>{s.r(i),s.d(i,{volumetric:()=>st});var a=s("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),c=s("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),h=s("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const st={fragmentShader:c.default.replace("#define GLSLIFY 1",""),vertexShader:h.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}},"./src/WebGL/shaders/lib/volumetric/uniforms.ts":(e,i,s)=>{s.r(i),s.d(i,{uniforms:()=>c});var a=s("./src/colors.ts");const c={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},"./src/WebGL/shaders/utils/clone.ts":(e,i,s)=>{s.r(i),s.d(i,{clone:()=>c});var a=s("./src/colors.ts");function c(h){let st={};for(const ot in h){st[ot]={},st[ot].type=h[ot].type;var nt=h[ot].value;nt instanceof a.Color?st[ot].value=nt.clone():typeof nt=="number"?st[ot].value=nt:nt instanceof Array?st[ot].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return st}},"./src/WebGL/shaders/utils/index.ts":(e,i,s)=>{s.r(i),s.d(i,{ShaderUtils:()=>c,clone:()=>a.clone});var a=s("./src/WebGL/shaders/utils/clone.ts");const c={clone:a.clone}},"./src/WebGL/shapes/Cylinder.ts":(e,i,s)=>{s.r(i),s.d(i,{Cylinder:()=>h});var a=s("./src/WebGL/math/index.ts");let c=new a.Vector3;class h{constructor(nt=new a.Vector3,ot=new a.Vector3,xt=0){this.c1=nt,this.c2=ot,this.radius=xt,this.direction=new a.Vector3().subVectors(this.c2,this.c1).normalize()}copy(nt){return this.c1.copy(nt.c1),this.c2.copy(nt.c2),this.direction.copy(nt.direction),this.radius=nt.radius,this}lengthSq(){return c.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(nt){return this.direction.add(this.c1).applyMatrix4(nt),this.c1.applyMatrix4(nt),this.c2.applyMatrix4(nt),this.direction.sub(this.c1).normalize(),this.radius=this.radius*nt.getMaxScaleOnAxis(),this}}},"./src/WebGL/shapes/Sphere.ts":(e,i,s)=>{s.r(i),s.d(i,{Sphere:()=>c});var a=s("./src/WebGL/math/index.ts");class c{constructor(st={x:0,y:0,z:0},nt=0){this.center=new a.Vector3(st.x,st.y,st.z),this.radius=nt}set(st,nt){return this.center.copy(st),this.radius=nt,this}copy(st){return this.center.copy(st.center),this.radius=st.radius,this}applyMatrix4(st){return this.center.applyMatrix4(st),this.radius=this.radius*st.getMaxScaleOnAxis(),this}translate(st){return this.center.add(st),this}equals(st){return st.center.equals(this.center)&&st.radius===this.radius}clone(){return new c().copy(this)}}},"./src/WebGL/shapes/Triangle.ts":(e,i,s)=>{s.r(i),s.d(i,{Triangle:()=>h});var a=s("./src/WebGL/math/index.ts");const c=new a.Vector3;class h{constructor(nt=new a.Vector3,ot=new a.Vector3,xt=new a.Vector3){this.a=nt,this.b=ot,this.c=xt}copy(nt){return this.a.copy(nt.a),this.b.copy(nt.b),this.c.copy(nt.c),this}applyMatrix4(nt){return this.a.applyMatrix4(nt),this.b.applyMatrix4(nt),this.c.applyMatrix4(nt),this}getNormal(){var nt=this.a.clone();return nt.sub(this.b),c.subVectors(this.c,this.b),nt.cross(c),nt.normalize(),nt}}},"./src/WebGL/shapes/index.ts":(e,i,s)=>{s.r(i),s.d(i,{Cylinder:()=>c.Cylinder,Sphere:()=>a.Sphere,Triangle:()=>h.Triangle});var a=s("./src/WebGL/shapes/Sphere.ts"),c=s("./src/WebGL/shapes/Cylinder.ts"),h=s("./src/WebGL/shapes/Triangle.ts")},"./src/autoload.ts":(e,i,s)=>{s.r(i),s.d(i,{autoinit:()=>nt,autoload:()=>vt,processing_autoinit:()=>ot,viewers:()=>xt});var a=s("./src/GLViewer.ts"),c=s("./src/ProteinSurface4.ts"),h=s("./src/utilities.ts"),st=s("./src/colors.ts"),nt=!1,ot=!1,xt={};function vt(bt,St){var Et,Ct,ht;if(document.querySelector(".viewer_3Dmoljs")!=null&&(nt=!0),nt){ot=!0,bt=bt??null;var d=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(b=>{var ft=[],mt=[],_t="";b.style.position=="static"&&(b.style.position="relative");var tt=null;if(ht=null,b.dataset.pdb)ft.push("https://files.rcsb.org/view/"+b.dataset.pdb+".pdb"),mt.push("pdb");else if(b.dataset.cid)mt.push("sdf"),ft.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+b.dataset.cid+"/SDF?record_type=3d");else if(b.dataset.href||b.dataset.url){if(b.dataset.href?_t=b.dataset.href:_t=b.dataset.url,ft.push(_t),ht=_t.substring(_t.lastIndexOf(".")+1),ht=="gz"){let hn=_t.substring(0,_t.lastIndexOf(".")).lastIndexOf(".");ht=_t.substring(hn+1)}mt.push(ht);var gt=_t.substring(_t.lastIndexOf("/")+1,_t.lastIndexOf("."));gt=="/"&&(gt=_t.substring(_t.lastIndexOf("/")+1)),b.dataset[mt[mt.length-1]]=gt}let wt=b.dataset;for(Et in wt)Et.substring(0,3)==="pdb"&&Et!=="pdb"?(ft.push("https://files.rcsb.org/view/"+wt[Et]+".pdb"),mt.push("pdb")):Et.substring(0,4)==="href"&&Et!=="href"?(_t=wt[Et],ft.push(_t),mt.push(_t.substring(_t.lastIndexOf(".")+1))):Et.substring(0,3)==="cid"&&Et!=="cid"&&(ft.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+wt[Et]+"/SDF?record_type=3d"),mt.push("sdf"));var yt={};b.dataset.options&&(yt=(0,h.specStringToObject)(b.dataset.options));var Tt=st.CC.color(b.dataset.backgroundcolor),Mt=b.dataset.backgroundalpha;Mt=Mt==null?1:parseFloat(Mt);var Pt={line:{}};b.dataset.style&&(Pt=(0,h.specStringToObject)(b.dataset.style));var It={};b.dataset.select&&(It=(0,h.specStringToObject)(b.dataset.select));var Lt=[],zt=[],jt=[],Nt={},kt=null,Ot=b.dataset,Bt=/style(.+)/,Ut=/surface(.*)/,Ft=/labelres(.*)/,Wt=[];for(Ct in Ot)Object.prototype.hasOwnProperty.call(Ot,Ct)&&Wt.push(Ct);for(Wt.sort(),Et=0;Et<Wt.length;Et++){Ct=Wt[Et];var _i=Bt.exec(Ct),Qt,on,nn;_i&&(Qt="select"+_i[1],on=(0,h.specStringToObject)(Ot[Qt]),nn=(0,h.specStringToObject)(Ot[Ct]),Lt.push([on,nn])),_i=Ut.exec(Ct),_i&&(Qt="select"+_i[1],on=(0,h.specStringToObject)(Ot[Qt]),nn=(0,h.specStringToObject)(Ot[Ct]),zt.push([on,nn])),_i=Ft.exec(Ct),_i&&(Qt="select"+_i[1],on=(0,h.specStringToObject)(Ot[Qt]),nn=(0,h.specStringToObject)(Ot[Ct]),jt.push([on,nn])),Ct=="zoomto"&&(Nt=(0,h.specStringToObject)(Ot[Ct])),Ct=="spin"&&(kt=(0,h.specStringToObject)(Ot[Ct]))}var dn=function(hn){for(hn.setStyle(It,Pt),tt&&tt.createSelectionAndStyle(It,Pt),Et=0;Et<Lt.length;Et++){let en=Lt[Et][0]||{},xn=Lt[Et][1]||{line:{}};hn.setStyle(en,xn),tt&&tt.createSelectionAndStyle(It,Pt)}for(Et=0;Et<zt.length;Et++){let en=zt[Et][0]||{},xn=zt[Et][1]||{};tt?hn.addSurface(c.SurfaceType.VDW,xn,en,en).then(In=>{tt.loadSurface("VDW",en,xn,In)}):hn.addSurface(c.SurfaceType.VDW,xn,en,en)}for(Et=0;Et<jt.length;Et++){let en=jt[Et][0]||{},xn=jt[Et][1]||{};hn.addResLabels(en,xn)}hn.render(),hn.zoomTo(Nt),kt&&hn.spin(kt.axis,kt.speed)};let tn=bt;try{var rn=(0,h.specStringToObject)(b.dataset.config)||{};rn.backgroundColor===void 0&&(rn.backgroundColor=Tt),rn.backgroundAlpha===void 0&&(rn.backgroundAlpha=Mt),tn==null?tn=xt[b.id||d++]=(0,a.createViewer)(b,rn):(tn.setBackgroundColor(Tt,Mt),tn.setConfig(rn),tt&&tt.initiateUI()),b.dataset.ui&&$3Dmol.StateManager&&(tt=new $3Dmol.StateManager(tn))}catch(hn){console.log(hn),b.textContent="WebGL appears to be disabled."}if(ft.length!=0){let hn=0,en=((xn,Pn)=>function(In){_t=ft[hn];var Nn=xn.dataset.type||xn.dataset.datatype||mt[hn];if(Pn.addModel(In,Nn,yt),tt){var Un=xn.dataset[mt[hn]];tt.setModelTitle(Un)}hn+=1,hn<ft.length?(0,h.get)(ft[hn]).then(en):(dn(Pn),xn.dataset.callback&&(0,h.makeFunction)(xn.dataset.callback)(Pn),ot=!1,St&&St(Pn))})(b,tn);ht&&ht.endsWith("gz")?(0,h.getbin)(ft[0]).then(en):(0,h.get)(ft[0]).then(en)}else{if(b.dataset.element){var En="#"+b.dataset.element,bn=document.querySelector(En),Dn=bn?bn.textContent:"";ht=b.dataset.type||b.dataset.datatype,tn.addModel(Dn,ht,yt)}dn(tn),b.dataset.callback&&(0,h.makeFunction)(b.dataset.callback)(tn),ot=!1,St&&St(tn)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&vt()}},"./src/colors.ts":(e,i,s)=>{s.r(i),s.d(i,{CC:()=>c,Color:()=>a,builtinColorSchemes:()=>bt,chains:()=>vt,elementColors:()=>ot,htmlColors:()=>h,residues:()=>xt,ssColors:()=>st});class a{constructor(Et,Ct,ht){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof Et=="number"?(this.r=Et||0,this.g=Ct||0,this.b=ht||0,this):this.set(Et||0)}set(Et){return Et instanceof a?Et.clone():(typeof Et=="number"?this.setHex(Et):typeof Et=="object"&&(this.r=(Et==null?void 0:Et.r)||0,this.g=(Et==null?void 0:Et.g)||0,this.b=(Et==null?void 0:Et.b)||0),this)}setHex(Et){return Et=Math.floor(Et),this.r=(Et>>16&255)/255,this.g=(Et>>8&255)/255,this.b=(Et&255)/255,this}getHex(){var Et=Math.round(this.r*255),Ct=Math.round(this.g*255),ht=Math.round(this.b*255);return Et<<16|Ct<<8|ht}clone(){return new a(this.r,this.g,this.b)}copy(Et){return this.r=Et.r,this.g=Et.g,this.b=Et.b,this}scaled(){var Et={};return Et.r=Math.round(this.r*255),Et.g=Math.round(this.g*255),Et.b=Math.round(this.b*255),Et.a=1,Et}}class c{static color(Et){if(!Et)return c.cache[0];if(Et instanceof a)return Et;if(typeof Et=="number"&&typeof c.cache[Et]<"u")return c.cache[Et];if(Et&&Array.isArray(Et))return Et.map(c.color);let Ct=c.getHex(Et),ht=new a(Ct);return c.cache[Ct]=ht,ht}static getHex(Et){var Ct;if(Array.isArray(Et))return Et.map(c.getHex);if(typeof Et=="string"){let ht=Et;if(!isNaN(parseInt(ht)))return parseInt(ht);if(ht=ht.trim(),ht.length==4&&ht[0]=="#"&&(ht="#"+ht[1]+ht[1]+ht[2]+ht[2]+ht[3]+ht[3]),ht.length==7&&ht[0]=="#")return parseInt(ht.substring(1),16);let d=c.rgbRegEx.exec(ht);if(d){d[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let b=0;for(let ft=2;ft<5;ft++){b*=256;let mt=d[ft].endsWith("%")?255*parseFloat(d[ft])/100:parseFloat(d[ft]);b+=Math.round(mt)}return b}return((Ct=window==null?void 0:window.$3Dmol)===null||Ct===void 0?void 0:Ct.htmlColors[Et.toLowerCase()])||0}return Et}}c.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,c.cache={0:new a(0)};const h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},st={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},nt={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},ot={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:nt,defaultColors:Object.assign({},nt),greenCarbon:Object.assign(Object.assign({},nt),{C:65280}),cyanCarbon:Object.assign(Object.assign({},nt),{C:65535}),magentaCarbon:Object.assign(Object.assign({},nt),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},nt),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},nt),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},nt),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},nt),{C:8388736}),blueCarbon:Object.assign(Object.assign({},nt),{C:255})},xt={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},vt={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},bt={ssPyMol:{prop:"ss",map:st.pyMol},ssJmol:{prop:"ss",map:st.Jmol},Jmol:{prop:"elem",map:ot.Jmol},amino:{prop:"resn",map:xt.amino},shapely:{prop:"resn",map:xt.shapely},nucleic:{prop:"resn",map:xt.nucleic},chain:{prop:"chain",map:vt.atom},rasmol:{prop:"elem",map:ot.rasmol},default:{prop:"elem",map:ot.defaultColors},greenCarbon:{prop:"elem",map:ot.greenCarbon},chainHetatm:{prop:"chain",map:vt.hetatm},cyanCarbon:{prop:"elem",map:ot.cyanCarbon},magentaCarbon:{prop:"elem",map:ot.magentaCarbon},purpleCarbon:{prop:"elem",map:ot.purpleCarbon},whiteCarbon:{prop:"elem",map:ot.whiteCarbon},orangeCarbon:{prop:"elem",map:ot.orangeCarbon},yellowCarbon:{prop:"elem",map:ot.yellowCarbon},blueCarbon:{prop:"elem",map:ot.blueCarbon}}},"./src/glcartoon.ts":(e,i,s)=>{s.r(i),s.d(i,{drawCartoon:()=>It,subdivide_spline:()=>vt});var a=s("./src/WebGL/math/index.ts"),c=s("./src/WebGL/shapes/index.ts"),h=s("./src/WebGL/index.ts"),st=s("./src/Gradient.ts"),nt=s("./src/colors.ts"),ot=s("./src/GLDraw.ts"),xt=s("./src/utilities.ts");function vt(Lt,zt){var jt=[],Nt=Lt;Nt=[],Nt.push(Lt[0]);var kt,Ot,Bt,Ut,Ft,Wt,_i,Qt,on;for(kt=1,Ot=Lt.length-1;kt<Ot;kt++)if(Ft=Lt[kt],Wt=Lt[kt+1],Ft.smoothen){var nn=new a.Vector3((Ft.x+Wt.x)/2,(Ft.y+Wt.y)/2,(Ft.z+Wt.z)/2);nn.atom=Ft.atom,Nt.push(nn)}else Nt.push(Ft);for(Nt.push(Lt[Lt.length-1]),kt=-1,Bt=Nt.length;kt<=Bt-3;kt++)if(Ut=Nt[kt===-1?0:kt],Ft=Nt[kt+1],Wt=Nt[kt+2],_i=Nt[kt===Bt-3?Bt-1:kt+3],Qt=new a.Vector3().subVectors(Wt,Ut).multiplyScalar(.5),on=new a.Vector3().subVectors(_i,Ft).multiplyScalar(.5),!Wt.skip)for(var dn=0;dn<zt;dn++){var tn=1/zt*dn,rn=Ft.x+tn*Qt.x+tn*tn*(-3*Ft.x+3*Wt.x-2*Qt.x-on.x)+tn*tn*tn*(2*Ft.x-2*Wt.x+Qt.x+on.x),En=Ft.y+tn*Qt.y+tn*tn*(-3*Ft.y+3*Wt.y-2*Qt.y-on.y)+tn*tn*tn*(2*Ft.y-2*Wt.y+Qt.y+on.y),bn=Ft.z+tn*Qt.z+tn*tn*(-3*Ft.z+3*Wt.z-2*Qt.z-on.z)+tn*tn*tn*(2*Ft.z-2*Wt.z+Qt.z+on.z),Dn=new a.Vector3(rn,En,bn);dn<zt/2?Dn.atom=Ft.atom:Dn.atom=Wt.atom,jt.push(Dn)}return jt.push(Nt[Nt.length-1]),jt}const bt=.5,St=1.3,Et=.8,Ct=.4,ht=.4;function d(Lt,zt,jt,Nt){for(var kt,Ot,Bt,Ut,Ft=0,Wt=zt.length;Ft<Wt;Ft++){Ut=Math.round(Ft*(Nt.length-1)/Wt),Bt=nt.CC.color(Nt[Ut]);var _i=Lt.updateGeoGroup(2),Qt=_i.vertexArray,on=_i.colorArray,nn=_i.faceArray;kt=_i.vertices,Ot=kt*3,Qt[Ot]=zt[Ft].x,Qt[Ot+1]=zt[Ft].y,Qt[Ot+2]=zt[Ft].z,Qt[Ot+3]=jt[Ft].x,Qt[Ot+4]=jt[Ft].y,Qt[Ot+5]=jt[Ft].z;for(var dn=0;dn<6;++dn)on[Ot+3*dn]=Bt.r,on[Ot+1+3*dn]=Bt.g,on[Ot+2+3*dn]=Bt.b;if(Ft>0){var tn=[kt,kt+1,kt-1,kt-2],rn=_i.faceidx;nn[rn]=tn[0],nn[rn+1]=tn[1],nn[rn+2]=tn[3],nn[rn+3]=tn[1],nn[rn+4]=tn[2],nn[rn+5]=tn[3],_i.faceidx+=6}_i.vertices+=2}}function b(Lt,zt,jt,Nt,kt,Ot,Bt){var Ut,Ft,Wt,_i;if(Wt=zt.length,Wt<2||zt[0].length<2)return;for(Ut=0;Ut<Wt;Ut++)zt[Ut]=vt(zt[Ut],Nt);if(_i=zt[0].length,!kt)return d(Lt,zt[0],zt[Wt-1],jt);var Qt,on,nn,dn,tn,rn,En=[],bn=[],Dn=[];for(Ft=0;Ft<Wt;Ft++)En.push(.25+1.5*Math.sqrt((Wt-1)*Ft-Math.pow(Ft,2))/(Wt-1)),bn.push(.5),Dn.push(2*(Math.pow(Ft/Wt,2)-Ft/Wt)+.6);var hn=[];for(Ft=0;Ft<Wt*2-1;Ft++)hn[Ft]=[Ft,Ft+1,Ft+1-2*Wt,Ft-2*Wt];hn[Wt*2-1]=[Ft,Ft+1-2*Wt,Ft+1-4*Wt,Ft-2*Wt];var en,xn,Pn,In,Nn,Un,kn,jn,zn,On;let cn=Lt.updateGeoGroup();for(Ut=0;Ut<_i;Ut++){let Xt=Lt.groups,Zt=!1;cn=Lt.updateGeoGroup(2*Wt),Xt!=Lt.groups&&Ut>0&&(Ut=Ut-1,Zt=!0),Un=Math.round(Ut*(jt.length-1)/_i),Nn=nt.CC.color(jt[Un]),tn=nn,rn=dn,nn=[],dn=[],Qt=[],zt[0][Ut].atom!==void 0&&(In=zt[0][Ut].atom,Bt==="oval"?on=En:Bt==="rectangle"?on=bn:Bt==="parabola"&&(on=Dn)),on||(on=bn);var Ln,Fn;for(Ft=0;Ft<Wt;Ft++)Ut<_i-1?Ln=zt[Ft][Ut+1].clone().sub(zt[Ft][Ut]):Ln=zt[Ft][Ut-1].clone().sub(zt[Ft][Ut]).negate(),Ft<Wt-1?Fn=zt[Ft+1][Ut].clone().sub(zt[Ft][Ut]):Fn=zt[Ft-1][Ut].clone().sub(zt[Ft][Ut]).negate(),Qt[Ft]=Fn.cross(Ln).normalize().multiplyScalar(kt*on[Ft]);for(Ft=0;Ft<Wt;Ft++)nn[Ft]=zt[Ft][Ut].clone().add(Qt[Ft].clone().negate());for(Ft=0;Ft<Wt;Ft++)dn[Ft]=zt[Ft][Ut].clone().add(Qt[Ft]);for(kn=cn.vertexArray,jn=cn.colorArray,zn=cn.faceArray,en=cn.vertices,xn=en*3,Ft=0;Ft<Wt;Ft++)kn[xn+3*Ft+0]=nn[Ft].x,kn[xn+3*Ft+1]=nn[Ft].y,kn[xn+3*Ft+2]=nn[Ft].z;for(Ft=0;Ft<Wt;Ft++)kn[xn+3*Ft+0+3*Wt]=dn[Wt-1-Ft].x,kn[xn+3*Ft+1+3*Wt]=dn[Wt-1-Ft].y,kn[xn+3*Ft+2+3*Wt]=dn[Wt-1-Ft].z;for(Ft=0;Ft<2*Wt;++Ft)jn[xn+3*Ft+0]=Nn.r,jn[xn+3*Ft+1]=Nn.g,jn[xn+3*Ft+2]=Nn.b;if(Ut>0&&!Zt){for(Ft=0;Ft<Wt*2;Ft++)On=[en+hn[Ft][0],en+hn[Ft][1],en+hn[Ft][2],en+hn[Ft][3]],Pn=cn.faceidx,zn[Pn]=On[0],zn[Pn+1]=On[1],zn[Pn+2]=On[3],zn[Pn+3]=On[1],zn[Pn+4]=On[2],zn[Pn+5]=On[3],cn.faceidx+=6;if(In.clickable||In.hoverable){var $t=[];$t.push(new c.Triangle(tn[0],nn[0],nn[Wt-1])),$t.push(new c.Triangle(tn[0],nn[Wt-1],tn[Wt-1])),$t.push(new c.Triangle(tn[Wt-1],nn[Wt-1],dn[Wt-1])),$t.push(new c.Triangle(tn[Wt-1],dn[Wt-1],rn[Wt-1])),$t.push(new c.Triangle(dn[0],rn[0],rn[Wt-1])),$t.push(new c.Triangle(dn[Wt-1],dn[0],rn[Wt-1])),$t.push(new c.Triangle(nn[0],tn[0],rn[0])),$t.push(new c.Triangle(dn[0],nn[0],rn[0]));for(Ft in $t)In.intersectionShape.triangle.push($t[Ft])}}cn.vertices+=2*Wt}for(kn=cn.vertexArray,jn=cn.colorArray,zn=cn.faceArray,en=cn.vertices,xn=en*3,Pn=cn.faceidx,Ut=0;Ut<Wt-1;Ut++)On=[Ut,Ut+1,2*Wt-2-Ut,2*Wt-1-Ut],Pn=cn.faceidx,zn[Pn]=On[0],zn[Pn+1]=On[1],zn[Pn+2]=On[3],zn[Pn+3]=On[1],zn[Pn+4]=On[2],zn[Pn+5]=On[3],cn.faceidx+=6;for(Ut=0;Ut<Wt-1;Ut++)On=[en-1-Ut,en-2-Ut,en-2*Wt+Ut+1,en-2*Wt+Ut],Pn=cn.faceidx,zn[Pn]=On[0],zn[Pn+1]=On[1],zn[Pn+2]=On[3],zn[Pn+3]=On[1],zn[Pn+4]=On[2],zn[Pn+5]=On[3],cn.faceidx+=6}function ft(Lt,zt,jt,Nt,kt,Ot){if(!(zt.length<2)){var Bt,Ut;if(Bt=zt[0],Ut=zt[zt.length-1],Bt=vt(Bt,Nt),Ut=vt(Ut,Nt),!kt)return d(Lt,Bt,Ut,jt);var Ft=[],Wt,_i,Qt,on,nn,dn=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],tn,rn,En,bn,Dn,hn,en,xn,Pn,In,Nn,Un,kn,jn,zn,On,cn;for(xn=0,Pn=Bt.length;xn<Pn;xn++){if(Dn=Math.round(xn*(jt.length-1)/Pn),bn=nt.CC.color(jt[Dn]),Ft.push(_i=Bt[xn]),Ft.push(_i),Ft.push(Qt=Ut[xn]),Ft.push(Qt),xn<Pn-1){var Ln=Bt[xn+1].clone().sub(Bt[xn]),Fn=Ut[xn].clone().sub(Bt[xn]);Wt=Fn.cross(Ln).normalize().multiplyScalar(kt)}for(Ft.push(on=Bt[xn].clone().add(Wt)),Ft.push(on),Ft.push(nn=Ut[xn].clone().add(Wt)),Ft.push(nn),_i.atom!==void 0&&(hn=_i.atom),jn=Lt.updateGeoGroup(8),zn=jn.vertexArray,On=jn.colorArray,cn=jn.faceArray,tn=jn.vertices,rn=tn*3,zn[rn]=_i.x,zn[rn+1]=_i.y,zn[rn+2]=_i.z,zn[rn+3]=_i.x,zn[rn+4]=_i.y,zn[rn+5]=_i.z,zn[rn+6]=Qt.x,zn[rn+7]=Qt.y,zn[rn+8]=Qt.z,zn[rn+9]=Qt.x,zn[rn+10]=Qt.y,zn[rn+11]=Qt.z,zn[rn+12]=on.x,zn[rn+13]=on.y,zn[rn+14]=on.z,zn[rn+15]=on.x,zn[rn+16]=on.y,zn[rn+17]=on.z,zn[rn+18]=nn.x,zn[rn+19]=nn.y,zn[rn+20]=nn.z,zn[rn+21]=nn.x,zn[rn+22]=nn.y,zn[rn+23]=nn.z,In=0;In<8;++In)On[rn+3*In]=bn.r,On[rn+1+3*In]=bn.g,On[rn+2+3*In]=bn.b;if(xn>0){var $t=en!==void 0&&hn!==void 0&&en.serial!==hn.serial;for(In=0;In<4;In++){var Xt=[tn+dn[In][0],tn+dn[In][1],tn+dn[In][2],tn+dn[In][3]];if(En=jn.faceidx,cn[En]=Xt[0],cn[En+1]=Xt[1],cn[En+2]=Xt[3],cn[En+3]=Xt[1],cn[En+4]=Xt[2],cn[En+5]=Xt[3],jn.faceidx+=6,hn.clickable||en.clickable||hn.hoverable||en.hoverable){var Zt=Ft[Xt[3]].clone(),mn=Ft[Xt[0]].clone(),an=Ft[Xt[2]].clone(),Rn=Ft[Xt[1]].clone();if(Zt.atom=Ft[Xt[3]].atom||null,an.atom=Ft[Xt[2]].atom||null,mn.atom=Ft[Xt[0]].atom||null,Rn.atom=Ft[Xt[1]].atom||null,$t){var Cn=Zt.clone().add(mn).multiplyScalar(.5),Gt=an.clone().add(Rn).multiplyScalar(.5),un=Zt.clone().add(Rn).multiplyScalar(.5);In%2===0?((en.clickable||en.hoverable)&&(Nn=new c.Triangle(Cn,un,Zt),Un=new c.Triangle(Gt,an,un),kn=new c.Triangle(un,an,Zt),en.intersectionShape.triangle.push(Nn),en.intersectionShape.triangle.push(Un),en.intersectionShape.triangle.push(kn)),(hn.clickable||hn.hoverable)&&(Nn=new c.Triangle(mn,Rn,un),Un=new c.Triangle(Rn,Gt,un),kn=new c.Triangle(mn,un,Cn),hn.intersectionShape.triangle.push(Nn),hn.intersectionShape.triangle.push(Un),hn.intersectionShape.triangle.push(kn))):((hn.clickable||hn.hoverable)&&(Nn=new c.Triangle(Cn,un,Zt),Un=new c.Triangle(Gt,an,un),kn=new c.Triangle(un,an,Zt),hn.intersectionShape.triangle.push(Nn),hn.intersectionShape.triangle.push(Un),hn.intersectionShape.triangle.push(kn)),(en.clickable||en.hoverable)&&(Nn=new c.Triangle(mn,Rn,un),Un=new c.Triangle(Rn,Gt,un),kn=new c.Triangle(mn,un,Cn),en.intersectionShape.triangle.push(Nn),en.intersectionShape.triangle.push(Un),en.intersectionShape.triangle.push(kn)))}else(hn.clickable||hn.hoverable)&&(Nn=new c.Triangle(mn,Rn,Zt),Un=new c.Triangle(Rn,an,Zt),hn.intersectionShape.triangle.push(Nn),hn.intersectionShape.triangle.push(Un))}}}jn.vertices+=8,en=hn}var yn=Ft.length-8;for(jn=Lt.updateGeoGroup(8),zn=jn.vertexArray,On=jn.colorArray,cn=jn.faceArray,tn=jn.vertices,rn=tn*3,En=jn.faceidx,xn=0;xn<4;xn++){Ft.push(Ft[xn*2]),Ft.push(Ft[yn+xn*2]);var Mn=Ft[xn*2],ln=Ft[yn+xn*2];zn[rn+6*xn]=Mn.x,zn[rn+1+6*xn]=Mn.y,zn[rn+2+6*xn]=Mn.z,zn[rn+3+6*xn]=ln.x,zn[rn+4+6*xn]=ln.y,zn[rn+5+6*xn]=ln.z,On[rn+6*xn]=bn.r,On[rn+1+6*xn]=bn.g,On[rn+2+6*xn]=bn.b,On[rn+3+6*xn]=bn.r,On[rn+4+6*xn]=bn.g,On[rn+5+6*xn]=bn.b}yn+=8,Nn=[tn,tn+2,tn+6,tn+4],Un=[tn+1,tn+5,tn+7,tn+3],cn[En]=Nn[0],cn[En+1]=Nn[1],cn[En+2]=Nn[3],cn[En+3]=Nn[1],cn[En+4]=Nn[2],cn[En+5]=Nn[3],cn[En+6]=Un[0],cn[En+7]=Un[1],cn[En+8]=Un[3],cn[En+9]=Un[1],cn[En+10]=Un[2],cn[En+11]=Un[3],jn.faceidx+=12,jn.vertices+=8}}function mt(Lt,zt,jt,Nt,kt,Ot,Bt){(!Bt||Bt==="default")&&(Bt="rectangle"),Bt==="edged"?ft(Lt,zt,jt,Nt,kt):(Bt==="rectangle"||Bt==="oval"||Bt==="parabola")&&b(Lt,zt,jt,Nt,kt,Ot,Bt)}function _t(Lt){return Lt&&Lt.elem==="C"&&Lt.atom==="CA"}function tt(Lt,zt){if(Lt&&zt&&Lt.chain===zt.chain){if(!Lt.hetflag&&!zt.hetflag&&Lt.reschain===zt.reschain&&(Lt.resi===zt.resi||Lt.resi===zt.resi-1))return!0;if(Lt.resi<zt.resi){var jt=Lt.x-zt.x,Nt=Lt.y-zt.y,kt=Lt.z-zt.z,Ot=jt*jt+Nt*Nt+kt*kt;if(Lt.atom=="CA"&&zt.atom=="CA"&&Ot<16)return!0;if((Lt.atom=="P"||zt.atom=="P")&&Ot<64)return!0}}return!1}function gt(Lt,zt,jt,Nt,kt){if(!(zt==null||zt.vertices==0)){kt&&(zt.initTypedArrays(),zt.setUpNormals());var Ot=new h.MeshDoubleLambertMaterial;Ot.vertexColors=h.Coloring.FaceColors,typeof jt=="number"&&jt>=0&&jt<1&&(Ot.transparent=!0,Ot.opacity=jt),Ot.outline=Nt;var Bt=new h.Mesh(zt,Ot);Lt.add(Bt)}}function wt(Lt,zt,jt,Nt,kt,Ot,Bt,Ut,Ft){var Wt,_i,Qt,on,nn,dn;if(!(!Nt||!kt||!Bt)){var tn=kt.sub(Nt);tn.normalize();var rn=Ut[Ft];for(_i=Ft+1;_i<Ut.length&&(rn=Ut[_i],rn.atom!=Bt.atom);_i++);if(rn=rn?new a.Vector3(rn.x,rn.y,rn.z):new a.Vector3(0,0,0),rn.sub(Nt),Bt.ss==="arrow start"){var En=rn.clone().multiplyScalar(.3).cross(kt);Nt.add(En);var bn=rn.clone().cross(tn).normalize();tn.rotateAboutVector(bn,.43)}for(Bt.style.cartoon.ribbon?Wt=Bt.style.cartoon.thickness||Ct:Bt.style.cartoon.width?Wt=Bt.style.cartoon.width:Bt.ss==="c"?Bt.atom==="P"?Wt=Et:Wt=bt:Bt.ss==="arrow start"?(Wt=St,nn=!0):Bt.ss==="arrow end"||Bt.ss==="h"&&Bt.style.cartoon.tubes||Bt.ss==="tube start"?Wt=bt:Wt=St,Ot!=null&&tn.dot(Ot)<0&&tn.negate(),tn.multiplyScalar(Wt),_i=0;_i<zt;_i++)Qt=-1+_i*2/(zt-1),on=new a.Vector3(Nt.x+Qt*tn.x,Nt.y+Qt*tn.y,Nt.z+Qt*tn.z),on.atom=Bt,Bt.ss==="s"&&(on.smoothen=!0),Lt[_i].push(on);if(nn)for(tn.multiplyScalar(2),_i=0;_i<zt;_i++)Qt=-1+_i*2/(zt-1),on=new a.Vector3(Nt.x+Qt*tn.x,Nt.y+Qt*tn.y,Nt.z+Qt*tn.z),on.atom=Bt,on.smoothen=!1,on.skip=!0,Lt[_i].push(on);return dn=Bt.style.cartoon.style||"default",Lt.style?Lt.style!=dn&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),Lt.style="default"):Lt.style=dn,(Bt.ss==="arrow start"||Bt.ss==="arrow end")&&(Bt.ss="s"),nn}}const yt={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},Tt={DA:!0,DG:!0,A:!0,G:!0},Mt={DT:!0,DC:!0,U:!0,C:!0,T:!0},Pt={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function It(Lt,zt,jt,Nt=10){let kt=Nt,Ot=Nt;var Bt,Ut,Ft,Wt,_i,Qt,on,nn,dn,tn,rn,En,bn,Dn,hn,en,xn,Pn,In=new h.Geometry(!0),Nn=new h.Geometry(!0),Un=[],kn=[],jn=1,zn=!1,On={};for(var cn in st.Gradient.builtinGradients)st.Gradient.builtinGradients.hasOwnProperty(cn)&&(On[cn]=new st.Gradient.builtinGradients[cn](jt[1],jt[0]));var Ln=function(Ht,Tn){return jt&&Tn.color==="spectrum"?Tn.colorscheme in On?On[Tn.colorscheme].valueToHex(Ht.resi):On.sinebow.valueToHex(Ht.resi):(0,xt.getColorFromStyle)(Ht,Tn).getHex()};for(nn=0;nn<kt;nn++)kn[nn]=[];var Fn=!1,$t=!1,Xt=[];for(nn in zt){if(Wt=zt[nn],Wt.elem==="C"&&Wt.atom==="CA"){var Zt=tt(Ft,Wt);Zt&&Wt.ss==="s"?Fn=!0:Fn&&(Ft&&Ut&&Ft.style.cartoon.arrows&&Ut.style.cartoon.arrows&&(Ft.ss="arrow end",Ut.ss="arrow start"),Fn=!1),Zt&&(Ft.ss==="h"||Ft.ss=="tube start")&&Ft.style.cartoon.tubes?!$t&&Ft.ss!="tube start"&&Wt.style.cartoon.tubes&&(Wt.ss="tube start",$t=!0):$t&&(Ft.ss==="tube start"?Ft.ss="tube end":Ut&&Ut.style.cartoon.tubes&&(Ut.ss="tube end"),$t=!1),Ut=Ft,Ft=Wt}Wt&&Wt.atom in yt&&Xt.push(Wt)}$t&&Ft.style.cartoon.tubes&&(Ft.ss="tube end",$t=!1);var mn=function(Ht){kn[0].length>0&&mt(Nn,kn,Un,Ot,on,jn,kn.style);var Tn=[],Vn=null;if(Ht){for(nn=0;nn<kt;nn++)Tn[nn]=kn[nn][kn[nn].length-1];Vn=Un[Un.length-1]}for(kn=[],nn=0;nn<kt;nn++)kn[nn]=[];if(Un=[],Ht){for(nn=0;nn<kt;nn++)kn[nn].push(Tn[nn]);Un.push(Vn)}gt(Lt,Nn,jn,zn,!0),gt(Lt,In,jn,zn,!1),Nn=new h.Geometry(!0),In=new h.Geometry(!0)};Ft=void 0;for(var an=0;an<Xt.length;an++){Wt=Xt[an];var Rn=Wt.resn.trim(),Cn=Rn in Pt;if(jn=1,Bt=Wt.style.cartoon,Ft&&Ft.style.cartoon&&(jn=Ft.style.cartoon.opacity),Ft&&Ft.style.cartoon&&Ft.style.cartoon.outline&&(zn=Ft.style.cartoon.outline),Ft&&Ft.style.cartoon&&(!Wt.style.cartoon||Ft.style.cartoon.opacity!=Wt.style.cartoon.opacity)&&mn(Ft.chain==Wt.chain),Bt.style==="trace"){if(!Wt.hetflag){if(Wt.elem==="C"&&Wt.atom==="CA"||Cn&&Wt.atom==="P"||Wt.atom==="BB"){if(Qt=Ln(Wt,Bt),(0,xt.isNumeric)(Bt.thickness)?on=Bt.thickness:on=Ct,tt(Ft,Wt))if(Qt==_i){var Gt=nt.CC.color(Qt);ot.GLDraw.drawCylinder(In,Ft,Wt,on,Gt,2,2)}else{var un=new a.Vector3().addVectors(Ft,Wt).multiplyScalar(.5),yn=nt.CC.color(_i),Mn=nt.CC.color(Qt);ot.GLDraw.drawCylinder(In,Ft,un,on,yn,2,0),ot.GLDraw.drawCylinder(In,un,Wt,on,Mn,0,2)}if((Wt.clickable===!0||Wt.hoverable)&&Wt.intersectionShape!==void 0){var ln=new a.Vector3(Wt.x,Wt.y,Wt.z);Wt.intersectionShape.sphere.push(new c.Sphere(ln,on))}Ft=Wt,_i=Qt}}}else{if(_t(Wt)||Cn&&(Wt.atom==="P"||Wt.atom.indexOf("O5")==0)){if(Pn)if(Wt.ss==="tube end")Pn=!1,xn=new a.Vector3(Wt.x,Wt.y,Wt.z),ot.GLDraw.drawCylinder(In,en,xn,2,nt.CC.color(_i),1,1),Wt.ss="h";else if(Ft.chain!=Wt.chain||Ft.ss==="tube end")Pn=!1,Ft.ss="h",xn=new a.Vector3(Ft.x,Ft.y,Ft.z),ot.GLDraw.drawCylinder(In,en,xn,2,nt.CC.color(_i),1,1);else continue;if(Ft&&(!tt(Ft,Wt)||Ft.ss==="tube start")){for(Ft.ss==="tube start"&&(Pn=!0,en=new a.Vector3(Ft.x,Ft.y,Ft.z),Ft.ss="h"),hn&&(En?Dn=new a.Vector3().addVectors(Ft,En).multiplyScalar(.5):Dn=new a.Vector3(Ft.x,Ft.y,Ft.z),ot.GLDraw.drawCylinder(In,Dn,hn,ht,nt.CC.color(hn.color),0,2),wt(kn,kt,!0,En,bn,rn,Ft,Xt,an),Un.push(Qt),Dn=null,hn=null),kn[0].length>0&&mt(Nn,kn,Un,Ot,on,jn,kn.style),kn=[],nn=0;nn<kt;nn++)kn[nn]=[];Un=[]}if(Ft===void 0||Ft.rescode!=Wt.rescode||Ft.resi!=Wt.resi){if(hn&&Ft!=null){Dn=new a.Vector3().addVectors(Ft,Wt).multiplyScalar(.5);var wn=Dn.clone().sub(hn).multiplyScalar(.02);Dn.add(wn),ot.GLDraw.drawCylinder(In,Dn,hn,ht,nt.CC.color(hn.color),0,2),Dn=null,hn=null}Qt=Ln(Wt,Bt),Un.push(Qt),(0,xt.isNumeric)(Bt.thickness)?on=Bt.thickness:on=Ct,Ft=Wt,dn=new a.Vector3(Ft.x,Ft.y,Ft.z),dn.resi=Ft.resi,_i=Qt}(Wt.clickable===!0||Wt.hoverable===!0)&&(Wt.intersectionShape===void 0||Wt.intersectionShape.triangle===void 0)&&(Wt.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else Ft!=null&&(_t(Ft)&&Wt.atom==="O"||Cn&&Ft.atom==="P"&&(Wt.atom==="OP2"||Wt.atom==="O2P")||Cn&&Ft.atom.indexOf("O5")==0&&Wt.atom.indexOf("C5")==0)?(tn=new a.Vector3(Wt.x,Wt.y,Wt.z),tn.resi=Wt.resi,(Wt.atom==="OP2"||Wt.atom==="O2P")&&(bn=new a.Vector3(Wt.x,Wt.y,Wt.z))):Cn&&Wt.atom.indexOf("O3")==0?En=new a.Vector3(Wt.x,Wt.y,Wt.z):(Wt.atom==="N1"&&Rn in Tt||Wt.atom==="N3"&&Rn in Mt)&&(hn=new a.Vector3(Wt.x,Wt.y,Wt.z),hn.color=(0,xt.getColorFromStyle)(Wt,Bt).getHex());tn&&dn&&tn.resi===dn.resi&&(wt(kn,kt,!0,dn,tn,rn,Ft,Xt,an),rn=tn,dn=null,tn=null,Un.push(Qt))}}hn&&(En?Dn=new a.Vector3().addVectors(Ft,En).multiplyScalar(.5):Dn=new a.Vector3(Ft.x,Ft.y,Ft.z),ot.GLDraw.drawCylinder(In,Dn,hn,ht,nt.CC.color(hn.color),0,2),wt(kn,kt,!0,En,bn,rn,Ft,Xt,an),Un.push(Qt)),mn(!1)}},"./src/index.ts":(e,i,s)=>{s.r(i),s.d(i,{CAP:()=>ht.CAP,CC:()=>c.CC,CONTEXTS_PER_VIEWPORT:()=>ft.CONTEXTS_PER_VIEWPORT,Color:()=>c.Color,CustomLinear:()=>a.CustomLinear,Cylinder:()=>xt.Cylinder,GLDraw:()=>ht.GLDraw,GLModel:()=>b.GLModel,GLShape:()=>Ct.GLShape,GLViewer:()=>ft.GLViewer,GLVolumetricRender:()=>Et.GLVolumetricRender,Gradient:()=>a.Gradient,GradientType:()=>a.GradientType,Label:()=>h.Label,LabelCount:()=>h.LabelCount,MarchingCube:()=>bt.MarchingCube,MarchingCubeInitializer:()=>bt.MarchingCubeInitializer,Matrix3:()=>ot.Matrix3,Matrix4:()=>ot.Matrix4,Parsers:()=>nt.Parsers,PausableTimer:()=>vt.PausableTimer,PointGrid:()=>bt.PointGrid,ProteinSurface:()=>bt.ProteinSurface,Quaternion:()=>ot.Quaternion,ROYGB:()=>a.ROYGB,RWB:()=>a.RWB,Ray:()=>ot.Ray,Sinebow:()=>a.Sinebow,Sphere:()=>xt.Sphere,SurfaceType:()=>bt.SurfaceType,Triangle:()=>xt.Triangle,Vector2:()=>ot.Vector2,Vector3:()=>ot.Vector3,VolumeData:()=>St.VolumeData,adjustVolumeStyle:()=>vt.adjustVolumeStyle,applyPartialCharges:()=>st.applyPartialCharges,autoinit:()=>mt.autoinit,autoload:()=>mt.autoload,base64ToArray:()=>vt.base64ToArray,bondLength:()=>nt.bondLength,builtinColorSchemes:()=>c.builtinColorSchemes,builtinGradients:()=>a.builtinGradients,chains:()=>c.chains,clamp:()=>ot.clamp,conversionMatrix3:()=>ot.conversionMatrix3,createStereoViewer:()=>ft.createStereoViewer,createViewer:()=>ft.createViewer,createViewerGrid:()=>ft.createViewerGrid,deepCopy:()=>vt.deepCopy,degToRad:()=>ot.degToRad,download:()=>vt.download,drawCartoon:()=>d.drawCartoon,elementColors:()=>c.elementColors,extend:()=>vt.extend,get:()=>vt.get,getAtomProperty:()=>vt.getAtomProperty,getColorFromStyle:()=>vt.getColorFromStyle,getElement:()=>vt.getElement,getExtent:()=>vt.getExtent,getGradient:()=>a.getGradient,getPropertyRange:()=>vt.getPropertyRange,getbin:()=>vt.getbin,htmlColors:()=>c.htmlColors,inflateString:()=>vt.inflateString,isEmptyObject:()=>vt.isEmptyObject,isNumeric:()=>vt.isNumeric,makeFunction:()=>vt.makeFunction,mergeGeos:()=>vt.mergeGeos,normalizeValue:()=>a.normalizeValue,partialCharges:()=>st.partialCharges,processing_autoinit:()=>mt.processing_autoinit,residues:()=>c.residues,setBondLength:()=>nt.setBondLength,setSyncSurface:()=>bt.setSyncSurface,specStringToObject:()=>vt.specStringToObject,splitMesh:()=>Ct.splitMesh,ssColors:()=>c.ssColors,subdivide_spline:()=>d.subdivide_spline,syncSurface:()=>bt.syncSurface,viewers:()=>mt.viewers});var a=s("./src/Gradient.ts"),c=s("./src/colors.ts"),h=s("./src/Label.ts"),st=s("./src/partialCharges.ts"),nt=s("./src/parsers/index.ts"),ot=s("./src/WebGL/math/index.ts"),xt=s("./src/WebGL/shapes/index.ts"),vt=s("./src/utilities.ts"),bt=s("./src/ProteinSurface4.ts"),St=s("./src/VolumeData.ts"),Et=s("./src/VolumetricRender.ts"),Ct=s("./src/GLShape.ts"),ht=s("./src/GLDraw.ts"),d=s("./src/glcartoon.ts"),b=s("./src/GLModel.ts"),ft=s("./src/GLViewer.ts"),mt=s("./src/autoload.ts");s("./src/specs.ts"),window&&(window.$3Dmol=i)},"./src/parsers/BCIF.ts":(e,i,s)=>{s.r(i),s.d(i,{BCIF:()=>Ct});var a=s("./src/utilities.ts"),c=s("./src/parsers/utils/computeSecondaryStructure.ts"),h=s("./src/parsers/utils/processSymmetries.ts"),st=s("./src/parsers/cifutils/category.ts"),nt=s("./src/parsers/utils/assignPDBBonds.ts"),ot=s("./src/WebGL/index.ts"),xt=s("./src/parsers/utils/isEmpty.ts"),vt=s("./src/vendor/mmtf.js");class bt{constructor(d){if(this.C={},d){let b=d.getField("comp_id"),ft=d.getField("atom_id_1"),mt=d.getField("atom_id_2"),_t=d.getField("value_order");for(let tt=0;tt<b.length;tt++){let gt=b[tt],wt=ft[tt],yt=mt[tt],Tt=_t[tt],Mt=1;Tt=="doub"?Mt=2:Tt=="trip"&&(Mt=3),this.C[gt]==null&&(this.C[gt]={}),this.C[gt][wt]==null&&(this.C[gt][wt]={}),this.C[gt][yt]==null&&(this.C[gt][yt]={}),this.C[gt][wt][yt]=Mt,this.C[gt][yt][wt]=Mt}}}order(d,b,ft){return this.C[d]!==void 0&&this.C[d][b]!==void 0&&this.C[d][b][ft]!==void 0?this.C[d][b][ft]:0}}class St{constructor(d){if(this.C=[],d){let b=d.getField("conn_type_id"),ft=d.getField("ptnr1_label_asym_id"),mt=d.getField("ptnr1_label_seq_id"),_t=d.getField("ptnr1_label_comp_id"),tt=d.getField("ptnr1_label_atom_id"),gt=d.getField("ptnr2_label_asym_id"),wt=d.getField("ptnr2_label_seq_id"),yt=d.getField("ptnr2_label_comp_id"),Tt=d.getField("ptnr2_label_atom_id"),Mt=d.getField("pdbx_value_order");for(let Pt=0;Pt<b.length;Pt++)if(b[Pt]=="disulf"||b[Pt]=="covale"){let It=Mt?Mt[Pt]==""?1:parseInt(Mt[Pt]):1;this.C.push([[ft[Pt],mt[Pt],_t[Pt],tt[Pt]],[gt[Pt],wt[Pt],yt[Pt],Tt[Pt]],It])}}}}class Et{constructor(){this.R={}}add(d){this.R[d.lchain]==null&&(this.R[d.lchain]={}),this.R[d.lchain][d.lresi]==null&&(this.R[d.lchain][d.lresi]={}),this.R[d.lchain][d.lresi][d.lresn]==null&&(this.R[d.lchain][d.lresi][d.lresn]=[]),this.R[d.lchain][d.lresi][d.lresn].push(d),this.R[d.lchain][d.lresi][d.lresn][d.atom]=d}geta([d,b,ft,mt]){if(this.R[d]!==void 0&&this.R[d][b]!==void 0&&this.R[d][b][ft]!==void 0)return this.R[d][b][ft][mt]}setBonds(d,b){for(let ft in this.R)for(let mt in this.R[ft])for(let _t in this.R[ft][mt]){let tt=this.R[ft][mt][_t];for(let gt=0;gt<tt.length;gt++)for(let wt=gt+1;wt<tt.length;wt++){let yt=tt[gt],Tt=tt[wt],Mt=d.order(_t,yt.atom,Tt.atom);yt.altLoc!=Tt.altLoc&&yt.altLoc!=""&&Tt.altLoc!=""&&(Mt=0),Mt>0&&(yt.bonds.push(Tt.index),Tt.bonds.push(yt.index),yt.bondOrder.push(Mt),Tt.bondOrder.push(Mt))}}for(let ft of b.C){let mt=ft[0],_t=ft[1],tt=ft[2],gt=this.geta(mt),wt=this.geta(_t);gt!=null&&wt!=null&&(gt.bonds.push(wt.index),wt.bonds.push(gt.index),gt.bondOrder.push(tt),wt.bondOrder.push(tt))}}}function Ct(ht,d){var b=!d.keepH,ft=d.altLoc?d.altLoc:"A",mt=!d.noComputeSecondaryStructure;const _t=!d.doAssembly,tt=d.assignBonds===void 0?!0:d.assignBonds;if(typeof ht=="string")try{ht=(0,a.base64ToArray)(ht)}catch{ht=new TextEncoder().encode(ht)}else ht=new Uint8Array(ht);var gt=vt.decodeMsgpack(ht);gt==31&&(ht=(0,a.inflateString)(ht,!1),gt=vt.decodeMsgpack(ht));var wt=[],yt=wt.modelData=[],Tt=gt.dataBlocks.length;if(Tt==0)return wt;d.multimodel||(Tt=1);for(let Mt=0;Mt<Tt;Mt++){let Pt=wt.length;const It=[];yt.push({symmetries:[]}),wt.push([]);const Lt=gt.dataBlocks[Mt],zt=Object.create(null);for(const On of Lt.categories)zt[On.name.substr(1)]=(0,st.Category)(On);let jt={},Nt=zt.struct_conf;if(Nt){let On=Nt.getField("conf_type_id"),cn=Nt.getField("beg_label_asym_id"),Ln=Nt.getField("beg_label_seq_id"),Fn=Nt.getField("end_label_seq_id");for(let $t=0;$t<On.length;$t++)if(On[$t].startsWith("H")){let Xt=cn[$t],Zt=Ln[$t],mn=Fn[$t];Xt in jt||(jt[Xt]={}),jt[Xt][Zt]="h1";for(let an=Zt+1;an<mn;an++)jt[Xt][an]="h";jt[Xt][mn]="h2"}}let kt=zt.struct_sheet_range;if(kt){let On=kt.getField("id"),cn=kt.getField("beg_label_asym_id"),Ln=kt.getField("beg_label_seq_id"),Fn=kt.getField("end_label_seq_id");for(let $t=0;$t<On.length;$t++){let Xt=cn[$t],Zt=Ln[$t],mn=Fn[$t];Xt in jt||(jt[Xt]={}),jt[Xt][Zt]="s1";for(let an=Zt+1;an<mn;an++)jt[Xt][an]="s";jt[Xt][mn]="s2"}}let Ot=zt.pdbx_struct_oper_list,Bt=Ot.getField("id");if(Bt&&!_t){let On=Ot.getField("matrix[1][1]"),cn=Ot.getField("matrix[1][2]"),Ln=Ot.getField("matrix[1][3]"),Fn=Ot.getField("matrix[2][1]"),$t=Ot.getField("matrix[2][2]"),Xt=Ot.getField("matrix[2][3]"),Zt=Ot.getField("matrix[3][1]"),mn=Ot.getField("matrix[3][2]"),an=Ot.getField("matrix[3][3]"),Rn=Ot.getField("vector[1]"),Cn=Ot.getField("vector[2]"),Gt=Ot.getField("vector[3]");for(let un=0;un<Bt.length;un++){const yn=new ot.Matrix4(On[un],cn[un],Ln[un],Rn[un],Fn[un],$t[un],Xt[un],Cn[un],Zt[un],mn[un],an[un],Gt[un]);yt[yt.length-1].symmetries.push(yn)}}let Ut=new bt(zt.chem_comp_bond),Ft=new Et,Wt=new St(zt.struct_conn),_i=zt.atom_site,Qt=_i.rowCount,on=_i.getField("group_PDB"),nn=_i.getField("Cartn_x"),dn=_i.getField("Cartn_y"),tn=_i.getField("Cartn_z"),rn=_i.getField("auth_asym_id"),En=_i.getField("label_asym_id"),bn=_i.getField("auth_seq_id"),Dn=_i.getField("label_seq_id"),hn=_i.getField("auth_comp_id"),en=_i.getField("label_comp_id"),xn=_i.getField("auth_atom_id"),Pn=_i.getField("label_atom_id"),In=_i.getField("type_symbol"),Nn=_i.getField("B_iso_or_equiv"),Un=_i.getField("id"),kn=_i.getField("label_alt_id"),jn=_i.getField("pdbx_PDB_model_num"),zn=jn?jn[0]:0;for(let On=0;On<Qt;On++){if(on!==void 0&&on[On]==="TER")continue;if(jn&&jn[On]!=zn)if(zn=jn[On],d.multimodel)d.onemol||(wt.push([]),yt.push(yt[yt.length-1]),zn=jn[On],Ft.setBonds(Ut,Wt),Ft=new Et);else break;const cn={};cn.x=nn[On],cn.y=dn[On],cn.z=tn[On],cn.chain=rn?rn[On]:En?En[On]:void 0,cn.lchain=En?En[On]:void 0,cn.resi=bn?bn[On]:Dn?Dn[On]:void 0,cn.lresi=Dn?Dn[On]:void 0,cn.resn=hn?hn[On].trim():en?en[On].trim():void 0,cn.lresn=en?en[On].trim():void 0,cn.atom=xn?xn[On].replace(/"/gm,""):Pn?Pn[On].replace(/"/gm,""):void 0,cn.icode=kn?kn[On]:void 0,cn.altLoc=cn.icode,cn.hetflag=!on||on[On]==="HETA"||on[On]==="HETATM";let Ln="X";In&&(Ln=In[On].replace(/\(?\+?\d+.*/,"")),cn.elem=Ln[0].toUpperCase()+Ln.substring(1,2).toLowerCase(),Nn&&(cn.b=Nn[On]),!(b&&cn.elem=="H")&&(cn.altLoc!=""&&cn.altLoc!=ft&&ft!="*"||(cn.bonds=[],cn.ss="c",cn.serial=Un[On],cn.model=zn,cn.bondOrder=[],cn.properties={},cn.index=wt[wt.length-1].length,It[cn.serial]=[wt.length,cn.index],wt[wt.length-1].push(cn),Ft.add(cn)))}if(Ft.setBonds(Ut,Wt),!(0,xt.isEmpty)(jt))for(let On=Pt;On<wt.length;On++){let cn=wt[On];for(let Ln=0;Ln<cn.length;Ln++){const Fn=cn[Ln];if(Fn!==void 0&&Fn.lchain in jt&&Fn.lresi in jt[Fn.lchain]){const $t=jt[Fn.lchain][Fn.lresi];Fn.ss=$t[0],$t.length>1&&($t[1]=="1"?Fn.ssbegin=!0:$t[1]=="2"&&(Fn.ssend=!0))}}}d.multimodel&&Mt<Tt-1&&(d.onemol||(wt.push([]),yt.push({symmetries:[]})))}for(let Mt=0;Mt<wt.length;Mt++)tt&&!(d.duplicateAssemblyAtoms&&!d.dontConnectDuplicatedAtoms)&&(0,nt.assignPDBBonds)(wt[Mt],d),mt&&(0,c.computeSecondaryStructure)(wt[Mt],d.hbondCutoff),(0,h.processSymmetries)(yt[Mt].symmetries,wt[Mt],d,yt[Mt].cryst),d.duplicateAssemblyAtoms&&!d.dontConnectDuplicatedAtoms&&tt&&(0,nt.assignPDBBonds)(wt[Mt],d);return wt}},"./src/parsers/CDJSON.ts":(e,i,s)=>{s.r(i),s.d(i,{CDJSON:()=>a});function a(c,h){var st=[[]];typeof c=="string"&&(c=JSON.parse(c));for(var nt=c.m,ot=nt[0].a,xt=nt[0].b,vt=nt[0].s,bt=h!==void 0&&h.parseStyle!==void 0?h.parseStyle:vt!==void 0,St=st[st.length-1].length,Et=0;Et<ot.length;Et++){var Ct=ot[Et],ht={};ht.id=Ct.i,ht.x=Ct.x,ht.y=Ct.y,ht.z=Ct.z||0,ht.bonds=[],ht.bondOrder=[];var d=Ct.l||"C";ht.elem=d[0].toUpperCase()+d.substring(1).toLowerCase(),ht.serial=st[st.length-1].length,bt&&(ht.style=vt[Ct.s||0]),st[st.length-1].push(ht)}for(let b=0;b<xt.length;b++){let ft=xt[b],mt=ft.b+St,_t=ft.e+St,tt=ft.o||1,gt=st[st.length-1][mt],wt=st[st.length-1][_t];gt.bonds.push(_t),gt.bondOrder.push(tt),wt.bonds.push(mt),wt.bondOrder.push(tt)}return st}},"./src/parsers/CIF.ts":(e,i,s)=>{s.r(i),s.d(i,{CIF:()=>ot});var a=s("./src/parsers/utils/computeSecondaryStructure.ts"),c=s("./src/parsers/utils/processSymmetries.ts"),h=s("./src/WebGL/index.ts"),st=s("./src/parsers/utils/assignPDBBonds.ts");const nt=function(xt,vt,bt,St){return new h.Vector3(vt,bt,St).applyMatrix3(xt)};function ot(xt,vt={}){const bt=[],St=!vt.doAssembly,Et=bt.modelData=[],Ct=vt.assignBonds===void 0?!0:vt.assignBonds;function ht(tt,gt){const wt=[];let yt=0,Tt=0;for(;Tt<tt.length;){for(;tt.substring(Tt,Tt+gt.length)!==gt&&Tt<tt.length;)if(tt[Tt]==="'"){for(Tt++;Tt<tt.length&&tt[Tt]!=="'";)Tt++;for(;tt.substring(Tt,Tt+gt.length)!==gt&&Tt<tt.length;)Tt++}else if(tt[Tt]==='"'){for(Tt++;Tt<tt.length&&tt[Tt]!=='"';)Tt++;Tt++}else Tt++;wt.push(tt.substring(yt,Tt)),yt=Tt=Tt+gt.length}return wt}const d=xt.split(/\r?\n|\r/),b=[];let ft=!1;for(let tt=0;tt<d.length;tt++){var mt=d[tt].split("#")[0];if(ft?mt[0]===";"&&(ft=!1):mt[0]===";"&&(ft=!0),ft||mt!==""){if(!ft&&(mt=mt.trim(),mt[0]==="_")){const gt=mt.split(/\s/)[0].indexOf(".");if(gt>-1){let wt=mt.split("");wt[gt]="_",mt=wt.join(""),mt=mt.substring(0,gt)+"_"+mt.substring(gt+1)}}b.push(mt)}}let _t=0;for(;_t<b.length;){for(;!b[_t].startsWith("data_")||b[_t]==="data_global";)_t++;_t++;const tt={};for(;_t<b.length&&!b[_t].startsWith("data_");)if(b[_t][0]===void 0)_t++;else if(b[_t][0]==="_"){const Tt=b[_t].split(/\s/)[0].toLowerCase(),Mt=tt[Tt]=tt[Tt]||[],Pt=b[_t].substring(b[_t].indexOf(Tt)+Tt.length);if(Pt==="")if(_t++,b[_t][0]===";"){let It=b[_t].substring(1);for(_t++;b[_t]!==";";)It=It+`
`+b[_t],_t++;Mt.push(It)}else Mt.push(b[_t]);else Mt.push(Pt.trim());_t++}else if(b[_t].substring(0,5)==="loop_"){_t++;const Tt=[];for(;b[_t]===""||b[_t][0]==="_";){if(b[_t]!==""){let Pt=b[_t].split(/\s/)[0].toLowerCase(),It=tt[Pt]=tt[Pt]||[];Tt.push(It)}_t++}let Mt=0;for(;_t<b.length&&b[_t][0]!=="_"&&!b[_t].startsWith("loop_")&&!b[_t].startsWith("data_");){let Pt=ht(b[_t]," ");for(let It=0;It<Pt.length;It++)Pt[It]!==""&&(Tt[Mt].push(Pt[It]),Mt=(Mt+1)%Tt.length);_t++}}else _t++;Et.push({symmetries:[]}),bt.push([]);const gt=tt._atom_site_id!==void 0?tt._atom_site_id.length:tt._atom_site_label.length;let wt;if(tt._cell_length_a!==void 0){const Tt=parseFloat(tt._cell_length_a),Mt=parseFloat(tt._cell_length_b),Pt=parseFloat(tt._cell_length_c),It=parseFloat(tt._cell_angle_alpha)||90,Lt=parseFloat(tt._cell_angle_beta)||90,zt=parseFloat(tt._cell_angle_gamma)||90;wt=(0,h.conversionMatrix3)(Tt,Mt,Pt,It,Lt,zt),Et[Et.length-1].cryst={a:Tt,b:Mt,c:Pt,alpha:It,beta:Lt,gamma:zt}}for(let Tt=0;Tt<gt;Tt++){if(tt._atom_site_group_pdb!==void 0&&tt._atom_site_group_pdb[Tt]==="TER")continue;const Mt={};if(tt._atom_site_cartn_x!==void 0)Mt.x=parseFloat(tt._atom_site_cartn_x[Tt]),Mt.y=parseFloat(tt._atom_site_cartn_y[Tt]),Mt.z=parseFloat(tt._atom_site_cartn_z[Tt]);else{const It=nt(wt,parseFloat(tt._atom_site_fract_x[Tt]),parseFloat(tt._atom_site_fract_y[Tt]),parseFloat(tt._atom_site_fract_z[Tt]));Mt.x=It.x,Mt.y=It.y,Mt.z=It.z}Mt.chain=tt._atom_site_auth_asym_id?tt._atom_site_auth_asym_id[Tt]:tt._atom_site_label_asym_id?tt._atom_site_label_asym_id[Tt]:void 0,Mt.resi=tt._atom_site_auth_seq_id?parseInt(tt._atom_site_auth_seq_id[Tt]):tt._atom_site_label_seq_id?tt._atom_site_label_seq_id[Tt]:void 0,Mt.resn=tt._atom_site_auth_comp_id?tt._atom_site_auth_comp_id[Tt].trim():tt._atom_site_label_comp_id?tt._atom_site_label_comp_id[Tt].trim():void 0,Mt.atom=tt._atom_site_auth_atom_id?tt._atom_site_auth_atom_id[Tt].replace(/"/gm,""):tt._atom_site_label_atom_id?tt._atom_site_label_atom_id[Tt].replace(/"/gm,""):void 0,Mt.hetflag=!tt._atom_site_group_pdb||tt._atom_site_group_pdb[Tt]==="HETA"||tt._atom_site_group_pdb[Tt]==="HETATM",tt._atom_site_b_iso_or_equiv&&(Mt.b=parseFloat(tt._atom_site_b_iso_or_equiv[Tt]));let Pt="X";tt._atom_site_type_symbol?Pt=tt._atom_site_type_symbol[Tt].replace(/\(?\+?\d+.*/,""):tt._atom_site_label&&(Pt=tt._atom_site_label[Tt].split("_")[0].replace(/\(?\d+.*/,"")),Mt.elem=Pt[0].toUpperCase()+Pt.substring(1,2).toLowerCase(),Mt.bonds=[],Mt.ss="c",Mt.serial=Tt,Mt.bondOrder=[],Mt.properties={},bt[bt.length-1].push(Mt)}if(tt._pdbx_struct_oper_list_id!==void 0&&!St)for(let Tt=0;Tt<tt._pdbx_struct_oper_list_id.length;Tt++){const Mt=parseFloat(tt["_pdbx_struct_oper_list_matrix[1][1]"][Tt]),Pt=parseFloat(tt["_pdbx_struct_oper_list_matrix[1][2]"][Tt]),It=parseFloat(tt["_pdbx_struct_oper_list_matrix[1][3]"][Tt]),Lt=parseFloat(tt["_pdbx_struct_oper_list_vector[1]"][Tt]),zt=parseFloat(tt["_pdbx_struct_oper_list_matrix[2][1]"][Tt]),jt=parseFloat(tt["_pdbx_struct_oper_list_matrix[2][2]"][Tt]),Nt=parseFloat(tt["_pdbx_struct_oper_list_matrix[2][3]"][Tt]),kt=parseFloat(tt["_pdbx_struct_oper_list_vector[2]"][Tt]),Ot=parseFloat(tt["_pdbx_struct_oper_list_matrix[3][1]"][Tt]),Bt=parseFloat(tt["_pdbx_struct_oper_list_matrix[3][2]"][Tt]),Ut=parseFloat(tt["_pdbx_struct_oper_list_matrix[3][3]"][Tt]),Ft=parseFloat(tt["_pdbx_struct_oper_list_vector[3]"][Tt]),Wt=new h.Matrix4(Mt,Pt,It,Lt,zt,jt,Nt,kt,Ot,Bt,Ut,Ft);Et[Et.length-1].symmetries.push(Wt)}const yt=function(Tt){const Mt=Tt.match("-");Tt=Tt.replace(/[-xyz]/g,"");const Pt=Tt.split("/");let It,Lt;return Pt[1]===void 0?Lt=1:Lt=parseInt(Pt[1]),Pt[0]===""?It=1:It=parseInt(Pt[0]),It/Lt*(Mt?-1:1)};if(tt._symmetry_equiv_pos_as_xyz!==void 0&&!St)for(let Tt=0;Tt<tt._symmetry_equiv_pos_as_xyz.length;Tt++){const Pt=tt._symmetry_equiv_pos_as_xyz[Tt].replace(/["' ]/g,"").split(",").map(function(jt){return jt.replace(/-/g,"+-")});let It=new h.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let jt=0;jt<3;jt++){const Nt=Pt[jt].split("+");for(let kt=0;kt<Nt.length;kt++){const Ot=Nt[kt];if(Ot==="")continue;const Bt=yt(Ot);Ot.match("x")?It.elements[jt+0]=Bt:Ot.match("y")?It.elements[jt+4]=Bt:Ot.match("z")?It.elements[jt+8]=Bt:It.elements[jt+12]=Bt}}const Lt=wt.getMatrix4(),zt=new h.Matrix4().getInverse(Lt,!0);It=new h.Matrix4().multiplyMatrices(It,zt),It=new h.Matrix4().multiplyMatrices(Lt,It),Et[Et.length-1].symmetries.push(It)}}for(let tt=0;tt<bt.length;tt++)Ct&&!(vt.duplicateAssemblyAtoms&&!vt.dontConnectDuplicatedAtoms)&&(0,st.assignPDBBonds)(bt[tt],vt),(0,a.computeSecondaryStructure)(bt[tt],vt.hbondCutoff),(0,c.processSymmetries)(Et[tt].symmetries,bt[tt],vt,Et[tt].cryst),vt.duplicateAssemblyAtoms&&!vt.dontConnectDuplicatedAtoms&&Ct&&(0,st.assignPDBBonds)(bt[tt],vt);return bt}},"./src/parsers/CUBE.ts":(e,i,s)=>{s.r(i),s.d(i,{CUBE:()=>st});var a=s("./src/WebGL/index.ts"),c=s("./src/parsers/utils/assignBonds.ts"),h=s("./src/parsers/utils/anumToSymbol.ts");function st(nt,ot){ot=ot||{};const xt=[[]];let vt=nt.split(/\r?\n/);const bt=ot.assignBonds===void 0?!0:ot.assignBonds;if(vt.length<6)return xt;let St=vt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const Et=Math.abs(parseFloat(St[0]));let Ct={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const ht=Ct.origin=new a.Vector3(parseFloat(St[1]),parseFloat(St[2]),parseFloat(St[3]));St=vt[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),St=vt[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const d=St[0]>0?.529177:1;ht.multiplyScalar(d);const b=Math.abs(St[0]),ft=new a.Vector3(parseFloat(St[1]),parseFloat(St[2]),parseFloat(St[3])).multiplyScalar(d);St=vt[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const mt=Math.abs(St[0]),_t=new a.Vector3(parseFloat(St[1]),parseFloat(St[2]),parseFloat(St[3])).multiplyScalar(d);St=vt[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const tt=Math.abs(St[0]),gt=new a.Vector3(parseFloat(St[1]),parseFloat(St[2]),parseFloat(St[3])).multiplyScalar(d);if(Ct.size={x:b,y:mt,z:tt},Ct.unit=new a.Vector3(ft.x,_t.y,gt.z),ft.y!=0||ft.z!=0||_t.x!=0||_t.z!=0||gt.x!=0||gt.y!=0){Ct.matrix4=new a.Matrix4(ft.x,_t.x,gt.x,0,ft.y,_t.y,gt.y,0,ft.z,_t.z,gt.z,0,0,0,0,1);let Lt=new a.Matrix4().makeTranslation(ht.x,ht.y,ht.z);Ct.matrix4=Ct.matrix4.multiplyMatrices(Lt,Ct.matrix4),Ct.matrix=Ct.matrix4.matrix3FromTopLeft(),Ct.origin=new a.Vector3(0,0,0),Ct.unit=new a.Vector3(1,1,1)}xt.modelData=[{cryst:Ct}],vt=vt.splice(6,Et);for(var wt=xt[xt.length-1].length,yt=wt+vt.length,Tt=wt;Tt<yt;++Tt){var Mt={};Mt.serial=Tt;var Pt=vt[Tt-wt],It=Pt.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");Mt.elem=h.anumToSymbol[It[0]],Mt.x=parseFloat(It[2])*d,Mt.y=parseFloat(It[3])*d,Mt.z=parseFloat(It[4])*d,Mt.hetflag=!0,Mt.bonds=[],Mt.bondOrder=[],Mt.properties={},xt[xt.length-1].push(Mt)}if(bt)for(let Lt=0;Lt<xt.length;Lt++)(0,c.assignBonds)(xt[Lt],ot);return xt}},"./src/parsers/GRO.ts":(e,i,s)=>{s.r(i),s.d(i,{GRO:()=>h});var a=s("./src/parsers/utils/assignPDBBonds.ts"),c=s("./src/parsers/utils/atomNameToElem.ts");function h(st,nt){const ot=[],xt=st.split(/\r?\n|\r/);for(;xt.length>0;){const vt=parseInt(xt[1]);if(xt.length<3||isNaN(vt)||vt<=0||xt.length<vt+3)break;const St=[];ot.push(St);let Et=2;const Ct=St.length,ht=Ct+vt;for(let d=Ct;d<ht;d++){const b=xt[Et++],ft={};ft.serial=d,ft.atom=b.slice(10,15).trim(),ft.elem=(0,c.atomNameToElem)(ft.atom,!0),ft.x=10*parseFloat(b.slice(20,28)),ft.y=10*parseFloat(b.slice(28,36)),ft.z=10*parseFloat(b.slice(36,44)),ft.resi=parseInt(b.slice(0,5)),ft.resn=b.slice(5,10).trim(),ft.bonds=[],ft.bondOrder=[],ft.properties={},b.length>44&&(ft.dx=10*parseFloat(b.slice(44,52)),ft.dy=10*parseFloat(b.slice(52,60)),ft.dz=10*parseFloat(b.slice(60,68))),St[d]=ft}if(xt.length<=Et+3){const b=xt[Et++].trim().split(/\s+/);if(b.length===3){for(let ft=0;ft<3;ft++)b[ft]=(parseFloat(b[ft])*10).toString();ot.box=b}}xt.splice(0,++Et)}for(let vt=0;vt<ot.length;vt++)(0,a.assignPDBBonds)(ot[vt],nt);return ot}},"./src/parsers/LAMMPSTRJ.ts":(e,i,s)=>{s.r(i),s.d(i,{LAMMPSTRJ:()=>h});var a=s("./src/parsers/utils/assignBonds.ts");const c={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function h(st,nt){const ot=[],xt=st.split(/\r?\n|\r/);let vt=0,bt=0,St=0;for(;St<xt.length-9;){for(var Et=St;Et<xt.length;Et++)if(xt[Et].match(/ITEM: NUMBER OF ATOMS/)&&(bt=parseInt(xt[Et+1])),xt[Et].match(/ITEM: ATOMS/)){vt=Et+1;break}const Ct=xt[vt-1].replace("ITEM: ATOMS ","").split(" ");ot.push([]);for(let ht=vt;ht<vt+bt;ht++){const d={},b={},ft=xt[ht].split(" ");for(let mt=0;mt<ft.length;mt++){const _t=c[Ct[mt]];_t!==void 0&&(_t==="serial"?d[_t]=parseInt(ft[mt]):_t==="x"||_t==="y"||_t==="z"?d[_t]=parseFloat(ft[mt]):_t==="charge"||_t==="radius"?b[_t]=parseFloat(ft[mt]):d[_t]=ft[mt]),d.properties=b,d.bonds=[],d.bondOrder=[]}ot[ot.length-1][ht-vt]=d}St=vt+bt-1}if(nt.assignBonds)for(let Ct=0;Ct<ot.length;Ct++)(0,a.assignBonds)(ot[Ct],nt);return ot}},"./src/parsers/MMTF.ts":(e,i,s)=>{s.r(i),s.d(i,{MMTFparser:()=>bt});var a=s("./src/utilities.ts"),c=s("./src/WebGL/index.ts"),h=s("./src/parsers/utils/computeSecondaryStructure.ts"),st=s("./src/parsers/utils/processSymmetries.ts"),nt=s("./src/vendor/mmtf.js"),ot=function(St){return String.fromCharCode.apply(null,St).replace(/\0/g,"")},xt=function(St){return St==0||St==2||St==4?"h":St==3?"s":"c"};let vt=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function bt(St,Et){var Ct=!Et.keepH,ht=Et.altLoc?Et.altLoc:"A",d=!!Et.noSecondaryStructure,b=!Et.noComputeSecondaryStructure,ft=!Et.doAssembly,mt=Et.assemblyIndex?Et.assemblyIndex:0;typeof St=="string"?St=(0,a.base64ToArray)(St):St=new Uint8Array(St);var _t=nt.decode(St),tt=[[]],gt=tt.modelData=[],wt=0,yt=0,Tt=0,Mt=_t.secStructList,Pt=_t.bFactorList,It=_t.altLocList,Lt=_t.occupancyList,zt=_t.bondAtomList,jt=_t.bondOrderList,Nt=_t.numModels;if(Nt==0)return tt;Et.multimodel||(Nt=1);var kt,Ot,Bt,Ut,Ft,Wt,_i=[];if(!ft&&_t.bioAssemblyList&&_t.bioAssemblyList.length>0){var Qt=_t.bioAssemblyList[mt].transformList;for(kt=0,Wt=Qt.length;kt<Wt;kt++){var on=new c.Matrix4(Qt[kt].matrix);on.transpose(),_i.push(on)}}var nn=null;if(_t.unitCell){var dn=_t.unitCell;nn={a:dn[0],b:dn[1],c:dn[2],alpha:dn[3],beta:dn[4],gamma:dn[5]}}let tn=[];_t.entityList.forEach(pn=>{pn.chainIndexList.forEach(Kt=>{tn[Kt]=pn.type=="polymer"})});var rn=0;for(Ft=0;Ft<Nt;Ft++){var En=_t.chainsPerModel[Ft],bn=tt[tt.length-1],Dn=[];for(gt.push({symmetries:_i,cryst:nn}),kt=0;kt<En;++kt){var hn=_t.groupsPerChain[wt],en=ot(_t.chainIdList.subarray(wt*4,wt*4+4));_t.chainNameList&&(en=ot(_t.chainNameList.subarray(wt*4,wt*4+4)));var xn=yt,Pn="";for(Ot=0;Ot<hn;++Ot){var In=_t.groupList[_t.groupTypeList[yt]],Nn=In.atomNameList.length,Un=0,kn=!1,jn=!1;if(Mt){Un=Mt[yt];var zn=xt(Un);(yt==0||zn!=Pn)&&(kn=!0),Pn=zn;var On=yt+1;(On>=Mt.length||xt(Mt[On]!=zn))&&(jn=!0)}var cn=_t.groupIdList[yt],Ln=In.groupName;let pn=In.chemCompType;var Fn=Tt;let Kt=vt.has(pn)||!tn[wt];for(Bt=0;Bt<Nn;++Bt){var $t=In.elementList[Bt];if(Ct&&$t=="H"){Tt+=1;continue}var Xt="";Pt&&(Xt=Pt[Tt]);var Zt="";It&&It[Tt]&&(Zt=String.fromCharCode(It[Tt]));var mn="";if(Lt&&(mn=Lt[Tt]),Zt!=""&&Zt!=ht&&ht!="*"){Tt+=1;continue}var an=_t.atomIdList[Tt],Rn=In.atomNameList[Bt],Cn=0;In.atomChargeList&&(Cn=In.atomChargeList[Bt]);var Gt=_t.xCoordList[Tt],un=_t.yCoordList[Tt],yn=_t.zCoordList[Tt];Dn[Tt]=bn.length,bn.push({resn:Ln,x:Gt,y:un,z:yn,elem:$t,hetflag:Kt,chain:en,resi:cn,icode:Zt,rescode:cn+(Zt!=" "?"^"+Zt:""),serial:an,altLoc:Zt,index:Tt,atom:Rn,bonds:[],ss:xt(Un),ssbegin:kn,ssend:jn,bondOrder:[],properties:{charge:Cn,occupancy:mn},b:Xt}),Tt+=1}var Mn=In.bondAtomList;for(Bt=0,Ut=In.bondOrderList.length;Bt<Ut;++Bt){var ln=Fn+Mn[Bt*2],wn=Fn+Mn[Bt*2+1],Ht=In.bondOrderList[Bt],Tn=Dn[ln],Vn=Dn[wn],Rt=bn[Tn],gn=bn[Vn];Rt&&gn&&(Rt.bonds.push(Vn),Rt.bondOrder.push(Ht),gn.bonds.push(Tn),gn.bondOrder.push(Ht))}yt+=1}for(yt=xn,Ot=0;Ot<hn;++Ot)yt+=1;wt+=1}if(zt)for(let pn=rn,Kt=zt.length;pn<Kt;pn+=2){let sn=zt[pn],_n=zt[pn+1],Gn=jt?jt[pn/2]:1;if(sn>=Tt){rn=pn;break}let $n=Dn[sn],Wn=Dn[_n],Qn=bn[$n],_r=bn[Wn];Qn&&_r&&(Qn.bonds.push(Wn),Qn.bondOrder.push(Gn),_r.bonds.push($n),_r.bondOrder.push(Gn))}Et.multimodel&&(Et.onemol||tt.push([]))}if(!ft)for(let pn=0;pn<tt.length;pn++)(0,st.processSymmetries)(gt[pn].symmetries,tt[pn],Et,gt[pn].cryst);return b&&!d&&(0,h.computeSecondaryStructure)(tt,Et.hbondCutoff),tt}},"./src/parsers/MOL2.ts":(e,i,s)=>{s.r(i),s.d(i,{MOL2:()=>c});let a={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function c(h,st){var nt=[[]],ot=!1;typeof st.keepH<"u"&&(ot=!st.keepH);var xt=h.search(/@<TRIPOS>MOLECULE/),vt=h.search(/@<TRIPOS>ATOM/);if(xt==-1||vt==-1)return nt;for(var bt=h.substring(xt).split(/\r?\n|\r/);bt.length>0;){var St=[],Et=bt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Ct=parseInt(Et[0]),ht=0;Et.length>1&&(ht=parseInt(Et[1]));var d=4,b;for(b=3;b<bt.length;b++)if(bt[b]=="@<TRIPOS>ATOM"){d=b+1;break}var ft=nt[nt.length-1].length,mt=ft+Ct,_t;for(b=ft;b<mt;b++){_t=bt[d++],Et=_t.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var tt={},gt=Et[5];if(a[gt]!==void 0?gt=a[gt]:(gt=gt.split(".")[0],gt=gt[0].toUpperCase()+gt.substring(1).toLowerCase()),tt.atom=Et[1],tt.elem=gt,!(tt.elem=="H"&&ot)){var wt=nt[nt.length-1].length,yt=parseInt(Et[0]);tt.serial=yt,tt.x=parseFloat(Et[2]),tt.y=parseFloat(Et[3]),tt.z=parseFloat(Et[4]),tt.atom=Et[5];var Tt=parseFloat(Et[8]);tt.index=wt,tt.bonds=[],tt.bondOrder=[],tt.properties={charge:Tt,partialCharge:Tt},St[yt]=wt,nt[nt.length-1].push(tt)}}for(var Mt=!1;d<bt.length;)if(bt[d++]=="@<TRIPOS>BOND"){Mt=!0;break}if(Mt&&ht)for(b=0;b<ht;b++){_t=bt[d++],Et=_t.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var Pt=parseInt(Et[1]),It=nt[nt.length-1][St[Pt]],Lt=parseInt(Et[2]),zt=nt[nt.length-1][St[Lt]],jt=parseInt(Et[3]);isNaN(jt)&&(jt=1),It!==void 0&&zt!==void 0&&(It.bonds.push(St[Lt]),It.bondOrder.push(jt),zt.bonds.push(St[Pt]),zt.bondOrder.push(jt))}if(st.multimodel){st.onemol||nt.push([]),bt.splice(0,d),h=bt.join(`
`);continue}else break}return nt}},"./src/parsers/PDB.ts":(e,i,s)=>{s.r(i),s.d(i,{PDB:()=>c});var a=s("./src/parsers/utils/getSinglePDB.ts");function c(h,st){st=st||{};var nt=[],ot={};nt.modelData=[];for(var xt=h.split(/\r?\n|\r/);xt.length>0;){var vt=(0,a.getSinglePDB)(xt,st,ot),bt=vt[0],St=vt[1];if(xt=vt[2],bt.length!=0){if(st.multimodel&&st.onemol&&nt.length>0)for(var Et=nt[0].length,Ct=0;Ct<bt.length;Ct++){var ht=bt[Ct];ht.index=Ct;for(var d=0;d<ht.bonds.length;d++)ht.bonds[d]+=Et;nt[0].push(ht)}else nt.modelData.push(St),nt.push(bt);if(!st.multimodel)break}}return nt}},"./src/parsers/PQR.ts":(e,i,s)=>{s.r(i),s.d(i,{PQR:()=>h});var a=s("./src/parsers/utils/assignPDBBonds.ts"),c=s("./src/parsers/utils/computeSecondaryStructure.ts");function h(st,nt){var ot=[[]],xt=!nt.noSecondaryStructure;ot.modelData=[{symmetries:[]}];var vt=[],bt=st.split(/\r?\n|\r/),St;for(let Mt=0;Mt<bt.length;Mt++){St=bt[Mt].replace(/^\s*/,"");var Et=St.substring(0,6);if(Et.indexOf("END")==0)if(nt.multimodel){nt.onemol||ot.push([]);continue}else break;else if(Et=="ATOM  "||Et=="HETATM"){var Ct;let Pt=parseInt(St.substring(6,11)),It=St.substring(12,16).replace(/ /g,""),Lt=St.substring(17,20).trim(),zt=St.substring(21,22),jt=parseInt(St.substring(22,26));var ht=St.substring(30).trim().split(/\s+/),d=parseFloat(ht[0]),b=parseFloat(ht[1]),ft=parseFloat(ht[2]),mt=parseFloat(ht[3]),_t=parseFloat(ht[4]),tt=It[0];It.length>1&&It[1].toUpperCase()!=It[1]&&(tt=It.substring(0,2)),St[0]=="H"?Ct=!0:Ct=!1,vt[Pt]=ot[ot.length-1].length,ot[ot.length-1].push({resn:Lt,x:d,y:b,z:ft,elem:tt,hetflag:Ct,chain:zt,resi:jt,serial:Pt,atom:It,bonds:[],ss:"c",bondOrder:[],properties:{charge:mt,partialCharge:mt,radius:_t},pdbline:St})}else if(Et=="CONECT"){var gt=parseInt(St.substring(6,11)),wt=ot[ot.length-1][vt[gt]];for(let Pt=0;Pt<4;Pt++){var yt=parseInt(St.substring([11,16,21,26][Pt],[11,16,21,26][Pt]+5)),Tt=ot[ot.length-1][vt[yt]];wt!==void 0&&Tt!==void 0&&(wt.bonds.push(vt[yt]),wt.bondOrder.push(1))}}}for(let Mt=0;Mt<ot.length;Mt++)(0,a.assignPDBBonds)(ot[Mt],nt),xt&&(0,c.computeSecondaryStructure)(ot[Mt],nt.hbondCutoff);return ot}},"./src/parsers/PRMTOP.ts":(e,i,s)=>{s.r(i),s.d(i,{PRMTOP:()=>a});function a(c){var h=[],st,nt=0,ot=c.split(/\r?\n|\r/);if(ot.length>0&&ot[0].includes("VERSION")){var xt=ot.filter(function(d){return d.includes("POINTERS")||d.includes("ATOM_NAME")||d.includes("CHARGE")||d.includes("RADII")||d.includes("BONDS_INC_HYDROGEN")||d.includes("BONDS_WITHOUT_HYDROGEN")}),vt=Ct("POINTERS");if(vt==-1)return[];var bt=ht(vt),St=parseInt(ot[vt+1].slice(0,bt[1]));if(isNaN(St)||St<=0)return[];if(vt=Ct("ATOM_NAME"),vt==-1)return[];bt=ht(vt);var Et=bt[0];for(let d=0;d<St/bt[0];d++){d==parseInt(St/bt[0])&&(Et=St%bt[0]);for(let b=0;b<Et;b++){let ft={},mt={charge:"",radii:""};ft.serial=nt,ft.x=0,ft.y=0,ft.z=0,ft.atom=ot[vt+1].slice(bt[1]*b,bt[1]*(b+1)).trim(),ft.elem=ot[vt+1].slice(bt[1]*b,bt[1]*b+1).trim(),ft.properties=mt,ft.bonds=[],ft.bondOrder=[],h.push(ft),nt++}vt++}if(vt=Ct("CHARGE"),vt!=-1){bt=ht(vt),nt=0,Et=bt[0];for(let d=0;d<St/bt[0];d++){d==parseInt(St/bt[0])&&(Et=St%bt[0]);for(let b=0;b<Et;b++)h[nt].properties.charge=parseFloat(ot[vt+1].slice(bt[1]*b,bt[1]*(b+1))),nt++;vt++}}if(vt=Ct("RADII"),vt!=-1){bt=ht(vt),nt=0,Et=bt[0];for(let d=0;d<St/bt[0];d++){d==parseInt(St/bt[0])&&(Et=St%bt[0]);for(let b=0;b<Et;b++)h[nt].properties.radii=parseFloat(ot[vt+1].slice(bt[1]*b,bt[1]*(b+1))),nt++;vt++}}if(vt=Ct("BONDS_WITHOUT_HYDROGEN"),vt!=-1)for(bt=ht(vt),nt=0,Et=bt[0],vt=vt+1;!ot[vt].match(/^%FLAG/);){ot[vt+1].match(/^%FLAG/)&&(Et=St%bt[0]);for(let d=0;d<Et;d++)nt%3==0?st=parseInt(ot[vt].slice(bt[1]*d,bt[1]*(d+1))/3):nt%3==1&&h[st].bonds.push(parseInt(ot[vt].slice(bt[1]*d,bt[1]*(d+1))/3)),nt++;vt++}if(vt=Ct("BONDS_INC_HYDROGEN"),vt!=-1)for(bt=ht(vt),nt=0,Et=bt[0],vt=vt+1;!ot[vt].match(/^%FLAG/);){ot[vt+1].match(/^%FLAG/)&&(Et=St%bt[0]);for(let d=0;d<Et;d++)nt%3==0?st=parseInt(ot[vt].slice(bt[1]*d,bt[1]*(d+1))/3):nt%3==1&&h[st].bonds.push(parseInt(ot[vt].slice(bt[1]*d,bt[1]*(d+1))/3)),nt++;vt++}}else return[];function Ct(d){var b=ot.indexOf(xt.filter(function(ft){return ft.includes(d)})[0]);if(Number.isInteger(b)&&b>0){for(;!ot[b].includes("FORMAT");)b++;return b}else return-1}function ht(d){var b=ot[d].match(/\((\d*)\S*/),ft=ot[d].match(/[a-zA-Z](\d*)\)\s*/);return ft==null&&(ft=ot[d].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[b[1],ft[1]]}return[h]}},"./src/parsers/SDF.ts":(e,i,s)=>{s.r(i),s.d(i,{SDF:()=>h});var a=function(st,nt){var ot=[[]],xt=!1;for(typeof nt.keepH<"u"&&(xt=!nt.keepH);st.length>0&&!(st.length<4);){var vt=parseInt(st[3].substring(0,3));if(isNaN(vt)||vt<=0)break;var bt=parseInt(st[3].substring(3,6)),St=4;if(st.length<4+vt+bt)break;var Et=[],Ct=ot[ot.length-1].length,ht=Ct+vt,d,b;for(d=Ct;d<ht;d++,St++){b=st[St];var ft={},mt=b.substring(31,34).replace(/ /g,"");ft.atom=ft.elem=mt[0].toUpperCase()+mt.substring(1).toLowerCase(),(ft.elem!=="H"||!xt)&&(ft.serial=d,Et[d]=ot[ot.length-1].length,ft.x=parseFloat(b.substring(0,10)),ft.y=parseFloat(b.substring(10,20)),ft.z=parseFloat(b.substring(20,30)),ft.hetflag=!0,ft.bonds=[],ft.bondOrder=[],ft.properties={},ft.index=ot[ot.length-1].length,ot[ot.length-1].push(ft))}for(d=0;d<bt;d++,St++){b=st[St];var _t=Et[parseInt(b.substring(0,3))-1+Ct],tt=Et[parseInt(b.substring(3,6))-1+Ct],gt=parseFloat(b.substring(6));typeof _t<"u"&&typeof tt<"u"&&(ot[ot.length-1][_t].bonds.push(tt),ot[ot.length-1][_t].bondOrder.push(gt),ot[ot.length-1][tt].bonds.push(_t),ot[ot.length-1][tt].bondOrder.push(gt))}if(nt.multimodel){for(nt.onemol||ot.push([]);st[St]!=="$$$$"&&St<st.length;)St++;st.splice(0,++St)}else break}return ot},c=function(st,nt){var ot=[[]],xt=!1;for(typeof nt.keepH<"u"&&(xt=!nt.keepH);st.length>0&&!(st.length<8||!st[4].startsWith("M  V30 BEGIN CTAB")||!st[5].startsWith("M  V30 COUNTS")||st[5].length<14);){var vt=st[5].substring(13).match(/\S+/g);if(vt.length<2)break;var bt=parseInt(vt[0]);if(isNaN(bt)||bt<=0)break;var St=parseInt(vt[1]),Et=7;if(st.length<8+bt+St)break;var Ct=[],ht=ot[ot.length-1].length,d=ht+bt,b,ft;for(b=ht;b<d;b++,Et++){ft=st[Et];var mt=ft.substring(6).match(/\S+/g);if(mt.length>4){var _t={},tt=mt[1].replace(/ /g,"");_t.atom=_t.elem=tt[0].toUpperCase()+tt.substring(1).toLowerCase(),(_t.elem!=="H"||!xt)&&(_t.serial=b,Ct[b]=ot[ot.length-1].length,_t.x=parseFloat(mt[2]),_t.y=parseFloat(mt[3]),_t.z=parseFloat(mt[4]),_t.hetflag=!0,_t.bonds=[],_t.bondOrder=[],_t.properties={},_t.index=ot[ot.length-1].length,ot[ot.length-1].push(_t))}}if(st[Et]==="M  V30 END ATOM")Et++;else break;if(St!==0&&st[Et]==="M  V30 BEGIN BOND")Et++;else break;for(b=0;b<St;b++,Et++){ft=st[Et];var gt=ft.substring(6).match(/\S+/g);if(gt.length>3){var wt=Ct[parseInt(gt[2])-1+ht],yt=Ct[parseInt(gt[3])-1+ht],Tt=parseFloat(gt[1]);typeof wt<"u"&&typeof yt<"u"&&(ot[ot.length-1][wt].bonds.push(yt),ot[ot.length-1][wt].bondOrder.push(Tt),ot[ot.length-1][yt].bonds.push(wt),ot[ot.length-1][yt].bondOrder.push(Tt))}}if(nt.multimodel){for(nt.onemol||ot.push([]);st[Et]!=="$$$$"&&Et<st.length;)Et++;st.splice(0,++Et)}else break}return ot};function h(st,nt){var ot="V2000",xt=st.split(/\r?\n|\r/);return xt.length>3&&xt[3].length>38&&(ot=xt[3].substring(34,39)),ot==="V2000"?a(xt,nt):ot==="V3000"?c(xt,nt):[[""]]}},"./src/parsers/VASP.ts":(e,i,s)=>{s.r(i),s.d(i,{VASP:()=>h});var a=s("./src/WebGL/index.ts"),c=s("./src/parsers/utils/assignBonds.ts");function h(st,nt={}){var ot=[[]],xt={};const vt=nt.assignBonds===void 0?!0:nt.assignBonds;var bt=st.replace(/^\s+/,"").split(/\r?\n/);if(bt.length<3)return ot;if(bt[1].match(/\d+/))xt.length=parseFloat(bt[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),ot;if(xt.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),ot;xt.xVec=new Float32Array(bt[2].replace(/^\s+/,"").split(/\s+/)),xt.yVec=new Float32Array(bt[3].replace(/^\s+/,"").split(/\s+/)),xt.zVec=new Float32Array(bt[4].replace(/^\s+/,"").split(/\s+/));var St=new a.Matrix3(xt.xVec[0],xt.xVec[1],xt.xVec[2],xt.yVec[0],xt.yVec[1],xt.yVec[2],xt.zVec[0],xt.zVec[1],xt.zVec[2]);St.multiplyScalar(xt.length),ot.modelData=[{symmetries:[],cryst:{matrix:St}}];var Et=bt[5].trim().split(/\s+/),Ct=new Int16Array(bt[6].trim().split(/\s+/)),ht=bt[7].trim(),d=!1;if(ht.match(/S/)&&(d=!0,ht=bt[8].trim()),ht.toLowerCase()[0]=="c")ht="cartesian";else if(ht.toLowerCase()[0]=="d")ht="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),ot;if(Et.length!=Ct.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(Et),console.log(Ct),ot;d?bt.splice(0,9):bt.splice(0,8);for(var b=0,ft=0,mt=Et.length;ft<mt;ft++){for(var _t=Et[ft],tt=0,gt=Ct[ft];tt<gt;tt++){var wt=new Float32Array(bt[b+tt].trim().split(/\s+/)),yt={};yt.elem=_t,ht=="cartesian"?(yt.x=xt.length*wt[0],yt.y=xt.length*wt[1],yt.z=xt.length*wt[2]):(yt.x=xt.length*(wt[0]*xt.xVec[0]+wt[1]*xt.yVec[0]+wt[2]*xt.zVec[0]),yt.y=xt.length*(wt[0]*xt.xVec[1]+wt[1]*xt.yVec[1]+wt[2]*xt.zVec[1]),yt.z=xt.length*(wt[0]*xt.xVec[2]+wt[1]*xt.yVec[2]+wt[2]*xt.zVec[2])),yt.bonds=[],yt.bondOrder=[],ot[0].push(yt)}b+=Ct[ft]}if(vt)for(let Tt=0;Tt<ot.length;Tt++)(0,c.assignBonds)(ot[Tt],nt);return ot}},"./src/parsers/XYZ.ts":(e,i,s)=>{s.r(i),s.d(i,{XYZ:()=>h});var a=s("./src/WebGL/index.ts"),c=s("./src/parsers/utils/assignBonds.ts");function h(st,nt){nt=nt||{};for(var ot=[[]],xt=nt.assignBonds===void 0?!0:nt.assignBonds,vt=st.trimStart().split(/\r?\n|\r/);vt.length>0&&!(vt.length<3);){var bt=parseInt(vt[0]);if(isNaN(bt)||bt<=0||vt.length<bt+2)break;var St=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,Et=St.exec(vt[1]);if(Et!=null&&Et.length>1){var Ct=new Float32Array(Et[1].split(/\s+/)),ht=new a.Matrix3(Ct[0],Ct[3],Ct[6],Ct[1],Ct[4],Ct[7],Ct[2],Ct[5],Ct[8]);ot.modelData=[{cryst:{matrix:ht}}]}for(var d=2,b=ot[ot.length-1].length,ft=b+bt,mt=b;mt<ft;mt++){var _t=vt[d++],tt=_t.trim().split(/\s+/),gt={};gt.serial=mt;var wt=tt[0];gt.atom=gt.elem=wt[0].toUpperCase()+wt.substring(1,2).toLowerCase(),gt.x=parseFloat(tt[1]),gt.y=parseFloat(tt[2]),gt.z=parseFloat(tt[3]),gt.hetflag=!0,gt.bonds=[],gt.bondOrder=[],gt.properties={},ot[ot.length-1][mt]=gt,tt.length>=7&&(gt.dx=parseFloat(tt[4]),gt.dy=parseFloat(tt[5]),gt.dz=parseFloat(tt[6]))}if(nt.multimodel)ot.push([]),vt.splice(0,d);else break}if(xt)for(let Tt=0;Tt<ot.length;Tt++)(0,c.assignBonds)(ot[Tt],nt);if(nt.onemol){var yt=ot;ot=[],ot.push(yt[0]);for(let Tt=1;Tt<yt.length;Tt++){let Mt=ot[0].length;for(let Pt=0;Pt<yt[Tt].length;Pt++){let It=yt[Tt][Pt];for(let Lt=0;Lt<It.bonds.length;Lt++)It.bonds[Lt]=It.bonds[Lt]+Mt;It.index=ot[0].length,It.serial=ot[0].length,ot[0].push(It)}}}return ot}},"./src/parsers/cifutils/category.ts":(e,i,s)=>{s.r(i),s.d(i,{Category:()=>c});var a=s("./src/parsers/cifutils/decoder.ts");function c(h){const st=Object.create(null),nt=Object.create(null);for(const ot of h.columns)st[ot.name]=ot;return{rowCount:h.rowCount,name:h.name.substring(1),fieldNames:h.columns.map(ot=>ot.name),getField(ot){const xt=st[ot];if(xt)return nt[ot]||(nt[ot]=(0,a.decode)(xt.data)),nt[ot]}}}},"./src/parsers/cifutils/decoder.ts":(e,i,s)=>{s.r(i),s.d(i,{decode:()=>st});var a=s("./src/parsers/cifutils/encoding.ts");const c=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function h(Mt,Pt){const It=new ArrayBuffer(Mt.length),Lt=new Uint8Array(It);for(let zt=0,jt=Mt.length;zt<jt;zt+=Pt)for(let Nt=0;Nt<Pt;Nt++)Lt[zt+Pt-Nt-1]=Mt[zt+Nt];return It}function st(Mt){let Pt=Mt.data;for(let It=Mt.encoding.length-1;It>=0;It--)Pt=nt(Pt,Mt.encoding[It]);return Pt}function nt(Mt,Pt){switch(Pt.kind){case"ByteArray":switch(Pt.type){case a.Encoding.IntDataType.Uint8:return Mt;case a.Encoding.IntDataType.Int8:return vt(Mt);case a.Encoding.IntDataType.Int16:return St(Mt);case a.Encoding.IntDataType.Uint16:return Et(Mt);case a.Encoding.IntDataType.Int32:return Ct(Mt);case a.Encoding.IntDataType.Uint32:return ht(Mt);case a.Encoding.FloatDataType.Float32:return d(Mt);case a.Encoding.FloatDataType.Float64:return b(Mt);default:throw new Error("unreachable")}case"FixedPoint":return ft(Mt,Pt);case"IntervalQuantization":return mt(Mt,Pt);case"RunLength":return _t(Mt,Pt);case"Delta":return tt(Mt,Pt);case"IntegerPacking":return yt(Mt,Pt);case"StringArray":return Tt(Mt,Pt)}}function ot(Mt,Pt){switch(Mt){case a.Encoding.IntDataType.Int8:return new Int8Array(Pt);case a.Encoding.IntDataType.Int16:return new Int16Array(Pt);case a.Encoding.IntDataType.Int32:return new Int32Array(Pt);case a.Encoding.IntDataType.Uint8:return new Uint8Array(Pt);case a.Encoding.IntDataType.Uint16:return new Uint16Array(Pt);case a.Encoding.IntDataType.Uint32:return new Uint32Array(Pt);default:return new Int32Array(Pt)}}function xt(Mt,Pt){switch(Mt){case a.Encoding.FloatDataType.Float32:return new Float32Array(Pt);case a.Encoding.FloatDataType.Float64:return new Float64Array(Pt);default:return new Float64Array(Pt)}}function vt(Mt){return new Int8Array(Mt.buffer,Mt.byteOffset)}function bt(Mt,Pt,It){return(Mt.byteOffset!=0||Mt.byteLength!=Mt.buffer.byteLength)&&(Mt=new Uint8Array(Mt)),c?new It(Mt.buffer):new It(h(Mt,Pt))}function St(Mt){return bt(Mt,2,Int16Array)}function Et(Mt){return bt(Mt,2,Uint16Array)}function Ct(Mt){return bt(Mt,4,Int32Array)}function ht(Mt){return bt(Mt,4,Uint32Array)}function d(Mt){return bt(Mt,4,Float32Array)}function b(Mt){return bt(Mt,8,Float64Array)}function ft(Mt,Pt){const It=Mt.length,Lt=xt(Pt.srcType,It),zt=1/Pt.factor;for(let jt=0;jt<It;jt++)Lt[jt]=zt*Mt[jt];return Lt}function mt(Mt,Pt){const It=Mt.length,Lt=xt(Pt.srcType,It),zt=(Pt.max-Pt.min)/(Pt.numSteps-1),jt=Pt.min;for(let Nt=0;Nt<It;Nt++)Lt[Nt]=jt+zt*Mt[Nt];return Lt}function _t(Mt,Pt){const It=ot(Pt.srcType,Pt.srcSize);let Lt=0;for(let zt=0,jt=Mt.length;zt<jt;zt+=2){const Nt=Mt[zt],kt=Mt[zt+1];for(let Ot=0;Ot<kt;++Ot)It[Lt++]=Nt}return It}function tt(Mt,Pt){const It=Mt.length,Lt=ot(Pt.srcType,It);if(!It)return Mt;Lt[0]=Mt[0]+(Pt.origin|0);for(let zt=1;zt<It;++zt)Lt[zt]=Mt[zt]+Lt[zt-1];return Lt}function gt(Mt,Pt){const It=Pt.byteCount===1?127:32767,Lt=-It-1,zt=Mt.length,jt=new Int32Array(Pt.srcSize);let Nt=0,kt=0;for(;Nt<zt;){let Ot=0,Bt=Mt[Nt];for(;Bt===It||Bt===Lt;)Ot+=Bt,Nt++,Bt=Mt[Nt];Ot+=Bt,jt[kt]=Ot,Nt++,kt++}return jt}function wt(Mt,Pt){const It=Pt.byteCount===1?255:65535,Lt=Mt.length,zt=new Int32Array(Pt.srcSize);let jt=0,Nt=0;for(;jt<Lt;){let kt=0,Ot=Mt[jt];for(;Ot===It;)kt+=Ot,jt++,Ot=Mt[jt];kt+=Ot,zt[Nt]=kt,jt++,Nt++}return zt}function yt(Mt,Pt){return Mt.length===Pt.srcSize?Mt:Pt.isUnsigned?wt(Mt,Pt):gt(Mt,Pt)}function Tt(Mt,Pt){const It=st({encoding:Pt.offsetEncoding,data:Pt.offsets}),Lt=st({encoding:Pt.dataEncoding,data:Mt}),zt=Pt.stringData,jt=new Array(It.length);jt[0]="";for(let Ot=1,Bt=It.length;Ot<Bt;Ot++)jt[Ot]=zt.substring(It[Ot-1],It[Ot]);let Nt=0;const kt=new Array(Lt.length);for(let Ot=0,Bt=Lt.length;Ot<Bt;Ot++)kt[Nt++]=jt[Lt[Ot]+1];return kt}},"./src/parsers/cifutils/encoding.ts":(e,i,s)=>{s.r(i),s.d(i,{Encoding:()=>c,VERSION:()=>a});const a="0.3.0";var c;(function(h){(function(ot){ot[ot.Int8=1]="Int8",ot[ot.Int16=2]="Int16",ot[ot.Int32=3]="Int32",ot[ot.Uint8=4]="Uint8",ot[ot.Uint16=5]="Uint16",ot[ot.Uint32=6]="Uint32"})(h.IntDataType||(h.IntDataType={})),function(ot){ot[ot.Float32=32]="Float32",ot[ot.Float64=33]="Float64"}(h.FloatDataType||(h.FloatDataType={}));function st(ot){let xt;return ot instanceof Int8Array?xt=h.IntDataType.Int8:ot instanceof Int16Array?xt=h.IntDataType.Int16:ot instanceof Int32Array?xt=h.IntDataType.Int32:ot instanceof Uint8Array?xt=h.IntDataType.Uint8:ot instanceof Uint16Array?xt=h.IntDataType.Uint16:ot instanceof Uint32Array?xt=h.IntDataType.Uint32:ot instanceof Float32Array?xt=h.FloatDataType.Float32:ot instanceof Float64Array?xt=h.FloatDataType.Float64:xt=h.IntDataType.Int32,xt}h.getDataType=st;function nt(ot){if(ot instanceof Int8Array||ot instanceof Int16Array||ot instanceof Int32Array)return!0;for(let xt=0,vt=ot.length;xt<vt;xt++)if(xt<0)return!1;return!0}h.isSignedIntegerDataType=nt})(c||(c={}))},"./src/parsers/index.ts":(e,i,s)=>{s.r(i),s.d(i,{Parsers:()=>ft,bondLength:()=>b.bondLength,setBondLength:()=>b.setBondLength});var a=s("./src/parsers/VASP.ts"),c=s("./src/parsers/CUBE.ts"),h=s("./src/parsers/XYZ.ts"),st=s("./src/parsers/SDF.ts"),nt=s("./src/parsers/CDJSON.ts"),ot=s("./src/parsers/CIF.ts"),xt=s("./src/parsers/MOL2.ts"),vt=s("./src/parsers/PDB.ts"),bt=s("./src/parsers/PQR.ts"),St=s("./src/parsers/MMTF.ts"),Et=s("./src/parsers/PRMTOP.ts"),Ct=s("./src/parsers/GRO.ts"),ht=s("./src/parsers/LAMMPSTRJ.ts"),d=s("./src/parsers/BCIF.ts"),b=s("./src/parsers/utils/bondLength.ts");const ft={vasp:a.VASP,VASP:a.VASP,cube:c.CUBE,CUBE:c.CUBE,xyz:h.XYZ,XYZ:h.XYZ,sdf:st.SDF,SDF:st.SDF,json:nt.CDJSON,cdjson:nt.CDJSON,CDJSON:nt.CDJSON,mcif:ot.CIF,cif:ot.CIF,CIF:ot.CIF,mol2:xt.MOL2,MOL2:xt.MOL2,pdb:vt.PDB,PDB:vt.PDB,pdbqt:vt.PDB,PDBQT:vt.PDB,pqr:bt.PQR,PQR:bt.PQR,mmtf:St.MMTFparser,MMTF:St.MMTFparser,prmtop:Et.PRMTOP,PRMTOP:Et.PRMTOP,gro:Ct.GRO,GRO:Ct.GRO,lammpstrj:ht.LAMMPSTRJ,LAMMPSTRJ:ht.LAMMPSTRJ,bcif:d.BCIF,BCIF:d.BCIF}},"./src/parsers/utils/anumToSymbol.ts":(e,i,s)=>{s.r(i),s.d(i,{anumToSymbol:()=>a});const a={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}},"./src/parsers/utils/areConnected.ts":(e,i,s)=>{s.r(i),s.d(i,{areConnected:()=>h});var a=s("./src/parsers/utils/bondLength.ts");const c=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function h(st,nt,ot){if(ot&&ot.unboundCations&&(c.has(st.elem)||c.has(nt.elem)))return!1;let xt=(0,a.bondLength)(st.elem)+(0,a.bondLength)(nt.elem);xt+=.25,xt*=xt;let vt=st.x-nt.x;if(vt*=vt,vt>xt)return!1;let bt=st.y-nt.y;if(bt*=bt,bt>xt)return!1;let St=st.z-nt.z;if(St*=St,St>xt)return!1;const Et=vt+bt+St;return!(isNaN(Et)||Et<.5||Et>xt||st.altLoc!==nt.altLoc&&st.altLoc.trim()!==""&&nt.altLoc.trim()!=="")}},"./src/parsers/utils/assignBackboneHBonds.ts":(e,i,s)=>{s.r(i),s.d(i,{assignBackboneHBonds:()=>a});function a(c,h){const st=h||3.2,nt=st*st,ot=[];for(let xt=0,vt=c.length;xt<vt;xt++){c[xt].index=xt;const bt=c[xt];!bt.hetflag&&(bt.atom==="N"||bt.atom==="O")&&(ot.push(bt),bt.hbondOther=null,bt.hbondDistanceSq=Number.POSITIVE_INFINITY)}ot.sort(function(xt,vt){return xt.z-vt.z});for(let xt=0,vt=ot.length;xt<vt;xt++){const bt=ot[xt];for(let St=xt+1;St<vt;St++){const Et=ot[St],Ct=Et.z-bt.z;if(Ct>st)break;if(Et.atom==bt.atom)continue;const ht=Math.abs(Et.y-bt.y);if(ht>st)continue;const d=Math.abs(Et.x-bt.x);if(d>st)continue;const b=d*d+ht*ht+Ct*Ct;b>nt||Et.chain==bt.chain&&Math.abs(Et.resi-bt.resi)<4||(b<bt.hbondDistanceSq&&(bt.hbondOther=Et,bt.hbondDistanceSq=b),b<Et.hbondDistanceSq&&(Et.hbondOther=bt,Et.hbondDistanceSq=b))}}}},"./src/parsers/utils/assignBonds.ts":(e,i,s)=>{s.r(i),s.d(i,{assignBonds:()=>st});var a=s("./src/parsers/utils/areConnected.ts");const c=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],h=4.95;function st(nt,ot){for(let bt=0,St=nt.length;bt<St;bt++)nt[bt].index||(nt[bt].index=bt);const xt={x:{y:{z:[]}}};for(let bt=0;bt<nt.length;bt++){const St=nt[bt],Et=Math.floor(St.x/h),Ct=Math.floor(St.y/h),ht=Math.floor(St.z/h);xt[Et]||(xt[Et]={}),xt[Et][Ct]||(xt[Et][Ct]={}),xt[Et][Ct][ht]||(xt[Et][Ct][ht]=[]),xt[Et][Ct][ht].push(St)}function vt(bt,St){for(let Et=0;Et<bt.length;Et++){const Ct=bt[Et];for(let ht=0;ht<St.length;ht++){const d=St[ht];if((0,a.areConnected)(Ct,d,ot)){const b=Ct.bonds.indexOf(d.index),ft=d.bonds.indexOf(Ct.index);b===-1&&ft===-1?(Ct.bonds.push(d.index),Ct.bondOrder.push(1),d.bonds.push(Ct.index),d.bondOrder.push(1)):b===-1?(Ct.bonds.push(d.index),Ct.bondOrder.push(d.bondOrder[ft])):ft===-1&&(d.bonds.push(Ct.index),d.bondOrder.push(Ct.bondOrder[b]))}}}}for(let bt in xt){const St=parseInt(bt);for(let Et in xt[St]){const Ct=parseInt(Et);for(let ht in xt[St][Ct]){const d=parseInt(ht),b=xt[St][Ct][d];for(let ft=0;ft<b.length;ft++){const mt=b[ft];for(let _t=ft+1;_t<b.length;_t++){const tt=b[_t];(0,a.areConnected)(mt,tt,ot)&&mt.bonds.indexOf(tt.index)==-1&&(mt.bonds.push(tt.index),mt.bondOrder.push(1),tt.bonds.push(mt.index),tt.bondOrder.push(1))}}for(let ft=0;ft<c.length;ft++){const mt=c[ft];if(!xt[St+mt.x]||!xt[St+mt.x][Ct+mt.y]||!xt[St+mt.x][Ct+mt.y][d+mt.z])continue;const _t=xt[St+mt.x][Ct+mt.y][d+mt.z];vt(b,_t)}}}}}},"./src/parsers/utils/assignPDBBonds.ts":(e,i,s)=>{s.r(i),s.d(i,{assignPDBBonds:()=>st});var a=s("./src/parsers/utils/areConnected.ts"),c=s("./src/parsers/utils/assignBonds.ts"),h=s("./src/parsers/utils/standardResidues.ts");function st(nt,ot){const xt=[],vt=[];for(let Ct=0,ht=nt.length;Ct<ht;Ct++){const d=nt[Ct];d.index=Ct,d.hetflag||!h.standardResidues.has(d.resn)?vt.push(d):xt.push(d)}(0,c.assignBonds)(vt,ot),xt.sort(function(Ct,ht){return Ct.chain!==ht.chain?Ct.chain<ht.chain?-1:1:Ct.resi-ht.resi});let bt=-1,St=-1,Et;for(let Ct=0,ht=xt.length;Ct<ht;Ct++){const d=xt[Ct];d.resi!==bt&&(bt=d.resi,Et||St++,Et=!1),d.reschain=St;for(let b=Ct+1;b<xt.length;b++){const ft=xt[b];if(ft.chain!==d.chain||ft.resi-d.resi>1)break;(0,a.areConnected)(d,ft,ot)&&(d.bonds.indexOf(ft.index)===-1&&(d.bonds.push(ft.index),d.bondOrder.push(1),ft.bonds.push(d.index),ft.bondOrder.push(1)),d.resi!==ft.resi&&(Et=!0))}}}},"./src/parsers/utils/atomNameToElem.ts":(e,i,s)=>{s.r(i),s.d(i,{atomNameToElem:()=>c});var a=s("./src/parsers/utils/bondLength.ts");function c(h,st){let nt=h.replace(/ /g,"");return nt.length>0&&nt[0]==="H"&&nt!=="Hg"&&nt!=="He"&&nt!=="Hf"&&nt!=="Hs"&&nt!=="Ho"&&(nt="H"),nt.length>1&&(nt=nt[0].toUpperCase()+nt.substring(1).toLowerCase(),a.bondTable[nt]===void 0?nt=nt[0]:st&&(nt==="Ca"||nt==="Cd")&&(nt="C")),nt}},"./src/parsers/utils/bondLength.ts":(e,i,s)=>{s.r(i),s.d(i,{bondLength:()=>c,bondTable:()=>a,setBondLength:()=>h});let a={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function c(st){return a[st]||1.6}function h(st,nt){nt<0&&(nt=0),a[st]=nt}},"./src/parsers/utils/computeSecondaryStructure.ts":(e,i,s)=>{s.r(i),s.d(i,{computeSecondaryStructure:()=>c});var a=s("./src/parsers/utils/assignBackboneHBonds.ts");function c(h,st){(0,a.assignBackboneHBonds)(h,st);const nt={};let ot,xt,vt,bt,St,Et;for(ot=0,xt=h.length;ot<xt;ot++)if(St=h[ot],nt[St.chain]===void 0&&(nt[St.chain]=[]),isFinite(St.hbondDistanceSq)){const Ct=St.hbondOther;nt[Ct.chain]===void 0&&(nt[Ct.chain]=[]),Math.abs(Ct.resi-St.resi)===4&&(nt[St.chain][St.resi]="h")}for(vt in nt)for(bt=1;bt<nt[vt].length-1;bt++){const Ct=nt[vt][bt-1],ht=nt[vt][bt+1];Et=nt[vt][bt],Ct=="h"&&Ct==ht&&Et!=Ct&&(nt[vt][bt]=Ct)}for(ot=0,xt=h.length;ot<xt;ot++)St=h[ot],isFinite(St.hbondDistanceSq)&&nt[St.chain][St.resi]!="h"&&St.ss!=="h"&&(nt[St.chain][St.resi]="maybesheet");for(let Ct=0,ht=h.length;Ct<ht;Ct++)if(St=h[Ct],isFinite(St.hbondDistanceSq)&&nt[St.chain][St.resi]=="maybesheet"){let d=St.hbondOther,b=nt[d.chain][d.resi];(b=="maybesheet"||b=="s")&&(nt[St.chain][St.resi]="s",nt[d.chain][d.resi]="s")}for(let Ct in nt){for(let ht=1;ht<nt[Ct].length-1;ht++){const d=nt[Ct][ht-1],b=nt[Ct][ht+1];Et=nt[Ct][ht],d=="s"&&d==b&&Et!=d&&(nt[Ct][ht]=d)}for(let ht=0;ht<nt[Ct].length;ht++){const d=nt[Ct][ht];(d=="h"||d=="s")&&nt[Ct][ht-1]!=d&&nt[Ct][ht+1]!=d&&delete nt[Ct][ht]}}for(ot=0,xt=h.length;ot<xt;ot++)St=h[ot],Et=nt[St.chain][St.resi],delete St.hbondOther,delete St.hbondDistanceSq,!(Et===void 0||Et==="maybesheet")&&(St.ss=Et,nt[St.chain][St.resi-1]!=Et&&(St.ssbegin=!0),nt[St.chain][St.resi+1]!=Et&&(St.ssend=!0))}},"./src/parsers/utils/getSinglePDB.ts":(e,i,s)=>{s.r(i),s.d(i,{getSinglePDB:()=>bt});var a=s("./src/WebGL/index.ts"),c=s("./src/parsers/utils/atomNameToElem.ts"),h=s("./src/parsers/utils/bondLength.ts"),st=s("./src/parsers/utils/computeSecondaryStructure.ts"),nt=s("./src/parsers/utils/isEmpty.ts"),ot=s("./src/parsers/utils/processSymmetries.ts"),xt=s("./src/parsers/utils/assignPDBBonds.ts"),vt=s("./src/parsers/utils/validateBonds.ts");function bt(St,Et,Ct){const ht=[],d=Et.assignBonds===void 0?!0:Et.assignBonds,b=!Et.keepH,ft=!!Et.noSecondaryStructure,mt=!Et.noComputeSecondaryStructure,_t=!Et.doAssembly,tt=Et.altLoc?Et.altLoc:"A",gt={symmetries:[],cryst:void 0};let wt,yt=[];const Tt=[];let Mt;const Pt={};for(let It=0;It<St.length;It++){Mt=St[It].replace(/^\s*/,"");const Lt=Mt.substring(0,6);let zt,jt,Nt;if(Lt.indexOf("END")===0){if(yt=St.slice(It+1),Lt==="END")for(const kt in Ct)Ct.hasOwnProperty(kt)&&delete Ct[kt];break}else if(Lt==="ATOM  "||Lt==="HETATM"){let kt,Ot,Bt,Ut,Ft,Wt,_i,Qt,on,nn,dn,tn;if(dn=Mt.substring(16,17),dn!==" "&&dn!==tt&&tt!=="*"||(nn=parseInt(Mt.substring(6,11)),wt=Mt.substring(12,16).replace(/ /g,""),kt=Mt.substring(17,20).replace(/ /g,""),Ot=Mt.substring(21,22),Bt=parseInt(Mt.substring(22,26)),Ut=Mt.substring(26,27),Ft=parseFloat(Mt.substring(30,38)),Wt=parseFloat(Mt.substring(38,46)),_i=parseFloat(Mt.substring(46,54)),tn=parseFloat(Mt.substring(60,68)),on=Mt.substring(76,78).replace(/ /g,""),on===""||h.bondTable[on]===void 0?on=(0,c.atomNameToElem)(Mt.substring(12,14),Mt[0]=="A"):on=on[0].toUpperCase()+on.substring(1).toLowerCase(),on==="H"&&b))continue;Lt[0]=="H"?Qt=!0:Qt=!1,Tt[nn]=ht.length,ht.push({resn:kt,x:Ft,y:Wt,z:_i,elem:on,hetflag:Qt,altLoc:dn,chain:Ot,resi:Bt,icode:Ut,rescode:Bt+(Ut!==" "?"^"+Ut:""),serial:nn,atom:wt,bonds:[],ss:"c",bondOrder:[],properties:{},b:tn,pdbline:Mt})}else if(Lt==="SHEET "){zt=Mt.substring(21,22),jt=parseInt(Mt.substring(22,26)),Nt=parseInt(Mt.substring(33,37)),zt in Ct||(Ct[zt]={}),Ct[zt][jt]="s1";for(let kt=jt+1;kt<Nt;kt++)Ct[zt][kt]="s";Ct[zt][Nt]="s2"}else if(Lt==="CONECT"){const kt=parseInt(Mt.substring(6,11)),Ot=Tt[kt],Bt=ht[Ot],Ut=[11,16,21,26];for(let Ft=0;Ft<4;Ft++){const Wt=parseInt(Mt.substring(Ut[Ft],Ut[Ft]+5)),_i=Tt[Wt];let Qt=Ot+":"+_i;const on=ht[_i];if(Bt!==void 0&&on!==void 0)if(!Pt[Qt])Pt[Qt]=1,(Bt.bonds.length==0||Bt.bonds[Bt.bonds.length-1]!==_i)&&(Bt.bonds.push(_i),Bt.bondOrder.push(1));else{Pt[Qt]+=1;for(let nn=0;nn<Bt.bonds.length;nn++)if(Bt.bonds[nn]==_i){const dn=Pt[Qt];dn>=4?Bt.bondOrder[nn]=1:Bt.bondOrder[nn]=dn}}}}else if(Lt==="HELIX "){zt=Mt.substring(19,20),jt=parseInt(Mt.substring(21,25)),Nt=parseInt(Mt.substring(33,37)),zt in Ct||(Ct[zt]={}),Ct[zt][jt]="h1";for(let kt=jt+1;kt<Nt;kt++)Ct[zt][kt]="h";Ct[zt][Nt]="h2"}else if(!_t&&Lt==="REMARK"&&Mt.substring(13,18)==="BIOMT"){let kt,Ot=new a.Matrix4;for(kt=1;kt<=3;kt++)if(Mt=St[It].replace(/^\s*/,""),parseInt(Mt.substring(18,19))==kt)Ot.elements[kt-1]=parseFloat(Mt.substring(23,33)),Ot.elements[kt-1+4]=parseFloat(Mt.substring(33,43)),Ot.elements[kt-1+8]=parseFloat(Mt.substring(43,53)),Ot.elements[kt-1+12]=parseFloat(Mt.substring(53)),It++;else for(;Mt.substring(13,18)==="BIOMT";)It++,Mt=St[It].replace(/^\s*/,"");Ot.elements[3]=0,Ot.elements[7]=0,Ot.elements[11]=0,Ot.elements[15]=1,gt.symmetries.push(Ot),It--}else if(Lt==="CRYST1"){let kt,Ot,Bt,Ut,Ft,Wt;kt=parseFloat(Mt.substring(7,15)),Ot=parseFloat(Mt.substring(16,24)),Bt=parseFloat(Mt.substring(25,33)),Ut=parseFloat(Mt.substring(34,40)),Ft=parseFloat(Mt.substring(41,47)),Wt=parseFloat(Mt.substring(48,54)),gt.cryst={a:kt,b:Ot,c:Bt,alpha:Ut,beta:Ft,gamma:Wt}}else if(Lt==="ANISOU"){const kt=parseInt(Mt.substring(6,11)),Ot=Tt[kt],Bt=ht[Ot];if(Bt){const Ut=Mt.substring(30).trim().split(/\s+/),Ft={u11:parseInt(Ut[0]),u22:parseInt(Ut[1]),u33:parseInt(Ut[2]),u12:parseInt(Ut[3]),u13:parseInt(Ut[4]),u23:parseInt(Ut[5])};Bt.uMat=Ft}}}if((0,vt.validateBonds)(ht,Tt),d&&(0,xt.assignPDBBonds)(ht,Et),_t||(0,ot.processSymmetries)(gt.symmetries,ht,Et,gt.cryst),mt&&!ft&&(0,st.computeSecondaryStructure)(ht,Et.hbondCutoff),!(0,nt.isEmpty)(Ct))for(let It=0;It<ht.length;It++){const Lt=ht[It];if(Lt!==void 0&&Lt.chain in Ct&&Lt.resi in Ct[Lt.chain]){const zt=Ct[Lt.chain][Lt.resi];Lt.ss=zt[0],zt.length>1&&(zt[1]=="1"?Lt.ssbegin=!0:zt[1]=="2"&&(Lt.ssend=!0))}}return[ht,gt,yt]}},"./src/parsers/utils/isEmpty.ts":(e,i,s)=>{s.r(i),s.d(i,{isEmpty:()=>a});function a(c){for(const h in c)return!1;return!0}},"./src/parsers/utils/processSymmetries.ts":(e,i,s)=>{s.r(i),s.d(i,{processSymmetries:()=>c});var a=s("./src/WebGL/index.ts");function c(h,st,nt,ot){const xt=!nt.duplicateAssemblyAtoms,vt=st.length;let bt=vt,St=-1,Et=null,Ct=null;(nt.normalizeAssembly||nt.wrapAtoms)&&ot&&(Et=(0,a.conversionMatrix3)(ot.a,ot.b,ot.c,ot.alpha,ot.beta,ot.gamma),Ct=new a.Matrix3,Ct.getInverse3(Et));let ht=function(ft){let mt=ft.clone().applyMatrix3(Ct);const _t=[mt.x,mt.y,mt.z],tt=[0,0,0];for(let wt=0;wt<3;wt++){for(;_t[wt]<-.001;)_t[wt]+=1,tt[wt]+=1;for(;_t[wt]>1.001;)_t[wt]-=1,tt[wt]-=1}const gt=new a.Vector3(tt[0],tt[1],tt[2]);return gt.applyMatrix3(Et),gt};if(nt.normalizeAssembly&&ot)for(let ft=0;ft<h.length;ft++){const mt=new a.Vector3(0,0,0);for(let tt=0;tt<vt;tt++){const gt=new a.Vector3(st[tt].x,st[tt].y,st[tt].z);gt.applyMatrix4(h[ft]),mt.add(gt)}mt.divideScalar(vt);const _t=ht(mt);h[ft].isNearlyIdentity()&&_t.lengthSq()>.001&&(St=ft),h[ft].translate(_t)}if(xt){if(h.length>1)for(let ft=0;ft<st.length;ft++){var d=[];for(let mt=0;mt<h.length;mt++)if(!h[mt].isNearlyIdentity()){var b=new a.Vector3;b.set(st[ft].x,st[ft].y,st[ft].z),b.applyMatrix4(h[mt]),d.push(b)}st[ft].symmetries=d}}else{for(let ft=0;ft<vt;ft++)st[ft].sym=-1;for(let ft=0;ft<h.length;ft++)if(!h[ft].isNearlyIdentity()&&St!=ft){let mt=new a.Vector3;for(let _t=0;_t<vt;_t++){const tt=[];for(let wt=0;wt<st[_t].bonds.length;wt++)tt.push(st[_t].bonds[wt]+bt);if(mt.set(st[_t].x,st[_t].y,st[_t].z),mt.applyMatrix4(h[ft]),nt.wrapAtoms&&ot){let wt=ht(mt);mt.add(wt)}const gt={};for(const wt in st[_t])gt[wt]=st[_t][wt];gt.x=mt.x,gt.y=mt.y,gt.z=mt.z,gt.bonds=tt,gt.sym=ft,gt.index=st.length,st.push(gt)}bt=st.length}else for(let mt=0;mt<vt;mt++)st[mt].sym=ft;if(nt.wrapAtoms&&ot){let ft=new a.Vector3;for(let mt=0;mt<vt;mt++){ft.set(st[mt].x,st[mt].y,st[mt].z);let _t=ht(ft);ft.add(_t),st[mt].x=ft.x,st[mt].y=ft.y,st[mt].z=ft.z}}if(St>=0){const ft=new a.Vector3;for(let mt=0;mt<vt;mt++)ft.set(st[mt].x,st[mt].y,st[mt].z),ft.applyMatrix4(h[St]),st[mt].x=ft.x,st[mt].y=ft.y,st[mt].z=ft.z}h.length=0}}},"./src/parsers/utils/standardResidues.ts":(e,i,s)=>{s.r(i),s.d(i,{standardResidues:()=>a});const a=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])},"./src/parsers/utils/validateBonds.ts":(e,i,s)=>{s.r(i),s.d(i,{validateBonds:()=>a});function a(c,h){for(let st=0,nt=c.length;st<nt;st++){const ot=c[st];for(let xt=0;xt<ot.bonds.length;xt++){const vt=ot.bonds[xt],bt=c[vt],St=h[ot.serial];bt&&St&&bt.bonds.indexOf(St)<0&&(bt.bonds.push(St),bt.bondOrder.push(ot.bondOrder[xt]))}}}},"./src/partialCharges.ts":(e,i,s)=>{s.r(i),s.d(i,{applyPartialCharges:()=>c,partialCharges:()=>a});const a={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function c(h,st){if((!st||typeof h.partialCharge>"u")&&h.resn&&h.atom){var nt=h.resn+":"+h.atom;h.properties.partialCharge=a[nt]}}},"./src/specs.ts":(e,i,s)=>{s.r(i)},"./src/utilities.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(e,i){for(var s in i)i.hasOwnProperty(s)&&i[s]!==void 0&&(e[s]=i[s]);return e}function deepCopy(e){let i,s,a;if(e==null)return{};if(typeof e!="object"||e===null)return e;i=Array.isArray(e)?[]:{};for(a in e)s=e[a],i[a]=deepCopy(s);return i}function isNumeric(e){var i=typeof e;return(i==="number"||i==="string")&&!isNaN(e-parseFloat(e))}function isEmptyObject(e){var i;for(i in e)return!1;return!0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(e){e&&(e.volformat&&!(e.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(e.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(e.voldata,e.volformat)),e.volscheme&&(e.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(e.volscheme)))}function getExtent(e,i){var s,a,c,h,st,nt,ot,xt,vt,bt,St=!i;if(s=a=c=9999,h=st=nt=-9999,ot=xt=vt=bt=0,e.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var Et=0;Et<e.length;Et++){var Ct=e[Et];if(!(typeof Ct>"u"||!isFinite(Ct.x)||!isFinite(Ct.y)||!isFinite(Ct.z))&&(bt++,ot+=Ct.x,xt+=Ct.y,vt+=Ct.z,s=s<Ct.x?s:Ct.x,a=a<Ct.y?a:Ct.y,c=c<Ct.z?c:Ct.z,h=h>Ct.x?h:Ct.x,st=st>Ct.y?st:Ct.y,nt=nt>Ct.z?nt:Ct.z,Ct.symmetries&&St))for(var ht=0;ht<Ct.symmetries.length;ht++)bt++,ot+=Ct.symmetries[ht].x,xt+=Ct.symmetries[ht].y,vt+=Ct.symmetries[ht].z,s=s<Ct.symmetries[ht].x?s:Ct.symmetries[ht].x,a=a<Ct.symmetries[ht].y?a:Ct.symmetries[ht].y,c=c<Ct.symmetries[ht].z?c:Ct.symmetries[ht].z,h=h>Ct.symmetries[ht].x?h:Ct.symmetries[ht].x,st=st>Ct.symmetries[ht].y?st:Ct.symmetries[ht].y,nt=nt>Ct.symmetries[ht].z?nt:Ct.symmetries[ht].z}return[[s,a,c],[h,st,nt],[ot/bt,xt/bt,vt/bt]]}function getPropertyRange(e,i){for(var s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=0,h=e.length;c<h;c++){var st=e[c],nt=getAtomProperty(st,i);nt!=null&&(nt<s&&(s=nt),nt>a&&(a=nt))}return!isFinite(s)&&!isFinite(a)?s=a=0:isFinite(s)?isFinite(a)||(a=s):s=a,[s,a]}class PausableTimer{constructor(i,s,a){this.total_time_run=0,this.fn=i,this.arg=a,this.countdown=s,this.start_time=new Date().getTime(),this.ident=setTimeout(i,s,a)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(e){for(var i=window.atob(e),s=i.length,a=new Uint8Array(s),c=0;c<s;c++)a[c]=i.charCodeAt(c);return a}function getAtomProperty(e,i){var s=null;return e.properties&&typeof e.properties[i]<"u"?s=e.properties[i]:typeof e[i]<"u"&&(s=e[i]),s}function mergeGeos(e,i){var s=i.geometry;s!==void 0&&e.geometryGroups.push(s.geometryGroups[0])}function specStringToObject(e){if(typeof e=="object")return e;if(typeof e>"u"||e==null)return e;try{return JSON.parse(e)}catch{}e=e.replace(/%7E/g,"~");var i=function(St){return isNumeric(St)?Math.floor(parseFloat(St))==parseInt(St)||St.indexOf(".")>=0?parseFloat(St):parseInt(St):St==="true"?!0:St==="false"?!1:St},s={};if(e==="all")return s;for(var a=e.split(";"),c=0;c<a.length;c++){var h=a[c].split(":"),st=h[0],nt={},ot=h[1];if(ot)if(ot=ot.replace(/~/g,"="),ot.indexOf("=")!==-1)for(var xt=ot.split(","),vt=0;vt<xt.length;vt++){var bt=xt[vt].split("=",2);nt[bt[0]]=i(bt[1])}else ot.indexOf(",")!==-1?nt=ot.split(","):nt=i(ot);s[st]=nt}return s}function checkStatus(e){if(!e.ok)throw new Error(`HTTP ${e.status} - ${e.statusText}`);return e}function get(e,i){var s=fetch(e).then(checkStatus).then(a=>a.text());return i?s.then(i):s}function getbin(e,i,s,a){var c;return s=="POST"?c=fetch(e,{method:"POST",body:a}).then(h=>checkStatus(h)).then(h=>h.arrayBuffer()):c=fetch(e).then(h=>checkStatus(h)).then(h=>h.arrayBuffer()),i?c.then(i):c}function download(e,i,s,a){var c="",h="",st="",nt=null,ot=i.addModel();if(e.indexOf(":")<0&&(e.length==4?e="pdb:"+e:isNaN(e)?e="url:"+e:e="cid:"+e),e.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),e="bcif:"+e.slice(5)),e.substring(0,5)==="bcif:")e=e.substring(5).toUpperCase(),st="https://models.rcsb.org/"+e+".bcif.gz",s&&typeof s.noComputeSecondaryStructure>"u"&&(s.noComputeSecondaryStructure=!0),nt=new Promise(function(vt){getbin(st).then(function(bt){ot.addMolData(bt,"bcif.gz",s),i.zoomTo(),i.render(),vt(ot)},function(){console.error("fetch of "+st+" failed.")})});else{if(e.substring(0,4)==="pdb:"){if(c="bcif",s&&s.format&&(c=s.format),s&&typeof s.noComputeSecondaryStructure>"u"&&(s.noComputeSecondaryStructure=!0),e=e.substring(4).toUpperCase(),!e.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}c=="bcif"?st="https://models.rcsb.org/"+e.toUpperCase()+".bcif.gz":(h=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",st=h+e+"."+c)}else if(e.substring(0,4)=="cid:"){if(c="sdf",e=e.substring(4),!e.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}st="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else e.substring(0,4)=="url:"&&(st=e.substring(4),c=st);var xt=function(vt){ot.addMolData(vt,c,s),i.zoomTo(),i.render()};nt=new Promise(function(vt){c=="bcif"?getbin(st).then(function(bt){xt(bt),vt(ot)}).catch(function(){h=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",st=h+e+".pdb",c="pdb",console.warn("falling back to pdb format"),get(st).then(function(bt){xt(bt),vt(ot)}).catch(function(bt){xt(""),vt(ot),console.error("fetch of "+st+" failed: "+bt.statusText)})}):get(st).then(function(bt){xt(bt),vt(ot)}).catch(function(bt){xt(""),vt(ot),console.error("fetch of "+st+" failed: "+bt.statusText)})})}return a?(nt.then(function(vt){a(vt)}),ot):nt}function getColorFromStyle(e,i){let s=i.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]<"u")s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s];else if(typeof s=="string"&&s.endsWith("Carbon")){let st=s.substring(0,s.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[st]<"u"){let nt=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);nt.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[st],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]={prop:"elem",map:nt},s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]}}let a=e.color;if(typeof i.color<"u"&&i.color!="spectrum"&&(a=i.color),typeof s<"u"){let st,nt;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s]<"u")s=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s],typeof s[e[s.prop]]<"u"&&(a=s.map[e[s.prop]]);else if(typeof s[e[s.prop]]<"u")a=s.map[e[s.prop]];else if(typeof s.prop<"u"&&typeof s.gradient<"u"){st=s.prop;var c=s.gradient;c instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(c=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(s));let ot=c.range()||[-1,1];nt=getAtomProperty(e,st),nt!=null&&(a=c.valueToHex(nt,ot))}else typeof s.prop<"u"&&typeof s.map<"u"?(st=s.prop,nt=getAtomProperty(e,st),typeof s.map[nt]<"u"&&(a=s.map[nt])):typeof i.colorscheme[e.elem]<"u"?a=i.colorscheme[e.elem]:console.warn("Could not interpret colorscheme "+s)}else typeof i.colorfunc<"u"&&(a=i.colorfunc(e));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(a)}function getElement(e){let i=e;return typeof e=="string"?i=document.querySelector("#"+e):typeof e=="object"&&e.get&&(i=e.get(0)),i}function inflateString(e,i=!0){let s;return typeof e=="string"?s=new TextEncoder().encode(e):s=new Uint8Array(e),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(s,{to:i?"string":null})}},"./node_modules/upng-js/UPNG.js":(e,i,s)=>{(function(){var a={},c;e.exports=a,c=s("./node_modules/upng-js/node_modules/pako/index.js"),function(h,st){h.toRGBA8=function(nt){var ot=nt.width,xt=nt.height;if(nt.tabs.acTL==null)return[h.toRGBA8.decodeImage(nt.data,ot,xt,nt).buffer];var vt=[];nt.frames[0].data==null&&(nt.frames[0].data=nt.data);for(var bt,St=new Uint8Array(ot*xt*4),Et=0;Et<nt.frames.length;Et++){var Ct=nt.frames[Et],ht=Ct.rect.x,d=Ct.rect.y,b=Ct.rect.width,ft=Ct.rect.height,mt=h.toRGBA8.decodeImage(Ct.data,b,ft,nt);if(Et==0?bt=mt:Ct.blend==0?h._copyTile(mt,b,ft,bt,ot,xt,ht,d,0):Ct.blend==1&&h._copyTile(mt,b,ft,bt,ot,xt,ht,d,1),vt.push(bt.buffer),bt=bt.slice(0),Ct.dispose!=0){if(Ct.dispose==1)h._copyTile(St,b,ft,bt,ot,xt,ht,d,0);else if(Ct.dispose==2){for(var _t=Et-1;nt.frames[_t].dispose==2;)_t--;bt=new Uint8Array(vt[_t]).slice(0)}}}return vt},h.toRGBA8.decodeImage=function(nt,ot,xt,vt){var bt=ot*xt,St=h.decode._getBPP(vt),Et=Math.ceil(ot*St/8),Ct=new Uint8Array(bt*4),ht=new Uint32Array(Ct.buffer),d=vt.ctype,b=vt.depth,ft=h._bin.readUshort;if(d==6){var mt=bt<<2;if(b==8)for(var _t=0;_t<mt;_t++)Ct[_t]=nt[_t];if(b==16)for(var _t=0;_t<mt;_t++)Ct[_t]=nt[_t<<1]}else if(d==2){var tt=vt.tabs.tRNS,gt=-1,wt=-1,yt=-1;if(tt&&(gt=tt[0],wt=tt[1],yt=tt[2]),b==8)for(var _t=0;_t<bt;_t++){var Tt=_t<<2,Mt=_t*3;Ct[Tt]=nt[Mt],Ct[Tt+1]=nt[Mt+1],Ct[Tt+2]=nt[Mt+2],Ct[Tt+3]=255,gt!=-1&&nt[Mt]==gt&&nt[Mt+1]==wt&&nt[Mt+2]==yt&&(Ct[Tt+3]=0)}if(b==16)for(var _t=0;_t<bt;_t++){var Tt=_t<<2,Mt=_t*6;Ct[Tt]=nt[Mt],Ct[Tt+1]=nt[Mt+2],Ct[Tt+2]=nt[Mt+4],Ct[Tt+3]=255,gt!=-1&&ft(nt,Mt)==gt&&ft(nt,Mt+2)==wt&&ft(nt,Mt+4)==yt&&(Ct[Tt+3]=0)}}else if(d==3){var Pt=vt.tabs.PLTE,It=vt.tabs.tRNS,Lt=It?It.length:0;if(b==1)for(var zt=0;zt<xt;zt++)for(var jt=zt*Et,Nt=zt*ot,_t=0;_t<ot;_t++){var Tt=Nt+_t<<2,kt=nt[jt+(_t>>3)]>>7-((_t&7)<<0)&1,Ot=3*kt;Ct[Tt]=Pt[Ot],Ct[Tt+1]=Pt[Ot+1],Ct[Tt+2]=Pt[Ot+2],Ct[Tt+3]=kt<Lt?It[kt]:255}if(b==2)for(var zt=0;zt<xt;zt++)for(var jt=zt*Et,Nt=zt*ot,_t=0;_t<ot;_t++){var Tt=Nt+_t<<2,kt=nt[jt+(_t>>2)]>>6-((_t&3)<<1)&3,Ot=3*kt;Ct[Tt]=Pt[Ot],Ct[Tt+1]=Pt[Ot+1],Ct[Tt+2]=Pt[Ot+2],Ct[Tt+3]=kt<Lt?It[kt]:255}if(b==4)for(var zt=0;zt<xt;zt++)for(var jt=zt*Et,Nt=zt*ot,_t=0;_t<ot;_t++){var Tt=Nt+_t<<2,kt=nt[jt+(_t>>1)]>>4-((_t&1)<<2)&15,Ot=3*kt;Ct[Tt]=Pt[Ot],Ct[Tt+1]=Pt[Ot+1],Ct[Tt+2]=Pt[Ot+2],Ct[Tt+3]=kt<Lt?It[kt]:255}if(b==8)for(var _t=0;_t<bt;_t++){var Tt=_t<<2,kt=nt[_t],Ot=3*kt;Ct[Tt]=Pt[Ot],Ct[Tt+1]=Pt[Ot+1],Ct[Tt+2]=Pt[Ot+2],Ct[Tt+3]=kt<Lt?It[kt]:255}}else if(d==4){if(b==8)for(var _t=0;_t<bt;_t++){var Tt=_t<<2,Bt=_t<<1,Ut=nt[Bt];Ct[Tt]=Ut,Ct[Tt+1]=Ut,Ct[Tt+2]=Ut,Ct[Tt+3]=nt[Bt+1]}if(b==16)for(var _t=0;_t<bt;_t++){var Tt=_t<<2,Bt=_t<<2,Ut=nt[Bt];Ct[Tt]=Ut,Ct[Tt+1]=Ut,Ct[Tt+2]=Ut,Ct[Tt+3]=nt[Bt+2]}}else if(d==0){var gt=vt.tabs.tRNS?vt.tabs.tRNS:-1;if(b==1)for(var _t=0;_t<bt;_t++){var Ut=255*(nt[_t>>3]>>7-(_t&7)&1),Ft=Ut==gt*255?0:255;ht[_t]=Ft<<24|Ut<<16|Ut<<8|Ut}if(b==2)for(var _t=0;_t<bt;_t++){var Ut=85*(nt[_t>>2]>>6-((_t&3)<<1)&3),Ft=Ut==gt*85?0:255;ht[_t]=Ft<<24|Ut<<16|Ut<<8|Ut}if(b==4)for(var _t=0;_t<bt;_t++){var Ut=17*(nt[_t>>1]>>4-((_t&1)<<2)&15),Ft=Ut==gt*17?0:255;ht[_t]=Ft<<24|Ut<<16|Ut<<8|Ut}if(b==8)for(var _t=0;_t<bt;_t++){var Ut=nt[_t],Ft=Ut==gt?0:255;ht[_t]=Ft<<24|Ut<<16|Ut<<8|Ut}if(b==16)for(var _t=0;_t<bt;_t++){var Ut=nt[_t<<1],Ft=ft(nt,_t<<1)==gt?0:255;ht[_t]=Ft<<24|Ut<<16|Ut<<8|Ut}}return Ct},h.decode=function(nt){for(var ot=new Uint8Array(nt),xt=8,vt=h._bin,bt=vt.readUshort,St=vt.readUint,Et={tabs:{},frames:[]},Ct=new Uint8Array(ot.length),ht=0,d,b=0,ft=[137,80,78,71,13,10,26,10],mt=0;mt<8;mt++)if(ot[mt]!=ft[mt])throw"The input is not a PNG file!";for(;xt<ot.length;){var _t=vt.readUint(ot,xt);xt+=4;var tt=vt.readASCII(ot,xt,4);if(xt+=4,tt=="IHDR")h.decode._IHDR(ot,xt,Et);else if(tt=="IDAT"){for(var mt=0;mt<_t;mt++)Ct[ht+mt]=ot[xt+mt];ht+=_t}else if(tt=="acTL")Et.tabs[tt]={num_frames:St(ot,xt),num_plays:St(ot,xt+4)},d=new Uint8Array(ot.length);else if(tt=="fcTL"){if(b!=0){var gt=Et.frames[Et.frames.length-1];gt.data=h.decode._decompress(Et,d.slice(0,b),gt.rect.width,gt.rect.height),b=0}var wt={x:St(ot,xt+12),y:St(ot,xt+16),width:St(ot,xt+4),height:St(ot,xt+8)},yt=bt(ot,xt+22);yt=bt(ot,xt+20)/(yt==0?100:yt);var Tt={rect:wt,delay:Math.round(yt*1e3),dispose:ot[xt+24],blend:ot[xt+25]};Et.frames.push(Tt)}else if(tt=="fdAT"){for(var mt=0;mt<_t-4;mt++)d[b+mt]=ot[xt+mt+4];b+=_t-4}else if(tt=="pHYs")Et.tabs[tt]=[vt.readUint(ot,xt),vt.readUint(ot,xt+4),ot[xt+8]];else if(tt=="cHRM"){Et.tabs[tt]=[];for(var mt=0;mt<8;mt++)Et.tabs[tt].push(vt.readUint(ot,xt+mt*4))}else if(tt=="tEXt"){Et.tabs[tt]==null&&(Et.tabs[tt]={});var Mt=vt.nextZero(ot,xt),Pt=vt.readASCII(ot,xt,Mt-xt),It=vt.readASCII(ot,Mt+1,xt+_t-Mt-1);Et.tabs[tt][Pt]=It}else if(tt=="iTXt"){Et.tabs[tt]==null&&(Et.tabs[tt]={});var Mt=0,Lt=xt;Mt=vt.nextZero(ot,Lt);var Pt=vt.readASCII(ot,Lt,Mt-Lt);Lt=Mt+1,ot[Lt],ot[Lt+1],Lt+=2,Mt=vt.nextZero(ot,Lt),vt.readASCII(ot,Lt,Mt-Lt),Lt=Mt+1,Mt=vt.nextZero(ot,Lt),vt.readUTF8(ot,Lt,Mt-Lt),Lt=Mt+1;var It=vt.readUTF8(ot,Lt,_t-(Lt-xt));Et.tabs[tt][Pt]=It}else if(tt=="PLTE")Et.tabs[tt]=vt.readBytes(ot,xt,_t);else if(tt=="hIST"){var zt=Et.tabs.PLTE.length/3;Et.tabs[tt]=[];for(var mt=0;mt<zt;mt++)Et.tabs[tt].push(bt(ot,xt+mt*2))}else if(tt=="tRNS")Et.ctype==3?Et.tabs[tt]=vt.readBytes(ot,xt,_t):Et.ctype==0?Et.tabs[tt]=bt(ot,xt):Et.ctype==2&&(Et.tabs[tt]=[bt(ot,xt),bt(ot,xt+2),bt(ot,xt+4)]);else if(tt=="gAMA")Et.tabs[tt]=vt.readUint(ot,xt)/1e5;else if(tt=="sRGB")Et.tabs[tt]=ot[xt];else if(tt=="bKGD")Et.ctype==0||Et.ctype==4?Et.tabs[tt]=[bt(ot,xt)]:Et.ctype==2||Et.ctype==6?Et.tabs[tt]=[bt(ot,xt),bt(ot,xt+2),bt(ot,xt+4)]:Et.ctype==3&&(Et.tabs[tt]=ot[xt]);else if(tt=="IEND"){if(b!=0){var gt=Et.frames[Et.frames.length-1];gt.data=h.decode._decompress(Et,d.slice(0,b),gt.rect.width,gt.rect.height),b=0}Et.data=h.decode._decompress(Et,Ct,Et.width,Et.height);break}xt+=_t,vt.readUint(ot,xt),xt+=4}return delete Et.compress,delete Et.interlace,delete Et.filter,Et},h.decode._decompress=function(nt,ot,xt,vt){return nt.compress==0&&(ot=h.decode._inflate(ot)),nt.interlace==0?ot=h.decode._filterZero(ot,nt,0,xt,vt):nt.interlace==1&&(ot=h.decode._readInterlace(ot,nt)),ot},h.decode._inflate=function(nt){return st.inflate(nt)},h.decode._readInterlace=function(nt,ot){for(var xt=ot.width,vt=ot.height,bt=h.decode._getBPP(ot),St=bt>>3,Et=Math.ceil(xt*bt/8),Ct=new Uint8Array(vt*Et),ht=0,d=[0,0,4,0,2,0,1],b=[0,4,0,2,0,1,0],ft=[8,8,8,4,4,2,2],mt=[8,8,4,4,2,2,1],_t=0;_t<7;){for(var tt=ft[_t],gt=mt[_t],wt=0,yt=0,Tt=d[_t];Tt<vt;)Tt+=tt,yt++;for(var Mt=b[_t];Mt<xt;)Mt+=gt,wt++;var Pt=Math.ceil(wt*bt/8);h.decode._filterZero(nt,ot,ht,wt,yt);for(var It=0,Lt=d[_t];Lt<vt;){for(var zt=b[_t],jt=ht+It*Pt<<3;zt<xt;){if(bt==1){var Nt=nt[jt>>3];Nt=Nt>>7-(jt&7)&1,Ct[Lt*Et+(zt>>3)]|=Nt<<7-((zt&3)<<0)}if(bt==2){var Nt=nt[jt>>3];Nt=Nt>>6-(jt&7)&3,Ct[Lt*Et+(zt>>2)]|=Nt<<6-((zt&3)<<1)}if(bt==4){var Nt=nt[jt>>3];Nt=Nt>>4-(jt&7)&15,Ct[Lt*Et+(zt>>1)]|=Nt<<4-((zt&1)<<2)}if(bt>=8)for(var kt=Lt*Et+zt*St,Ot=0;Ot<St;Ot++)Ct[kt+Ot]=nt[(jt>>3)+Ot];jt+=bt,zt+=gt}It++,Lt+=tt}wt*yt!=0&&(ht+=yt*(1+Pt)),_t=_t+1}return Ct},h.decode._getBPP=function(nt){var ot=[1,null,3,1,2,null,4][nt.ctype];return ot*nt.depth},h.decode._filterZero=function(nt,ot,xt,vt,bt){var St=h.decode._getBPP(ot),Et=Math.ceil(vt*St/8),Ct=h.decode._paeth;St=Math.ceil(St/8);for(var ht=0;ht<bt;ht++){var d=xt+ht*Et,b=d+ht+1,ft=nt[b-1];if(ft==0)for(var mt=0;mt<Et;mt++)nt[d+mt]=nt[b+mt];else if(ft==1){for(var mt=0;mt<St;mt++)nt[d+mt]=nt[b+mt];for(var mt=St;mt<Et;mt++)nt[d+mt]=nt[b+mt]+nt[d+mt-St]&255}else if(ht==0){for(var mt=0;mt<St;mt++)nt[d+mt]=nt[b+mt];if(ft==2)for(var mt=St;mt<Et;mt++)nt[d+mt]=nt[b+mt]&255;if(ft==3)for(var mt=St;mt<Et;mt++)nt[d+mt]=nt[b+mt]+(nt[d+mt-St]>>1)&255;if(ft==4)for(var mt=St;mt<Et;mt++)nt[d+mt]=nt[b+mt]+Ct(nt[d+mt-St],0,0)&255}else{if(ft==2)for(var mt=0;mt<Et;mt++)nt[d+mt]=nt[b+mt]+nt[d+mt-Et]&255;if(ft==3){for(var mt=0;mt<St;mt++)nt[d+mt]=nt[b+mt]+(nt[d+mt-Et]>>1)&255;for(var mt=St;mt<Et;mt++)nt[d+mt]=nt[b+mt]+(nt[d+mt-Et]+nt[d+mt-St]>>1)&255}if(ft==4){for(var mt=0;mt<St;mt++)nt[d+mt]=nt[b+mt]+Ct(0,nt[d+mt-Et],0)&255;for(var mt=St;mt<Et;mt++)nt[d+mt]=nt[b+mt]+Ct(nt[d+mt-St],nt[d+mt-Et],nt[d+mt-St-Et])&255}}}return nt},h.decode._paeth=function(nt,ot,xt){var vt=nt+ot-xt,bt=Math.abs(vt-nt),St=Math.abs(vt-ot),Et=Math.abs(vt-xt);return bt<=St&&bt<=Et?nt:St<=Et?ot:xt},h.decode._IHDR=function(nt,ot,xt){var vt=h._bin;xt.width=vt.readUint(nt,ot),ot+=4,xt.height=vt.readUint(nt,ot),ot+=4,xt.depth=nt[ot],ot++,xt.ctype=nt[ot],ot++,xt.compress=nt[ot],ot++,xt.filter=nt[ot],ot++,xt.interlace=nt[ot],ot++},h._bin={nextZero:function(nt,ot){for(;nt[ot]!=0;)ot++;return ot},readUshort:function(nt,ot){return nt[ot]<<8|nt[ot+1]},writeUshort:function(nt,ot,xt){nt[ot]=xt>>8&255,nt[ot+1]=xt&255},readUint:function(nt,ot){return nt[ot]*16777216+(nt[ot+1]<<16|nt[ot+2]<<8|nt[ot+3])},writeUint:function(nt,ot,xt){nt[ot]=xt>>24&255,nt[ot+1]=xt>>16&255,nt[ot+2]=xt>>8&255,nt[ot+3]=xt&255},readASCII:function(nt,ot,xt){for(var vt="",bt=0;bt<xt;bt++)vt+=String.fromCharCode(nt[ot+bt]);return vt},writeASCII:function(nt,ot,xt){for(var vt=0;vt<xt.length;vt++)nt[ot+vt]=xt.charCodeAt(vt)},readBytes:function(nt,ot,xt){for(var vt=[],bt=0;bt<xt;bt++)vt.push(nt[ot+bt]);return vt},pad:function(nt){return nt.length<2?"0"+nt:nt},readUTF8:function(nt,ot,xt){for(var vt="",bt,St=0;St<xt;St++)vt+="%"+h._bin.pad(nt[ot+St].toString(16));try{bt=decodeURIComponent(vt)}catch{return h._bin.readASCII(nt,ot,xt)}return bt}},h._copyTile=function(nt,ot,xt,vt,bt,St,Et,Ct,ht){for(var d=Math.min(ot,bt),b=Math.min(xt,St),ft=0,mt=0,_t=0;_t<b;_t++)for(var tt=0;tt<d;tt++)if(Et>=0&&Ct>=0?(ft=_t*ot+tt<<2,mt=(Ct+_t)*bt+Et+tt<<2):(ft=(-Ct+_t)*ot-Et+tt<<2,mt=_t*bt+tt<<2),ht==0)vt[mt]=nt[ft],vt[mt+1]=nt[ft+1],vt[mt+2]=nt[ft+2],vt[mt+3]=nt[ft+3];else if(ht==1){var gt=nt[ft+3]*.00392156862745098,wt=nt[ft]*gt,yt=nt[ft+1]*gt,Tt=nt[ft+2]*gt,Mt=vt[mt+3]*(1/255),Pt=vt[mt]*Mt,It=vt[mt+1]*Mt,Lt=vt[mt+2]*Mt,zt=1-gt,jt=gt+Mt*zt,Nt=jt==0?0:1/jt;vt[mt+3]=255*jt,vt[mt+0]=(wt+Pt*zt)*Nt,vt[mt+1]=(yt+It*zt)*Nt,vt[mt+2]=(Tt+Lt*zt)*Nt}else if(ht==2){var gt=nt[ft+3],wt=nt[ft],yt=nt[ft+1],Tt=nt[ft+2],Mt=vt[mt+3],Pt=vt[mt],It=vt[mt+1],Lt=vt[mt+2];gt==Mt&&wt==Pt&&yt==It&&Tt==Lt?(vt[mt]=0,vt[mt+1]=0,vt[mt+2]=0,vt[mt+3]=0):(vt[mt]=wt,vt[mt+1]=yt,vt[mt+2]=Tt,vt[mt+3]=gt)}else if(ht==3){var gt=nt[ft+3],wt=nt[ft],yt=nt[ft+1],Tt=nt[ft+2],Mt=vt[mt+3],Pt=vt[mt],It=vt[mt+1],Lt=vt[mt+2];if(gt==Mt&&wt==Pt&&yt==It&&Tt==Lt)continue;if(gt<220&&Mt>20)return!1}return!0},h.encode=function(nt,ot,xt,vt,bt,St){vt==null&&(vt=0),St==null&&(St=!1);for(var Et=new Uint8Array(nt[0].byteLength*nt.length+100),Ct=[137,80,78,71,13,10,26,10],ht=0;ht<8;ht++)Et[ht]=Ct[ht];var d=8,b=h._bin,ft=h.crc.crc,mt=b.writeUint,_t=b.writeUshort,tt=b.writeASCII,gt=h.encode.compressPNG(nt,ot,xt,vt,St);mt(Et,d,13),d+=4,tt(Et,d,"IHDR"),d+=4,mt(Et,d,ot),d+=4,mt(Et,d,xt),d+=4,Et[d]=gt.depth,d++,Et[d]=gt.ctype,d++,Et[d]=0,d++,Et[d]=0,d++,Et[d]=0,d++,mt(Et,d,ft(Et,d-17,17)),d+=4,mt(Et,d,1),d+=4,tt(Et,d,"sRGB"),d+=4,Et[d]=1,d++,mt(Et,d,ft(Et,d-5,5)),d+=4;var wt=nt.length>1;if(wt&&(mt(Et,d,8),d+=4,tt(Et,d,"acTL"),d+=4,mt(Et,d,nt.length),d+=4,mt(Et,d,0),d+=4,mt(Et,d,ft(Et,d-12,12)),d+=4),gt.ctype==3){var yt=gt.plte.length;mt(Et,d,yt*3),d+=4,tt(Et,d,"PLTE"),d+=4;for(var ht=0;ht<yt;ht++){var Tt=ht*3,Mt=gt.plte[ht],Pt=Mt&255,It=Mt>>8&255,Lt=Mt>>16&255;Et[d+Tt+0]=Pt,Et[d+Tt+1]=It,Et[d+Tt+2]=Lt}if(d+=yt*3,mt(Et,d,ft(Et,d-yt*3-4,yt*3+4)),d+=4,gt.gotAlpha){mt(Et,d,yt),d+=4,tt(Et,d,"tRNS"),d+=4;for(var ht=0;ht<yt;ht++)Et[d+ht]=gt.plte[ht]>>24&255;d+=yt,mt(Et,d,ft(Et,d-yt-4,yt+4)),d+=4}}for(var zt=0,jt=0;jt<gt.frames.length;jt++){var Nt=gt.frames[jt];wt&&(mt(Et,d,26),d+=4,tt(Et,d,"fcTL"),d+=4,mt(Et,d,zt++),d+=4,mt(Et,d,Nt.rect.width),d+=4,mt(Et,d,Nt.rect.height),d+=4,mt(Et,d,Nt.rect.x),d+=4,mt(Et,d,Nt.rect.y),d+=4,_t(Et,d,bt[jt]),d+=2,_t(Et,d,1e3),d+=2,Et[d]=Nt.dispose,d++,Et[d]=Nt.blend,d++,mt(Et,d,ft(Et,d-30,30)),d+=4);var kt=Nt.cimg,yt=kt.length;mt(Et,d,yt+(jt==0?0:4)),d+=4;var Ot=d;tt(Et,d,jt==0?"IDAT":"fdAT"),d+=4,jt!=0&&(mt(Et,d,zt++),d+=4);for(var ht=0;ht<yt;ht++)Et[d+ht]=kt[ht];d+=yt,mt(Et,d,ft(Et,Ot,d-Ot)),d+=4}return mt(Et,d,0),d+=4,tt(Et,d,"IEND"),d+=4,mt(Et,d,ft(Et,d-4,4)),d+=4,Et.buffer.slice(0,d)},h.encode.compressPNG=function(nt,ot,xt,vt,bt){for(var St=h.encode.compress(nt,ot,xt,vt,!1,bt),Et=0;Et<nt.length;Et++){var Ct=St.frames[Et];Ct.rect.width;var ht=Ct.rect.height,d=Ct.bpl,b=Ct.bpp,ft=new Uint8Array(ht*d+ht);Ct.cimg=h.encode._filterZero(Ct.img,ht,b,d,ft)}return St},h.encode.compress=function(nt,ot,xt,vt,bt,St){St==null&&(St=!1);for(var Et=6,Ct=8,ht=4,d=255,b=0;b<nt.length;b++)for(var ft=new Uint8Array(nt[b]),mt=ft.length,_t=0;_t<mt;_t+=4)d&=ft[_t+3];var tt=d!=255,gt={},wt=[];if(nt.length!=0&&(gt[0]=0,wt.push(0),vt!=0&&vt--),vt!=0){var yt=h.quantize(nt,vt,bt);nt=yt.bufs;for(var _t=0;_t<yt.plte.length;_t++){var Tt=yt.plte[_t].est.rgba;gt[Tt]==null&&(gt[Tt]=wt.length,wt.push(Tt))}}else for(var b=0;b<nt.length;b++)for(var Mt=new Uint32Array(nt[b]),mt=Mt.length,_t=0;_t<mt;_t++){var Tt=Mt[_t];if((_t<ot||Tt!=Mt[_t-1]&&Tt!=Mt[_t-ot])&&gt[Tt]==null&&(gt[Tt]=wt.length,wt.push(Tt),wt.length>=300))break}var Pt=tt?bt:!1,It=wt.length;It<=256&&St==!1&&(It<=2?Ct=1:It<=4?Ct=2:It<=16?Ct=4:Ct=8,bt&&(Ct=8),tt=!0);for(var Lt=[],b=0;b<nt.length;b++){var zt=new Uint8Array(nt[b]),jt=new Uint32Array(zt.buffer),Nt=0,kt=0,Ot=ot,Bt=xt,Ut=0;if(b!=0&&!Pt){for(var Ft=bt||b==1||Lt[Lt.length-2].dispose==2?1:2,Wt=0,_i=1e9,Qt=0;Qt<Ft;Qt++){for(var hn=new Uint8Array(nt[b-1-Qt]),on=new Uint32Array(nt[b-1-Qt]),nn=ot,dn=xt,tn=-1,rn=-1,En=0;En<xt;En++)for(var bn=0;bn<ot;bn++){var _t=En*ot+bn;jt[_t]!=on[_t]&&(bn<nn&&(nn=bn),bn>tn&&(tn=bn),En<dn&&(dn=En),En>rn&&(rn=En))}var Dn=tn==-1?1:(tn-nn+1)*(rn-dn+1);Dn<_i&&(_i=Dn,Wt=Qt,tn==-1?(Nt=kt=0,Ot=Bt=1):(Nt=nn,kt=dn,Ot=tn-nn+1,Bt=rn-dn+1))}var hn=new Uint8Array(nt[b-1-Wt]);Wt==1&&(Lt[Lt.length-1].dispose=2);var en=new Uint8Array(Ot*Bt*4);new Uint32Array(en.buffer),h._copyTile(hn,ot,xt,en,Ot,Bt,-Nt,-kt,0),h._copyTile(zt,ot,xt,en,Ot,Bt,-Nt,-kt,3)?(h._copyTile(zt,ot,xt,en,Ot,Bt,-Nt,-kt,2),Ut=1):(h._copyTile(zt,ot,xt,en,Ot,Bt,-Nt,-kt,0),Ut=0),zt=en,jt=new Uint32Array(zt.buffer)}var xn=4*Ot;if(It<=256&&St==!1){xn=Math.ceil(Ct*Ot/8);for(var en=new Uint8Array(xn*Bt),En=0;En<Bt;En++){var _t=En*xn,Pn=En*Ot;if(Ct==8)for(var bn=0;bn<Ot;bn++)en[_t+bn]=gt[jt[Pn+bn]];else if(Ct==4)for(var bn=0;bn<Ot;bn++)en[_t+(bn>>1)]|=gt[jt[Pn+bn]]<<4-(bn&1)*4;else if(Ct==2)for(var bn=0;bn<Ot;bn++)en[_t+(bn>>2)]|=gt[jt[Pn+bn]]<<6-(bn&3)*2;else if(Ct==1)for(var bn=0;bn<Ot;bn++)en[_t+(bn>>3)]|=gt[jt[Pn+bn]]<<7-(bn&7)*1}zt=en,Et=3,ht=1}else if(tt==!1&&nt.length==1){for(var en=new Uint8Array(Ot*Bt*3),In=Ot*Bt,_t=0;_t<In;_t++){var Nn=_t*3,Un=_t*4;en[Nn]=zt[Un],en[Nn+1]=zt[Un+1],en[Nn+2]=zt[Un+2]}zt=en,Et=2,ht=3,xn=3*Ot}Lt.push({rect:{x:Nt,y:kt,width:Ot,height:Bt},img:zt,bpl:xn,bpp:ht,blend:Ut,dispose:Pt?1:0})}return{ctype:Et,depth:Ct,plte:wt,gotAlpha:tt,frames:Lt}},h.encode._filterZero=function(nt,ot,xt,vt,bt){for(var St=[],Et=0;Et<5;Et++)if(!(ot*vt>5e5&&(Et==2||Et==3||Et==4))){for(var Ct=0;Ct<ot;Ct++)h.encode._filterLine(bt,nt,Ct,vt,xt,Et);if(St.push(st.deflate(bt)),xt==1)break}for(var ht,d=1e9,b=0;b<St.length;b++)St[b].length<d&&(ht=b,d=St[b].length);return St[ht]},h.encode._filterLine=function(nt,ot,xt,vt,bt,St){var Et=xt*vt,Ct=Et+xt,ht=h.decode._paeth;if(nt[Ct]=St,Ct++,St==0)for(var d=0;d<vt;d++)nt[Ct+d]=ot[Et+d];else if(St==1){for(var d=0;d<bt;d++)nt[Ct+d]=ot[Et+d];for(var d=bt;d<vt;d++)nt[Ct+d]=ot[Et+d]-ot[Et+d-bt]+256&255}else if(xt==0){for(var d=0;d<bt;d++)nt[Ct+d]=ot[Et+d];if(St==2)for(var d=bt;d<vt;d++)nt[Ct+d]=ot[Et+d];if(St==3)for(var d=bt;d<vt;d++)nt[Ct+d]=ot[Et+d]-(ot[Et+d-bt]>>1)+256&255;if(St==4)for(var d=bt;d<vt;d++)nt[Ct+d]=ot[Et+d]-ht(ot[Et+d-bt],0,0)+256&255}else{if(St==2)for(var d=0;d<vt;d++)nt[Ct+d]=ot[Et+d]+256-ot[Et+d-vt]&255;if(St==3){for(var d=0;d<bt;d++)nt[Ct+d]=ot[Et+d]+256-(ot[Et+d-vt]>>1)&255;for(var d=bt;d<vt;d++)nt[Ct+d]=ot[Et+d]+256-(ot[Et+d-vt]+ot[Et+d-bt]>>1)&255}if(St==4){for(var d=0;d<bt;d++)nt[Ct+d]=ot[Et+d]+256-ht(0,ot[Et+d-vt],0)&255;for(var d=bt;d<vt;d++)nt[Ct+d]=ot[Et+d]+256-ht(ot[Et+d-bt],ot[Et+d-vt],ot[Et+d-bt-vt])&255}}},h.crc={table:function(){for(var nt=new Uint32Array(256),ot=0;ot<256;ot++){for(var xt=ot,vt=0;vt<8;vt++)xt&1?xt=3988292384^xt>>>1:xt=xt>>>1;nt[ot]=xt}return nt}(),update:function(nt,ot,xt,vt){for(var bt=0;bt<vt;bt++)nt=h.crc.table[(nt^ot[xt+bt])&255]^nt>>>8;return nt},crc:function(nt,ot,xt){return h.crc.update(4294967295,nt,ot,xt)^4294967295}},h.quantize=function(nt,ot,xt){for(var vt=[],bt=0,St=0;St<nt.length;St++)vt.push(h.encode.alphaMul(new Uint8Array(nt[St]),xt)),bt+=nt[St].byteLength;for(var Et=new Uint8Array(bt),Ct=new Uint32Array(Et.buffer),ht=0,St=0;St<vt.length;St++){for(var d=vt[St],b=d.length,ft=0;ft<b;ft++)Et[ht+ft]=d[ft];ht+=b}var mt={i0:0,i1:Et.length,bst:null,est:null,tdst:0,left:null,right:null};mt.bst=h.quantize.stats(Et,mt.i0,mt.i1),mt.est=h.quantize.estats(mt.bst);for(var _t=[mt];_t.length<ot;){for(var tt=0,gt=0,St=0;St<_t.length;St++)_t[St].est.L>tt&&(tt=_t[St].est.L,gt=St);if(tt<.001)break;var wt=_t[gt],yt=h.quantize.splitPixels(Et,Ct,wt.i0,wt.i1,wt.est.e,wt.est.eMq255),Tt={i0:wt.i0,i1:yt,bst:null,est:null,tdst:0,left:null,right:null};Tt.bst=h.quantize.stats(Et,Tt.i0,Tt.i1),Tt.est=h.quantize.estats(Tt.bst);var Mt={i0:yt,i1:wt.i1,bst:null,est:null,tdst:0,left:null,right:null};Mt.bst={R:[],m:[],N:wt.bst.N-Tt.bst.N};for(var St=0;St<16;St++)Mt.bst.R[St]=wt.bst.R[St]-Tt.bst.R[St];for(var St=0;St<4;St++)Mt.bst.m[St]=wt.bst.m[St]-Tt.bst.m[St];Mt.est=h.quantize.estats(Mt.bst),wt.left=Tt,wt.right=Mt,_t[gt]=Tt,_t.push(Mt)}_t.sort(function(Ft,Wt){return Wt.bst.N-Ft.bst.N});for(var Pt=0;Pt<vt.length;Pt++){for(var It=h.quantize.planeDst,Lt=new Uint8Array(vt[Pt].buffer),zt=new Uint32Array(vt[Pt].buffer),jt=Lt.length,St=0;St<jt;St+=4){for(var Nt=Lt[St]*.00392156862745098,kt=Lt[St+1]*(1/255),Ot=Lt[St+2]*(1/255),Bt=Lt[St+3]*(1/255),Ut=mt;Ut.left;)Ut=It(Ut.est,Nt,kt,Ot,Bt)<=0?Ut.left:Ut.right;zt[St>>2]=Ut.est.rgba}vt[Pt]=zt.buffer}return{bufs:vt,plte:_t}},h.quantize.getNearest=function(nt,ot,xt,vt,bt){if(nt.left==null)return nt.tdst=h.quantize.dist(nt.est.q,ot,xt,vt,bt),nt;var St=h.quantize.planeDst(nt.est,ot,xt,vt,bt),Et=nt.left,Ct=nt.right;St>0&&(Et=nt.right,Ct=nt.left);var ht=h.quantize.getNearest(Et,ot,xt,vt,bt);if(ht.tdst<=St*St)return ht;var d=h.quantize.getNearest(Ct,ot,xt,vt,bt);return d.tdst<ht.tdst?d:ht},h.quantize.planeDst=function(nt,ot,xt,vt,bt){var St=nt.e;return St[0]*ot+St[1]*xt+St[2]*vt+St[3]*bt-nt.eMq},h.quantize.dist=function(nt,ot,xt,vt,bt){var St=ot-nt[0],Et=xt-nt[1],Ct=vt-nt[2],ht=bt-nt[3];return St*St+Et*Et+Ct*Ct+ht*ht},h.quantize.splitPixels=function(nt,ot,xt,vt,bt,St){var Et=h.quantize.vecDot;for(vt-=4;xt<vt;){for(;Et(nt,xt,bt)<=St;)xt+=4;for(;Et(nt,vt,bt)>St;)vt-=4;if(xt>=vt)break;var Ct=ot[xt>>2];ot[xt>>2]=ot[vt>>2],ot[vt>>2]=Ct,xt+=4,vt-=4}for(;Et(nt,xt,bt)>St;)xt-=4;return xt+4},h.quantize.vecDot=function(nt,ot,xt){return nt[ot]*xt[0]+nt[ot+1]*xt[1]+nt[ot+2]*xt[2]+nt[ot+3]*xt[3]},h.quantize.stats=function(nt,ot,xt){for(var vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],bt=[0,0,0,0],St=xt-ot>>2,Et=ot;Et<xt;Et+=4){var Ct=nt[Et]*.00392156862745098,ht=nt[Et+1]*(1/255),d=nt[Et+2]*(1/255),b=nt[Et+3]*(1/255);bt[0]+=Ct,bt[1]+=ht,bt[2]+=d,bt[3]+=b,vt[0]+=Ct*Ct,vt[1]+=Ct*ht,vt[2]+=Ct*d,vt[3]+=Ct*b,vt[5]+=ht*ht,vt[6]+=ht*d,vt[7]+=ht*b,vt[10]+=d*d,vt[11]+=d*b,vt[15]+=b*b}return vt[4]=vt[1],vt[8]=vt[2],vt[12]=vt[3],vt[9]=vt[6],vt[13]=vt[7],vt[14]=vt[11],{R:vt,m:bt,N:St}},h.quantize.estats=function(nt){var ot=nt.R,xt=nt.m,vt=nt.N,bt=xt[0],St=xt[1],Et=xt[2],Ct=xt[3],ht=vt==0?0:1/vt,d=[ot[0]-bt*bt*ht,ot[1]-bt*St*ht,ot[2]-bt*Et*ht,ot[3]-bt*Ct*ht,ot[4]-St*bt*ht,ot[5]-St*St*ht,ot[6]-St*Et*ht,ot[7]-St*Ct*ht,ot[8]-Et*bt*ht,ot[9]-Et*St*ht,ot[10]-Et*Et*ht,ot[11]-Et*Ct*ht,ot[12]-Ct*bt*ht,ot[13]-Ct*St*ht,ot[14]-Ct*Et*ht,ot[15]-Ct*Ct*ht],b=d,ft=h.M4,mt=[.5,.5,.5,.5],_t=0,tt=0;if(vt!=0)for(var gt=0;gt<10&&(mt=ft.multVec(b,mt),tt=Math.sqrt(ft.dot(mt,mt)),mt=ft.sml(1/tt,mt),!(Math.abs(tt-_t)<1e-9));gt++)_t=tt;var wt=[bt*ht,St*ht,Et*ht,Ct*ht],yt=ft.dot(ft.sml(255,wt),mt),Tt=wt[3]<.001?0:1/wt[3];return{Cov:d,q:wt,e:mt,L:_t,eMq255:yt,eMq:ft.dot(mt,wt),rgba:(Math.round(255*wt[3])<<24|Math.round(255*wt[2]*Tt)<<16|Math.round(255*wt[1]*Tt)<<8|Math.round(255*wt[0]*Tt)<<0)>>>0}},h.M4={multVec:function(nt,ot){return[nt[0]*ot[0]+nt[1]*ot[1]+nt[2]*ot[2]+nt[3]*ot[3],nt[4]*ot[0]+nt[5]*ot[1]+nt[6]*ot[2]+nt[7]*ot[3],nt[8]*ot[0]+nt[9]*ot[1]+nt[10]*ot[2]+nt[11]*ot[3],nt[12]*ot[0]+nt[13]*ot[1]+nt[14]*ot[2]+nt[15]*ot[3]]},dot:function(nt,ot){return nt[0]*ot[0]+nt[1]*ot[1]+nt[2]*ot[2]+nt[3]*ot[3]},sml:function(nt,ot){return[nt*ot[0],nt*ot[1],nt*ot[2],nt*ot[3]]}},h.encode.alphaMul=function(nt,ot){for(var xt=new Uint8Array(nt.length),vt=nt.length>>2,bt=0;bt<vt;bt++){var St=bt<<2,Et=nt[St+3];ot&&(Et=Et<128?0:255);var Ct=Et*(1/255);xt[St+0]=nt[St+0]*Ct,xt[St+1]=nt[St+1]*Ct,xt[St+2]=nt[St+2]*Ct,xt[St+3]=Et}return xt}}(a,c)})()},"./node_modules/upng-js/node_modules/pako/index.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,c=s("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),h=s("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),st=s("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),nt={};a(nt,c,h,st),e.exports=nt},"./node_modules/upng-js/node_modules/pako/lib/deflate.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),c=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),h=s("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),st=s("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),nt=s("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),ot=Object.prototype.toString,xt=0,vt=4,bt=0,St=1,Et=2,Ct=-1,ht=0,d=8;function b(tt){if(!(this instanceof b))return new b(tt);this.options=c.assign({level:Ct,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:ht,to:""},tt||{});var gt=this.options;gt.raw&&gt.windowBits>0?gt.windowBits=-gt.windowBits:gt.gzip&&gt.windowBits>0&&gt.windowBits<16&&(gt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nt,this.strm.avail_out=0;var wt=a.deflateInit2(this.strm,gt.level,gt.method,gt.windowBits,gt.memLevel,gt.strategy);if(wt!==bt)throw new Error(st[wt]);if(gt.header&&a.deflateSetHeader(this.strm,gt.header),gt.dictionary){var yt;if(typeof gt.dictionary=="string"?yt=h.string2buf(gt.dictionary):ot.call(gt.dictionary)==="[object ArrayBuffer]"?yt=new Uint8Array(gt.dictionary):yt=gt.dictionary,wt=a.deflateSetDictionary(this.strm,yt),wt!==bt)throw new Error(st[wt]);this._dict_set=!0}}b.prototype.push=function(tt,gt){var wt=this.strm,yt=this.options.chunkSize,Tt,Mt;if(this.ended)return!1;Mt=gt===~~gt?gt:gt===!0?vt:xt,typeof tt=="string"?wt.input=h.string2buf(tt):ot.call(tt)==="[object ArrayBuffer]"?wt.input=new Uint8Array(tt):wt.input=tt,wt.next_in=0,wt.avail_in=wt.input.length;do{if(wt.avail_out===0&&(wt.output=new c.Buf8(yt),wt.next_out=0,wt.avail_out=yt),Tt=a.deflate(wt,Mt),Tt!==St&&Tt!==bt)return this.onEnd(Tt),this.ended=!0,!1;(wt.avail_out===0||wt.avail_in===0&&(Mt===vt||Mt===Et))&&(this.options.to==="string"?this.onData(h.buf2binstring(c.shrinkBuf(wt.output,wt.next_out))):this.onData(c.shrinkBuf(wt.output,wt.next_out)))}while((wt.avail_in>0||wt.avail_out===0)&&Tt!==St);return Mt===vt?(Tt=a.deflateEnd(this.strm),this.onEnd(Tt),this.ended=!0,Tt===bt):(Mt===Et&&(this.onEnd(bt),wt.avail_out=0),!0)},b.prototype.onData=function(tt){this.chunks.push(tt)},b.prototype.onEnd=function(tt){tt===bt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=tt,this.msg=this.strm.msg};function ft(tt,gt){var wt=new b(gt);if(wt.push(tt,!0),wt.err)throw wt.msg||st[wt.err];return wt.result}function mt(tt,gt){return gt=gt||{},gt.raw=!0,ft(tt,gt)}function _t(tt,gt){return gt=gt||{},gt.gzip=!0,ft(tt,gt)}i.Deflate=b,i.deflate=ft,i.deflateRaw=mt,i.gzip=_t},"./node_modules/upng-js/node_modules/pako/lib/inflate.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),c=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),h=s("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),st=s("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),nt=s("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),ot=s("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),xt=s("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),vt=Object.prototype.toString;function bt(Ct){if(!(this instanceof bt))return new bt(Ct);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},Ct||{});var ht=this.options;ht.raw&&ht.windowBits>=0&&ht.windowBits<16&&(ht.windowBits=-ht.windowBits,ht.windowBits===0&&(ht.windowBits=-15)),ht.windowBits>=0&&ht.windowBits<16&&!(Ct&&Ct.windowBits)&&(ht.windowBits+=32),ht.windowBits>15&&ht.windowBits<48&&(ht.windowBits&15||(ht.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ot,this.strm.avail_out=0;var d=a.inflateInit2(this.strm,ht.windowBits);if(d!==st.Z_OK)throw new Error(nt[d]);if(this.header=new xt,a.inflateGetHeader(this.strm,this.header),ht.dictionary&&(typeof ht.dictionary=="string"?ht.dictionary=h.string2buf(ht.dictionary):vt.call(ht.dictionary)==="[object ArrayBuffer]"&&(ht.dictionary=new Uint8Array(ht.dictionary)),ht.raw&&(d=a.inflateSetDictionary(this.strm,ht.dictionary),d!==st.Z_OK)))throw new Error(nt[d])}bt.prototype.push=function(Ct,ht){var d=this.strm,b=this.options.chunkSize,ft=this.options.dictionary,mt,_t,tt,gt,wt,yt=!1;if(this.ended)return!1;_t=ht===~~ht?ht:ht===!0?st.Z_FINISH:st.Z_NO_FLUSH,typeof Ct=="string"?d.input=h.binstring2buf(Ct):vt.call(Ct)==="[object ArrayBuffer]"?d.input=new Uint8Array(Ct):d.input=Ct,d.next_in=0,d.avail_in=d.input.length;do{if(d.avail_out===0&&(d.output=new c.Buf8(b),d.next_out=0,d.avail_out=b),mt=a.inflate(d,st.Z_NO_FLUSH),mt===st.Z_NEED_DICT&&ft&&(mt=a.inflateSetDictionary(this.strm,ft)),mt===st.Z_BUF_ERROR&&yt===!0&&(mt=st.Z_OK,yt=!1),mt!==st.Z_STREAM_END&&mt!==st.Z_OK)return this.onEnd(mt),this.ended=!0,!1;d.next_out&&(d.avail_out===0||mt===st.Z_STREAM_END||d.avail_in===0&&(_t===st.Z_FINISH||_t===st.Z_SYNC_FLUSH))&&(this.options.to==="string"?(tt=h.utf8border(d.output,d.next_out),gt=d.next_out-tt,wt=h.buf2string(d.output,tt),d.next_out=gt,d.avail_out=b-gt,gt&&c.arraySet(d.output,d.output,tt,gt,0),this.onData(wt)):this.onData(c.shrinkBuf(d.output,d.next_out))),d.avail_in===0&&d.avail_out===0&&(yt=!0)}while((d.avail_in>0||d.avail_out===0)&&mt!==st.Z_STREAM_END);return mt===st.Z_STREAM_END&&(_t=st.Z_FINISH),_t===st.Z_FINISH?(mt=a.inflateEnd(this.strm),this.onEnd(mt),this.ended=!0,mt===st.Z_OK):(_t===st.Z_SYNC_FLUSH&&(this.onEnd(st.Z_OK),d.avail_out=0),!0)},bt.prototype.onData=function(Ct){this.chunks.push(Ct)},bt.prototype.onEnd=function(Ct){Ct===st.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=Ct,this.msg=this.strm.msg};function St(Ct,ht){var d=new bt(ht);if(d.push(Ct,!0),d.err)throw d.msg||nt[d.err];return d.result}function Et(Ct,ht){return ht=ht||{},ht.raw=!0,St(Ct,ht)}i.Inflate=bt,i.inflate=St,i.inflateRaw=Et,i.ungzip=St},"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":(e,i)=>{var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function a(st,nt){return Object.prototype.hasOwnProperty.call(st,nt)}i.assign=function(st){for(var nt=Array.prototype.slice.call(arguments,1);nt.length;){var ot=nt.shift();if(ot){if(typeof ot!="object")throw new TypeError(ot+"must be non-object");for(var xt in ot)a(ot,xt)&&(st[xt]=ot[xt])}}return st},i.shrinkBuf=function(st,nt){return st.length===nt?st:st.subarray?st.subarray(0,nt):(st.length=nt,st)};var c={arraySet:function(st,nt,ot,xt,vt){if(nt.subarray&&st.subarray){st.set(nt.subarray(ot,ot+xt),vt);return}for(var bt=0;bt<xt;bt++)st[vt+bt]=nt[ot+bt]},flattenChunks:function(st){var nt,ot,xt,vt,bt,St;for(xt=0,nt=0,ot=st.length;nt<ot;nt++)xt+=st[nt].length;for(St=new Uint8Array(xt),vt=0,nt=0,ot=st.length;nt<ot;nt++)bt=st[nt],St.set(bt,vt),vt+=bt.length;return St}},h={arraySet:function(st,nt,ot,xt,vt){for(var bt=0;bt<xt;bt++)st[vt+bt]=nt[ot+bt]},flattenChunks:function(st){return[].concat.apply([],st)}};i.setTyped=function(st){st?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,c)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,h))},i.setTyped(s)},"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),c=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var st=new a.Buf8(256),nt=0;nt<256;nt++)st[nt]=nt>=252?6:nt>=248?5:nt>=240?4:nt>=224?3:nt>=192?2:1;st[254]=st[254]=1,i.string2buf=function(xt){var vt,bt,St,Et,Ct,ht=xt.length,d=0;for(Et=0;Et<ht;Et++)bt=xt.charCodeAt(Et),(bt&64512)===55296&&Et+1<ht&&(St=xt.charCodeAt(Et+1),(St&64512)===56320&&(bt=65536+(bt-55296<<10)+(St-56320),Et++)),d+=bt<128?1:bt<2048?2:bt<65536?3:4;for(vt=new a.Buf8(d),Ct=0,Et=0;Ct<d;Et++)bt=xt.charCodeAt(Et),(bt&64512)===55296&&Et+1<ht&&(St=xt.charCodeAt(Et+1),(St&64512)===56320&&(bt=65536+(bt-55296<<10)+(St-56320),Et++)),bt<128?vt[Ct++]=bt:bt<2048?(vt[Ct++]=192|bt>>>6,vt[Ct++]=128|bt&63):bt<65536?(vt[Ct++]=224|bt>>>12,vt[Ct++]=128|bt>>>6&63,vt[Ct++]=128|bt&63):(vt[Ct++]=240|bt>>>18,vt[Ct++]=128|bt>>>12&63,vt[Ct++]=128|bt>>>6&63,vt[Ct++]=128|bt&63);return vt};function ot(xt,vt){if(vt<65534&&(xt.subarray&&h||!xt.subarray&&c))return String.fromCharCode.apply(null,a.shrinkBuf(xt,vt));for(var bt="",St=0;St<vt;St++)bt+=String.fromCharCode(xt[St]);return bt}i.buf2binstring=function(xt){return ot(xt,xt.length)},i.binstring2buf=function(xt){for(var vt=new a.Buf8(xt.length),bt=0,St=vt.length;bt<St;bt++)vt[bt]=xt.charCodeAt(bt);return vt},i.buf2string=function(xt,vt){var bt,St,Et,Ct,ht=vt||xt.length,d=new Array(ht*2);for(St=0,bt=0;bt<ht;){if(Et=xt[bt++],Et<128){d[St++]=Et;continue}if(Ct=st[Et],Ct>4){d[St++]=65533,bt+=Ct-1;continue}for(Et&=Ct===2?31:Ct===3?15:7;Ct>1&&bt<ht;)Et=Et<<6|xt[bt++]&63,Ct--;if(Ct>1){d[St++]=65533;continue}Et<65536?d[St++]=Et:(Et-=65536,d[St++]=55296|Et>>10&1023,d[St++]=56320|Et&1023)}return ot(d,St)},i.utf8border=function(xt,vt){var bt;for(vt=vt||xt.length,vt>xt.length&&(vt=xt.length),bt=vt-1;bt>=0&&(xt[bt]&192)===128;)bt--;return bt<0||bt===0?vt:bt+st[xt[bt]]>vt?bt:vt}},"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":e=>{function i(s,a,c,h){for(var st=s&65535|0,nt=s>>>16&65535|0,ot=0;c!==0;){ot=c>2e3?2e3:c,c-=ot;do st=st+a[h++]|0,nt=nt+st|0;while(--ot);st%=65521,nt%=65521}return st|nt<<16|0}e.exports=i},"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":e=>{e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":e=>{function i(){for(var c,h=[],st=0;st<256;st++){c=st;for(var nt=0;nt<8;nt++)c=c&1?3988292384^c>>>1:c>>>1;h[st]=c}return h}var s=i();function a(c,h,st,nt){var ot=s,xt=nt+st;c^=-1;for(var vt=nt;vt<xt;vt++)c=c>>>8^ot[(c^h[vt])&255];return c^-1}e.exports=a},"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),c=s("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),h=s("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),st=s("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),nt=s("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),ot=0,xt=1,vt=3,bt=4,St=5,Et=0,Ct=1,ht=-2,d=-3,b=-5,ft=-1,mt=1,_t=2,tt=3,gt=4,wt=0,yt=2,Tt=8,Mt=9,Pt=15,It=8,Lt=29,zt=256,jt=zt+1+Lt,Nt=30,kt=19,Ot=2*jt+1,Bt=15,Ut=3,Ft=258,Wt=Ft+Ut+1,_i=32,Qt=42,on=69,nn=73,dn=91,tn=103,rn=113,En=666,bn=1,Dn=2,hn=3,en=4,xn=3;function Pn(Rt,gn){return Rt.msg=nt[gn],gn}function In(Rt){return(Rt<<1)-(Rt>4?9:0)}function Nn(Rt){for(var gn=Rt.length;--gn>=0;)Rt[gn]=0}function Un(Rt){var gn=Rt.state,pn=gn.pending;pn>Rt.avail_out&&(pn=Rt.avail_out),pn!==0&&(a.arraySet(Rt.output,gn.pending_buf,gn.pending_out,pn,Rt.next_out),Rt.next_out+=pn,gn.pending_out+=pn,Rt.total_out+=pn,Rt.avail_out-=pn,gn.pending-=pn,gn.pending===0&&(gn.pending_out=0))}function kn(Rt,gn){c._tr_flush_block(Rt,Rt.block_start>=0?Rt.block_start:-1,Rt.strstart-Rt.block_start,gn),Rt.block_start=Rt.strstart,Un(Rt.strm)}function jn(Rt,gn){Rt.pending_buf[Rt.pending++]=gn}function zn(Rt,gn){Rt.pending_buf[Rt.pending++]=gn>>>8&255,Rt.pending_buf[Rt.pending++]=gn&255}function On(Rt,gn,pn,Kt){var sn=Rt.avail_in;return sn>Kt&&(sn=Kt),sn===0?0:(Rt.avail_in-=sn,a.arraySet(gn,Rt.input,Rt.next_in,sn,pn),Rt.state.wrap===1?Rt.adler=h(Rt.adler,gn,sn,pn):Rt.state.wrap===2&&(Rt.adler=st(Rt.adler,gn,sn,pn)),Rt.next_in+=sn,Rt.total_in+=sn,sn)}function cn(Rt,gn){var pn=Rt.max_chain_length,Kt=Rt.strstart,sn,_n,Gn=Rt.prev_length,$n=Rt.nice_match,Wn=Rt.strstart>Rt.w_size-Wt?Rt.strstart-(Rt.w_size-Wt):0,Qn=Rt.window,_r=Rt.w_mask,ir=Rt.prev,tr=Rt.strstart+Ft,qn=Qn[Kt+Gn-1],yr=Qn[Kt+Gn];Rt.prev_length>=Rt.good_match&&(pn>>=2),$n>Rt.lookahead&&($n=Rt.lookahead);do if(sn=gn,!(Qn[sn+Gn]!==yr||Qn[sn+Gn-1]!==qn||Qn[sn]!==Qn[Kt]||Qn[++sn]!==Qn[Kt+1])){Kt+=2,sn++;do;while(Qn[++Kt]===Qn[++sn]&&Qn[++Kt]===Qn[++sn]&&Qn[++Kt]===Qn[++sn]&&Qn[++Kt]===Qn[++sn]&&Qn[++Kt]===Qn[++sn]&&Qn[++Kt]===Qn[++sn]&&Qn[++Kt]===Qn[++sn]&&Qn[++Kt]===Qn[++sn]&&Kt<tr);if(_n=Ft-(tr-Kt),Kt=tr-Ft,_n>Gn){if(Rt.match_start=gn,Gn=_n,_n>=$n)break;qn=Qn[Kt+Gn-1],yr=Qn[Kt+Gn]}}while((gn=ir[gn&_r])>Wn&&--pn!==0);return Gn<=Rt.lookahead?Gn:Rt.lookahead}function Ln(Rt){var gn=Rt.w_size,pn,Kt,sn,_n,Gn;do{if(_n=Rt.window_size-Rt.lookahead-Rt.strstart,Rt.strstart>=gn+(gn-Wt)){a.arraySet(Rt.window,Rt.window,gn,gn,0),Rt.match_start-=gn,Rt.strstart-=gn,Rt.block_start-=gn,Kt=Rt.hash_size,pn=Kt;do sn=Rt.head[--pn],Rt.head[pn]=sn>=gn?sn-gn:0;while(--Kt);Kt=gn,pn=Kt;do sn=Rt.prev[--pn],Rt.prev[pn]=sn>=gn?sn-gn:0;while(--Kt);_n+=gn}if(Rt.strm.avail_in===0)break;if(Kt=On(Rt.strm,Rt.window,Rt.strstart+Rt.lookahead,_n),Rt.lookahead+=Kt,Rt.lookahead+Rt.insert>=Ut)for(Gn=Rt.strstart-Rt.insert,Rt.ins_h=Rt.window[Gn],Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Gn+1])&Rt.hash_mask;Rt.insert&&(Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Gn+Ut-1])&Rt.hash_mask,Rt.prev[Gn&Rt.w_mask]=Rt.head[Rt.ins_h],Rt.head[Rt.ins_h]=Gn,Gn++,Rt.insert--,!(Rt.lookahead+Rt.insert<Ut)););}while(Rt.lookahead<Wt&&Rt.strm.avail_in!==0)}function Fn(Rt,gn){var pn=65535;for(pn>Rt.pending_buf_size-5&&(pn=Rt.pending_buf_size-5);;){if(Rt.lookahead<=1){if(Ln(Rt),Rt.lookahead===0&&gn===ot)return bn;if(Rt.lookahead===0)break}Rt.strstart+=Rt.lookahead,Rt.lookahead=0;var Kt=Rt.block_start+pn;if((Rt.strstart===0||Rt.strstart>=Kt)&&(Rt.lookahead=Rt.strstart-Kt,Rt.strstart=Kt,kn(Rt,!1),Rt.strm.avail_out===0)||Rt.strstart-Rt.block_start>=Rt.w_size-Wt&&(kn(Rt,!1),Rt.strm.avail_out===0))return bn}return Rt.insert=0,gn===bt?(kn(Rt,!0),Rt.strm.avail_out===0?hn:en):(Rt.strstart>Rt.block_start&&(kn(Rt,!1),Rt.strm.avail_out===0),bn)}function $t(Rt,gn){for(var pn,Kt;;){if(Rt.lookahead<Wt){if(Ln(Rt),Rt.lookahead<Wt&&gn===ot)return bn;if(Rt.lookahead===0)break}if(pn=0,Rt.lookahead>=Ut&&(Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Rt.strstart+Ut-1])&Rt.hash_mask,pn=Rt.prev[Rt.strstart&Rt.w_mask]=Rt.head[Rt.ins_h],Rt.head[Rt.ins_h]=Rt.strstart),pn!==0&&Rt.strstart-pn<=Rt.w_size-Wt&&(Rt.match_length=cn(Rt,pn)),Rt.match_length>=Ut)if(Kt=c._tr_tally(Rt,Rt.strstart-Rt.match_start,Rt.match_length-Ut),Rt.lookahead-=Rt.match_length,Rt.match_length<=Rt.max_lazy_match&&Rt.lookahead>=Ut){Rt.match_length--;do Rt.strstart++,Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Rt.strstart+Ut-1])&Rt.hash_mask,pn=Rt.prev[Rt.strstart&Rt.w_mask]=Rt.head[Rt.ins_h],Rt.head[Rt.ins_h]=Rt.strstart;while(--Rt.match_length!==0);Rt.strstart++}else Rt.strstart+=Rt.match_length,Rt.match_length=0,Rt.ins_h=Rt.window[Rt.strstart],Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Rt.strstart+1])&Rt.hash_mask;else Kt=c._tr_tally(Rt,0,Rt.window[Rt.strstart]),Rt.lookahead--,Rt.strstart++;if(Kt&&(kn(Rt,!1),Rt.strm.avail_out===0))return bn}return Rt.insert=Rt.strstart<Ut-1?Rt.strstart:Ut-1,gn===bt?(kn(Rt,!0),Rt.strm.avail_out===0?hn:en):Rt.last_lit&&(kn(Rt,!1),Rt.strm.avail_out===0)?bn:Dn}function Xt(Rt,gn){for(var pn,Kt,sn;;){if(Rt.lookahead<Wt){if(Ln(Rt),Rt.lookahead<Wt&&gn===ot)return bn;if(Rt.lookahead===0)break}if(pn=0,Rt.lookahead>=Ut&&(Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Rt.strstart+Ut-1])&Rt.hash_mask,pn=Rt.prev[Rt.strstart&Rt.w_mask]=Rt.head[Rt.ins_h],Rt.head[Rt.ins_h]=Rt.strstart),Rt.prev_length=Rt.match_length,Rt.prev_match=Rt.match_start,Rt.match_length=Ut-1,pn!==0&&Rt.prev_length<Rt.max_lazy_match&&Rt.strstart-pn<=Rt.w_size-Wt&&(Rt.match_length=cn(Rt,pn),Rt.match_length<=5&&(Rt.strategy===mt||Rt.match_length===Ut&&Rt.strstart-Rt.match_start>4096)&&(Rt.match_length=Ut-1)),Rt.prev_length>=Ut&&Rt.match_length<=Rt.prev_length){sn=Rt.strstart+Rt.lookahead-Ut,Kt=c._tr_tally(Rt,Rt.strstart-1-Rt.prev_match,Rt.prev_length-Ut),Rt.lookahead-=Rt.prev_length-1,Rt.prev_length-=2;do++Rt.strstart<=sn&&(Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Rt.strstart+Ut-1])&Rt.hash_mask,pn=Rt.prev[Rt.strstart&Rt.w_mask]=Rt.head[Rt.ins_h],Rt.head[Rt.ins_h]=Rt.strstart);while(--Rt.prev_length!==0);if(Rt.match_available=0,Rt.match_length=Ut-1,Rt.strstart++,Kt&&(kn(Rt,!1),Rt.strm.avail_out===0))return bn}else if(Rt.match_available){if(Kt=c._tr_tally(Rt,0,Rt.window[Rt.strstart-1]),Kt&&kn(Rt,!1),Rt.strstart++,Rt.lookahead--,Rt.strm.avail_out===0)return bn}else Rt.match_available=1,Rt.strstart++,Rt.lookahead--}return Rt.match_available&&(Kt=c._tr_tally(Rt,0,Rt.window[Rt.strstart-1]),Rt.match_available=0),Rt.insert=Rt.strstart<Ut-1?Rt.strstart:Ut-1,gn===bt?(kn(Rt,!0),Rt.strm.avail_out===0?hn:en):Rt.last_lit&&(kn(Rt,!1),Rt.strm.avail_out===0)?bn:Dn}function Zt(Rt,gn){for(var pn,Kt,sn,_n,Gn=Rt.window;;){if(Rt.lookahead<=Ft){if(Ln(Rt),Rt.lookahead<=Ft&&gn===ot)return bn;if(Rt.lookahead===0)break}if(Rt.match_length=0,Rt.lookahead>=Ut&&Rt.strstart>0&&(sn=Rt.strstart-1,Kt=Gn[sn],Kt===Gn[++sn]&&Kt===Gn[++sn]&&Kt===Gn[++sn])){_n=Rt.strstart+Ft;do;while(Kt===Gn[++sn]&&Kt===Gn[++sn]&&Kt===Gn[++sn]&&Kt===Gn[++sn]&&Kt===Gn[++sn]&&Kt===Gn[++sn]&&Kt===Gn[++sn]&&Kt===Gn[++sn]&&sn<_n);Rt.match_length=Ft-(_n-sn),Rt.match_length>Rt.lookahead&&(Rt.match_length=Rt.lookahead)}if(Rt.match_length>=Ut?(pn=c._tr_tally(Rt,1,Rt.match_length-Ut),Rt.lookahead-=Rt.match_length,Rt.strstart+=Rt.match_length,Rt.match_length=0):(pn=c._tr_tally(Rt,0,Rt.window[Rt.strstart]),Rt.lookahead--,Rt.strstart++),pn&&(kn(Rt,!1),Rt.strm.avail_out===0))return bn}return Rt.insert=0,gn===bt?(kn(Rt,!0),Rt.strm.avail_out===0?hn:en):Rt.last_lit&&(kn(Rt,!1),Rt.strm.avail_out===0)?bn:Dn}function mn(Rt,gn){for(var pn;;){if(Rt.lookahead===0&&(Ln(Rt),Rt.lookahead===0)){if(gn===ot)return bn;break}if(Rt.match_length=0,pn=c._tr_tally(Rt,0,Rt.window[Rt.strstart]),Rt.lookahead--,Rt.strstart++,pn&&(kn(Rt,!1),Rt.strm.avail_out===0))return bn}return Rt.insert=0,gn===bt?(kn(Rt,!0),Rt.strm.avail_out===0?hn:en):Rt.last_lit&&(kn(Rt,!1),Rt.strm.avail_out===0)?bn:Dn}function an(Rt,gn,pn,Kt,sn){this.good_length=Rt,this.max_lazy=gn,this.nice_length=pn,this.max_chain=Kt,this.func=sn}var Rn;Rn=[new an(0,0,0,0,Fn),new an(4,4,8,4,$t),new an(4,5,16,8,$t),new an(4,6,32,32,$t),new an(4,4,16,16,Xt),new an(8,16,32,32,Xt),new an(8,16,128,128,Xt),new an(8,32,128,256,Xt),new an(32,128,258,1024,Xt),new an(32,258,258,4096,Xt)];function Cn(Rt){Rt.window_size=2*Rt.w_size,Nn(Rt.head),Rt.max_lazy_match=Rn[Rt.level].max_lazy,Rt.good_match=Rn[Rt.level].good_length,Rt.nice_match=Rn[Rt.level].nice_length,Rt.max_chain_length=Rn[Rt.level].max_chain,Rt.strstart=0,Rt.block_start=0,Rt.lookahead=0,Rt.insert=0,Rt.match_length=Rt.prev_length=Ut-1,Rt.match_available=0,Rt.ins_h=0}function Gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Tt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(Ot*2),this.dyn_dtree=new a.Buf16((2*Nt+1)*2),this.bl_tree=new a.Buf16((2*kt+1)*2),Nn(this.dyn_ltree),Nn(this.dyn_dtree),Nn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(Bt+1),this.heap=new a.Buf16(2*jt+1),Nn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*jt+1),Nn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function un(Rt){var gn;return!Rt||!Rt.state?Pn(Rt,ht):(Rt.total_in=Rt.total_out=0,Rt.data_type=yt,gn=Rt.state,gn.pending=0,gn.pending_out=0,gn.wrap<0&&(gn.wrap=-gn.wrap),gn.status=gn.wrap?Qt:rn,Rt.adler=gn.wrap===2?0:1,gn.last_flush=ot,c._tr_init(gn),Et)}function yn(Rt){var gn=un(Rt);return gn===Et&&Cn(Rt.state),gn}function Mn(Rt,gn){return!Rt||!Rt.state||Rt.state.wrap!==2?ht:(Rt.state.gzhead=gn,Et)}function ln(Rt,gn,pn,Kt,sn,_n){if(!Rt)return ht;var Gn=1;if(gn===ft&&(gn=6),Kt<0?(Gn=0,Kt=-Kt):Kt>15&&(Gn=2,Kt-=16),sn<1||sn>Mt||pn!==Tt||Kt<8||Kt>15||gn<0||gn>9||_n<0||_n>gt)return Pn(Rt,ht);Kt===8&&(Kt=9);var $n=new Gt;return Rt.state=$n,$n.strm=Rt,$n.wrap=Gn,$n.gzhead=null,$n.w_bits=Kt,$n.w_size=1<<$n.w_bits,$n.w_mask=$n.w_size-1,$n.hash_bits=sn+7,$n.hash_size=1<<$n.hash_bits,$n.hash_mask=$n.hash_size-1,$n.hash_shift=~~(($n.hash_bits+Ut-1)/Ut),$n.window=new a.Buf8($n.w_size*2),$n.head=new a.Buf16($n.hash_size),$n.prev=new a.Buf16($n.w_size),$n.lit_bufsize=1<<sn+6,$n.pending_buf_size=$n.lit_bufsize*4,$n.pending_buf=new a.Buf8($n.pending_buf_size),$n.d_buf=1*$n.lit_bufsize,$n.l_buf=3*$n.lit_bufsize,$n.level=gn,$n.strategy=_n,$n.method=pn,yn(Rt)}function wn(Rt,gn){return ln(Rt,gn,Tt,Pt,It,wt)}function Ht(Rt,gn){var pn,Kt,sn,_n;if(!Rt||!Rt.state||gn>St||gn<0)return Rt?Pn(Rt,ht):ht;if(Kt=Rt.state,!Rt.output||!Rt.input&&Rt.avail_in!==0||Kt.status===En&&gn!==bt)return Pn(Rt,Rt.avail_out===0?b:ht);if(Kt.strm=Rt,pn=Kt.last_flush,Kt.last_flush=gn,Kt.status===Qt)if(Kt.wrap===2)Rt.adler=0,jn(Kt,31),jn(Kt,139),jn(Kt,8),Kt.gzhead?(jn(Kt,(Kt.gzhead.text?1:0)+(Kt.gzhead.hcrc?2:0)+(Kt.gzhead.extra?4:0)+(Kt.gzhead.name?8:0)+(Kt.gzhead.comment?16:0)),jn(Kt,Kt.gzhead.time&255),jn(Kt,Kt.gzhead.time>>8&255),jn(Kt,Kt.gzhead.time>>16&255),jn(Kt,Kt.gzhead.time>>24&255),jn(Kt,Kt.level===9?2:Kt.strategy>=_t||Kt.level<2?4:0),jn(Kt,Kt.gzhead.os&255),Kt.gzhead.extra&&Kt.gzhead.extra.length&&(jn(Kt,Kt.gzhead.extra.length&255),jn(Kt,Kt.gzhead.extra.length>>8&255)),Kt.gzhead.hcrc&&(Rt.adler=st(Rt.adler,Kt.pending_buf,Kt.pending,0)),Kt.gzindex=0,Kt.status=on):(jn(Kt,0),jn(Kt,0),jn(Kt,0),jn(Kt,0),jn(Kt,0),jn(Kt,Kt.level===9?2:Kt.strategy>=_t||Kt.level<2?4:0),jn(Kt,xn),Kt.status=rn);else{var Gn=Tt+(Kt.w_bits-8<<4)<<8,$n=-1;Kt.strategy>=_t||Kt.level<2?$n=0:Kt.level<6?$n=1:Kt.level===6?$n=2:$n=3,Gn|=$n<<6,Kt.strstart!==0&&(Gn|=_i),Gn+=31-Gn%31,Kt.status=rn,zn(Kt,Gn),Kt.strstart!==0&&(zn(Kt,Rt.adler>>>16),zn(Kt,Rt.adler&65535)),Rt.adler=1}if(Kt.status===on)if(Kt.gzhead.extra){for(sn=Kt.pending;Kt.gzindex<(Kt.gzhead.extra.length&65535)&&!(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>sn&&(Rt.adler=st(Rt.adler,Kt.pending_buf,Kt.pending-sn,sn)),Un(Rt),sn=Kt.pending,Kt.pending===Kt.pending_buf_size));)jn(Kt,Kt.gzhead.extra[Kt.gzindex]&255),Kt.gzindex++;Kt.gzhead.hcrc&&Kt.pending>sn&&(Rt.adler=st(Rt.adler,Kt.pending_buf,Kt.pending-sn,sn)),Kt.gzindex===Kt.gzhead.extra.length&&(Kt.gzindex=0,Kt.status=nn)}else Kt.status=nn;if(Kt.status===nn)if(Kt.gzhead.name){sn=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>sn&&(Rt.adler=st(Rt.adler,Kt.pending_buf,Kt.pending-sn,sn)),Un(Rt),sn=Kt.pending,Kt.pending===Kt.pending_buf_size)){_n=1;break}Kt.gzindex<Kt.gzhead.name.length?_n=Kt.gzhead.name.charCodeAt(Kt.gzindex++)&255:_n=0,jn(Kt,_n)}while(_n!==0);Kt.gzhead.hcrc&&Kt.pending>sn&&(Rt.adler=st(Rt.adler,Kt.pending_buf,Kt.pending-sn,sn)),_n===0&&(Kt.gzindex=0,Kt.status=dn)}else Kt.status=dn;if(Kt.status===dn)if(Kt.gzhead.comment){sn=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>sn&&(Rt.adler=st(Rt.adler,Kt.pending_buf,Kt.pending-sn,sn)),Un(Rt),sn=Kt.pending,Kt.pending===Kt.pending_buf_size)){_n=1;break}Kt.gzindex<Kt.gzhead.comment.length?_n=Kt.gzhead.comment.charCodeAt(Kt.gzindex++)&255:_n=0,jn(Kt,_n)}while(_n!==0);Kt.gzhead.hcrc&&Kt.pending>sn&&(Rt.adler=st(Rt.adler,Kt.pending_buf,Kt.pending-sn,sn)),_n===0&&(Kt.status=tn)}else Kt.status=tn;if(Kt.status===tn&&(Kt.gzhead.hcrc?(Kt.pending+2>Kt.pending_buf_size&&Un(Rt),Kt.pending+2<=Kt.pending_buf_size&&(jn(Kt,Rt.adler&255),jn(Kt,Rt.adler>>8&255),Rt.adler=0,Kt.status=rn)):Kt.status=rn),Kt.pending!==0){if(Un(Rt),Rt.avail_out===0)return Kt.last_flush=-1,Et}else if(Rt.avail_in===0&&In(gn)<=In(pn)&&gn!==bt)return Pn(Rt,b);if(Kt.status===En&&Rt.avail_in!==0)return Pn(Rt,b);if(Rt.avail_in!==0||Kt.lookahead!==0||gn!==ot&&Kt.status!==En){var Wn=Kt.strategy===_t?mn(Kt,gn):Kt.strategy===tt?Zt(Kt,gn):Rn[Kt.level].func(Kt,gn);if((Wn===hn||Wn===en)&&(Kt.status=En),Wn===bn||Wn===hn)return Rt.avail_out===0&&(Kt.last_flush=-1),Et;if(Wn===Dn&&(gn===xt?c._tr_align(Kt):gn!==St&&(c._tr_stored_block(Kt,0,0,!1),gn===vt&&(Nn(Kt.head),Kt.lookahead===0&&(Kt.strstart=0,Kt.block_start=0,Kt.insert=0))),Un(Rt),Rt.avail_out===0))return Kt.last_flush=-1,Et}return gn!==bt?Et:Kt.wrap<=0?Ct:(Kt.wrap===2?(jn(Kt,Rt.adler&255),jn(Kt,Rt.adler>>8&255),jn(Kt,Rt.adler>>16&255),jn(Kt,Rt.adler>>24&255),jn(Kt,Rt.total_in&255),jn(Kt,Rt.total_in>>8&255),jn(Kt,Rt.total_in>>16&255),jn(Kt,Rt.total_in>>24&255)):(zn(Kt,Rt.adler>>>16),zn(Kt,Rt.adler&65535)),Un(Rt),Kt.wrap>0&&(Kt.wrap=-Kt.wrap),Kt.pending!==0?Et:Ct)}function Tn(Rt){var gn;return!Rt||!Rt.state?ht:(gn=Rt.state.status,gn!==Qt&&gn!==on&&gn!==nn&&gn!==dn&&gn!==tn&&gn!==rn&&gn!==En?Pn(Rt,ht):(Rt.state=null,gn===rn?Pn(Rt,d):Et))}function Vn(Rt,gn){var pn=gn.length,Kt,sn,_n,Gn,$n,Wn,Qn,_r;if(!Rt||!Rt.state||(Kt=Rt.state,Gn=Kt.wrap,Gn===2||Gn===1&&Kt.status!==Qt||Kt.lookahead))return ht;for(Gn===1&&(Rt.adler=h(Rt.adler,gn,pn,0)),Kt.wrap=0,pn>=Kt.w_size&&(Gn===0&&(Nn(Kt.head),Kt.strstart=0,Kt.block_start=0,Kt.insert=0),_r=new a.Buf8(Kt.w_size),a.arraySet(_r,gn,pn-Kt.w_size,Kt.w_size,0),gn=_r,pn=Kt.w_size),$n=Rt.avail_in,Wn=Rt.next_in,Qn=Rt.input,Rt.avail_in=pn,Rt.next_in=0,Rt.input=gn,Ln(Kt);Kt.lookahead>=Ut;){sn=Kt.strstart,_n=Kt.lookahead-(Ut-1);do Kt.ins_h=(Kt.ins_h<<Kt.hash_shift^Kt.window[sn+Ut-1])&Kt.hash_mask,Kt.prev[sn&Kt.w_mask]=Kt.head[Kt.ins_h],Kt.head[Kt.ins_h]=sn,sn++;while(--_n);Kt.strstart=sn,Kt.lookahead=Ut-1,Ln(Kt)}return Kt.strstart+=Kt.lookahead,Kt.block_start=Kt.strstart,Kt.insert=Kt.lookahead,Kt.lookahead=0,Kt.match_length=Kt.prev_length=Ut-1,Kt.match_available=0,Rt.next_in=Wn,Rt.input=Qn,Rt.avail_in=$n,Kt.wrap=Gn,Et}i.deflateInit=wn,i.deflateInit2=ln,i.deflateReset=yn,i.deflateResetKeep=un,i.deflateSetHeader=Mn,i.deflate=Ht,i.deflateEnd=Tn,i.deflateSetDictionary=Vn,i.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":e=>{function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":e=>{var i=30,s=12;e.exports=function(c,h){var st,nt,ot,xt,vt,bt,St,Et,Ct,ht,d,b,ft,mt,_t,tt,gt,wt,yt,Tt,Mt,Pt,It,Lt,zt;st=c.state,nt=c.next_in,Lt=c.input,ot=nt+(c.avail_in-5),xt=c.next_out,zt=c.output,vt=xt-(h-c.avail_out),bt=xt+(c.avail_out-257),St=st.dmax,Et=st.wsize,Ct=st.whave,ht=st.wnext,d=st.window,b=st.hold,ft=st.bits,mt=st.lencode,_t=st.distcode,tt=(1<<st.lenbits)-1,gt=(1<<st.distbits)-1;e:do{ft<15&&(b+=Lt[nt++]<<ft,ft+=8,b+=Lt[nt++]<<ft,ft+=8),wt=mt[b&tt];t:for(;;){if(yt=wt>>>24,b>>>=yt,ft-=yt,yt=wt>>>16&255,yt===0)zt[xt++]=wt&65535;else if(yt&16){Tt=wt&65535,yt&=15,yt&&(ft<yt&&(b+=Lt[nt++]<<ft,ft+=8),Tt+=b&(1<<yt)-1,b>>>=yt,ft-=yt),ft<15&&(b+=Lt[nt++]<<ft,ft+=8,b+=Lt[nt++]<<ft,ft+=8),wt=_t[b&gt];i:for(;;){if(yt=wt>>>24,b>>>=yt,ft-=yt,yt=wt>>>16&255,yt&16){if(Mt=wt&65535,yt&=15,ft<yt&&(b+=Lt[nt++]<<ft,ft+=8,ft<yt&&(b+=Lt[nt++]<<ft,ft+=8)),Mt+=b&(1<<yt)-1,Mt>St){c.msg="invalid distance too far back",st.mode=i;break e}if(b>>>=yt,ft-=yt,yt=xt-vt,Mt>yt){if(yt=Mt-yt,yt>Ct&&st.sane){c.msg="invalid distance too far back",st.mode=i;break e}if(Pt=0,It=d,ht===0){if(Pt+=Et-yt,yt<Tt){Tt-=yt;do zt[xt++]=d[Pt++];while(--yt);Pt=xt-Mt,It=zt}}else if(ht<yt){if(Pt+=Et+ht-yt,yt-=ht,yt<Tt){Tt-=yt;do zt[xt++]=d[Pt++];while(--yt);if(Pt=0,ht<Tt){yt=ht,Tt-=yt;do zt[xt++]=d[Pt++];while(--yt);Pt=xt-Mt,It=zt}}}else if(Pt+=ht-yt,yt<Tt){Tt-=yt;do zt[xt++]=d[Pt++];while(--yt);Pt=xt-Mt,It=zt}for(;Tt>2;)zt[xt++]=It[Pt++],zt[xt++]=It[Pt++],zt[xt++]=It[Pt++],Tt-=3;Tt&&(zt[xt++]=It[Pt++],Tt>1&&(zt[xt++]=It[Pt++]))}else{Pt=xt-Mt;do zt[xt++]=zt[Pt++],zt[xt++]=zt[Pt++],zt[xt++]=zt[Pt++],Tt-=3;while(Tt>2);Tt&&(zt[xt++]=zt[Pt++],Tt>1&&(zt[xt++]=zt[Pt++]))}}else if(yt&64){c.msg="invalid distance code",st.mode=i;break e}else{wt=_t[(wt&65535)+(b&(1<<yt)-1)];continue i}break}}else if(yt&64)if(yt&32){st.mode=s;break e}else{c.msg="invalid literal/length code",st.mode=i;break e}else{wt=mt[(wt&65535)+(b&(1<<yt)-1)];continue t}break}}while(nt<ot&&xt<bt);Tt=ft>>3,nt-=Tt,ft-=Tt<<3,b&=(1<<ft)-1,c.next_in=nt,c.next_out=xt,c.avail_in=nt<ot?5+(ot-nt):5-(nt-ot),c.avail_out=xt<bt?257+(bt-xt):257-(xt-bt),st.hold=b,st.bits=ft}},"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),c=s("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),h=s("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),st=s("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),nt=s("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),ot=0,xt=1,vt=2,bt=4,St=5,Et=6,Ct=0,ht=1,d=2,b=-2,ft=-3,mt=-4,_t=-5,tt=8,gt=1,wt=2,yt=3,Tt=4,Mt=5,Pt=6,It=7,Lt=8,zt=9,jt=10,Nt=11,kt=12,Ot=13,Bt=14,Ut=15,Ft=16,Wt=17,_i=18,Qt=19,on=20,nn=21,dn=22,tn=23,rn=24,En=25,bn=26,Dn=27,hn=28,en=29,xn=30,Pn=31,In=32,Nn=852,Un=592,kn=15,jn=kn;function zn(ln){return(ln>>>24&255)+(ln>>>8&65280)+((ln&65280)<<8)+((ln&255)<<24)}function On(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function cn(ln){var wn;return!ln||!ln.state?b:(wn=ln.state,ln.total_in=ln.total_out=wn.total=0,ln.msg="",wn.wrap&&(ln.adler=wn.wrap&1),wn.mode=gt,wn.last=0,wn.havedict=0,wn.dmax=32768,wn.head=null,wn.hold=0,wn.bits=0,wn.lencode=wn.lendyn=new a.Buf32(Nn),wn.distcode=wn.distdyn=new a.Buf32(Un),wn.sane=1,wn.back=-1,Ct)}function Ln(ln){var wn;return!ln||!ln.state?b:(wn=ln.state,wn.wsize=0,wn.whave=0,wn.wnext=0,cn(ln))}function Fn(ln,wn){var Ht,Tn;return!ln||!ln.state||(Tn=ln.state,wn<0?(Ht=0,wn=-wn):(Ht=(wn>>4)+1,wn<48&&(wn&=15)),wn&&(wn<8||wn>15))?b:(Tn.window!==null&&Tn.wbits!==wn&&(Tn.window=null),Tn.wrap=Ht,Tn.wbits=wn,Ln(ln))}function $t(ln,wn){var Ht,Tn;return ln?(Tn=new On,ln.state=Tn,Tn.window=null,Ht=Fn(ln,wn),Ht!==Ct&&(ln.state=null),Ht):b}function Xt(ln){return $t(ln,jn)}var Zt=!0,mn,an;function Rn(ln){if(Zt){var wn;for(mn=new a.Buf32(512),an=new a.Buf32(32),wn=0;wn<144;)ln.lens[wn++]=8;for(;wn<256;)ln.lens[wn++]=9;for(;wn<280;)ln.lens[wn++]=7;for(;wn<288;)ln.lens[wn++]=8;for(nt(xt,ln.lens,0,288,mn,0,ln.work,{bits:9}),wn=0;wn<32;)ln.lens[wn++]=5;nt(vt,ln.lens,0,32,an,0,ln.work,{bits:5}),Zt=!1}ln.lencode=mn,ln.lenbits=9,ln.distcode=an,ln.distbits=5}function Cn(ln,wn,Ht,Tn){var Vn,Rt=ln.state;return Rt.window===null&&(Rt.wsize=1<<Rt.wbits,Rt.wnext=0,Rt.whave=0,Rt.window=new a.Buf8(Rt.wsize)),Tn>=Rt.wsize?(a.arraySet(Rt.window,wn,Ht-Rt.wsize,Rt.wsize,0),Rt.wnext=0,Rt.whave=Rt.wsize):(Vn=Rt.wsize-Rt.wnext,Vn>Tn&&(Vn=Tn),a.arraySet(Rt.window,wn,Ht-Tn,Vn,Rt.wnext),Tn-=Vn,Tn?(a.arraySet(Rt.window,wn,Ht-Tn,Tn,0),Rt.wnext=Tn,Rt.whave=Rt.wsize):(Rt.wnext+=Vn,Rt.wnext===Rt.wsize&&(Rt.wnext=0),Rt.whave<Rt.wsize&&(Rt.whave+=Vn))),0}function Gt(ln,wn){var Ht,Tn,Vn,Rt,gn,pn,Kt,sn,_n,Gn,$n,Wn,Qn,_r,ir=0,tr,qn,yr,fr,Lr,Mr,mr,gr,hr=new a.Buf8(4),Sr,Er,jr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ln||!ln.state||!ln.output||!ln.input&&ln.avail_in!==0)return b;Ht=ln.state,Ht.mode===kt&&(Ht.mode=Ot),gn=ln.next_out,Vn=ln.output,Kt=ln.avail_out,Rt=ln.next_in,Tn=ln.input,pn=ln.avail_in,sn=Ht.hold,_n=Ht.bits,Gn=pn,$n=Kt,gr=Ct;e:for(;;)switch(Ht.mode){case gt:if(Ht.wrap===0){Ht.mode=Ot;break}for(;_n<16;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(Ht.wrap&2&&sn===35615){Ht.check=0,hr[0]=sn&255,hr[1]=sn>>>8&255,Ht.check=h(Ht.check,hr,2,0),sn=0,_n=0,Ht.mode=wt;break}if(Ht.flags=0,Ht.head&&(Ht.head.done=!1),!(Ht.wrap&1)||(((sn&255)<<8)+(sn>>8))%31){ln.msg="incorrect header check",Ht.mode=xn;break}if((sn&15)!==tt){ln.msg="unknown compression method",Ht.mode=xn;break}if(sn>>>=4,_n-=4,mr=(sn&15)+8,Ht.wbits===0)Ht.wbits=mr;else if(mr>Ht.wbits){ln.msg="invalid window size",Ht.mode=xn;break}Ht.dmax=1<<mr,ln.adler=Ht.check=1,Ht.mode=sn&512?jt:kt,sn=0,_n=0;break;case wt:for(;_n<16;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(Ht.flags=sn,(Ht.flags&255)!==tt){ln.msg="unknown compression method",Ht.mode=xn;break}if(Ht.flags&57344){ln.msg="unknown header flags set",Ht.mode=xn;break}Ht.head&&(Ht.head.text=sn>>8&1),Ht.flags&512&&(hr[0]=sn&255,hr[1]=sn>>>8&255,Ht.check=h(Ht.check,hr,2,0)),sn=0,_n=0,Ht.mode=yt;case yt:for(;_n<32;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}Ht.head&&(Ht.head.time=sn),Ht.flags&512&&(hr[0]=sn&255,hr[1]=sn>>>8&255,hr[2]=sn>>>16&255,hr[3]=sn>>>24&255,Ht.check=h(Ht.check,hr,4,0)),sn=0,_n=0,Ht.mode=Tt;case Tt:for(;_n<16;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}Ht.head&&(Ht.head.xflags=sn&255,Ht.head.os=sn>>8),Ht.flags&512&&(hr[0]=sn&255,hr[1]=sn>>>8&255,Ht.check=h(Ht.check,hr,2,0)),sn=0,_n=0,Ht.mode=Mt;case Mt:if(Ht.flags&1024){for(;_n<16;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}Ht.length=sn,Ht.head&&(Ht.head.extra_len=sn),Ht.flags&512&&(hr[0]=sn&255,hr[1]=sn>>>8&255,Ht.check=h(Ht.check,hr,2,0)),sn=0,_n=0}else Ht.head&&(Ht.head.extra=null);Ht.mode=Pt;case Pt:if(Ht.flags&1024&&(Wn=Ht.length,Wn>pn&&(Wn=pn),Wn&&(Ht.head&&(mr=Ht.head.extra_len-Ht.length,Ht.head.extra||(Ht.head.extra=new Array(Ht.head.extra_len)),a.arraySet(Ht.head.extra,Tn,Rt,Wn,mr)),Ht.flags&512&&(Ht.check=h(Ht.check,Tn,Wn,Rt)),pn-=Wn,Rt+=Wn,Ht.length-=Wn),Ht.length))break e;Ht.length=0,Ht.mode=It;case It:if(Ht.flags&2048){if(pn===0)break e;Wn=0;do mr=Tn[Rt+Wn++],Ht.head&&mr&&Ht.length<65536&&(Ht.head.name+=String.fromCharCode(mr));while(mr&&Wn<pn);if(Ht.flags&512&&(Ht.check=h(Ht.check,Tn,Wn,Rt)),pn-=Wn,Rt+=Wn,mr)break e}else Ht.head&&(Ht.head.name=null);Ht.length=0,Ht.mode=Lt;case Lt:if(Ht.flags&4096){if(pn===0)break e;Wn=0;do mr=Tn[Rt+Wn++],Ht.head&&mr&&Ht.length<65536&&(Ht.head.comment+=String.fromCharCode(mr));while(mr&&Wn<pn);if(Ht.flags&512&&(Ht.check=h(Ht.check,Tn,Wn,Rt)),pn-=Wn,Rt+=Wn,mr)break e}else Ht.head&&(Ht.head.comment=null);Ht.mode=zt;case zt:if(Ht.flags&512){for(;_n<16;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(sn!==(Ht.check&65535)){ln.msg="header crc mismatch",Ht.mode=xn;break}sn=0,_n=0}Ht.head&&(Ht.head.hcrc=Ht.flags>>9&1,Ht.head.done=!0),ln.adler=Ht.check=0,Ht.mode=kt;break;case jt:for(;_n<32;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}ln.adler=Ht.check=zn(sn),sn=0,_n=0,Ht.mode=Nt;case Nt:if(Ht.havedict===0)return ln.next_out=gn,ln.avail_out=Kt,ln.next_in=Rt,ln.avail_in=pn,Ht.hold=sn,Ht.bits=_n,d;ln.adler=Ht.check=1,Ht.mode=kt;case kt:if(wn===St||wn===Et)break e;case Ot:if(Ht.last){sn>>>=_n&7,_n-=_n&7,Ht.mode=Dn;break}for(;_n<3;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}switch(Ht.last=sn&1,sn>>>=1,_n-=1,sn&3){case 0:Ht.mode=Bt;break;case 1:if(Rn(Ht),Ht.mode=on,wn===Et){sn>>>=2,_n-=2;break e}break;case 2:Ht.mode=Wt;break;case 3:ln.msg="invalid block type",Ht.mode=xn}sn>>>=2,_n-=2;break;case Bt:for(sn>>>=_n&7,_n-=_n&7;_n<32;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if((sn&65535)!==(sn>>>16^65535)){ln.msg="invalid stored block lengths",Ht.mode=xn;break}if(Ht.length=sn&65535,sn=0,_n=0,Ht.mode=Ut,wn===Et)break e;case Ut:Ht.mode=Ft;case Ft:if(Wn=Ht.length,Wn){if(Wn>pn&&(Wn=pn),Wn>Kt&&(Wn=Kt),Wn===0)break e;a.arraySet(Vn,Tn,Rt,Wn,gn),pn-=Wn,Rt+=Wn,Kt-=Wn,gn+=Wn,Ht.length-=Wn;break}Ht.mode=kt;break;case Wt:for(;_n<14;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(Ht.nlen=(sn&31)+257,sn>>>=5,_n-=5,Ht.ndist=(sn&31)+1,sn>>>=5,_n-=5,Ht.ncode=(sn&15)+4,sn>>>=4,_n-=4,Ht.nlen>286||Ht.ndist>30){ln.msg="too many length or distance symbols",Ht.mode=xn;break}Ht.have=0,Ht.mode=_i;case _i:for(;Ht.have<Ht.ncode;){for(;_n<3;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}Ht.lens[jr[Ht.have++]]=sn&7,sn>>>=3,_n-=3}for(;Ht.have<19;)Ht.lens[jr[Ht.have++]]=0;if(Ht.lencode=Ht.lendyn,Ht.lenbits=7,Sr={bits:Ht.lenbits},gr=nt(ot,Ht.lens,0,19,Ht.lencode,0,Ht.work,Sr),Ht.lenbits=Sr.bits,gr){ln.msg="invalid code lengths set",Ht.mode=xn;break}Ht.have=0,Ht.mode=Qt;case Qt:for(;Ht.have<Ht.nlen+Ht.ndist;){for(;ir=Ht.lencode[sn&(1<<Ht.lenbits)-1],tr=ir>>>24,qn=ir>>>16&255,yr=ir&65535,!(tr<=_n);){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(yr<16)sn>>>=tr,_n-=tr,Ht.lens[Ht.have++]=yr;else{if(yr===16){for(Er=tr+2;_n<Er;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(sn>>>=tr,_n-=tr,Ht.have===0){ln.msg="invalid bit length repeat",Ht.mode=xn;break}mr=Ht.lens[Ht.have-1],Wn=3+(sn&3),sn>>>=2,_n-=2}else if(yr===17){for(Er=tr+3;_n<Er;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}sn>>>=tr,_n-=tr,mr=0,Wn=3+(sn&7),sn>>>=3,_n-=3}else{for(Er=tr+7;_n<Er;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}sn>>>=tr,_n-=tr,mr=0,Wn=11+(sn&127),sn>>>=7,_n-=7}if(Ht.have+Wn>Ht.nlen+Ht.ndist){ln.msg="invalid bit length repeat",Ht.mode=xn;break}for(;Wn--;)Ht.lens[Ht.have++]=mr}}if(Ht.mode===xn)break;if(Ht.lens[256]===0){ln.msg="invalid code -- missing end-of-block",Ht.mode=xn;break}if(Ht.lenbits=9,Sr={bits:Ht.lenbits},gr=nt(xt,Ht.lens,0,Ht.nlen,Ht.lencode,0,Ht.work,Sr),Ht.lenbits=Sr.bits,gr){ln.msg="invalid literal/lengths set",Ht.mode=xn;break}if(Ht.distbits=6,Ht.distcode=Ht.distdyn,Sr={bits:Ht.distbits},gr=nt(vt,Ht.lens,Ht.nlen,Ht.ndist,Ht.distcode,0,Ht.work,Sr),Ht.distbits=Sr.bits,gr){ln.msg="invalid distances set",Ht.mode=xn;break}if(Ht.mode=on,wn===Et)break e;case on:Ht.mode=nn;case nn:if(pn>=6&&Kt>=258){ln.next_out=gn,ln.avail_out=Kt,ln.next_in=Rt,ln.avail_in=pn,Ht.hold=sn,Ht.bits=_n,st(ln,$n),gn=ln.next_out,Vn=ln.output,Kt=ln.avail_out,Rt=ln.next_in,Tn=ln.input,pn=ln.avail_in,sn=Ht.hold,_n=Ht.bits,Ht.mode===kt&&(Ht.back=-1);break}for(Ht.back=0;ir=Ht.lencode[sn&(1<<Ht.lenbits)-1],tr=ir>>>24,qn=ir>>>16&255,yr=ir&65535,!(tr<=_n);){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(qn&&!(qn&240)){for(fr=tr,Lr=qn,Mr=yr;ir=Ht.lencode[Mr+((sn&(1<<fr+Lr)-1)>>fr)],tr=ir>>>24,qn=ir>>>16&255,yr=ir&65535,!(fr+tr<=_n);){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}sn>>>=fr,_n-=fr,Ht.back+=fr}if(sn>>>=tr,_n-=tr,Ht.back+=tr,Ht.length=yr,qn===0){Ht.mode=bn;break}if(qn&32){Ht.back=-1,Ht.mode=kt;break}if(qn&64){ln.msg="invalid literal/length code",Ht.mode=xn;break}Ht.extra=qn&15,Ht.mode=dn;case dn:if(Ht.extra){for(Er=Ht.extra;_n<Er;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}Ht.length+=sn&(1<<Ht.extra)-1,sn>>>=Ht.extra,_n-=Ht.extra,Ht.back+=Ht.extra}Ht.was=Ht.length,Ht.mode=tn;case tn:for(;ir=Ht.distcode[sn&(1<<Ht.distbits)-1],tr=ir>>>24,qn=ir>>>16&255,yr=ir&65535,!(tr<=_n);){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(!(qn&240)){for(fr=tr,Lr=qn,Mr=yr;ir=Ht.distcode[Mr+((sn&(1<<fr+Lr)-1)>>fr)],tr=ir>>>24,qn=ir>>>16&255,yr=ir&65535,!(fr+tr<=_n);){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}sn>>>=fr,_n-=fr,Ht.back+=fr}if(sn>>>=tr,_n-=tr,Ht.back+=tr,qn&64){ln.msg="invalid distance code",Ht.mode=xn;break}Ht.offset=yr,Ht.extra=qn&15,Ht.mode=rn;case rn:if(Ht.extra){for(Er=Ht.extra;_n<Er;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}Ht.offset+=sn&(1<<Ht.extra)-1,sn>>>=Ht.extra,_n-=Ht.extra,Ht.back+=Ht.extra}if(Ht.offset>Ht.dmax){ln.msg="invalid distance too far back",Ht.mode=xn;break}Ht.mode=En;case En:if(Kt===0)break e;if(Wn=$n-Kt,Ht.offset>Wn){if(Wn=Ht.offset-Wn,Wn>Ht.whave&&Ht.sane){ln.msg="invalid distance too far back",Ht.mode=xn;break}Wn>Ht.wnext?(Wn-=Ht.wnext,Qn=Ht.wsize-Wn):Qn=Ht.wnext-Wn,Wn>Ht.length&&(Wn=Ht.length),_r=Ht.window}else _r=Vn,Qn=gn-Ht.offset,Wn=Ht.length;Wn>Kt&&(Wn=Kt),Kt-=Wn,Ht.length-=Wn;do Vn[gn++]=_r[Qn++];while(--Wn);Ht.length===0&&(Ht.mode=nn);break;case bn:if(Kt===0)break e;Vn[gn++]=Ht.length,Kt--,Ht.mode=nn;break;case Dn:if(Ht.wrap){for(;_n<32;){if(pn===0)break e;pn--,sn|=Tn[Rt++]<<_n,_n+=8}if($n-=Kt,ln.total_out+=$n,Ht.total+=$n,$n&&(ln.adler=Ht.check=Ht.flags?h(Ht.check,Vn,$n,gn-$n):c(Ht.check,Vn,$n,gn-$n)),$n=Kt,(Ht.flags?sn:zn(sn))!==Ht.check){ln.msg="incorrect data check",Ht.mode=xn;break}sn=0,_n=0}Ht.mode=hn;case hn:if(Ht.wrap&&Ht.flags){for(;_n<32;){if(pn===0)break e;pn--,sn+=Tn[Rt++]<<_n,_n+=8}if(sn!==(Ht.total&4294967295)){ln.msg="incorrect length check",Ht.mode=xn;break}sn=0,_n=0}Ht.mode=en;case en:gr=ht;break e;case xn:gr=ft;break e;case Pn:return mt;case In:default:return b}return ln.next_out=gn,ln.avail_out=Kt,ln.next_in=Rt,ln.avail_in=pn,Ht.hold=sn,Ht.bits=_n,(Ht.wsize||$n!==ln.avail_out&&Ht.mode<xn&&(Ht.mode<Dn||wn!==bt))&&Cn(ln,ln.output,ln.next_out,$n-ln.avail_out),Gn-=ln.avail_in,$n-=ln.avail_out,ln.total_in+=Gn,ln.total_out+=$n,Ht.total+=$n,Ht.wrap&&$n&&(ln.adler=Ht.check=Ht.flags?h(Ht.check,Vn,$n,ln.next_out-$n):c(Ht.check,Vn,$n,ln.next_out-$n)),ln.data_type=Ht.bits+(Ht.last?64:0)+(Ht.mode===kt?128:0)+(Ht.mode===on||Ht.mode===Ut?256:0),(Gn===0&&$n===0||wn===bt)&&gr===Ct&&(gr=_t),gr}function un(ln){if(!ln||!ln.state)return b;var wn=ln.state;return wn.window&&(wn.window=null),ln.state=null,Ct}function yn(ln,wn){var Ht;return!ln||!ln.state||(Ht=ln.state,!(Ht.wrap&2))?b:(Ht.head=wn,wn.done=!1,Ct)}function Mn(ln,wn){var Ht=wn.length,Tn,Vn,Rt;return!ln||!ln.state||(Tn=ln.state,Tn.wrap!==0&&Tn.mode!==Nt)?b:Tn.mode===Nt&&(Vn=1,Vn=c(Vn,wn,Ht,0),Vn!==Tn.check)?ft:(Rt=Cn(ln,wn,Ht,Ht),Rt?(Tn.mode=Pn,mt):(Tn.havedict=1,Ct))}i.inflateReset=Ln,i.inflateReset2=Fn,i.inflateResetKeep=cn,i.inflateInit=Xt,i.inflateInit2=$t,i.inflate=Gt,i.inflateEnd=un,i.inflateGetHeader=yn,i.inflateSetDictionary=Mn,i.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),c=15,h=852,st=592,nt=0,ot=1,xt=2,vt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],bt=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],St=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Et=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(ht,d,b,ft,mt,_t,tt,gt){var wt=gt.bits,yt=0,Tt=0,Mt=0,Pt=0,It=0,Lt=0,zt=0,jt=0,Nt=0,kt=0,Ot,Bt,Ut,Ft,Wt,_i=null,Qt=0,on,nn=new a.Buf16(c+1),dn=new a.Buf16(c+1),tn=null,rn=0,En,bn,Dn;for(yt=0;yt<=c;yt++)nn[yt]=0;for(Tt=0;Tt<ft;Tt++)nn[d[b+Tt]]++;for(It=wt,Pt=c;Pt>=1&&nn[Pt]===0;Pt--);if(It>Pt&&(It=Pt),Pt===0)return mt[_t++]=20971520,mt[_t++]=20971520,gt.bits=1,0;for(Mt=1;Mt<Pt&&nn[Mt]===0;Mt++);for(It<Mt&&(It=Mt),jt=1,yt=1;yt<=c;yt++)if(jt<<=1,jt-=nn[yt],jt<0)return-1;if(jt>0&&(ht===nt||Pt!==1))return-1;for(dn[1]=0,yt=1;yt<c;yt++)dn[yt+1]=dn[yt]+nn[yt];for(Tt=0;Tt<ft;Tt++)d[b+Tt]!==0&&(tt[dn[d[b+Tt]]++]=Tt);if(ht===nt?(_i=tn=tt,on=19):ht===ot?(_i=vt,Qt-=257,tn=bt,rn-=257,on=256):(_i=St,tn=Et,on=-1),kt=0,Tt=0,yt=Mt,Wt=_t,Lt=It,zt=0,Ut=-1,Nt=1<<It,Ft=Nt-1,ht===ot&&Nt>h||ht===xt&&Nt>st)return 1;for(;;){En=yt-zt,tt[Tt]<on?(bn=0,Dn=tt[Tt]):tt[Tt]>on?(bn=tn[rn+tt[Tt]],Dn=_i[Qt+tt[Tt]]):(bn=96,Dn=0),Ot=1<<yt-zt,Bt=1<<Lt,Mt=Bt;do Bt-=Ot,mt[Wt+(kt>>zt)+Bt]=En<<24|bn<<16|Dn|0;while(Bt!==0);for(Ot=1<<yt-1;kt&Ot;)Ot>>=1;if(Ot!==0?(kt&=Ot-1,kt+=Ot):kt=0,Tt++,--nn[yt]===0){if(yt===Pt)break;yt=d[b+tt[Tt]]}if(yt>It&&(kt&Ft)!==Ut){for(zt===0&&(zt=It),Wt+=Mt,Lt=yt-zt,jt=1<<Lt;Lt+zt<Pt&&(jt-=nn[Lt+zt],!(jt<=0));)Lt++,jt<<=1;if(Nt+=1<<Lt,ht===ot&&Nt>h||ht===xt&&Nt>st)return 1;Ut=kt&Ft,mt[Ut]=It<<24|Lt<<16|Wt-_t|0}}return kt!==0&&(mt[Wt+kt]=yt-zt<<24|4194304|0),gt.bits=It,0}},"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":e=>{e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":(e,i,s)=>{var a=s("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),c=4,h=0,st=1,nt=2;function ot(Gt){for(var un=Gt.length;--un>=0;)Gt[un]=0}var xt=0,vt=1,bt=2,St=3,Et=258,Ct=29,ht=256,d=ht+1+Ct,b=30,ft=19,mt=2*d+1,_t=15,tt=16,gt=7,wt=256,yt=16,Tt=17,Mt=18,Pt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],It=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],zt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],jt=512,Nt=new Array((d+2)*2);ot(Nt);var kt=new Array(b*2);ot(kt);var Ot=new Array(jt);ot(Ot);var Bt=new Array(Et-St+1);ot(Bt);var Ut=new Array(Ct);ot(Ut);var Ft=new Array(b);ot(Ft);function Wt(Gt,un,yn,Mn,ln){this.static_tree=Gt,this.extra_bits=un,this.extra_base=yn,this.elems=Mn,this.max_length=ln,this.has_stree=Gt&&Gt.length}var _i,Qt,on;function nn(Gt,un){this.dyn_tree=Gt,this.max_code=0,this.stat_desc=un}function dn(Gt){return Gt<256?Ot[Gt]:Ot[256+(Gt>>>7)]}function tn(Gt,un){Gt.pending_buf[Gt.pending++]=un&255,Gt.pending_buf[Gt.pending++]=un>>>8&255}function rn(Gt,un,yn){Gt.bi_valid>tt-yn?(Gt.bi_buf|=un<<Gt.bi_valid&65535,tn(Gt,Gt.bi_buf),Gt.bi_buf=un>>tt-Gt.bi_valid,Gt.bi_valid+=yn-tt):(Gt.bi_buf|=un<<Gt.bi_valid&65535,Gt.bi_valid+=yn)}function En(Gt,un,yn){rn(Gt,yn[un*2],yn[un*2+1])}function bn(Gt,un){var yn=0;do yn|=Gt&1,Gt>>>=1,yn<<=1;while(--un>0);return yn>>>1}function Dn(Gt){Gt.bi_valid===16?(tn(Gt,Gt.bi_buf),Gt.bi_buf=0,Gt.bi_valid=0):Gt.bi_valid>=8&&(Gt.pending_buf[Gt.pending++]=Gt.bi_buf&255,Gt.bi_buf>>=8,Gt.bi_valid-=8)}function hn(Gt,un){var yn=un.dyn_tree,Mn=un.max_code,ln=un.stat_desc.static_tree,wn=un.stat_desc.has_stree,Ht=un.stat_desc.extra_bits,Tn=un.stat_desc.extra_base,Vn=un.stat_desc.max_length,Rt,gn,pn,Kt,sn,_n,Gn=0;for(Kt=0;Kt<=_t;Kt++)Gt.bl_count[Kt]=0;for(yn[Gt.heap[Gt.heap_max]*2+1]=0,Rt=Gt.heap_max+1;Rt<mt;Rt++)gn=Gt.heap[Rt],Kt=yn[yn[gn*2+1]*2+1]+1,Kt>Vn&&(Kt=Vn,Gn++),yn[gn*2+1]=Kt,!(gn>Mn)&&(Gt.bl_count[Kt]++,sn=0,gn>=Tn&&(sn=Ht[gn-Tn]),_n=yn[gn*2],Gt.opt_len+=_n*(Kt+sn),wn&&(Gt.static_len+=_n*(ln[gn*2+1]+sn)));if(Gn!==0){do{for(Kt=Vn-1;Gt.bl_count[Kt]===0;)Kt--;Gt.bl_count[Kt]--,Gt.bl_count[Kt+1]+=2,Gt.bl_count[Vn]--,Gn-=2}while(Gn>0);for(Kt=Vn;Kt!==0;Kt--)for(gn=Gt.bl_count[Kt];gn!==0;)pn=Gt.heap[--Rt],!(pn>Mn)&&(yn[pn*2+1]!==Kt&&(Gt.opt_len+=(Kt-yn[pn*2+1])*yn[pn*2],yn[pn*2+1]=Kt),gn--)}}function en(Gt,un,yn){var Mn=new Array(_t+1),ln=0,wn,Ht;for(wn=1;wn<=_t;wn++)Mn[wn]=ln=ln+yn[wn-1]<<1;for(Ht=0;Ht<=un;Ht++){var Tn=Gt[Ht*2+1];Tn!==0&&(Gt[Ht*2]=bn(Mn[Tn]++,Tn))}}function xn(){var Gt,un,yn,Mn,ln,wn=new Array(_t+1);for(yn=0,Mn=0;Mn<Ct-1;Mn++)for(Ut[Mn]=yn,Gt=0;Gt<1<<Pt[Mn];Gt++)Bt[yn++]=Mn;for(Bt[yn-1]=Mn,ln=0,Mn=0;Mn<16;Mn++)for(Ft[Mn]=ln,Gt=0;Gt<1<<It[Mn];Gt++)Ot[ln++]=Mn;for(ln>>=7;Mn<b;Mn++)for(Ft[Mn]=ln<<7,Gt=0;Gt<1<<It[Mn]-7;Gt++)Ot[256+ln++]=Mn;for(un=0;un<=_t;un++)wn[un]=0;for(Gt=0;Gt<=143;)Nt[Gt*2+1]=8,Gt++,wn[8]++;for(;Gt<=255;)Nt[Gt*2+1]=9,Gt++,wn[9]++;for(;Gt<=279;)Nt[Gt*2+1]=7,Gt++,wn[7]++;for(;Gt<=287;)Nt[Gt*2+1]=8,Gt++,wn[8]++;for(en(Nt,d+1,wn),Gt=0;Gt<b;Gt++)kt[Gt*2+1]=5,kt[Gt*2]=bn(Gt,5);_i=new Wt(Nt,Pt,ht+1,d,_t),Qt=new Wt(kt,It,0,b,_t),on=new Wt(new Array(0),Lt,0,ft,gt)}function Pn(Gt){var un;for(un=0;un<d;un++)Gt.dyn_ltree[un*2]=0;for(un=0;un<b;un++)Gt.dyn_dtree[un*2]=0;for(un=0;un<ft;un++)Gt.bl_tree[un*2]=0;Gt.dyn_ltree[wt*2]=1,Gt.opt_len=Gt.static_len=0,Gt.last_lit=Gt.matches=0}function In(Gt){Gt.bi_valid>8?tn(Gt,Gt.bi_buf):Gt.bi_valid>0&&(Gt.pending_buf[Gt.pending++]=Gt.bi_buf),Gt.bi_buf=0,Gt.bi_valid=0}function Nn(Gt,un,yn,Mn){In(Gt),tn(Gt,yn),tn(Gt,~yn),a.arraySet(Gt.pending_buf,Gt.window,un,yn,Gt.pending),Gt.pending+=yn}function Un(Gt,un,yn,Mn){var ln=un*2,wn=yn*2;return Gt[ln]<Gt[wn]||Gt[ln]===Gt[wn]&&Mn[un]<=Mn[yn]}function kn(Gt,un,yn){for(var Mn=Gt.heap[yn],ln=yn<<1;ln<=Gt.heap_len&&(ln<Gt.heap_len&&Un(un,Gt.heap[ln+1],Gt.heap[ln],Gt.depth)&&ln++,!Un(un,Mn,Gt.heap[ln],Gt.depth));)Gt.heap[yn]=Gt.heap[ln],yn=ln,ln<<=1;Gt.heap[yn]=Mn}function jn(Gt,un,yn){var Mn,ln,wn=0,Ht,Tn;if(Gt.last_lit!==0)do Mn=Gt.pending_buf[Gt.d_buf+wn*2]<<8|Gt.pending_buf[Gt.d_buf+wn*2+1],ln=Gt.pending_buf[Gt.l_buf+wn],wn++,Mn===0?En(Gt,ln,un):(Ht=Bt[ln],En(Gt,Ht+ht+1,un),Tn=Pt[Ht],Tn!==0&&(ln-=Ut[Ht],rn(Gt,ln,Tn)),Mn--,Ht=dn(Mn),En(Gt,Ht,yn),Tn=It[Ht],Tn!==0&&(Mn-=Ft[Ht],rn(Gt,Mn,Tn)));while(wn<Gt.last_lit);En(Gt,wt,un)}function zn(Gt,un){var yn=un.dyn_tree,Mn=un.stat_desc.static_tree,ln=un.stat_desc.has_stree,wn=un.stat_desc.elems,Ht,Tn,Vn=-1,Rt;for(Gt.heap_len=0,Gt.heap_max=mt,Ht=0;Ht<wn;Ht++)yn[Ht*2]!==0?(Gt.heap[++Gt.heap_len]=Vn=Ht,Gt.depth[Ht]=0):yn[Ht*2+1]=0;for(;Gt.heap_len<2;)Rt=Gt.heap[++Gt.heap_len]=Vn<2?++Vn:0,yn[Rt*2]=1,Gt.depth[Rt]=0,Gt.opt_len--,ln&&(Gt.static_len-=Mn[Rt*2+1]);for(un.max_code=Vn,Ht=Gt.heap_len>>1;Ht>=1;Ht--)kn(Gt,yn,Ht);Rt=wn;do Ht=Gt.heap[1],Gt.heap[1]=Gt.heap[Gt.heap_len--],kn(Gt,yn,1),Tn=Gt.heap[1],Gt.heap[--Gt.heap_max]=Ht,Gt.heap[--Gt.heap_max]=Tn,yn[Rt*2]=yn[Ht*2]+yn[Tn*2],Gt.depth[Rt]=(Gt.depth[Ht]>=Gt.depth[Tn]?Gt.depth[Ht]:Gt.depth[Tn])+1,yn[Ht*2+1]=yn[Tn*2+1]=Rt,Gt.heap[1]=Rt++,kn(Gt,yn,1);while(Gt.heap_len>=2);Gt.heap[--Gt.heap_max]=Gt.heap[1],hn(Gt,un),en(yn,Vn,Gt.bl_count)}function On(Gt,un,yn){var Mn,ln=-1,wn,Ht=un[0*2+1],Tn=0,Vn=7,Rt=4;for(Ht===0&&(Vn=138,Rt=3),un[(yn+1)*2+1]=65535,Mn=0;Mn<=yn;Mn++)wn=Ht,Ht=un[(Mn+1)*2+1],!(++Tn<Vn&&wn===Ht)&&(Tn<Rt?Gt.bl_tree[wn*2]+=Tn:wn!==0?(wn!==ln&&Gt.bl_tree[wn*2]++,Gt.bl_tree[yt*2]++):Tn<=10?Gt.bl_tree[Tt*2]++:Gt.bl_tree[Mt*2]++,Tn=0,ln=wn,Ht===0?(Vn=138,Rt=3):wn===Ht?(Vn=6,Rt=3):(Vn=7,Rt=4))}function cn(Gt,un,yn){var Mn,ln=-1,wn,Ht=un[0*2+1],Tn=0,Vn=7,Rt=4;for(Ht===0&&(Vn=138,Rt=3),Mn=0;Mn<=yn;Mn++)if(wn=Ht,Ht=un[(Mn+1)*2+1],!(++Tn<Vn&&wn===Ht)){if(Tn<Rt)do En(Gt,wn,Gt.bl_tree);while(--Tn!==0);else wn!==0?(wn!==ln&&(En(Gt,wn,Gt.bl_tree),Tn--),En(Gt,yt,Gt.bl_tree),rn(Gt,Tn-3,2)):Tn<=10?(En(Gt,Tt,Gt.bl_tree),rn(Gt,Tn-3,3)):(En(Gt,Mt,Gt.bl_tree),rn(Gt,Tn-11,7));Tn=0,ln=wn,Ht===0?(Vn=138,Rt=3):wn===Ht?(Vn=6,Rt=3):(Vn=7,Rt=4)}}function Ln(Gt){var un;for(On(Gt,Gt.dyn_ltree,Gt.l_desc.max_code),On(Gt,Gt.dyn_dtree,Gt.d_desc.max_code),zn(Gt,Gt.bl_desc),un=ft-1;un>=3&&Gt.bl_tree[zt[un]*2+1]===0;un--);return Gt.opt_len+=3*(un+1)+5+5+4,un}function Fn(Gt,un,yn,Mn){var ln;for(rn(Gt,un-257,5),rn(Gt,yn-1,5),rn(Gt,Mn-4,4),ln=0;ln<Mn;ln++)rn(Gt,Gt.bl_tree[zt[ln]*2+1],3);cn(Gt,Gt.dyn_ltree,un-1),cn(Gt,Gt.dyn_dtree,yn-1)}function $t(Gt){var un=4093624447,yn;for(yn=0;yn<=31;yn++,un>>>=1)if(un&1&&Gt.dyn_ltree[yn*2]!==0)return h;if(Gt.dyn_ltree[18]!==0||Gt.dyn_ltree[20]!==0||Gt.dyn_ltree[26]!==0)return st;for(yn=32;yn<ht;yn++)if(Gt.dyn_ltree[yn*2]!==0)return st;return h}var Xt=!1;function Zt(Gt){Xt||(xn(),Xt=!0),Gt.l_desc=new nn(Gt.dyn_ltree,_i),Gt.d_desc=new nn(Gt.dyn_dtree,Qt),Gt.bl_desc=new nn(Gt.bl_tree,on),Gt.bi_buf=0,Gt.bi_valid=0,Pn(Gt)}function mn(Gt,un,yn,Mn){rn(Gt,(xt<<1)+(Mn?1:0),3),Nn(Gt,un,yn)}function an(Gt){rn(Gt,vt<<1,3),En(Gt,wt,Nt),Dn(Gt)}function Rn(Gt,un,yn,Mn){var ln,wn,Ht=0;Gt.level>0?(Gt.strm.data_type===nt&&(Gt.strm.data_type=$t(Gt)),zn(Gt,Gt.l_desc),zn(Gt,Gt.d_desc),Ht=Ln(Gt),ln=Gt.opt_len+3+7>>>3,wn=Gt.static_len+3+7>>>3,wn<=ln&&(ln=wn)):ln=wn=yn+5,yn+4<=ln&&un!==-1?mn(Gt,un,yn,Mn):Gt.strategy===c||wn===ln?(rn(Gt,(vt<<1)+(Mn?1:0),3),jn(Gt,Nt,kt)):(rn(Gt,(bt<<1)+(Mn?1:0),3),Fn(Gt,Gt.l_desc.max_code+1,Gt.d_desc.max_code+1,Ht+1),jn(Gt,Gt.dyn_ltree,Gt.dyn_dtree)),Pn(Gt),Mn&&In(Gt)}function Cn(Gt,un,yn){return Gt.pending_buf[Gt.d_buf+Gt.last_lit*2]=un>>>8&255,Gt.pending_buf[Gt.d_buf+Gt.last_lit*2+1]=un&255,Gt.pending_buf[Gt.l_buf+Gt.last_lit]=yn&255,Gt.last_lit++,un===0?Gt.dyn_ltree[yn*2]++:(Gt.matches++,un--,Gt.dyn_ltree[(Bt[yn]+ht+1)*2]++,Gt.dyn_dtree[dn(un)*2]++),Gt.last_lit===Gt.lit_bufsize-1}i._tr_init=Zt,i._tr_stored_block=mn,i._tr_flush_block=Rn,i._tr_tally=Cn,i._tr_align=an},"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":e=>{function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},"./src/SurfaceWorker.js":()=>{$3Dmol.workerString=(function(){self.onmessage=function(e){var i=e.data,s=i.type;if(s<0)self.atomData=i.atoms,self.volume=i.volume,self.ps=new ProteinSurface;else{var a=self.ps;a.initparm(i.expandedExtent,s!=1,self.volume),a.fillvoxels(self.atomData,i.extendedAtoms),a.buildboundary(),(s===4||s===2)&&(a.fastdistancemap(),a.boundingatom(!1),a.fillvoxelswaals(self.atomData,i.extendedAtoms)),a.marchingcube(s);var c=a.getFacesAndVertices(i.atomsToShow);self.postMessage(c)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},"./src/exporter.js":e=>{typeof e.exports=="object"&&(e.exports=window.$3Dmol)},"./src/vendor/mmtf.js":function(e,i){(function(s,a){a(i)})(this,function(s){function a($t,Xt,Zt){for(var mn=($t.byteLength,0),an=Zt.length;an>mn;mn++){var Rn=Zt.charCodeAt(mn);if(128>Rn)$t.setUint8(Xt++,Rn>>>0&127|0);else if(2048>Rn)$t.setUint8(Xt++,Rn>>>6&31|192),$t.setUint8(Xt++,Rn>>>0&63|128);else if(65536>Rn)$t.setUint8(Xt++,Rn>>>12&15|224),$t.setUint8(Xt++,Rn>>>6&63|128),$t.setUint8(Xt++,Rn>>>0&63|128);else{if(!(1114112>Rn))throw new Error("bad codepoint "+Rn);$t.setUint8(Xt++,Rn>>>18&7|240),$t.setUint8(Xt++,Rn>>>12&63|128),$t.setUint8(Xt++,Rn>>>6&63|128),$t.setUint8(Xt++,Rn>>>0&63|128)}}}function c($t){for(var Xt=0,Zt=0,mn=$t.length;mn>Zt;Zt++){var an=$t.charCodeAt(Zt);if(128>an)Xt+=1;else if(2048>an)Xt+=2;else if(65536>an)Xt+=3;else{if(!(1114112>an))throw new Error("bad codepoint "+an);Xt+=4}}return Xt}function h($t,Xt,Zt){var mn=typeof $t;if(mn==="string"){var an=c($t);if(32>an)return Xt.setUint8(Zt,160|an),a(Xt,Zt+1,$t),1+an;if(256>an)return Xt.setUint8(Zt,217),Xt.setUint8(Zt+1,an),a(Xt,Zt+2,$t),2+an;if(65536>an)return Xt.setUint8(Zt,218),Xt.setUint16(Zt+1,an),a(Xt,Zt+3,$t),3+an;if(4294967296>an)return Xt.setUint8(Zt,219),Xt.setUint32(Zt+1,an),a(Xt,Zt+5,$t),5+an}if($t instanceof Uint8Array){var an=$t.byteLength,Rn=new Uint8Array(Xt.buffer);if(256>an)return Xt.setUint8(Zt,196),Xt.setUint8(Zt+1,an),Rn.set($t,Zt+2),2+an;if(65536>an)return Xt.setUint8(Zt,197),Xt.setUint16(Zt+1,an),Rn.set($t,Zt+3),3+an;if(4294967296>an)return Xt.setUint8(Zt,198),Xt.setUint32(Zt+1,an),Rn.set($t,Zt+5),5+an}if(mn==="number"){if(!isFinite($t))throw new Error("Number not finite: "+$t);if(Math.floor($t)!==$t)return Xt.setUint8(Zt,203),Xt.setFloat64(Zt+1,$t),9;if($t>=0){if(128>$t)return Xt.setUint8(Zt,$t),1;if(256>$t)return Xt.setUint8(Zt,204),Xt.setUint8(Zt+1,$t),2;if(65536>$t)return Xt.setUint8(Zt,205),Xt.setUint16(Zt+1,$t),3;if(4294967296>$t)return Xt.setUint8(Zt,206),Xt.setUint32(Zt+1,$t),5;throw new Error("Number too big 0x"+$t.toString(16))}if($t>=-32)return Xt.setInt8(Zt,$t),1;if($t>=-128)return Xt.setUint8(Zt,208),Xt.setInt8(Zt+1,$t),2;if($t>=-32768)return Xt.setUint8(Zt,209),Xt.setInt16(Zt+1,$t),3;if($t>=-2147483648)return Xt.setUint8(Zt,210),Xt.setInt32(Zt+1,$t),5;throw new Error("Number too small -0x"+(-$t).toString(16).substr(1))}if($t===null)return Xt.setUint8(Zt,192),1;if(mn==="boolean")return Xt.setUint8(Zt,$t?195:194),1;if(mn==="object"){var an,un=0,Cn=Array.isArray($t);if(Cn)an=$t.length;else{var Gt=Object.keys($t);an=Gt.length}var un;if(16>an?(Xt.setUint8(Zt,an|(Cn?144:128)),un=1):65536>an?(Xt.setUint8(Zt,Cn?220:222),Xt.setUint16(Zt+1,an),un=3):4294967296>an&&(Xt.setUint8(Zt,Cn?221:223),Xt.setUint32(Zt+1,an),un=5),Cn)for(var yn=0;an>yn;yn++)un+=h($t[yn],Xt,Zt+un);else for(var yn=0;an>yn;yn++){var Mn=Gt[yn];un+=h(Mn,Xt,Zt+un),un+=h($t[Mn],Xt,Zt+un)}return un}throw new Error("Unknown type "+mn)}function st($t){var Xt=typeof $t;if(Xt==="string"){var Zt=c($t);if(32>Zt)return 1+Zt;if(256>Zt)return 2+Zt;if(65536>Zt)return 3+Zt;if(4294967296>Zt)return 5+Zt}if($t instanceof Uint8Array){var Zt=$t.byteLength;if(256>Zt)return 2+Zt;if(65536>Zt)return 3+Zt;if(4294967296>Zt)return 5+Zt}if(Xt==="number"){if(Math.floor($t)!==$t)return 9;if($t>=0){if(128>$t)return 1;if(256>$t)return 2;if(65536>$t)return 3;if(4294967296>$t)return 5;throw new Error("Number too big 0x"+$t.toString(16))}if($t>=-32)return 1;if($t>=-128)return 2;if($t>=-32768)return 3;if($t>=-2147483648)return 5;throw new Error("Number too small -0x"+$t.toString(16).substr(1))}if(Xt==="boolean"||$t===null)return 1;if(Xt==="object"){var Zt,mn=0;if(Array.isArray($t)){Zt=$t.length;for(var an=0;Zt>an;an++)mn+=st($t[an])}else{var Rn=Object.keys($t);Zt=Rn.length;for(var an=0;Zt>an;an++){var Cn=Rn[an];mn+=st(Cn)+st($t[Cn])}}if(16>Zt)return 1+mn;if(65536>Zt)return 3+mn;if(4294967296>Zt)return 5+mn;throw new Error("Array or object too long 0x"+Zt.toString(16))}throw new Error("Unknown type "+Xt)}function nt($t){var Xt=new ArrayBuffer(st($t)),Zt=new DataView(Xt);return h($t,Zt,0),new Uint8Array(Xt)}function ot($t,Xt,Zt){return Xt?new $t(Xt.buffer,Xt.byteOffset,Xt.byteLength/(Zt||1)):void 0}function xt($t){return ot(DataView,$t)}function vt($t){return ot(Uint8Array,$t)}function bt($t){return ot(Int8Array,$t)}function St($t){return ot(Int32Array,$t,4)}function Et($t){return ot(Float32Array,$t,4)}function Ct($t,Xt){var Zt=$t.length/2;Xt||(Xt=new Int16Array(Zt));for(var mn=0,an=0;Zt>mn;++mn,an+=2)Xt[mn]=$t[an]<<8^$t[an+1]<<0;return Xt}function ht($t,Xt){var Zt=$t.length;Xt||(Xt=new Uint8Array(2*Zt));for(var mn=xt(Xt),an=0;Zt>an;++an)mn.setInt16(2*an,$t[an]);return vt(Xt)}function d($t,Xt){var Zt=$t.length/4;Xt||(Xt=new Int32Array(Zt));for(var mn=0,an=0;Zt>mn;++mn,an+=4)Xt[mn]=$t[an]<<24^$t[an+1]<<16^$t[an+2]<<8^$t[an+3]<<0;return Xt}function b($t,Xt){var Zt=$t.length;Xt||(Xt=new Uint8Array(4*Zt));for(var mn=xt(Xt),an=0;Zt>an;++an)mn.setInt32(4*an,$t[an]);return vt(Xt)}function ft($t,Xt){var Zt=$t.length;Xt||(Xt=new Float32Array(Zt/4));for(var mn=xt(Xt),an=xt($t),Rn=0,Cn=0,Gt=Zt/4;Gt>Rn;++Rn,Cn+=4)mn.setFloat32(Cn,an.getFloat32(Cn),!0);return Xt}function mt($t,Xt,Zt){var mn=$t.length,an=1/Xt;Zt||(Zt=new Float32Array(mn));for(var Rn=0;mn>Rn;++Rn)Zt[Rn]=$t[Rn]*an;return Zt}function _t($t,Xt,Zt){var mn=$t.length;Zt||(Zt=new Int32Array(mn));for(var an=0;mn>an;++an)Zt[an]=Math.round($t[an]*Xt);return Zt}function tt($t,Xt){var Zt,mn;if(!Xt){var an=0;for(Zt=0,mn=$t.length;mn>Zt;Zt+=2)an+=$t[Zt+1];Xt=new $t.constructor(an)}var Rn=0;for(Zt=0,mn=$t.length;mn>Zt;Zt+=2)for(var Cn=$t[Zt],Gt=$t[Zt+1],un=0;Gt>un;++un)Xt[Rn]=Cn,++Rn;return Xt}function gt($t){if($t.length===0)return new Int32Array;var Xt,Zt,mn=2;for(Xt=1,Zt=$t.length;Zt>Xt;++Xt)$t[Xt-1]!==$t[Xt]&&(mn+=2);var an=new Int32Array(mn),Rn=0,Cn=1;for(Xt=1,Zt=$t.length;Zt>Xt;++Xt)$t[Xt-1]!==$t[Xt]?(an[Rn]=$t[Xt-1],an[Rn+1]=Cn,Cn=1,Rn+=2):++Cn;return an[Rn]=$t[$t.length-1],an[Rn+1]=Cn,an}function wt($t,Xt){var Zt=$t.length;Xt||(Xt=new $t.constructor(Zt)),Zt&&(Xt[0]=$t[0]);for(var mn=1;Zt>mn;++mn)Xt[mn]=$t[mn]+Xt[mn-1];return Xt}function yt($t,Xt){var Zt=$t.length;Xt||(Xt=new $t.constructor(Zt)),Xt[0]=$t[0];for(var mn=1;Zt>mn;++mn)Xt[mn]=$t[mn]-$t[mn-1];return Xt}function Tt($t,Xt){var Zt,mn,an=$t instanceof Int8Array?127:32767,Rn=-an-1,Cn=$t.length;if(!Xt){var Gt=0;for(Zt=0;Cn>Zt;++Zt)$t[Zt]<an&&$t[Zt]>Rn&&++Gt;Xt=new Int32Array(Gt)}for(Zt=0,mn=0;Cn>Zt;){for(var un=0;$t[Zt]===an||$t[Zt]===Rn;)un+=$t[Zt],++Zt;un+=$t[Zt],++Zt,Xt[mn]=un,++mn}return Xt}function Mt($t,Xt){var Zt,mn=32767,an=-mn-1,Rn=$t.length,Cn=0;for(Zt=0;Rn>Zt;++Zt){var Gt=$t[Zt];Gt===0?++Cn:Gt>0?(Cn+=Math.ceil(Gt/mn),Gt%mn===0&&(Cn+=1)):(Cn+=Math.ceil(Gt/an),Gt%an===0&&(Cn+=1))}var un=new Int16Array(Cn),yn=0;for(Zt=0;Rn>Zt;++Zt){var Gt=$t[Zt];if(Gt>=0)for(;Gt>=mn;)un[yn]=mn,++yn,Gt-=mn;else for(;an>=Gt;)un[yn]=an,++yn,Gt-=an;un[yn]=Gt,++yn}return un}function Pt($t,Xt){return wt(tt($t),Xt)}function It($t){return gt(yt($t))}function Lt($t,Xt,Zt){return mt(tt($t,St(Zt)),Xt,Zt)}function zt($t,Xt){return gt(_t($t,Xt))}function jt($t,Xt,Zt){return mt(wt($t,St(Zt)),Xt,Zt)}function Nt($t,Xt,Zt){return yt(_t($t,Xt),Zt)}function kt($t,Xt,Zt){return mt(Tt($t,St(Zt)),Xt,Zt)}function Ot($t,Xt,Zt){var mn=Tt($t,St(Zt));return jt(mn,Xt,Et(mn))}function Bt($t,Xt,Zt){return Mt(Nt($t,Xt))}function Ut(Rn){var Xt=xt(Rn),Zt=Xt.getInt32(0),mn=Xt.getInt32(4),an=Rn.subarray(8,12),Rn=Rn.subarray(12);return[Zt,Rn,mn,an]}function Ft($t,Xt,Zt,mn){var an=new ArrayBuffer(12+mn.byteLength),Rn=new Uint8Array(an),Cn=new DataView(an);return Cn.setInt32(0,$t),Cn.setInt32(4,Xt),Zt&&Rn.set(Zt,8),Rn.set(mn,12),Rn}function Wt($t){var Xt=$t.length,Zt=vt($t);return Ft(2,Xt,void 0,Zt)}function _i($t){var Xt=$t.length,Zt=b($t);return Ft(4,Xt,void 0,Zt)}function Qt($t,Xt){var Zt=$t.length/Xt,mn=b([Xt]),an=vt($t);return Ft(5,Zt,mn,an)}function on($t){var Xt=$t.length,Zt=b(gt($t));return Ft(6,Xt,void 0,Zt)}function nn($t){var Xt=$t.length,Zt=b(It($t));return Ft(8,Xt,void 0,Zt)}function dn($t,Xt){var Zt=$t.length,mn=b([Xt]),an=b(zt($t,Xt));return Ft(9,Zt,mn,an)}function tn($t,Xt){var Zt=$t.length,mn=b([Xt]),an=ht(Bt($t,Xt));return Ft(10,Zt,mn,an)}function rn($t){var Xt={};return kn.forEach(function(Zt){$t[Zt]!==void 0&&(Xt[Zt]=$t[Zt])}),$t.bondAtomList&&(Xt.bondAtomList=_i($t.bondAtomList)),$t.bondOrderList&&(Xt.bondOrderList=Wt($t.bondOrderList)),Xt.xCoordList=tn($t.xCoordList,1e3),Xt.yCoordList=tn($t.yCoordList,1e3),Xt.zCoordList=tn($t.zCoordList,1e3),$t.bFactorList&&(Xt.bFactorList=tn($t.bFactorList,100)),$t.atomIdList&&(Xt.atomIdList=nn($t.atomIdList)),$t.altLocList&&(Xt.altLocList=on($t.altLocList)),$t.occupancyList&&(Xt.occupancyList=dn($t.occupancyList,100)),Xt.groupIdList=nn($t.groupIdList),Xt.groupTypeList=_i($t.groupTypeList),$t.secStructList&&(Xt.secStructList=Wt($t.secStructList)),$t.insCodeList&&(Xt.insCodeList=on($t.insCodeList)),$t.sequenceIndexList&&(Xt.sequenceIndexList=nn($t.sequenceIndexList)),Xt.chainIdList=Qt($t.chainIdList,4),$t.chainNameList&&(Xt.chainNameList=Qt($t.chainNameList,4)),Xt}function En($t){function Xt(un){for(var yn={},Mn=0;un>Mn;Mn++){var ln=Rn();yn[ln]=Rn()}return yn}function Zt(un){var yn=$t.subarray(Cn,Cn+un);return Cn+=un,yn}function mn(un){var yn=$t.subarray(Cn,Cn+un);Cn+=un;var Mn=65535;if(un>Mn){for(var ln=[],wn=0;wn<yn.length;wn+=Mn)ln.push(String.fromCharCode.apply(null,yn.subarray(wn,wn+Mn)));return ln.join("")}return String.fromCharCode.apply(null,yn)}function an(un){for(var yn=new Array(un),Mn=0;un>Mn;Mn++)yn[Mn]=Rn();return yn}function Rn(){var un,yn,Mn=$t[Cn];if(!(128&Mn))return Cn++,Mn;if((240&Mn)===128)return yn=15&Mn,Cn++,Xt(yn);if((240&Mn)===144)return yn=15&Mn,Cn++,an(yn);if((224&Mn)===160)return yn=31&Mn,Cn++,mn(yn);if((224&Mn)===224)return un=Gt.getInt8(Cn),Cn++,un;switch(Mn){case 192:return Cn++,null;case 194:return Cn++,!1;case 195:return Cn++,!0;case 196:return yn=Gt.getUint8(Cn+1),Cn+=2,Zt(yn);case 197:return yn=Gt.getUint16(Cn+1),Cn+=3,Zt(yn);case 198:return yn=Gt.getUint32(Cn+1),Cn+=5,Zt(yn);case 202:return un=Gt.getFloat32(Cn+1),Cn+=5,un;case 203:return un=Gt.getFloat64(Cn+1),Cn+=9,un;case 204:return un=$t[Cn+1],Cn+=2,un;case 205:return un=Gt.getUint16(Cn+1),Cn+=3,un;case 206:return un=Gt.getUint32(Cn+1),Cn+=5,un;case 208:return un=Gt.getInt8(Cn+1),Cn+=2,un;case 209:return un=Gt.getInt16(Cn+1),Cn+=3,un;case 210:return un=Gt.getInt32(Cn+1),Cn+=5,un;case 217:return yn=Gt.getUint8(Cn+1),Cn+=2,mn(yn);case 218:return yn=Gt.getUint16(Cn+1),Cn+=3,mn(yn);case 219:return yn=Gt.getUint32(Cn+1),Cn+=5,mn(yn);case 220:return yn=Gt.getUint16(Cn+1),Cn+=3,an(yn);case 221:return yn=Gt.getUint32(Cn+1),Cn+=5,an(yn);case 222:return yn=Gt.getUint16(Cn+1),Cn+=3,Xt(yn);case 223:return yn=Gt.getUint32(Cn+1),Cn+=5,Xt(yn)}throw new Error("Unknown type 0x"+Mn.toString(16))}var Cn=0,Gt=new DataView($t.buffer);return Rn()}function bn($t,Xt,Zt,mn){switch($t){case 1:return ft(Xt);case 2:return bt(Xt);case 3:return Ct(Xt);case 4:return d(Xt);case 5:return vt(Xt);case 6:return tt(d(Xt),new Uint8Array(Zt));case 7:return tt(d(Xt));case 8:return Pt(d(Xt));case 9:return Lt(d(Xt),d(mn)[0]);case 10:return Ot(Ct(Xt),d(mn)[0]);case 11:return mt(Ct(Xt),d(mn)[0]);case 12:return kt(Ct(Xt),d(mn)[0]);case 13:return kt(bt(Xt),d(mn)[0]);case 14:return Tt(Ct(Xt));case 15:return Tt(bt(Xt))}}function Dn($t,Xt){Xt=Xt||{};var Zt=Xt.ignoreFields,mn={};return zn.forEach(function(an){var Rn=Zt?Zt.indexOf(an)!==-1:!1,Cn=$t[an];Rn||Cn===void 0||(Cn instanceof Uint8Array?mn[an]=bn.apply(null,Ut(Cn)):mn[an]=Cn)}),mn}function hn($t){return String.fromCharCode.apply(null,$t).replace(/\0/g,"")}function en($t,Xt,Zt){Zt=Zt||{};var mn,an,Rn,Cn,Gt,un,yn=Zt.firstModelOnly,Mn=Xt.onModel,ln=Xt.onChain,wn=Xt.onGroup,Ht=Xt.onAtom,Tn=Xt.onBond,Vn=0,Rt=0,gn=0,pn=0,Kt=0,sn=-1,_n=$t.chainNameList,Gn=$t.secStructList,$n=$t.insCodeList,Wn=$t.sequenceIndexList,Qn=$t.atomIdList,_r=$t.bFactorList,ir=$t.altLocList,tr=$t.occupancyList,qn=$t.bondAtomList,yr=$t.bondOrderList;for(mn=0,an=$t.chainsPerModel.length;an>mn&&!(yn&&Vn>0);++mn){var fr=$t.chainsPerModel[Vn];for(Mn&&Mn({chainCount:fr,modelIndex:Vn}),Rn=0;fr>Rn;++Rn){var Lr=$t.groupsPerChain[Rt];if(ln){var Mr=hn($t.chainIdList.subarray(4*Rt,4*Rt+4)),mr=null;_n&&(mr=hn(_n.subarray(4*Rt,4*Rt+4))),ln({groupCount:Lr,chainIndex:Rt,modelIndex:Vn,chainId:Mr,chainName:mr})}for(Cn=0;Lr>Cn;++Cn){var gr=$t.groupList[$t.groupTypeList[gn]],hr=gr.atomNameList.length;if(wn){var Sr=null;Gn&&(Sr=Gn[gn]);var Er=null;$t.insCodeList&&(Er=String.fromCharCode($n[gn]));var jr=null;Wn&&(jr=Wn[gn]),wn({atomCount:hr,groupIndex:gn,chainIndex:Rt,modelIndex:Vn,groupId:$t.groupIdList[gn],groupType:$t.groupTypeList[gn],groupName:gr.groupName,singleLetterCode:gr.singleLetterCode,chemCompType:gr.chemCompType,secStruct:Sr,insCode:Er,sequenceIndex:jr})}for(Gt=0;hr>Gt;++Gt){if(Ht){var ls=null;Qn&&(ls=Qn[pn]);var Fr=null;_r&&(Fr=_r[pn]);var cs=null;ir&&(cs=String.fromCharCode(ir[pn]));var us=null;tr&&(us=tr[pn]),Ht({atomIndex:pn,groupIndex:gn,chainIndex:Rt,modelIndex:Vn,atomId:ls,element:gr.elementList[Gt],atomName:gr.atomNameList[Gt],formalCharge:gr.formalChargeList[Gt],xCoord:$t.xCoordList[pn],yCoord:$t.yCoordList[pn],zCoord:$t.zCoordList[pn],bFactor:Fr,altLoc:cs,occupancy:us})}pn+=1}if(Tn){var ds=gr.bondAtomList;for(Gt=0,un=gr.bondOrderList.length;un>Gt;++Gt)Tn({atomIndex1:pn-hr+ds[2*Gt],atomIndex2:pn-hr+ds[2*Gt+1],bondOrder:gr.bondOrderList[Gt]})}gn+=1}Rt+=1}if(Kt=sn+1,sn=pn-1,Tn&&qn)for(Gt=0,un=qn.length;un>Gt;Gt+=2){var fs=qn[Gt],hs=qn[Gt+1];(fs>=Kt&&sn>=fs||hs>=Kt&&sn>=hs)&&Tn({atomIndex1:fs,atomIndex2:hs,bondOrder:yr?yr[Gt/2]:null})}Vn+=1}}function xn($t){return nt(rn($t))}function Pn($t,Xt){$t instanceof ArrayBuffer&&($t=new Uint8Array($t));var Zt;return Zt=$t instanceof Uint8Array?En($t):$t,Dn(Zt,Xt)}function In($t,Xt,Zt,mn){function an(){try{var Cn=Pn(Rn.response);Zt(Cn)}catch(Gt){mn(Gt)}}var Rn=new XMLHttpRequest;Rn.addEventListener("load",an,!0),Rn.addEventListener("error",mn,!0),Rn.responseType="arraybuffer",Rn.open("GET",Xt+$t.toUpperCase()),Rn.send()}function Nn($t,Xt,Zt){In($t,Ln,Xt,Zt)}function Un($t,Xt,Zt){In($t,Fn,Xt,Zt)}var kn=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],jn=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],zn=kn.concat(jn),On="v1.0.1",cn="//mmtf.rcsb.org/v1.0/",Ln=cn+"full/",Fn=cn+"reduced/";s.encode=xn,s.decode=Pn,s.traverse=en,s.fetch=Nn,s.fetchReduced=Un,s.version=On,s.fetchUrl=Ln,s.fetchReducedUrl=Fn,s.encodeMsgpack=nt,s.encodeMmtf=rn,s.decodeMsgpack=En,s.decodeMmtf=Dn})},"./node_modules/pako/dist/pako.esm.mjs":(e,i,s)=>{s.r(i),s.d(i,{Deflate:()=>Io,Inflate:()=>Fo,constants:()=>Vo,default:()=>tp,deflate:()=>zo,deflateRaw:()=>ko,gzip:()=>jo,inflate:()=>Bo,inflateRaw:()=>No,ungzip:()=>Uo});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const a=4,c=0,h=1,st=2;function nt(At){let Vt=At.length;for(;--Vt>=0;)At[Vt]=0}const ot=0,xt=1,vt=2,bt=3,St=258,Et=29,Ct=256,ht=Ct+1+Et,d=30,b=19,ft=2*ht+1,mt=15,_t=16,tt=7,gt=256,wt=16,yt=17,Tt=18,Mt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Pt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),It=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Lt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zt=512,jt=new Array((ht+2)*2);nt(jt);const Nt=new Array(d*2);nt(Nt);const kt=new Array(zt);nt(kt);const Ot=new Array(St-bt+1);nt(Ot);const Bt=new Array(Et);nt(Bt);const Ut=new Array(d);nt(Ut);function Ft(At,Vt,Dt,Yt,qt){this.static_tree=At,this.extra_bits=Vt,this.extra_base=Dt,this.elems=Yt,this.max_length=qt,this.has_stree=At&&At.length}let Wt,_i,Qt;function on(At,Vt){this.dyn_tree=At,this.max_code=0,this.stat_desc=Vt}const nn=At=>At<256?kt[At]:kt[256+(At>>>7)],dn=(At,Vt)=>{At.pending_buf[At.pending++]=Vt&255,At.pending_buf[At.pending++]=Vt>>>8&255},tn=(At,Vt,Dt)=>{At.bi_valid>_t-Dt?(At.bi_buf|=Vt<<At.bi_valid&65535,dn(At,At.bi_buf),At.bi_buf=Vt>>_t-At.bi_valid,At.bi_valid+=Dt-_t):(At.bi_buf|=Vt<<At.bi_valid&65535,At.bi_valid+=Dt)},rn=(At,Vt,Dt)=>{tn(At,Dt[Vt*2],Dt[Vt*2+1])},En=(At,Vt)=>{let Dt=0;do Dt|=At&1,At>>>=1,Dt<<=1;while(--Vt>0);return Dt>>>1},bn=At=>{At.bi_valid===16?(dn(At,At.bi_buf),At.bi_buf=0,At.bi_valid=0):At.bi_valid>=8&&(At.pending_buf[At.pending++]=At.bi_buf&255,At.bi_buf>>=8,At.bi_valid-=8)},Dn=(At,Vt)=>{const Dt=Vt.dyn_tree,Yt=Vt.max_code,qt=Vt.stat_desc.static_tree,Jt=Vt.stat_desc.has_stree,Sn=Vt.stat_desc.extra_bits,vn=Vt.stat_desc.extra_base,Xn=Vt.stat_desc.max_length;let fn,An,lr,Kn,Bn,Yn,xr=0;for(Kn=0;Kn<=mt;Kn++)At.bl_count[Kn]=0;for(Dt[At.heap[At.heap_max]*2+1]=0,fn=At.heap_max+1;fn<ft;fn++)An=At.heap[fn],Kn=Dt[Dt[An*2+1]*2+1]+1,Kn>Xn&&(Kn=Xn,xr++),Dt[An*2+1]=Kn,!(An>Yt)&&(At.bl_count[Kn]++,Bn=0,An>=vn&&(Bn=Sn[An-vn]),Yn=Dt[An*2],At.opt_len+=Yn*(Kn+Bn),Jt&&(At.static_len+=Yn*(qt[An*2+1]+Bn)));if(xr!==0){do{for(Kn=Xn-1;At.bl_count[Kn]===0;)Kn--;At.bl_count[Kn]--,At.bl_count[Kn+1]+=2,At.bl_count[Xn]--,xr-=2}while(xr>0);for(Kn=Xn;Kn!==0;Kn--)for(An=At.bl_count[Kn];An!==0;)lr=At.heap[--fn],!(lr>Yt)&&(Dt[lr*2+1]!==Kn&&(At.opt_len+=(Kn-Dt[lr*2+1])*Dt[lr*2],Dt[lr*2+1]=Kn),An--)}},hn=(At,Vt,Dt)=>{const Yt=new Array(mt+1);let qt=0,Jt,Sn;for(Jt=1;Jt<=mt;Jt++)qt=qt+Dt[Jt-1]<<1,Yt[Jt]=qt;for(Sn=0;Sn<=Vt;Sn++){let vn=At[Sn*2+1];vn!==0&&(At[Sn*2]=En(Yt[vn]++,vn))}},en=()=>{let At,Vt,Dt,Yt,qt;const Jt=new Array(mt+1);for(Dt=0,Yt=0;Yt<Et-1;Yt++)for(Bt[Yt]=Dt,At=0;At<1<<Mt[Yt];At++)Ot[Dt++]=Yt;for(Ot[Dt-1]=Yt,qt=0,Yt=0;Yt<16;Yt++)for(Ut[Yt]=qt,At=0;At<1<<Pt[Yt];At++)kt[qt++]=Yt;for(qt>>=7;Yt<d;Yt++)for(Ut[Yt]=qt<<7,At=0;At<1<<Pt[Yt]-7;At++)kt[256+qt++]=Yt;for(Vt=0;Vt<=mt;Vt++)Jt[Vt]=0;for(At=0;At<=143;)jt[At*2+1]=8,At++,Jt[8]++;for(;At<=255;)jt[At*2+1]=9,At++,Jt[9]++;for(;At<=279;)jt[At*2+1]=7,At++,Jt[7]++;for(;At<=287;)jt[At*2+1]=8,At++,Jt[8]++;for(hn(jt,ht+1,Jt),At=0;At<d;At++)Nt[At*2+1]=5,Nt[At*2]=En(At,5);Wt=new Ft(jt,Mt,Ct+1,ht,mt),_i=new Ft(Nt,Pt,0,d,mt),Qt=new Ft(new Array(0),It,0,b,tt)},xn=At=>{let Vt;for(Vt=0;Vt<ht;Vt++)At.dyn_ltree[Vt*2]=0;for(Vt=0;Vt<d;Vt++)At.dyn_dtree[Vt*2]=0;for(Vt=0;Vt<b;Vt++)At.bl_tree[Vt*2]=0;At.dyn_ltree[gt*2]=1,At.opt_len=At.static_len=0,At.sym_next=At.matches=0},Pn=At=>{At.bi_valid>8?dn(At,At.bi_buf):At.bi_valid>0&&(At.pending_buf[At.pending++]=At.bi_buf),At.bi_buf=0,At.bi_valid=0},In=(At,Vt,Dt,Yt)=>{const qt=Vt*2,Jt=Dt*2;return At[qt]<At[Jt]||At[qt]===At[Jt]&&Yt[Vt]<=Yt[Dt]},Nn=(At,Vt,Dt)=>{const Yt=At.heap[Dt];let qt=Dt<<1;for(;qt<=At.heap_len&&(qt<At.heap_len&&In(Vt,At.heap[qt+1],At.heap[qt],At.depth)&&qt++,!In(Vt,Yt,At.heap[qt],At.depth));)At.heap[Dt]=At.heap[qt],Dt=qt,qt<<=1;At.heap[Dt]=Yt},Un=(At,Vt,Dt)=>{let Yt,qt,Jt=0,Sn,vn;if(At.sym_next!==0)do Yt=At.pending_buf[At.sym_buf+Jt++]&255,Yt+=(At.pending_buf[At.sym_buf+Jt++]&255)<<8,qt=At.pending_buf[At.sym_buf+Jt++],Yt===0?rn(At,qt,Vt):(Sn=Ot[qt],rn(At,Sn+Ct+1,Vt),vn=Mt[Sn],vn!==0&&(qt-=Bt[Sn],tn(At,qt,vn)),Yt--,Sn=nn(Yt),rn(At,Sn,Dt),vn=Pt[Sn],vn!==0&&(Yt-=Ut[Sn],tn(At,Yt,vn)));while(Jt<At.sym_next);rn(At,gt,Vt)},kn=(At,Vt)=>{const Dt=Vt.dyn_tree,Yt=Vt.stat_desc.static_tree,qt=Vt.stat_desc.has_stree,Jt=Vt.stat_desc.elems;let Sn,vn,Xn=-1,fn;for(At.heap_len=0,At.heap_max=ft,Sn=0;Sn<Jt;Sn++)Dt[Sn*2]!==0?(At.heap[++At.heap_len]=Xn=Sn,At.depth[Sn]=0):Dt[Sn*2+1]=0;for(;At.heap_len<2;)fn=At.heap[++At.heap_len]=Xn<2?++Xn:0,Dt[fn*2]=1,At.depth[fn]=0,At.opt_len--,qt&&(At.static_len-=Yt[fn*2+1]);for(Vt.max_code=Xn,Sn=At.heap_len>>1;Sn>=1;Sn--)Nn(At,Dt,Sn);fn=Jt;do Sn=At.heap[1],At.heap[1]=At.heap[At.heap_len--],Nn(At,Dt,1),vn=At.heap[1],At.heap[--At.heap_max]=Sn,At.heap[--At.heap_max]=vn,Dt[fn*2]=Dt[Sn*2]+Dt[vn*2],At.depth[fn]=(At.depth[Sn]>=At.depth[vn]?At.depth[Sn]:At.depth[vn])+1,Dt[Sn*2+1]=Dt[vn*2+1]=fn,At.heap[1]=fn++,Nn(At,Dt,1);while(At.heap_len>=2);At.heap[--At.heap_max]=At.heap[1],Dn(At,Vt),hn(Dt,Xn,At.bl_count)},jn=(At,Vt,Dt)=>{let Yt,qt=-1,Jt,Sn=Vt[0*2+1],vn=0,Xn=7,fn=4;for(Sn===0&&(Xn=138,fn=3),Vt[(Dt+1)*2+1]=65535,Yt=0;Yt<=Dt;Yt++)Jt=Sn,Sn=Vt[(Yt+1)*2+1],!(++vn<Xn&&Jt===Sn)&&(vn<fn?At.bl_tree[Jt*2]+=vn:Jt!==0?(Jt!==qt&&At.bl_tree[Jt*2]++,At.bl_tree[wt*2]++):vn<=10?At.bl_tree[yt*2]++:At.bl_tree[Tt*2]++,vn=0,qt=Jt,Sn===0?(Xn=138,fn=3):Jt===Sn?(Xn=6,fn=3):(Xn=7,fn=4))},zn=(At,Vt,Dt)=>{let Yt,qt=-1,Jt,Sn=Vt[0*2+1],vn=0,Xn=7,fn=4;for(Sn===0&&(Xn=138,fn=3),Yt=0;Yt<=Dt;Yt++)if(Jt=Sn,Sn=Vt[(Yt+1)*2+1],!(++vn<Xn&&Jt===Sn)){if(vn<fn)do rn(At,Jt,At.bl_tree);while(--vn!==0);else Jt!==0?(Jt!==qt&&(rn(At,Jt,At.bl_tree),vn--),rn(At,wt,At.bl_tree),tn(At,vn-3,2)):vn<=10?(rn(At,yt,At.bl_tree),tn(At,vn-3,3)):(rn(At,Tt,At.bl_tree),tn(At,vn-11,7));vn=0,qt=Jt,Sn===0?(Xn=138,fn=3):Jt===Sn?(Xn=6,fn=3):(Xn=7,fn=4)}},On=At=>{let Vt;for(jn(At,At.dyn_ltree,At.l_desc.max_code),jn(At,At.dyn_dtree,At.d_desc.max_code),kn(At,At.bl_desc),Vt=b-1;Vt>=3&&At.bl_tree[Lt[Vt]*2+1]===0;Vt--);return At.opt_len+=3*(Vt+1)+5+5+4,Vt},cn=(At,Vt,Dt,Yt)=>{let qt;for(tn(At,Vt-257,5),tn(At,Dt-1,5),tn(At,Yt-4,4),qt=0;qt<Yt;qt++)tn(At,At.bl_tree[Lt[qt]*2+1],3);zn(At,At.dyn_ltree,Vt-1),zn(At,At.dyn_dtree,Dt-1)},Ln=At=>{let Vt=4093624447,Dt;for(Dt=0;Dt<=31;Dt++,Vt>>>=1)if(Vt&1&&At.dyn_ltree[Dt*2]!==0)return c;if(At.dyn_ltree[9*2]!==0||At.dyn_ltree[10*2]!==0||At.dyn_ltree[13*2]!==0)return h;for(Dt=32;Dt<Ct;Dt++)if(At.dyn_ltree[Dt*2]!==0)return h;return c};let Fn=!1;const $t=At=>{Fn||(en(),Fn=!0),At.l_desc=new on(At.dyn_ltree,Wt),At.d_desc=new on(At.dyn_dtree,_i),At.bl_desc=new on(At.bl_tree,Qt),At.bi_buf=0,At.bi_valid=0,xn(At)},Xt=(At,Vt,Dt,Yt)=>{tn(At,(ot<<1)+(Yt?1:0),3),Pn(At),dn(At,Dt),dn(At,~Dt),Dt&&At.pending_buf.set(At.window.subarray(Vt,Vt+Dt),At.pending),At.pending+=Dt},Zt=At=>{tn(At,xt<<1,3),rn(At,gt,jt),bn(At)},mn=(At,Vt,Dt,Yt)=>{let qt,Jt,Sn=0;At.level>0?(At.strm.data_type===st&&(At.strm.data_type=Ln(At)),kn(At,At.l_desc),kn(At,At.d_desc),Sn=On(At),qt=At.opt_len+3+7>>>3,Jt=At.static_len+3+7>>>3,Jt<=qt&&(qt=Jt)):qt=Jt=Dt+5,Dt+4<=qt&&Vt!==-1?Xt(At,Vt,Dt,Yt):At.strategy===a||Jt===qt?(tn(At,(xt<<1)+(Yt?1:0),3),Un(At,jt,Nt)):(tn(At,(vt<<1)+(Yt?1:0),3),cn(At,At.l_desc.max_code+1,At.d_desc.max_code+1,Sn+1),Un(At,At.dyn_ltree,At.dyn_dtree)),xn(At),Yt&&Pn(At)},an=(At,Vt,Dt)=>(At.pending_buf[At.sym_buf+At.sym_next++]=Vt,At.pending_buf[At.sym_buf+At.sym_next++]=Vt>>8,At.pending_buf[At.sym_buf+At.sym_next++]=Dt,Vt===0?At.dyn_ltree[Dt*2]++:(At.matches++,Vt--,At.dyn_ltree[(Ot[Dt]+Ct+1)*2]++,At.dyn_dtree[nn(Vt)*2]++),At.sym_next===At.sym_end);var Rn=$t,Cn=Xt,Gt=mn,un=an,yn=Zt,Mn={_tr_init:Rn,_tr_stored_block:Cn,_tr_flush_block:Gt,_tr_tally:un,_tr_align:yn},wn=(At,Vt,Dt,Yt)=>{let qt=At&65535|0,Jt=At>>>16&65535|0,Sn=0;for(;Dt!==0;){Sn=Dt>2e3?2e3:Dt,Dt-=Sn;do qt=qt+Vt[Yt++]|0,Jt=Jt+qt|0;while(--Sn);qt%=65521,Jt%=65521}return qt|Jt<<16|0};const Ht=()=>{let At,Vt=[];for(var Dt=0;Dt<256;Dt++){At=Dt;for(var Yt=0;Yt<8;Yt++)At=At&1?3988292384^At>>>1:At>>>1;Vt[Dt]=At}return Vt},Tn=new Uint32Array(Ht());var Rt=(At,Vt,Dt,Yt)=>{const qt=Tn,Jt=Yt+Dt;At^=-1;for(let Sn=Yt;Sn<Jt;Sn++)At=At>>>8^qt[(At^Vt[Sn])&255];return At^-1},gn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},pn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Kt,_tr_stored_block:sn,_tr_flush_block:_n,_tr_tally:Gn,_tr_align:$n}=Mn,{Z_NO_FLUSH:Wn,Z_PARTIAL_FLUSH:Qn,Z_FULL_FLUSH:_r,Z_FINISH:ir,Z_BLOCK:tr,Z_OK:qn,Z_STREAM_END:yr,Z_STREAM_ERROR:fr,Z_DATA_ERROR:Lr,Z_BUF_ERROR:Mr,Z_DEFAULT_COMPRESSION:mr,Z_FILTERED:gr,Z_HUFFMAN_ONLY:hr,Z_RLE:Sr,Z_FIXED:Er,Z_DEFAULT_STRATEGY:jr,Z_UNKNOWN:ls,Z_DEFLATED:Fr}=pn,cs=9,us=15,ds=8,Ss=256+1+29,$o=30,Go=19,Ho=2*Ss+1,Ko=15,rr=3,Ir=258,Dr=Ir+rr+1,Xo=32,Gr=42,As=57,Cs=69,Ts=73,Ms=91,Ds=103,Br=113,Qr=666,wr=1,Hr=2,Nr=3,Kr=4,Yo=3,Ur=(At,Vt)=>(At.msg=gn[Vt],Vt),Vs=At=>At*2-(At>4?9:0),zr=At=>{let Vt=At.length;for(;--Vt>=0;)At[Vt]=0},Zo=At=>{let Vt,Dt,Yt,qt=At.w_size;Vt=At.hash_size,Yt=Vt;do Dt=At.head[--Yt],At.head[Yt]=Dt>=qt?Dt-qt:0;while(--Vt);Vt=qt,Yt=Vt;do Dt=At.prev[--Yt],At.prev[Yt]=Dt>=qt?Dt-qt:0;while(--Vt)};let kr=(At,Vt,Dt)=>(Vt<<At.hash_shift^Dt)&At.hash_mask;const Ar=At=>{const Vt=At.state;let Dt=Vt.pending;Dt>At.avail_out&&(Dt=At.avail_out),Dt!==0&&(At.output.set(Vt.pending_buf.subarray(Vt.pending_out,Vt.pending_out+Dt),At.next_out),At.next_out+=Dt,Vt.pending_out+=Dt,At.total_out+=Dt,At.avail_out-=Dt,Vt.pending-=Dt,Vt.pending===0&&(Vt.pending_out=0))},Cr=(At,Vt)=>{_n(At,At.block_start>=0?At.block_start:-1,At.strstart-At.block_start,Vt),At.block_start=At.strstart,Ar(At.strm)},cr=(At,Vt)=>{At.pending_buf[At.pending++]=Vt},Jr=(At,Vt)=>{At.pending_buf[At.pending++]=Vt>>>8&255,At.pending_buf[At.pending++]=Vt&255},Ps=(At,Vt,Dt,Yt)=>{let qt=At.avail_in;return qt>Yt&&(qt=Yt),qt===0?0:(At.avail_in-=qt,Vt.set(At.input.subarray(At.next_in,At.next_in+qt),Dt),At.state.wrap===1?At.adler=wn(At.adler,Vt,qt,Dt):At.state.wrap===2&&(At.adler=Rt(At.adler,Vt,qt,Dt)),At.next_in+=qt,At.total_in+=qt,qt)},Ws=(At,Vt)=>{let Dt=At.max_chain_length,Yt=At.strstart,qt,Jt,Sn=At.prev_length,vn=At.nice_match;const Xn=At.strstart>At.w_size-Dr?At.strstart-(At.w_size-Dr):0,fn=At.window,An=At.w_mask,lr=At.prev,Kn=At.strstart+Ir;let Bn=fn[Yt+Sn-1],Yn=fn[Yt+Sn];At.prev_length>=At.good_match&&(Dt>>=2),vn>At.lookahead&&(vn=At.lookahead);do if(qt=Vt,!(fn[qt+Sn]!==Yn||fn[qt+Sn-1]!==Bn||fn[qt]!==fn[Yt]||fn[++qt]!==fn[Yt+1])){Yt+=2,qt++;do;while(fn[++Yt]===fn[++qt]&&fn[++Yt]===fn[++qt]&&fn[++Yt]===fn[++qt]&&fn[++Yt]===fn[++qt]&&fn[++Yt]===fn[++qt]&&fn[++Yt]===fn[++qt]&&fn[++Yt]===fn[++qt]&&fn[++Yt]===fn[++qt]&&Yt<Kn);if(Jt=Ir-(Kn-Yt),Yt=Kn-Ir,Jt>Sn){if(At.match_start=Vt,Sn=Jt,Jt>=vn)break;Bn=fn[Yt+Sn-1],Yn=fn[Yt+Sn]}}while((Vt=lr[Vt&An])>Xn&&--Dt!==0);return Sn<=At.lookahead?Sn:At.lookahead},Xr=At=>{const Vt=At.w_size;let Dt,Yt,qt;do{if(Yt=At.window_size-At.lookahead-At.strstart,At.strstart>=Vt+(Vt-Dr)&&(At.window.set(At.window.subarray(Vt,Vt+Vt-Yt),0),At.match_start-=Vt,At.strstart-=Vt,At.block_start-=Vt,At.insert>At.strstart&&(At.insert=At.strstart),Zo(At),Yt+=Vt),At.strm.avail_in===0)break;if(Dt=Ps(At.strm,At.window,At.strstart+At.lookahead,Yt),At.lookahead+=Dt,At.lookahead+At.insert>=rr)for(qt=At.strstart-At.insert,At.ins_h=At.window[qt],At.ins_h=kr(At,At.ins_h,At.window[qt+1]);At.insert&&(At.ins_h=kr(At,At.ins_h,At.window[qt+rr-1]),At.prev[qt&At.w_mask]=At.head[At.ins_h],At.head[At.ins_h]=qt,qt++,At.insert--,!(At.lookahead+At.insert<rr)););}while(At.lookahead<Dr&&At.strm.avail_in!==0)},$s=(At,Vt)=>{let Dt=At.pending_buf_size-5>At.w_size?At.w_size:At.pending_buf_size-5,Yt,qt,Jt,Sn=0,vn=At.strm.avail_in;do{if(Yt=65535,Jt=At.bi_valid+42>>3,At.strm.avail_out<Jt||(Jt=At.strm.avail_out-Jt,qt=At.strstart-At.block_start,Yt>qt+At.strm.avail_in&&(Yt=qt+At.strm.avail_in),Yt>Jt&&(Yt=Jt),Yt<Dt&&(Yt===0&&Vt!==ir||Vt===Wn||Yt!==qt+At.strm.avail_in)))break;Sn=Vt===ir&&Yt===qt+At.strm.avail_in?1:0,sn(At,0,0,Sn),At.pending_buf[At.pending-4]=Yt,At.pending_buf[At.pending-3]=Yt>>8,At.pending_buf[At.pending-2]=~Yt,At.pending_buf[At.pending-1]=~Yt>>8,Ar(At.strm),qt&&(qt>Yt&&(qt=Yt),At.strm.output.set(At.window.subarray(At.block_start,At.block_start+qt),At.strm.next_out),At.strm.next_out+=qt,At.strm.avail_out-=qt,At.strm.total_out+=qt,At.block_start+=qt,Yt-=qt),Yt&&(Ps(At.strm,At.strm.output,At.strm.next_out,Yt),At.strm.next_out+=Yt,At.strm.avail_out-=Yt,At.strm.total_out+=Yt)}while(Sn===0);return vn-=At.strm.avail_in,vn&&(vn>=At.w_size?(At.matches=2,At.window.set(At.strm.input.subarray(At.strm.next_in-At.w_size,At.strm.next_in),0),At.strstart=At.w_size,At.insert=At.strstart):(At.window_size-At.strstart<=vn&&(At.strstart-=At.w_size,At.window.set(At.window.subarray(At.w_size,At.w_size+At.strstart),0),At.matches<2&&At.matches++,At.insert>At.strstart&&(At.insert=At.strstart)),At.window.set(At.strm.input.subarray(At.strm.next_in-vn,At.strm.next_in),At.strstart),At.strstart+=vn,At.insert+=vn>At.w_size-At.insert?At.w_size-At.insert:vn),At.block_start=At.strstart),At.high_water<At.strstart&&(At.high_water=At.strstart),Sn?Kr:Vt!==Wn&&Vt!==ir&&At.strm.avail_in===0&&At.strstart===At.block_start?Hr:(Jt=At.window_size-At.strstart,At.strm.avail_in>Jt&&At.block_start>=At.w_size&&(At.block_start-=At.w_size,At.strstart-=At.w_size,At.window.set(At.window.subarray(At.w_size,At.w_size+At.strstart),0),At.matches<2&&At.matches++,Jt+=At.w_size,At.insert>At.strstart&&(At.insert=At.strstart)),Jt>At.strm.avail_in&&(Jt=At.strm.avail_in),Jt&&(Ps(At.strm,At.window,At.strstart,Jt),At.strstart+=Jt,At.insert+=Jt>At.w_size-At.insert?At.w_size-At.insert:Jt),At.high_water<At.strstart&&(At.high_water=At.strstart),Jt=At.bi_valid+42>>3,Jt=At.pending_buf_size-Jt>65535?65535:At.pending_buf_size-Jt,Dt=Jt>At.w_size?At.w_size:Jt,qt=At.strstart-At.block_start,(qt>=Dt||(qt||Vt===ir)&&Vt!==Wn&&At.strm.avail_in===0&&qt<=Jt)&&(Yt=qt>Jt?Jt:qt,Sn=Vt===ir&&At.strm.avail_in===0&&Yt===qt?1:0,sn(At,At.block_start,Yt,Sn),At.block_start+=Yt,Ar(At.strm)),Sn?Nr:wr)},Ls=(At,Vt)=>{let Dt,Yt;for(;;){if(At.lookahead<Dr){if(Xr(At),At.lookahead<Dr&&Vt===Wn)return wr;if(At.lookahead===0)break}if(Dt=0,At.lookahead>=rr&&(At.ins_h=kr(At,At.ins_h,At.window[At.strstart+rr-1]),Dt=At.prev[At.strstart&At.w_mask]=At.head[At.ins_h],At.head[At.ins_h]=At.strstart),Dt!==0&&At.strstart-Dt<=At.w_size-Dr&&(At.match_length=Ws(At,Dt)),At.match_length>=rr)if(Yt=Gn(At,At.strstart-At.match_start,At.match_length-rr),At.lookahead-=At.match_length,At.match_length<=At.max_lazy_match&&At.lookahead>=rr){At.match_length--;do At.strstart++,At.ins_h=kr(At,At.ins_h,At.window[At.strstart+rr-1]),Dt=At.prev[At.strstart&At.w_mask]=At.head[At.ins_h],At.head[At.ins_h]=At.strstart;while(--At.match_length!==0);At.strstart++}else At.strstart+=At.match_length,At.match_length=0,At.ins_h=At.window[At.strstart],At.ins_h=kr(At,At.ins_h,At.window[At.strstart+1]);else Yt=Gn(At,0,At.window[At.strstart]),At.lookahead--,At.strstart++;if(Yt&&(Cr(At,!1),At.strm.avail_out===0))return wr}return At.insert=At.strstart<rr-1?At.strstart:rr-1,Vt===ir?(Cr(At,!0),At.strm.avail_out===0?Nr:Kr):At.sym_next&&(Cr(At,!1),At.strm.avail_out===0)?wr:Hr},Yr=(At,Vt)=>{let Dt,Yt,qt;for(;;){if(At.lookahead<Dr){if(Xr(At),At.lookahead<Dr&&Vt===Wn)return wr;if(At.lookahead===0)break}if(Dt=0,At.lookahead>=rr&&(At.ins_h=kr(At,At.ins_h,At.window[At.strstart+rr-1]),Dt=At.prev[At.strstart&At.w_mask]=At.head[At.ins_h],At.head[At.ins_h]=At.strstart),At.prev_length=At.match_length,At.prev_match=At.match_start,At.match_length=rr-1,Dt!==0&&At.prev_length<At.max_lazy_match&&At.strstart-Dt<=At.w_size-Dr&&(At.match_length=Ws(At,Dt),At.match_length<=5&&(At.strategy===gr||At.match_length===rr&&At.strstart-At.match_start>4096)&&(At.match_length=rr-1)),At.prev_length>=rr&&At.match_length<=At.prev_length){qt=At.strstart+At.lookahead-rr,Yt=Gn(At,At.strstart-1-At.prev_match,At.prev_length-rr),At.lookahead-=At.prev_length-1,At.prev_length-=2;do++At.strstart<=qt&&(At.ins_h=kr(At,At.ins_h,At.window[At.strstart+rr-1]),Dt=At.prev[At.strstart&At.w_mask]=At.head[At.ins_h],At.head[At.ins_h]=At.strstart);while(--At.prev_length!==0);if(At.match_available=0,At.match_length=rr-1,At.strstart++,Yt&&(Cr(At,!1),At.strm.avail_out===0))return wr}else if(At.match_available){if(Yt=Gn(At,0,At.window[At.strstart-1]),Yt&&Cr(At,!1),At.strstart++,At.lookahead--,At.strm.avail_out===0)return wr}else At.match_available=1,At.strstart++,At.lookahead--}return At.match_available&&(Yt=Gn(At,0,At.window[At.strstart-1]),At.match_available=0),At.insert=At.strstart<rr-1?At.strstart:rr-1,Vt===ir?(Cr(At,!0),At.strm.avail_out===0?Nr:Kr):At.sym_next&&(Cr(At,!1),At.strm.avail_out===0)?wr:Hr},Qo=(At,Vt)=>{let Dt,Yt,qt,Jt;const Sn=At.window;for(;;){if(At.lookahead<=Ir){if(Xr(At),At.lookahead<=Ir&&Vt===Wn)return wr;if(At.lookahead===0)break}if(At.match_length=0,At.lookahead>=rr&&At.strstart>0&&(qt=At.strstart-1,Yt=Sn[qt],Yt===Sn[++qt]&&Yt===Sn[++qt]&&Yt===Sn[++qt])){Jt=At.strstart+Ir;do;while(Yt===Sn[++qt]&&Yt===Sn[++qt]&&Yt===Sn[++qt]&&Yt===Sn[++qt]&&Yt===Sn[++qt]&&Yt===Sn[++qt]&&Yt===Sn[++qt]&&Yt===Sn[++qt]&&qt<Jt);At.match_length=Ir-(Jt-qt),At.match_length>At.lookahead&&(At.match_length=At.lookahead)}if(At.match_length>=rr?(Dt=Gn(At,1,At.match_length-rr),At.lookahead-=At.match_length,At.strstart+=At.match_length,At.match_length=0):(Dt=Gn(At,0,At.window[At.strstart]),At.lookahead--,At.strstart++),Dt&&(Cr(At,!1),At.strm.avail_out===0))return wr}return At.insert=0,Vt===ir?(Cr(At,!0),At.strm.avail_out===0?Nr:Kr):At.sym_next&&(Cr(At,!1),At.strm.avail_out===0)?wr:Hr},Jo=(At,Vt)=>{let Dt;for(;;){if(At.lookahead===0&&(Xr(At),At.lookahead===0)){if(Vt===Wn)return wr;break}if(At.match_length=0,Dt=Gn(At,0,At.window[At.strstart]),At.lookahead--,At.strstart++,Dt&&(Cr(At,!1),At.strm.avail_out===0))return wr}return At.insert=0,Vt===ir?(Cr(At,!0),At.strm.avail_out===0?Nr:Kr):At.sym_next&&(Cr(At,!1),At.strm.avail_out===0)?wr:Hr};function Pr(At,Vt,Dt,Yt,qt){this.good_length=At,this.max_lazy=Vt,this.nice_length=Dt,this.max_chain=Yt,this.func=qt}const qr=[new Pr(0,0,0,0,$s),new Pr(4,4,8,4,Ls),new Pr(4,5,16,8,Ls),new Pr(4,6,32,32,Ls),new Pr(4,4,16,16,Yr),new Pr(8,16,32,32,Yr),new Pr(8,16,128,128,Yr),new Pr(8,32,128,256,Yr),new Pr(32,128,258,1024,Yr),new Pr(32,258,258,4096,Yr)],qo=At=>{At.window_size=2*At.w_size,zr(At.head),At.max_lazy_match=qr[At.level].max_lazy,At.good_match=qr[At.level].good_length,At.nice_match=qr[At.level].nice_length,At.max_chain_length=qr[At.level].max_chain,At.strstart=0,At.block_start=0,At.lookahead=0,At.insert=0,At.match_length=At.prev_length=rr-1,At.match_available=0,At.ins_h=0};function xl(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Fr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ho*2),this.dyn_dtree=new Uint16Array((2*$o+1)*2),this.bl_tree=new Uint16Array((2*Go+1)*2),zr(this.dyn_ltree),zr(this.dyn_dtree),zr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ko+1),this.heap=new Uint16Array(2*Ss+1),zr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ss+1),zr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const es=At=>{if(!At)return 1;const Vt=At.state;return!Vt||Vt.strm!==At||Vt.status!==Gr&&Vt.status!==As&&Vt.status!==Cs&&Vt.status!==Ts&&Vt.status!==Ms&&Vt.status!==Ds&&Vt.status!==Br&&Vt.status!==Qr?1:0},Gs=At=>{if(es(At))return Ur(At,fr);At.total_in=At.total_out=0,At.data_type=ls;const Vt=At.state;return Vt.pending=0,Vt.pending_out=0,Vt.wrap<0&&(Vt.wrap=-Vt.wrap),Vt.status=Vt.wrap===2?As:Vt.wrap?Gr:Br,At.adler=Vt.wrap===2?0:1,Vt.last_flush=-2,Kt(Vt),qn},Hs=At=>{const Vt=Gs(At);return Vt===qn&&qo(At.state),Vt},yl=(At,Vt)=>es(At)||At.state.wrap!==2?fr:(At.state.gzhead=Vt,qn),Ks=(At,Vt,Dt,Yt,qt,Jt)=>{if(!At)return fr;let Sn=1;if(Vt===mr&&(Vt=6),Yt<0?(Sn=0,Yt=-Yt):Yt>15&&(Sn=2,Yt-=16),qt<1||qt>cs||Dt!==Fr||Yt<8||Yt>15||Vt<0||Vt>9||Jt<0||Jt>Er||Yt===8&&Sn!==1)return Ur(At,fr);Yt===8&&(Yt=9);const vn=new xl;return At.state=vn,vn.strm=At,vn.status=Gr,vn.wrap=Sn,vn.gzhead=null,vn.w_bits=Yt,vn.w_size=1<<vn.w_bits,vn.w_mask=vn.w_size-1,vn.hash_bits=qt+7,vn.hash_size=1<<vn.hash_bits,vn.hash_mask=vn.hash_size-1,vn.hash_shift=~~((vn.hash_bits+rr-1)/rr),vn.window=new Uint8Array(vn.w_size*2),vn.head=new Uint16Array(vn.hash_size),vn.prev=new Uint16Array(vn.w_size),vn.lit_bufsize=1<<qt+6,vn.pending_buf_size=vn.lit_bufsize*4,vn.pending_buf=new Uint8Array(vn.pending_buf_size),vn.sym_buf=vn.lit_bufsize,vn.sym_end=(vn.lit_bufsize-1)*3,vn.level=Vt,vn.strategy=Jt,vn.method=Dt,Hs(At)},_l=(At,Vt)=>Ks(At,Vt,Fr,us,ds,jr),El=(At,Vt)=>{if(es(At)||Vt>tr||Vt<0)return At?Ur(At,fr):fr;const Dt=At.state;if(!At.output||At.avail_in!==0&&!At.input||Dt.status===Qr&&Vt!==ir)return Ur(At,At.avail_out===0?Mr:fr);const Yt=Dt.last_flush;if(Dt.last_flush=Vt,Dt.pending!==0){if(Ar(At),At.avail_out===0)return Dt.last_flush=-1,qn}else if(At.avail_in===0&&Vs(Vt)<=Vs(Yt)&&Vt!==ir)return Ur(At,Mr);if(Dt.status===Qr&&At.avail_in!==0)return Ur(At,Mr);if(Dt.status===Gr&&Dt.wrap===0&&(Dt.status=Br),Dt.status===Gr){let qt=Fr+(Dt.w_bits-8<<4)<<8,Jt=-1;if(Dt.strategy>=hr||Dt.level<2?Jt=0:Dt.level<6?Jt=1:Dt.level===6?Jt=2:Jt=3,qt|=Jt<<6,Dt.strstart!==0&&(qt|=Xo),qt+=31-qt%31,Jr(Dt,qt),Dt.strstart!==0&&(Jr(Dt,At.adler>>>16),Jr(Dt,At.adler&65535)),At.adler=1,Dt.status=Br,Ar(At),Dt.pending!==0)return Dt.last_flush=-1,qn}if(Dt.status===As){if(At.adler=0,cr(Dt,31),cr(Dt,139),cr(Dt,8),Dt.gzhead)cr(Dt,(Dt.gzhead.text?1:0)+(Dt.gzhead.hcrc?2:0)+(Dt.gzhead.extra?4:0)+(Dt.gzhead.name?8:0)+(Dt.gzhead.comment?16:0)),cr(Dt,Dt.gzhead.time&255),cr(Dt,Dt.gzhead.time>>8&255),cr(Dt,Dt.gzhead.time>>16&255),cr(Dt,Dt.gzhead.time>>24&255),cr(Dt,Dt.level===9?2:Dt.strategy>=hr||Dt.level<2?4:0),cr(Dt,Dt.gzhead.os&255),Dt.gzhead.extra&&Dt.gzhead.extra.length&&(cr(Dt,Dt.gzhead.extra.length&255),cr(Dt,Dt.gzhead.extra.length>>8&255)),Dt.gzhead.hcrc&&(At.adler=Rt(At.adler,Dt.pending_buf,Dt.pending,0)),Dt.gzindex=0,Dt.status=Cs;else if(cr(Dt,0),cr(Dt,0),cr(Dt,0),cr(Dt,0),cr(Dt,0),cr(Dt,Dt.level===9?2:Dt.strategy>=hr||Dt.level<2?4:0),cr(Dt,Yo),Dt.status=Br,Ar(At),Dt.pending!==0)return Dt.last_flush=-1,qn}if(Dt.status===Cs){if(Dt.gzhead.extra){let qt=Dt.pending,Jt=(Dt.gzhead.extra.length&65535)-Dt.gzindex;for(;Dt.pending+Jt>Dt.pending_buf_size;){let vn=Dt.pending_buf_size-Dt.pending;if(Dt.pending_buf.set(Dt.gzhead.extra.subarray(Dt.gzindex,Dt.gzindex+vn),Dt.pending),Dt.pending=Dt.pending_buf_size,Dt.gzhead.hcrc&&Dt.pending>qt&&(At.adler=Rt(At.adler,Dt.pending_buf,Dt.pending-qt,qt)),Dt.gzindex+=vn,Ar(At),Dt.pending!==0)return Dt.last_flush=-1,qn;qt=0,Jt-=vn}let Sn=new Uint8Array(Dt.gzhead.extra);Dt.pending_buf.set(Sn.subarray(Dt.gzindex,Dt.gzindex+Jt),Dt.pending),Dt.pending+=Jt,Dt.gzhead.hcrc&&Dt.pending>qt&&(At.adler=Rt(At.adler,Dt.pending_buf,Dt.pending-qt,qt)),Dt.gzindex=0}Dt.status=Ts}if(Dt.status===Ts){if(Dt.gzhead.name){let qt=Dt.pending,Jt;do{if(Dt.pending===Dt.pending_buf_size){if(Dt.gzhead.hcrc&&Dt.pending>qt&&(At.adler=Rt(At.adler,Dt.pending_buf,Dt.pending-qt,qt)),Ar(At),Dt.pending!==0)return Dt.last_flush=-1,qn;qt=0}Dt.gzindex<Dt.gzhead.name.length?Jt=Dt.gzhead.name.charCodeAt(Dt.gzindex++)&255:Jt=0,cr(Dt,Jt)}while(Jt!==0);Dt.gzhead.hcrc&&Dt.pending>qt&&(At.adler=Rt(At.adler,Dt.pending_buf,Dt.pending-qt,qt)),Dt.gzindex=0}Dt.status=Ms}if(Dt.status===Ms){if(Dt.gzhead.comment){let qt=Dt.pending,Jt;do{if(Dt.pending===Dt.pending_buf_size){if(Dt.gzhead.hcrc&&Dt.pending>qt&&(At.adler=Rt(At.adler,Dt.pending_buf,Dt.pending-qt,qt)),Ar(At),Dt.pending!==0)return Dt.last_flush=-1,qn;qt=0}Dt.gzindex<Dt.gzhead.comment.length?Jt=Dt.gzhead.comment.charCodeAt(Dt.gzindex++)&255:Jt=0,cr(Dt,Jt)}while(Jt!==0);Dt.gzhead.hcrc&&Dt.pending>qt&&(At.adler=Rt(At.adler,Dt.pending_buf,Dt.pending-qt,qt))}Dt.status=Ds}if(Dt.status===Ds){if(Dt.gzhead.hcrc){if(Dt.pending+2>Dt.pending_buf_size&&(Ar(At),Dt.pending!==0))return Dt.last_flush=-1,qn;cr(Dt,At.adler&255),cr(Dt,At.adler>>8&255),At.adler=0}if(Dt.status=Br,Ar(At),Dt.pending!==0)return Dt.last_flush=-1,qn}if(At.avail_in!==0||Dt.lookahead!==0||Vt!==Wn&&Dt.status!==Qr){let qt=Dt.level===0?$s(Dt,Vt):Dt.strategy===hr?Jo(Dt,Vt):Dt.strategy===Sr?Qo(Dt,Vt):qr[Dt.level].func(Dt,Vt);if((qt===Nr||qt===Kr)&&(Dt.status=Qr),qt===wr||qt===Nr)return At.avail_out===0&&(Dt.last_flush=-1),qn;if(qt===Hr&&(Vt===Qn?$n(Dt):Vt!==tr&&(sn(Dt,0,0,!1),Vt===_r&&(zr(Dt.head),Dt.lookahead===0&&(Dt.strstart=0,Dt.block_start=0,Dt.insert=0))),Ar(At),At.avail_out===0))return Dt.last_flush=-1,qn}return Vt!==ir?qn:Dt.wrap<=0?yr:(Dt.wrap===2?(cr(Dt,At.adler&255),cr(Dt,At.adler>>8&255),cr(Dt,At.adler>>16&255),cr(Dt,At.adler>>24&255),cr(Dt,At.total_in&255),cr(Dt,At.total_in>>8&255),cr(Dt,At.total_in>>16&255),cr(Dt,At.total_in>>24&255)):(Jr(Dt,At.adler>>>16),Jr(Dt,At.adler&65535)),Ar(At),Dt.wrap>0&&(Dt.wrap=-Dt.wrap),Dt.pending!==0?qn:yr)},wl=At=>{if(es(At))return fr;const Vt=At.state.status;return At.state=null,Vt===Br?Ur(At,Lr):qn},Sl=(At,Vt)=>{let Dt=Vt.length;if(es(At))return fr;const Yt=At.state,qt=Yt.wrap;if(qt===2||qt===1&&Yt.status!==Gr||Yt.lookahead)return fr;if(qt===1&&(At.adler=wn(At.adler,Vt,Dt,0)),Yt.wrap=0,Dt>=Yt.w_size){qt===0&&(zr(Yt.head),Yt.strstart=0,Yt.block_start=0,Yt.insert=0);let Xn=new Uint8Array(Yt.w_size);Xn.set(Vt.subarray(Dt-Yt.w_size,Dt),0),Vt=Xn,Dt=Yt.w_size}const Jt=At.avail_in,Sn=At.next_in,vn=At.input;for(At.avail_in=Dt,At.next_in=0,At.input=Vt,Xr(Yt);Yt.lookahead>=rr;){let Xn=Yt.strstart,fn=Yt.lookahead-(rr-1);do Yt.ins_h=kr(Yt,Yt.ins_h,Yt.window[Xn+rr-1]),Yt.prev[Xn&Yt.w_mask]=Yt.head[Yt.ins_h],Yt.head[Yt.ins_h]=Xn,Xn++;while(--fn);Yt.strstart=Xn,Yt.lookahead=rr-1,Xr(Yt)}return Yt.strstart+=Yt.lookahead,Yt.block_start=Yt.strstart,Yt.insert=Yt.lookahead,Yt.lookahead=0,Yt.match_length=Yt.prev_length=rr-1,Yt.match_available=0,At.next_in=Sn,At.input=vn,At.avail_in=Jt,Yt.wrap=qt,qn};var Al=_l,Cl=Ks,Tl=Hs,Ml=Gs,Dl=yl,Pl=El,Ll=wl,Rl=Sl,Ol="pako deflate (from Nodeca project)",ts={deflateInit:Al,deflateInit2:Cl,deflateReset:Tl,deflateResetKeep:Ml,deflateSetHeader:Dl,deflate:Pl,deflateEnd:Ll,deflateSetDictionary:Rl,deflateInfo:Ol};const Il=(At,Vt)=>Object.prototype.hasOwnProperty.call(At,Vt);var zl=function(At){const Vt=Array.prototype.slice.call(arguments,1);for(;Vt.length;){const Dt=Vt.shift();if(Dt){if(typeof Dt!="object")throw new TypeError(Dt+"must be non-object");for(const Yt in Dt)Il(Dt,Yt)&&(At[Yt]=Dt[Yt])}}return At},Fl=At=>{let Vt=0;for(let Yt=0,qt=At.length;Yt<qt;Yt++)Vt+=At[Yt].length;const Dt=new Uint8Array(Vt);for(let Yt=0,qt=0,Jt=At.length;Yt<Jt;Yt++){let Sn=At[Yt];Dt.set(Sn,qt),qt+=Sn.length}return Dt},ps={assign:zl,flattenChunks:Fl};let Xs=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Xs=!1}const is=new Uint8Array(256);for(let At=0;At<256;At++)is[At]=At>=252?6:At>=248?5:At>=240?4:At>=224?3:At>=192?2:1;is[254]=is[254]=1;var Bl=At=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(At);let Vt,Dt,Yt,qt,Jt,Sn=At.length,vn=0;for(qt=0;qt<Sn;qt++)Dt=At.charCodeAt(qt),(Dt&64512)===55296&&qt+1<Sn&&(Yt=At.charCodeAt(qt+1),(Yt&64512)===56320&&(Dt=65536+(Dt-55296<<10)+(Yt-56320),qt++)),vn+=Dt<128?1:Dt<2048?2:Dt<65536?3:4;for(Vt=new Uint8Array(vn),Jt=0,qt=0;Jt<vn;qt++)Dt=At.charCodeAt(qt),(Dt&64512)===55296&&qt+1<Sn&&(Yt=At.charCodeAt(qt+1),(Yt&64512)===56320&&(Dt=65536+(Dt-55296<<10)+(Yt-56320),qt++)),Dt<128?Vt[Jt++]=Dt:Dt<2048?(Vt[Jt++]=192|Dt>>>6,Vt[Jt++]=128|Dt&63):Dt<65536?(Vt[Jt++]=224|Dt>>>12,Vt[Jt++]=128|Dt>>>6&63,Vt[Jt++]=128|Dt&63):(Vt[Jt++]=240|Dt>>>18,Vt[Jt++]=128|Dt>>>12&63,Vt[Jt++]=128|Dt>>>6&63,Vt[Jt++]=128|Dt&63);return Vt};const Nl=(At,Vt)=>{if(Vt<65534&&At.subarray&&Xs)return String.fromCharCode.apply(null,At.length===Vt?At:At.subarray(0,Vt));let Dt="";for(let Yt=0;Yt<Vt;Yt++)Dt+=String.fromCharCode(At[Yt]);return Dt};var Ul=(At,Vt)=>{const Dt=Vt||At.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(At.subarray(0,Vt));let Yt,qt;const Jt=new Array(Dt*2);for(qt=0,Yt=0;Yt<Dt;){let Sn=At[Yt++];if(Sn<128){Jt[qt++]=Sn;continue}let vn=is[Sn];if(vn>4){Jt[qt++]=65533,Yt+=vn-1;continue}for(Sn&=vn===2?31:vn===3?15:7;vn>1&&Yt<Dt;)Sn=Sn<<6|At[Yt++]&63,vn--;if(vn>1){Jt[qt++]=65533;continue}Sn<65536?Jt[qt++]=Sn:(Sn-=65536,Jt[qt++]=55296|Sn>>10&1023,Jt[qt++]=56320|Sn&1023)}return Nl(Jt,qt)},Vl=(At,Vt)=>{Vt=Vt||At.length,Vt>At.length&&(Vt=At.length);let Dt=Vt-1;for(;Dt>=0&&(At[Dt]&192)===128;)Dt--;return Dt<0||Dt===0?Vt:Dt+is[At[Dt]]>Vt?Dt:Vt},ns={string2buf:Bl,buf2string:Ul,utf8border:Vl};function Wl(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ys=Wl;const Zs=Object.prototype.toString,{Z_NO_FLUSH:$l,Z_SYNC_FLUSH:Gl,Z_FULL_FLUSH:Hl,Z_FINISH:Kl,Z_OK:ms,Z_STREAM_END:Xl,Z_DEFAULT_COMPRESSION:Yl,Z_DEFAULT_STRATEGY:Zl,Z_DEFLATED:Ql}=pn;function rs(At){this.options=ps.assign({level:Yl,method:Ql,chunkSize:16384,windowBits:15,memLevel:8,strategy:Zl},At||{});let Vt=this.options;Vt.raw&&Vt.windowBits>0?Vt.windowBits=-Vt.windowBits:Vt.gzip&&Vt.windowBits>0&&Vt.windowBits<16&&(Vt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ys,this.strm.avail_out=0;let Dt=ts.deflateInit2(this.strm,Vt.level,Vt.method,Vt.windowBits,Vt.memLevel,Vt.strategy);if(Dt!==ms)throw new Error(gn[Dt]);if(Vt.header&&ts.deflateSetHeader(this.strm,Vt.header),Vt.dictionary){let Yt;if(typeof Vt.dictionary=="string"?Yt=ns.string2buf(Vt.dictionary):Zs.call(Vt.dictionary)==="[object ArrayBuffer]"?Yt=new Uint8Array(Vt.dictionary):Yt=Vt.dictionary,Dt=ts.deflateSetDictionary(this.strm,Yt),Dt!==ms)throw new Error(gn[Dt]);this._dict_set=!0}}rs.prototype.push=function(At,Vt){const Dt=this.strm,Yt=this.options.chunkSize;let qt,Jt;if(this.ended)return!1;for(Vt===~~Vt?Jt=Vt:Jt=Vt===!0?Kl:$l,typeof At=="string"?Dt.input=ns.string2buf(At):Zs.call(At)==="[object ArrayBuffer]"?Dt.input=new Uint8Array(At):Dt.input=At,Dt.next_in=0,Dt.avail_in=Dt.input.length;;){if(Dt.avail_out===0&&(Dt.output=new Uint8Array(Yt),Dt.next_out=0,Dt.avail_out=Yt),(Jt===Gl||Jt===Hl)&&Dt.avail_out<=6){this.onData(Dt.output.subarray(0,Dt.next_out)),Dt.avail_out=0;continue}if(qt=ts.deflate(Dt,Jt),qt===Xl)return Dt.next_out>0&&this.onData(Dt.output.subarray(0,Dt.next_out)),qt=ts.deflateEnd(this.strm),this.onEnd(qt),this.ended=!0,qt===ms;if(Dt.avail_out===0){this.onData(Dt.output);continue}if(Jt>0&&Dt.next_out>0){this.onData(Dt.output.subarray(0,Dt.next_out)),Dt.avail_out=0;continue}if(Dt.avail_in===0)break}return!0},rs.prototype.onData=function(At){this.chunks.push(At)},rs.prototype.onEnd=function(At){At===ms&&(this.result=ps.flattenChunks(this.chunks)),this.chunks=[],this.err=At,this.msg=this.strm.msg};function Rs(At,Vt){const Dt=new rs(Vt);if(Dt.push(At,!0),Dt.err)throw Dt.msg||gn[Dt.err];return Dt.result}function Jl(At,Vt){return Vt=Vt||{},Vt.raw=!0,Rs(At,Vt)}function _c(At,Vt){return Vt=Vt||{},Vt.gzip=!0,Rs(At,Vt)}var eu=rs,tu=Rs,iu=Jl,nu=_c,ru=pn,su={Deflate:eu,deflate:tu,deflateRaw:iu,gzip:nu,constants:ru};const gs=16209,au=16191;var ou=function(Vt,Dt){let Yt,qt,Jt,Sn,vn,Xn,fn,An,lr,Kn,Bn,Yn,xr,ar,er,dr,nr,Hn,ur,br,Zn,pr,or,Jn;const sr=Vt.state;Yt=Vt.next_in,or=Vt.input,qt=Yt+(Vt.avail_in-5),Jt=Vt.next_out,Jn=Vt.output,Sn=Jt-(Dt-Vt.avail_out),vn=Jt+(Vt.avail_out-257),Xn=sr.dmax,fn=sr.wsize,An=sr.whave,lr=sr.wnext,Kn=sr.window,Bn=sr.hold,Yn=sr.bits,xr=sr.lencode,ar=sr.distcode,er=(1<<sr.lenbits)-1,dr=(1<<sr.distbits)-1;e:do{Yn<15&&(Bn+=or[Yt++]<<Yn,Yn+=8,Bn+=or[Yt++]<<Yn,Yn+=8),nr=xr[Bn&er];t:for(;;){if(Hn=nr>>>24,Bn>>>=Hn,Yn-=Hn,Hn=nr>>>16&255,Hn===0)Jn[Jt++]=nr&65535;else if(Hn&16){ur=nr&65535,Hn&=15,Hn&&(Yn<Hn&&(Bn+=or[Yt++]<<Yn,Yn+=8),ur+=Bn&(1<<Hn)-1,Bn>>>=Hn,Yn-=Hn),Yn<15&&(Bn+=or[Yt++]<<Yn,Yn+=8,Bn+=or[Yt++]<<Yn,Yn+=8),nr=ar[Bn&dr];i:for(;;){if(Hn=nr>>>24,Bn>>>=Hn,Yn-=Hn,Hn=nr>>>16&255,Hn&16){if(br=nr&65535,Hn&=15,Yn<Hn&&(Bn+=or[Yt++]<<Yn,Yn+=8,Yn<Hn&&(Bn+=or[Yt++]<<Yn,Yn+=8)),br+=Bn&(1<<Hn)-1,br>Xn){Vt.msg="invalid distance too far back",sr.mode=gs;break e}if(Bn>>>=Hn,Yn-=Hn,Hn=Jt-Sn,br>Hn){if(Hn=br-Hn,Hn>An&&sr.sane){Vt.msg="invalid distance too far back",sr.mode=gs;break e}if(Zn=0,pr=Kn,lr===0){if(Zn+=fn-Hn,Hn<ur){ur-=Hn;do Jn[Jt++]=Kn[Zn++];while(--Hn);Zn=Jt-br,pr=Jn}}else if(lr<Hn){if(Zn+=fn+lr-Hn,Hn-=lr,Hn<ur){ur-=Hn;do Jn[Jt++]=Kn[Zn++];while(--Hn);if(Zn=0,lr<ur){Hn=lr,ur-=Hn;do Jn[Jt++]=Kn[Zn++];while(--Hn);Zn=Jt-br,pr=Jn}}}else if(Zn+=lr-Hn,Hn<ur){ur-=Hn;do Jn[Jt++]=Kn[Zn++];while(--Hn);Zn=Jt-br,pr=Jn}for(;ur>2;)Jn[Jt++]=pr[Zn++],Jn[Jt++]=pr[Zn++],Jn[Jt++]=pr[Zn++],ur-=3;ur&&(Jn[Jt++]=pr[Zn++],ur>1&&(Jn[Jt++]=pr[Zn++]))}else{Zn=Jt-br;do Jn[Jt++]=Jn[Zn++],Jn[Jt++]=Jn[Zn++],Jn[Jt++]=Jn[Zn++],ur-=3;while(ur>2);ur&&(Jn[Jt++]=Jn[Zn++],ur>1&&(Jn[Jt++]=Jn[Zn++]))}}else if(Hn&64){Vt.msg="invalid distance code",sr.mode=gs;break e}else{nr=ar[(nr&65535)+(Bn&(1<<Hn)-1)];continue i}break}}else if(Hn&64)if(Hn&32){sr.mode=au;break e}else{Vt.msg="invalid literal/length code",sr.mode=gs;break e}else{nr=xr[(nr&65535)+(Bn&(1<<Hn)-1)];continue t}break}}while(Yt<qt&&Jt<vn);ur=Yn>>3,Yt-=ur,Yn-=ur<<3,Bn&=(1<<Yn)-1,Vt.next_in=Yt,Vt.next_out=Jt,Vt.avail_in=Yt<qt?5+(qt-Yt):5-(Yt-qt),Vt.avail_out=Jt<vn?257+(vn-Jt):257-(Jt-vn),sr.hold=Bn,sr.bits=Yn};const Zr=15,Qs=852,Js=592,qs=0,Os=1,na=2,lu=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cu=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),uu=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),du=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ss=(At,Vt,Dt,Yt,qt,Jt,Sn,vn)=>{const Xn=vn.bits;let fn=0,An=0,lr=0,Kn=0,Bn=0,Yn=0,xr=0,ar=0,er=0,dr=0,nr,Hn,ur,br,Zn,pr=null,or;const Jn=new Uint16Array(Zr+1),sr=new Uint16Array(Zr+1);let $r=null,Wo,Es,ws;for(fn=0;fn<=Zr;fn++)Jn[fn]=0;for(An=0;An<Yt;An++)Jn[Vt[Dt+An]]++;for(Bn=Xn,Kn=Zr;Kn>=1&&Jn[Kn]===0;Kn--);if(Bn>Kn&&(Bn=Kn),Kn===0)return qt[Jt++]=1<<24|64<<16|0,qt[Jt++]=1<<24|64<<16|0,vn.bits=1,0;for(lr=1;lr<Kn&&Jn[lr]===0;lr++);for(Bn<lr&&(Bn=lr),ar=1,fn=1;fn<=Zr;fn++)if(ar<<=1,ar-=Jn[fn],ar<0)return-1;if(ar>0&&(At===qs||Kn!==1))return-1;for(sr[1]=0,fn=1;fn<Zr;fn++)sr[fn+1]=sr[fn]+Jn[fn];for(An=0;An<Yt;An++)Vt[Dt+An]!==0&&(Sn[sr[Vt[Dt+An]]++]=An);if(At===qs?(pr=$r=Sn,or=20):At===Os?(pr=lu,$r=cu,or=257):(pr=uu,$r=du,or=0),dr=0,An=0,fn=lr,Zn=Jt,Yn=Bn,xr=0,ur=-1,er=1<<Bn,br=er-1,At===Os&&er>Qs||At===na&&er>Js)return 1;for(;;){Wo=fn-xr,Sn[An]+1<or?(Es=0,ws=Sn[An]):Sn[An]>=or?(Es=$r[Sn[An]-or],ws=pr[Sn[An]-or]):(Es=96,ws=0),nr=1<<fn-xr,Hn=1<<Yn,lr=Hn;do Hn-=nr,qt[Zn+(dr>>xr)+Hn]=Wo<<24|Es<<16|ws|0;while(Hn!==0);for(nr=1<<fn-1;dr&nr;)nr>>=1;if(nr!==0?(dr&=nr-1,dr+=nr):dr=0,An++,--Jn[fn]===0){if(fn===Kn)break;fn=Vt[Dt+Sn[An]]}if(fn>Bn&&(dr&br)!==ur){for(xr===0&&(xr=Bn),Zn+=lr,Yn=fn-xr,ar=1<<Yn;Yn+xr<Kn&&(ar-=Jn[Yn+xr],!(ar<=0));)Yn++,ar<<=1;if(er+=1<<Yn,At===Os&&er>Qs||At===na&&er>Js)return 1;ur=dr&br,qt[ur]=Bn<<24|Yn<<16|Zn-Jt|0}}return dr!==0&&(qt[Zn+dr]=fn-xr<<24|64<<16|0),vn.bits=Bn,0};const fu=0,ga=1,xa=2,{Z_FINISH:_a,Z_BLOCK:hu,Z_TREES:vs,Z_OK:Vr,Z_STREAM_END:pu,Z_NEED_DICT:mu,Z_STREAM_ERROR:Tr,Z_DATA_ERROR:ba,Z_MEM_ERROR:$a,Z_BUF_ERROR:gu,Z_DEFLATED:eo}=pn,xs=16180,to=16181,io=16182,no=16183,ro=16184,so=16185,ao=16186,oo=16187,lo=16188,co=16189,ys=16190,Rr=16191,Is=16192,uo=16193,zs=16194,fo=16195,ho=16196,po=16197,mo=16198,_s=16199,bs=16200,go=16201,vo=16202,xo=16203,yo=16204,_o=16205,ks=16206,bo=16207,Eo=16208,vr=16209,wo=16210,So=16211,vu=852,xu=592,yu=15,Ao=At=>(At>>>24&255)+(At>>>8&65280)+((At&65280)<<8)+((At&255)<<24);function _u(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Wr=At=>{if(!At)return 1;const Vt=At.state;return!Vt||Vt.strm!==At||Vt.mode<xs||Vt.mode>So?1:0},Co=At=>{if(Wr(At))return Tr;const Vt=At.state;return At.total_in=At.total_out=Vt.total=0,At.msg="",Vt.wrap&&(At.adler=Vt.wrap&1),Vt.mode=xs,Vt.last=0,Vt.havedict=0,Vt.flags=-1,Vt.dmax=32768,Vt.head=null,Vt.hold=0,Vt.bits=0,Vt.lencode=Vt.lendyn=new Int32Array(vu),Vt.distcode=Vt.distdyn=new Int32Array(xu),Vt.sane=1,Vt.back=-1,Vr},To=At=>{if(Wr(At))return Tr;const Vt=At.state;return Vt.wsize=0,Vt.whave=0,Vt.wnext=0,Co(At)},Mo=(At,Vt)=>{let Dt;if(Wr(At))return Tr;const Yt=At.state;return Vt<0?(Dt=0,Vt=-Vt):(Dt=(Vt>>4)+5,Vt<48&&(Vt&=15)),Vt&&(Vt<8||Vt>15)?Tr:(Yt.window!==null&&Yt.wbits!==Vt&&(Yt.window=null),Yt.wrap=Dt,Yt.wbits=Vt,To(At))},Do=(At,Vt)=>{if(!At)return Tr;const Dt=new _u;At.state=Dt,Dt.strm=At,Dt.window=null,Dt.mode=xs;const Yt=Mo(At,Vt);return Yt!==Vr&&(At.state=null),Yt},bu=At=>Do(At,yu);let Po=!0,js,Fs;const Eu=At=>{if(Po){js=new Int32Array(512),Fs=new Int32Array(32);let Vt=0;for(;Vt<144;)At.lens[Vt++]=8;for(;Vt<256;)At.lens[Vt++]=9;for(;Vt<280;)At.lens[Vt++]=7;for(;Vt<288;)At.lens[Vt++]=8;for(ss(ga,At.lens,0,288,js,0,At.work,{bits:9}),Vt=0;Vt<32;)At.lens[Vt++]=5;ss(xa,At.lens,0,32,Fs,0,At.work,{bits:5}),Po=!1}At.lencode=js,At.lenbits=9,At.distcode=Fs,At.distbits=5},Lo=(At,Vt,Dt,Yt)=>{let qt;const Jt=At.state;return Jt.window===null&&(Jt.wsize=1<<Jt.wbits,Jt.wnext=0,Jt.whave=0,Jt.window=new Uint8Array(Jt.wsize)),Yt>=Jt.wsize?(Jt.window.set(Vt.subarray(Dt-Jt.wsize,Dt),0),Jt.wnext=0,Jt.whave=Jt.wsize):(qt=Jt.wsize-Jt.wnext,qt>Yt&&(qt=Yt),Jt.window.set(Vt.subarray(Dt-Yt,Dt-Yt+qt),Jt.wnext),Yt-=qt,Yt?(Jt.window.set(Vt.subarray(Dt-Yt,Dt),0),Jt.wnext=Yt,Jt.whave=Jt.wsize):(Jt.wnext+=qt,Jt.wnext===Jt.wsize&&(Jt.wnext=0),Jt.whave<Jt.wsize&&(Jt.whave+=qt))),0},wu=(At,Vt)=>{let Dt,Yt,qt,Jt,Sn,vn,Xn,fn,An,lr,Kn,Bn,Yn,xr,ar=0,er,dr,nr,Hn,ur,br,Zn,pr;const or=new Uint8Array(4);let Jn,sr;const $r=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wr(At)||!At.output||!At.input&&At.avail_in!==0)return Tr;Dt=At.state,Dt.mode===Rr&&(Dt.mode=Is),Sn=At.next_out,qt=At.output,Xn=At.avail_out,Jt=At.next_in,Yt=At.input,vn=At.avail_in,fn=Dt.hold,An=Dt.bits,lr=vn,Kn=Xn,pr=Vr;e:for(;;)switch(Dt.mode){case xs:if(Dt.wrap===0){Dt.mode=Is;break}for(;An<16;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(Dt.wrap&2&&fn===35615){Dt.wbits===0&&(Dt.wbits=15),Dt.check=0,or[0]=fn&255,or[1]=fn>>>8&255,Dt.check=Rt(Dt.check,or,2,0),fn=0,An=0,Dt.mode=to;break}if(Dt.head&&(Dt.head.done=!1),!(Dt.wrap&1)||(((fn&255)<<8)+(fn>>8))%31){At.msg="incorrect header check",Dt.mode=vr;break}if((fn&15)!==eo){At.msg="unknown compression method",Dt.mode=vr;break}if(fn>>>=4,An-=4,Zn=(fn&15)+8,Dt.wbits===0&&(Dt.wbits=Zn),Zn>15||Zn>Dt.wbits){At.msg="invalid window size",Dt.mode=vr;break}Dt.dmax=1<<Dt.wbits,Dt.flags=0,At.adler=Dt.check=1,Dt.mode=fn&512?co:Rr,fn=0,An=0;break;case to:for(;An<16;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(Dt.flags=fn,(Dt.flags&255)!==eo){At.msg="unknown compression method",Dt.mode=vr;break}if(Dt.flags&57344){At.msg="unknown header flags set",Dt.mode=vr;break}Dt.head&&(Dt.head.text=fn>>8&1),Dt.flags&512&&Dt.wrap&4&&(or[0]=fn&255,or[1]=fn>>>8&255,Dt.check=Rt(Dt.check,or,2,0)),fn=0,An=0,Dt.mode=io;case io:for(;An<32;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}Dt.head&&(Dt.head.time=fn),Dt.flags&512&&Dt.wrap&4&&(or[0]=fn&255,or[1]=fn>>>8&255,or[2]=fn>>>16&255,or[3]=fn>>>24&255,Dt.check=Rt(Dt.check,or,4,0)),fn=0,An=0,Dt.mode=no;case no:for(;An<16;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}Dt.head&&(Dt.head.xflags=fn&255,Dt.head.os=fn>>8),Dt.flags&512&&Dt.wrap&4&&(or[0]=fn&255,or[1]=fn>>>8&255,Dt.check=Rt(Dt.check,or,2,0)),fn=0,An=0,Dt.mode=ro;case ro:if(Dt.flags&1024){for(;An<16;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}Dt.length=fn,Dt.head&&(Dt.head.extra_len=fn),Dt.flags&512&&Dt.wrap&4&&(or[0]=fn&255,or[1]=fn>>>8&255,Dt.check=Rt(Dt.check,or,2,0)),fn=0,An=0}else Dt.head&&(Dt.head.extra=null);Dt.mode=so;case so:if(Dt.flags&1024&&(Bn=Dt.length,Bn>vn&&(Bn=vn),Bn&&(Dt.head&&(Zn=Dt.head.extra_len-Dt.length,Dt.head.extra||(Dt.head.extra=new Uint8Array(Dt.head.extra_len)),Dt.head.extra.set(Yt.subarray(Jt,Jt+Bn),Zn)),Dt.flags&512&&Dt.wrap&4&&(Dt.check=Rt(Dt.check,Yt,Bn,Jt)),vn-=Bn,Jt+=Bn,Dt.length-=Bn),Dt.length))break e;Dt.length=0,Dt.mode=ao;case ao:if(Dt.flags&2048){if(vn===0)break e;Bn=0;do Zn=Yt[Jt+Bn++],Dt.head&&Zn&&Dt.length<65536&&(Dt.head.name+=String.fromCharCode(Zn));while(Zn&&Bn<vn);if(Dt.flags&512&&Dt.wrap&4&&(Dt.check=Rt(Dt.check,Yt,Bn,Jt)),vn-=Bn,Jt+=Bn,Zn)break e}else Dt.head&&(Dt.head.name=null);Dt.length=0,Dt.mode=oo;case oo:if(Dt.flags&4096){if(vn===0)break e;Bn=0;do Zn=Yt[Jt+Bn++],Dt.head&&Zn&&Dt.length<65536&&(Dt.head.comment+=String.fromCharCode(Zn));while(Zn&&Bn<vn);if(Dt.flags&512&&Dt.wrap&4&&(Dt.check=Rt(Dt.check,Yt,Bn,Jt)),vn-=Bn,Jt+=Bn,Zn)break e}else Dt.head&&(Dt.head.comment=null);Dt.mode=lo;case lo:if(Dt.flags&512){for(;An<16;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(Dt.wrap&4&&fn!==(Dt.check&65535)){At.msg="header crc mismatch",Dt.mode=vr;break}fn=0,An=0}Dt.head&&(Dt.head.hcrc=Dt.flags>>9&1,Dt.head.done=!0),At.adler=Dt.check=0,Dt.mode=Rr;break;case co:for(;An<32;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}At.adler=Dt.check=Ao(fn),fn=0,An=0,Dt.mode=ys;case ys:if(Dt.havedict===0)return At.next_out=Sn,At.avail_out=Xn,At.next_in=Jt,At.avail_in=vn,Dt.hold=fn,Dt.bits=An,mu;At.adler=Dt.check=1,Dt.mode=Rr;case Rr:if(Vt===hu||Vt===vs)break e;case Is:if(Dt.last){fn>>>=An&7,An-=An&7,Dt.mode=ks;break}for(;An<3;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}switch(Dt.last=fn&1,fn>>>=1,An-=1,fn&3){case 0:Dt.mode=uo;break;case 1:if(Eu(Dt),Dt.mode=_s,Vt===vs){fn>>>=2,An-=2;break e}break;case 2:Dt.mode=ho;break;case 3:At.msg="invalid block type",Dt.mode=vr}fn>>>=2,An-=2;break;case uo:for(fn>>>=An&7,An-=An&7;An<32;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if((fn&65535)!==(fn>>>16^65535)){At.msg="invalid stored block lengths",Dt.mode=vr;break}if(Dt.length=fn&65535,fn=0,An=0,Dt.mode=zs,Vt===vs)break e;case zs:Dt.mode=fo;case fo:if(Bn=Dt.length,Bn){if(Bn>vn&&(Bn=vn),Bn>Xn&&(Bn=Xn),Bn===0)break e;qt.set(Yt.subarray(Jt,Jt+Bn),Sn),vn-=Bn,Jt+=Bn,Xn-=Bn,Sn+=Bn,Dt.length-=Bn;break}Dt.mode=Rr;break;case ho:for(;An<14;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(Dt.nlen=(fn&31)+257,fn>>>=5,An-=5,Dt.ndist=(fn&31)+1,fn>>>=5,An-=5,Dt.ncode=(fn&15)+4,fn>>>=4,An-=4,Dt.nlen>286||Dt.ndist>30){At.msg="too many length or distance symbols",Dt.mode=vr;break}Dt.have=0,Dt.mode=po;case po:for(;Dt.have<Dt.ncode;){for(;An<3;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}Dt.lens[$r[Dt.have++]]=fn&7,fn>>>=3,An-=3}for(;Dt.have<19;)Dt.lens[$r[Dt.have++]]=0;if(Dt.lencode=Dt.lendyn,Dt.lenbits=7,Jn={bits:Dt.lenbits},pr=ss(fu,Dt.lens,0,19,Dt.lencode,0,Dt.work,Jn),Dt.lenbits=Jn.bits,pr){At.msg="invalid code lengths set",Dt.mode=vr;break}Dt.have=0,Dt.mode=mo;case mo:for(;Dt.have<Dt.nlen+Dt.ndist;){for(;ar=Dt.lencode[fn&(1<<Dt.lenbits)-1],er=ar>>>24,dr=ar>>>16&255,nr=ar&65535,!(er<=An);){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(nr<16)fn>>>=er,An-=er,Dt.lens[Dt.have++]=nr;else{if(nr===16){for(sr=er+2;An<sr;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(fn>>>=er,An-=er,Dt.have===0){At.msg="invalid bit length repeat",Dt.mode=vr;break}Zn=Dt.lens[Dt.have-1],Bn=3+(fn&3),fn>>>=2,An-=2}else if(nr===17){for(sr=er+3;An<sr;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}fn>>>=er,An-=er,Zn=0,Bn=3+(fn&7),fn>>>=3,An-=3}else{for(sr=er+7;An<sr;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}fn>>>=er,An-=er,Zn=0,Bn=11+(fn&127),fn>>>=7,An-=7}if(Dt.have+Bn>Dt.nlen+Dt.ndist){At.msg="invalid bit length repeat",Dt.mode=vr;break}for(;Bn--;)Dt.lens[Dt.have++]=Zn}}if(Dt.mode===vr)break;if(Dt.lens[256]===0){At.msg="invalid code -- missing end-of-block",Dt.mode=vr;break}if(Dt.lenbits=9,Jn={bits:Dt.lenbits},pr=ss(ga,Dt.lens,0,Dt.nlen,Dt.lencode,0,Dt.work,Jn),Dt.lenbits=Jn.bits,pr){At.msg="invalid literal/lengths set",Dt.mode=vr;break}if(Dt.distbits=6,Dt.distcode=Dt.distdyn,Jn={bits:Dt.distbits},pr=ss(xa,Dt.lens,Dt.nlen,Dt.ndist,Dt.distcode,0,Dt.work,Jn),Dt.distbits=Jn.bits,pr){At.msg="invalid distances set",Dt.mode=vr;break}if(Dt.mode=_s,Vt===vs)break e;case _s:Dt.mode=bs;case bs:if(vn>=6&&Xn>=258){At.next_out=Sn,At.avail_out=Xn,At.next_in=Jt,At.avail_in=vn,Dt.hold=fn,Dt.bits=An,ou(At,Kn),Sn=At.next_out,qt=At.output,Xn=At.avail_out,Jt=At.next_in,Yt=At.input,vn=At.avail_in,fn=Dt.hold,An=Dt.bits,Dt.mode===Rr&&(Dt.back=-1);break}for(Dt.back=0;ar=Dt.lencode[fn&(1<<Dt.lenbits)-1],er=ar>>>24,dr=ar>>>16&255,nr=ar&65535,!(er<=An);){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(dr&&!(dr&240)){for(Hn=er,ur=dr,br=nr;ar=Dt.lencode[br+((fn&(1<<Hn+ur)-1)>>Hn)],er=ar>>>24,dr=ar>>>16&255,nr=ar&65535,!(Hn+er<=An);){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}fn>>>=Hn,An-=Hn,Dt.back+=Hn}if(fn>>>=er,An-=er,Dt.back+=er,Dt.length=nr,dr===0){Dt.mode=_o;break}if(dr&32){Dt.back=-1,Dt.mode=Rr;break}if(dr&64){At.msg="invalid literal/length code",Dt.mode=vr;break}Dt.extra=dr&15,Dt.mode=go;case go:if(Dt.extra){for(sr=Dt.extra;An<sr;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}Dt.length+=fn&(1<<Dt.extra)-1,fn>>>=Dt.extra,An-=Dt.extra,Dt.back+=Dt.extra}Dt.was=Dt.length,Dt.mode=vo;case vo:for(;ar=Dt.distcode[fn&(1<<Dt.distbits)-1],er=ar>>>24,dr=ar>>>16&255,nr=ar&65535,!(er<=An);){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(!(dr&240)){for(Hn=er,ur=dr,br=nr;ar=Dt.distcode[br+((fn&(1<<Hn+ur)-1)>>Hn)],er=ar>>>24,dr=ar>>>16&255,nr=ar&65535,!(Hn+er<=An);){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}fn>>>=Hn,An-=Hn,Dt.back+=Hn}if(fn>>>=er,An-=er,Dt.back+=er,dr&64){At.msg="invalid distance code",Dt.mode=vr;break}Dt.offset=nr,Dt.extra=dr&15,Dt.mode=xo;case xo:if(Dt.extra){for(sr=Dt.extra;An<sr;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}Dt.offset+=fn&(1<<Dt.extra)-1,fn>>>=Dt.extra,An-=Dt.extra,Dt.back+=Dt.extra}if(Dt.offset>Dt.dmax){At.msg="invalid distance too far back",Dt.mode=vr;break}Dt.mode=yo;case yo:if(Xn===0)break e;if(Bn=Kn-Xn,Dt.offset>Bn){if(Bn=Dt.offset-Bn,Bn>Dt.whave&&Dt.sane){At.msg="invalid distance too far back",Dt.mode=vr;break}Bn>Dt.wnext?(Bn-=Dt.wnext,Yn=Dt.wsize-Bn):Yn=Dt.wnext-Bn,Bn>Dt.length&&(Bn=Dt.length),xr=Dt.window}else xr=qt,Yn=Sn-Dt.offset,Bn=Dt.length;Bn>Xn&&(Bn=Xn),Xn-=Bn,Dt.length-=Bn;do qt[Sn++]=xr[Yn++];while(--Bn);Dt.length===0&&(Dt.mode=bs);break;case _o:if(Xn===0)break e;qt[Sn++]=Dt.length,Xn--,Dt.mode=bs;break;case ks:if(Dt.wrap){for(;An<32;){if(vn===0)break e;vn--,fn|=Yt[Jt++]<<An,An+=8}if(Kn-=Xn,At.total_out+=Kn,Dt.total+=Kn,Dt.wrap&4&&Kn&&(At.adler=Dt.check=Dt.flags?Rt(Dt.check,qt,Kn,Sn-Kn):wn(Dt.check,qt,Kn,Sn-Kn)),Kn=Xn,Dt.wrap&4&&(Dt.flags?fn:Ao(fn))!==Dt.check){At.msg="incorrect data check",Dt.mode=vr;break}fn=0,An=0}Dt.mode=bo;case bo:if(Dt.wrap&&Dt.flags){for(;An<32;){if(vn===0)break e;vn--,fn+=Yt[Jt++]<<An,An+=8}if(Dt.wrap&4&&fn!==(Dt.total&4294967295)){At.msg="incorrect length check",Dt.mode=vr;break}fn=0,An=0}Dt.mode=Eo;case Eo:pr=pu;break e;case vr:pr=ba;break e;case wo:return $a;case So:default:return Tr}return At.next_out=Sn,At.avail_out=Xn,At.next_in=Jt,At.avail_in=vn,Dt.hold=fn,Dt.bits=An,(Dt.wsize||Kn!==At.avail_out&&Dt.mode<vr&&(Dt.mode<ks||Vt!==_a))&&Lo(At,At.output,At.next_out,Kn-At.avail_out),lr-=At.avail_in,Kn-=At.avail_out,At.total_in+=lr,At.total_out+=Kn,Dt.total+=Kn,Dt.wrap&4&&Kn&&(At.adler=Dt.check=Dt.flags?Rt(Dt.check,qt,Kn,At.next_out-Kn):wn(Dt.check,qt,Kn,At.next_out-Kn)),At.data_type=Dt.bits+(Dt.last?64:0)+(Dt.mode===Rr?128:0)+(Dt.mode===_s||Dt.mode===zs?256:0),(lr===0&&Kn===0||Vt===_a)&&pr===Vr&&(pr=gu),pr},Su=At=>{if(Wr(At))return Tr;let Vt=At.state;return Vt.window&&(Vt.window=null),At.state=null,Vr},Au=(At,Vt)=>{if(Wr(At))return Tr;const Dt=At.state;return Dt.wrap&2?(Dt.head=Vt,Vt.done=!1,Vr):Tr},Cu=(At,Vt)=>{const Dt=Vt.length;let Yt,qt,Jt;return Wr(At)||(Yt=At.state,Yt.wrap!==0&&Yt.mode!==ys)?Tr:Yt.mode===ys&&(qt=1,qt=wn(qt,Vt,Dt,0),qt!==Yt.check)?ba:(Jt=Lo(At,Vt,Dt,Dt),Jt?(Yt.mode=wo,$a):(Yt.havedict=1,Vr))};var Tu=To,Mu=Mo,Du=Co,Pu=bu,Lu=Do,Ru=wu,Ou=Su,Iu=Au,zu=Cu,ku="pako inflate (from Nodeca project)",Or={inflateReset:Tu,inflateReset2:Mu,inflateResetKeep:Du,inflateInit:Pu,inflateInit2:Lu,inflate:Ru,inflateEnd:Ou,inflateGetHeader:Iu,inflateSetDictionary:zu,inflateInfo:ku};function ju(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Fu=ju;const Ro=Object.prototype.toString,{Z_NO_FLUSH:Bu,Z_FINISH:Nu,Z_OK:as,Z_STREAM_END:Bs,Z_NEED_DICT:Ns,Z_STREAM_ERROR:Uu,Z_DATA_ERROR:Oo,Z_MEM_ERROR:Vu}=pn;function os(At){this.options=ps.assign({chunkSize:65536,windowBits:15,to:""},At||{});const Vt=this.options;Vt.raw&&Vt.windowBits>=0&&Vt.windowBits<16&&(Vt.windowBits=-Vt.windowBits,Vt.windowBits===0&&(Vt.windowBits=-15)),Vt.windowBits>=0&&Vt.windowBits<16&&!(At&&At.windowBits)&&(Vt.windowBits+=32),Vt.windowBits>15&&Vt.windowBits<48&&(Vt.windowBits&15||(Vt.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ys,this.strm.avail_out=0;let Dt=Or.inflateInit2(this.strm,Vt.windowBits);if(Dt!==as)throw new Error(gn[Dt]);if(this.header=new Fu,Or.inflateGetHeader(this.strm,this.header),Vt.dictionary&&(typeof Vt.dictionary=="string"?Vt.dictionary=ns.string2buf(Vt.dictionary):Ro.call(Vt.dictionary)==="[object ArrayBuffer]"&&(Vt.dictionary=new Uint8Array(Vt.dictionary)),Vt.raw&&(Dt=Or.inflateSetDictionary(this.strm,Vt.dictionary),Dt!==as)))throw new Error(gn[Dt])}os.prototype.push=function(At,Vt){const Dt=this.strm,Yt=this.options.chunkSize,qt=this.options.dictionary;let Jt,Sn,vn;if(this.ended)return!1;for(Vt===~~Vt?Sn=Vt:Sn=Vt===!0?Nu:Bu,Ro.call(At)==="[object ArrayBuffer]"?Dt.input=new Uint8Array(At):Dt.input=At,Dt.next_in=0,Dt.avail_in=Dt.input.length;;){for(Dt.avail_out===0&&(Dt.output=new Uint8Array(Yt),Dt.next_out=0,Dt.avail_out=Yt),Jt=Or.inflate(Dt,Sn),Jt===Ns&&qt&&(Jt=Or.inflateSetDictionary(Dt,qt),Jt===as?Jt=Or.inflate(Dt,Sn):Jt===Oo&&(Jt=Ns));Dt.avail_in>0&&Jt===Bs&&Dt.state.wrap>0&&At[Dt.next_in]!==0;)Or.inflateReset(Dt),Jt=Or.inflate(Dt,Sn);switch(Jt){case Uu:case Oo:case Ns:case Vu:return this.onEnd(Jt),this.ended=!0,!1}if(vn=Dt.avail_out,Dt.next_out&&(Dt.avail_out===0||Jt===Bs))if(this.options.to==="string"){let Xn=ns.utf8border(Dt.output,Dt.next_out),fn=Dt.next_out-Xn,An=ns.buf2string(Dt.output,Xn);Dt.next_out=fn,Dt.avail_out=Yt-fn,fn&&Dt.output.set(Dt.output.subarray(Xn,Xn+fn),0),this.onData(An)}else this.onData(Dt.output.length===Dt.next_out?Dt.output:Dt.output.subarray(0,Dt.next_out));if(!(Jt===as&&vn===0)){if(Jt===Bs)return Jt=Or.inflateEnd(this.strm),this.onEnd(Jt),this.ended=!0,!0;if(Dt.avail_in===0)break}}return!0},os.prototype.onData=function(At){this.chunks.push(At)},os.prototype.onEnd=function(At){At===as&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ps.flattenChunks(this.chunks)),this.chunks=[],this.err=At,this.msg=this.strm.msg};function Us(At,Vt){const Dt=new os(Vt);if(Dt.push(At),Dt.err)throw Dt.msg||gn[Dt.err];return Dt.result}function Wu(At,Vt){return Vt=Vt||{},Vt.raw=!0,Us(At,Vt)}var $u=os,Gu=Us,Hu=Wu,Ku=Us,Xu=pn,Yu={Inflate:$u,inflate:Gu,inflateRaw:Hu,ungzip:Ku,constants:Xu};const{Deflate:Zu,deflate:Qu,deflateRaw:Ju,gzip:qu}=su,{Inflate:_d,inflate:_f,inflateRaw:_h,ungzip:ep}=Yu;var Io=Zu,zo=Qu,ko=Ju,jo=qu,Fo=_d,Bo=_f,No=_h,Uo=ep,Vo=pn,tp={Deflate:Io,deflate:zo,deflateRaw:ko,gzip:jo,Inflate:Fo,inflate:Bo,inflateRaw:No,ungzip:Uo,constants:Vo}}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(i!==void 0)return i.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(i,{a:i}),i},__webpack_require__.d=(e,i)=>{for(var s in i)__webpack_require__.o(i,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())})(_3Dmol);var _3DmolExports=_3Dmol.exports;reactExports.createContext({smiles:null});const MoleculeViewer=({smiles:e})=>{const i=reactExports.useRef(null),{theme:s}=useTheme(),[a,c]=reactExports.useState(null),[h,st]=reactExports.useState(null),[nt,ot]=reactExports.useState(null),[xt,vt]=reactExports.useState([]),[bt,St]=reactExports.useState(null);return reactExports.useEffect(()=>{const Et=async b=>{var ft,mt,_t,tt,gt;try{const wt=await fetch(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/smiles/${encodeURIComponent(b)}/cids/JSON`);if(!wt.ok)throw new Error("Failed to fetch CID");const Tt=(mt=(ft=(await wt.json()).IdentifierList)==null?void 0:ft.CID)==null?void 0:mt[0];if(!Tt)throw new Error("No CID found for this SMILES string.");c(Tt);const Mt=await fetch(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/${Tt}/property/IUPACName,MolecularFormula,MolecularWeight,XLogP/JSON`);if(Mt.ok){const It=await Mt.json();ot(It.PropertyTable.Properties[0]),st(((_t=It.PropertyTable.Properties[0])==null?void 0:_t.IUPACName)||"N/A")}const Pt=await fetch(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/${Tt}/synonyms/JSON`);if(Pt.ok){const It=await Pt.json();vt(((gt=(tt=It.InformationList)==null?void 0:tt.Information[0])==null?void 0:gt.Synonym)||[])}}catch(wt){console.error("Error fetching PubChem data:",wt)}},Ct=async b=>{try{const ft=await fetch(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/smiles/${encodeURIComponent(b)}/SDF`);return ft.ok?await ft.text():null}catch(ft){return console.error("Failed to fetch SDF:",ft),null}},ht=async()=>{if(i.current&&e){const b=i.current;b.innerHTML="";const ft=await Ct(e);if(ft){const mt=_3DmolExports.createViewer(b,{backgroundColor:s==="dark"?"black":"white"});mt.addModel(ft,"sdf"),mt.setStyle({},{stick:{radius:.15,colorscheme:"Jmol"},sphere:{radius:.3}});const _t=b.querySelector("canvas");_t&&(_t.style.width="100%",_t.style.height="100%",_t.style.borderRadius="16px",_t.style.boxSizing="border-box",_t.style.paddingRight="2px",_t.style.paddingBottom="2px"),mt.zoomTo(),mt.spin("y",1),mt.render()}}},d=async()=>{try{const b=await fetch("http://localhost:8000/predict_admet/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({smiles:e})});if(b.ok){const ft=await b.json();St(ft.admet_properties)}else console.error("Failed to fetch ADMET properties")}catch(b){console.error("Error predicting ADMET properties:",b)}};Et(e),ht(),d()},[e,s]),jsxRuntimeExports.jsxs("div",{className:"flex flex-row gap-4 w-full h-[700px] box-border p-4",children:[jsxRuntimeExports.jsx("div",{ref:i,className:"w-1/2 h-[700px] rounded-2xl p-4 border shadow-lg relative box-border pb-[50px]"}),jsxRuntimeExports.jsxs("div",{className:"w-1/2 flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border rounded-lg w-full",children:[jsxRuntimeExports.jsx("h3",{children:jsxRuntimeExports.jsx("b",{children:"Physical And Chemical Properties"})}),nt&&jsxRuntimeExports.jsx("table",{children:jsxRuntimeExports.jsx("tbody",{children:Object.entries(nt).map(([Et,Ct])=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:Et}),jsxRuntimeExports.jsx("td",{children:String(Ct)})]},Et))})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border rounded-lg overflow-auto w-full h-[750px]",children:[jsxRuntimeExports.jsx("h3",{children:jsxRuntimeExports.jsx("b",{children:"ADMET Properties (Predicted)"})}),bt&&jsxRuntimeExports.jsx("table",{children:jsxRuntimeExports.jsx("tbody",{children:Object.entries(bt).map(([Et,Ct])=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:Et}),jsxRuntimeExports.jsx("td",{children:String(Ct)})]},Et))})})]})]})]})};function Dashboard(){const{activeTab:e,setActiveTab:i}=useOutletContext();reactExports.useEffect(()=>{sessionStorage.getItem("dashboardDefaulted")||(i("Visualise & Predict"),sessionStorage.setItem("dashboardDefaulted","true"))},[e,i]);const[s,a]=reactExports.useState(null),[c,h]=reactExports.useState(""),[st,nt]=reactExports.useState(!1),[ot,xt]=reactExports.useState([{id:1,sender:"assistant",text:"Hi, I’m PharmaGenius. How can I assist you in your drug discovery process today?"}]),[vt,bt]=reactExports.useState(""),{theme:St}=useTheme(),Et=yt=>{a(yt),console.log("File uploaded:",yt.name)},Ct=yt=>{yt.preventDefault();const Mt=new FormData(yt.target).get("smiles");Mt&&(h(Mt),nt(!0))},ht=async()=>{if(!vt.trim())return;const yt={id:Date.now(),sender:"user",text:vt};xt(Tt=>[...Tt,yt]);try{const Mt=await(await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:vt})})).json(),Pt={id:Date.now()+1,sender:"assistant",text:Mt.reply||"Sorry, I couldn't understand that."};xt(It=>[...It,Pt])}catch(Tt){console.error("Error calling /api/chat:",Tt);const Mt={id:Date.now()+2,sender:"assistant",text:"Oops! Something went wrong. Please try again later."};xt(Pt=>[...Pt,Mt])}bt("")},d=yt=>{yt.key==="Enter"&&(yt.preventDefault(),ht())},b=St==="dark"?"bg-black":"bg-gray-100",ft=St==="dark"?"bg-purple-600 text-white":"bg-purple-500 text-white",mt=St==="dark"?"bg-[#1a1a1a] text-white":"bg-gray-200 text-black",_t=St==="dark"?"bg-purple-600 text-white":"bg-purple-400 text-white",tt=St==="dark"?"bg-black":"bg-gray-100",gt=St==="dark"?"bg-[#121212] text-white":"bg-white text-black",wt=St==="dark"?"bg-purple-600 text-white hover:bg-purple-500":"bg-purple-500 text-white hover:bg-purple-400";return jsxRuntimeExports.jsx("div",{className:"p-6 space-y-6",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glassmorphism p-6 flex flex-col space-y-6",children:[e==="Drug Target Interaction"&&jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"w-full bg-background rounded-xl shadow-lg p-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Drug-Target Interaction"}),jsxRuntimeExports.jsx("p",{className:"text-foreground/80 text-xl",children:'"Pharm.AI’s core engine is powered by a deep learning model designed to predict how well a drug binds to a specific target protein. It starts by taking two types of input: a SMILES string that represents the molecular structure of the drug, and an amino acid sequence that represents the target protein. The drug is processed through a graph transformer, which converts the molecule into a graph and captures structural features like atoms and bonds. Meanwhile, the protein sequence goes through a sequence transformer, which understands the order and characteristics of amino acids. These two encoded representations are then fused together to predict the binding affinity between the drug and protein. The output is a numerical score representing the strength of interaction. This model helps streamline drug discovery by quickly identifying which compounds are most likely to work, making the process more efficient and scalable."'})]}),jsxRuntimeExports.jsxs("div",{className:"w-full bg-background rounded-xl shadow-lg p-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold mb-4 text-center",children:"Ways of Drug-Target Interaction"}),jsxRuntimeExports.jsxs("ul",{className:"text-foreground/70 text-xl mt-2 list-disc pl-5",children:[jsxRuntimeExports.jsx("li",{children:"Molecular-Docking based"}),jsxRuntimeExports.jsx("li",{children:"Ligand-Based"}),jsxRuntimeExports.jsx("li",{children:"Text-Mining based"}),jsxRuntimeExports.jsx("li",{children:"Chemogenomic based methods"})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full bg-background rounded-xl shadow-lg p-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold mb-4 text-center",children:"How to use the Model"}),jsxRuntimeExports.jsxs("ul",{className:"text-foreground/70 text-xl mt-2 list-disc pl-5",children:[jsxRuntimeExports.jsxs("li",{children:["User enters the CSV file containing the Drug and the Target Protein Sequence"," "]}),jsxRuntimeExports.jsx("li",{children:"The Model gives the predicted results"})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full bg-background rounded-xl shadow-lg p-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold mb-4 text-center",children:"Upload Molecular Data"}),jsxRuntimeExports.jsx(DrugTargetInteraction,{onFileUpload:Et}),s&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:["Uploaded File: ",s.name]})]})]}),e==="Computational Compounds"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:"Upload Computational Compounds"}),jsxRuntimeExports.jsx(DrugTargetInteraction,{onFileUpload:Et}),s&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:["Uploaded File: ",s.name]})]}),e==="Visualise & Predict"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 w-full flex flex-col gap-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold",children:["3D Molecule Viewer &"," ",jsxRuntimeExports.jsx("a",{href:"https://en.wikipedia.org/wiki/ADMET",children:"ADMET"})," Property Predictor"]}),jsxRuntimeExports.jsxs("form",{className:"w-full space-y-4 mt-16",onSubmit:Ct,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-normal",children:["Enter the"," ",jsxRuntimeExports.jsx("a",{href:"https://en.wikipedia.org/wiki/Simplified_Molecular_Input_Line_Entry_System",children:"SMILES"})]}),jsxRuntimeExports.jsx("span",{className:"text-lg font-thin",children:"(Simplified Molecular Input Line Entry System)"}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-normal",children:"String of the compound"})]}),jsxRuntimeExports.jsx("input",{name:"smiles",className:"w-full text-black focus:outline-2 rounded-lg px-4 py-2 border border-gray-200",placeholder:"Example [BH3-][N+]1(C)CC[N+]([BH3-])(C)CC1"}),jsxRuntimeExports.jsx("button",{className:"bg-primary w-full px-4 py-2 rounded-lg text-primary-foreground transition-colors duration-200 hover:bg-primary/10",type:"submit",children:"Submit"})]}),jsxRuntimeExports.jsx("div",{className:"h-[700px] w-full mt-4 flex flex-col items-center justify-center",children:st&&jsxRuntimeExports.jsx(MoleculeViewer,{smiles:c})})]}),e==="PharmaGenius"&&jsxRuntimeExports.jsx("div",{className:"flex flex-col space-y-6",children:jsxRuntimeExports.jsxs("div",{className:`w-full h-[500px] ${b} rounded-lg flex flex-col`,children:[jsxRuntimeExports.jsx("div",{className:`${ft} p-4 rounded-t-lg flex items-center justify-center`,children:jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"PharmaGenius Assistant"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:ot.map(yt=>jsxRuntimeExports.jsx("div",{className:`flex ${yt.sender==="assistant"?"justify-start":"justify-end"}`,children:jsxRuntimeExports.jsx("div",{className:`max-w-sm p-3 rounded-xl ${yt.sender==="assistant"?mt:_t}`,style:{whiteSpace:"pre-wrap"},children:yt.text})},yt.id))}),jsxRuntimeExports.jsxs("div",{className:`p-4 rounded-b-lg border-t border-purple-800 flex space-x-2 ${tt}`,children:[jsxRuntimeExports.jsx("input",{type:"text",className:`flex-1 p-3 rounded-md focus:outline-none ${gt}`,placeholder:"Type your message here...",value:vt,onChange:yt=>bt(yt.target.value),onKeyDown:d}),jsxRuntimeExports.jsx("button",{onClick:ht,className:`px-4 py-2 rounded-md transition-colors ${wt}`,children:"Send"})]})]})})]})})}var __assign=function(){return __assign=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},__assign.apply(this,arguments)};function __spreadArray(e,i,s){if(s||arguments.length===2)for(var a=0,c=i.length,h;a<c;a++)(h||!(a in i))&&(h||(h=Array.prototype.slice.call(i,0,a)),h[a]=i[a]);return e.concat(h||Array.prototype.slice.call(i))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(e,i){return charat(e,0)^45?(((i<<2^charat(e,0))<<2^charat(e,1))<<2^charat(e,2))<<2^charat(e,3):0}function trim(e){return e.trim()}function match(e,i){return(e=i.exec(e))?e[0]:e}function replace(e,i,s){return e.replace(i,s)}function indexof(e,i,s){return e.indexOf(i,s)}function charat(e,i){return e.charCodeAt(i)|0}function substr(e,i,s){return e.slice(i,s)}function strlen(e){return e.length}function sizeof(e){return e.length}function append(e,i){return i.push(e),e}function combine(e,i){return e.map(i).join("")}function filter(e,i){return e.filter(function(s){return!match(s,i)})}var line=1,column=1,length=0,position=0,character=0,characters="";function node(e,i,s,a,c,h,st,nt){return{value:e,root:i,parent:s,type:a,props:c,children:h,line,column,length:st,return:"",siblings:nt}}function copy(e,i){return assign(node("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},i)}function lift(e){for(;e.root;)e=copy(e.root,{children:[e]});append(e,e.siblings)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(e,i){return substr(characters,e,i)}function token(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(e){return line=column=1,length=strlen(characters=e),position=0,[]}function dealloc(e){return characters="",e}function delimit(e){return trim(slice(position-1,delimiter(e===91?e+2:e===40?e+1:e)))}function whitespace(e){for(;(character=peek())&&character<33;)next();return token(e)>2||token(character)>3?"":" "}function escaping(e,i){for(;--i&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(e,caret()+(i<6&&peek()==32&&next()==32))}function delimiter(e){for(;next();)switch(character){case e:return position;case 34:case 39:e!==34&&e!==39&&delimiter(character);break;case 40:e===41&&delimiter(e);break;case 92:next();break}return position}function commenter(e,i){for(;next()&&e+character!==57;)if(e+character===84&&peek()===47)break;return"/*"+slice(i,position-1)+"*"+from(e===47?e:next())}function identifier(e){for(;!token(peek());)next();return slice(e,position)}function compile(e){return dealloc(parse("",null,null,null,[""],e=alloc(e),0,[0],e))}function parse(e,i,s,a,c,h,st,nt,ot){for(var xt=0,vt=0,bt=st,St=0,Et=0,Ct=0,ht=1,d=1,b=1,ft=0,mt="",_t=c,tt=h,gt=a,wt=mt;d;)switch(Ct=ft,ft=next()){case 40:if(Ct!=108&&charat(wt,bt-1)==58){indexof(wt+=replace(delimit(ft),"&","&\f"),"&\f",abs(xt?nt[xt-1]:0))!=-1&&(b=-1);break}case 34:case 39:case 91:wt+=delimit(ft);break;case 9:case 10:case 13:case 32:wt+=whitespace(Ct);break;case 92:wt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),i,s,ot),ot);break;default:wt+="/"}break;case 123*ht:nt[xt++]=strlen(wt)*b;case 125*ht:case 59:case 0:switch(ft){case 0:case 125:d=0;case 59+vt:b==-1&&(wt=replace(wt,/\f/g,"")),Et>0&&strlen(wt)-bt&&append(Et>32?declaration(wt+";",a,s,bt-1,ot):declaration(replace(wt," ","")+";",a,s,bt-2,ot),ot);break;case 59:wt+=";";default:if(append(gt=ruleset(wt,i,s,xt,vt,c,nt,mt,_t=[],tt=[],bt,h),h),ft===123)if(vt===0)parse(wt,i,gt,gt,_t,h,bt,nt,tt);else switch(St===99&&charat(wt,3)===110?100:St){case 100:case 108:case 109:case 115:parse(e,gt,gt,a&&append(ruleset(e,gt,gt,0,0,c,nt,mt,c,_t=[],bt,tt),tt),c,tt,bt,nt,a?_t:tt);break;default:parse(wt,gt,gt,gt,[""],tt,0,nt,tt)}}xt=vt=Et=0,ht=b=1,mt=wt="",bt=st;break;case 58:bt=1+strlen(wt),Et=Ct;default:if(ht<1){if(ft==123)--ht;else if(ft==125&&ht++==0&&prev()==125)continue}switch(wt+=from(ft),ft*ht){case 38:b=vt>0?1:(wt+="\f",-1);break;case 44:nt[xt++]=(strlen(wt)-1)*b,b=1;break;case 64:peek()===45&&(wt+=delimit(next())),St=peek(),vt=bt=strlen(mt=wt+=identifier(caret())),ft++;break;case 45:Ct===45&&strlen(wt)==2&&(ht=0)}}return h}function ruleset(e,i,s,a,c,h,st,nt,ot,xt,vt,bt){for(var St=c-1,Et=c===0?h:[""],Ct=sizeof(Et),ht=0,d=0,b=0;ht<a;++ht)for(var ft=0,mt=substr(e,St+1,St=abs(d=st[ht])),_t=e;ft<Ct;++ft)(_t=trim(d>0?Et[ft]+" "+mt:replace(mt,/&\f/g,Et[ft])))&&(ot[b++]=_t);return node(e,i,s,c===0?RULESET:nt,ot,xt,vt,bt)}function comment(e,i,s,a){return node(e,i,s,COMMENT,from(char()),substr(e,2,-2),0,a)}function declaration(e,i,s,a,c){return node(e,i,s,DECLARATION,substr(e,0,a),substr(e,a+1,-1),a,c)}function prefix(e,i,s){switch(hash(e,i)){case 5103:return WEBKIT+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+e+e;case 4789:return MOZ+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+e+MOZ+e+MS+e+e;case 5936:switch(charat(e,i+11)){case 114:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return WEBKIT+e+MS+e+e;case 6165:return WEBKIT+e+MS+"flex-"+e+e;case 5187:return WEBKIT+e+replace(e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+e;case 5443:return WEBKIT+e+MS+"flex-item-"+replace(e,/flex-|-self/g,"")+(match(e,/flex-|baseline/)?"":MS+"grid-row-"+replace(e,/flex-|-self/g,""))+e;case 4675:return WEBKIT+e+MS+"flex-line-pack"+replace(e,/align-content|flex-|-self/g,"")+e;case 5548:return WEBKIT+e+MS+replace(e,"shrink","negative")+e;case 5292:return WEBKIT+e+MS+replace(e,"basis","preferred-size")+e;case 6060:return WEBKIT+"box-"+replace(e,"-grow","")+WEBKIT+e+MS+replace(e,"grow","positive")+e;case 4554:return WEBKIT+replace(e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+e;case 6187:return replace(replace(replace(e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),e,"")+e;case 5495:case 3959:return replace(e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+e+e;case 4200:if(!match(e,/flex-|baseline/))return MS+"grid-column-align"+substr(e,i)+e;break;case 2592:case 3360:return MS+replace(e,"template-","")+e;case 4384:case 3616:return s&&s.some(function(a,c){return i=c,match(a.props,/grid-\w+-end/)})?~indexof(e+(s=s[i].value),"span",0)?e:MS+replace(e,"-start","")+e+MS+"grid-row-span:"+(~indexof(s,"span",0)?match(s,/\d+/):+match(s,/\d+/)-+match(e,/\d+/))+";":MS+replace(e,"-start","")+e;case 4896:case 4128:return s&&s.some(function(a){return match(a.props,/grid-\w+-start/)})?e:MS+replace(replace(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return replace(e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(e)-1-i>6)switch(charat(e,i+1)){case 109:if(charat(e,i+4)!==45)break;case 102:return replace(e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(e,i+3)==108?"$3":"$2-$3"))+e;case 115:return~indexof(e,"stretch",0)?prefix(replace(e,"stretch","fill-available"),i,s)+e:e}break;case 5152:case 5920:return replace(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,c,h,st,nt,ot,xt){return MS+c+":"+h+xt+(st?MS+c+"-span:"+(nt?ot:+ot-+h)+xt:"")+e});case 4949:if(charat(e,i+6)===121)return replace(e,":",":"+WEBKIT)+e;break;case 6444:switch(charat(e,charat(e,14)===45?18:11)){case 120:return replace(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+e;case 100:return replace(e,":",":"+MS)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(e,"scroll-","scroll-snap-")+e}return e}function serialize(e,i){for(var s="",a=0;a<e.length;a++)s+=i(e[a],a,e,i)||"";return s}function stringify(e,i,s,a){switch(e.type){case LAYER:if(e.children.length)break;case IMPORT:case DECLARATION:return e.return=e.return||e.value;case COMMENT:return"";case KEYFRAMES:return e.return=e.value+"{"+serialize(e.children,a)+"}";case RULESET:if(!strlen(e.value=e.props.join(",")))return""}return strlen(s=serialize(e.children,a))?e.return=e.value+"{"+s+"}":""}function middleware(e){var i=sizeof(e);return function(s,a,c,h){for(var st="",nt=0;nt<i;nt++)st+=e[nt](s,a,c,h)||"";return st}}function rulesheet(e){return function(i){i.root||(i=i.return)&&e(i)}}function prefixer(e,i,s,a){if(e.length>-1&&!e.return)switch(e.type){case DECLARATION:e.return=prefix(e.value,e.length,s);return;case KEYFRAMES:return serialize([copy(e,{value:replace(e.value,"@","@"+WEBKIT)})],a);case RULESET:if(e.length)return combine(s=e.props,function(c){switch(match(c,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(e,{props:[replace(c,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(e,{props:[c]})),assign(e,{props:filter(s,a)});break;case"::placeholder":lift(copy(e,{props:[replace(c,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(e,{props:[replace(c,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(e,{props:[replace(c,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(e,{props:[c]})),assign(e,{props:filter(s,a)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default={},f=typeof process<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",m="active",y="data-styled-version",v="6.1.15",g=`/*!sc*/
`,S=typeof window<"u"&&"HTMLElement"in window,w=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY),_=Object.freeze([]),C=Object.freeze({});function I(e,i,s){return s===void 0&&(s=C),e.theme!==s.theme&&e.theme||i||s.theme}var A=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D=/(^-|-$)/g;function R(e){return e.replace(O,"-").replace(D,"")}var T=/(a)(d)/gi,k=52,j=function(e){return String.fromCharCode(e+(e>25?39:97))};function x(e){var i,s="";for(i=Math.abs(e);i>k;i=i/k|0)s=j(i%k)+s;return(j(i%k)+s).replace(T,"$1-$2")}var V,F=5381,M=function(e,i){for(var s=i.length;s;)e=33*e^i.charCodeAt(--s);return e},z=function(e){return M(F,e)};function $(e){return x(z(e)>>>0)}function B(e){return e.displayName||e.name||"Component"}function L(e){return typeof e=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W=G?Symbol.for("react.forward_ref"):60112,q={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X(e){return("type"in(i=e)&&i.type.$$typeof)===Y?U:"$$typeof"in e?J[e.$$typeof]:q;var i}var Z=Object.defineProperty,K=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(e,i,s){if(typeof i!="string"){if(ne){var a=te(i);a&&a!==ne&&oe(e,a,s)}var c=K(i);Q&&(c=c.concat(Q(i)));for(var h=X(e),st=X(i),nt=0;nt<c.length;++nt){var ot=c[nt];if(!(ot in H||s&&s[ot]||st&&ot in st||h&&ot in h)){var xt=ee(i,ot);try{Z(e,ot,xt)}catch{}}}}return e}function re(e){return typeof e=="function"}function se(e){return typeof e=="object"&&"styledComponentId"in e}function ie(e,i){return e&&i?"".concat(e," ").concat(i):e||i||""}function ae(e,i){if(e.length===0)return"";for(var s=e[0],a=1;a<e.length;a++)s+=e[a];return s}function ce(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function le(e,i,s){if(s===void 0&&(s=!1),!s&&!ce(e)&&!Array.isArray(e))return i;if(Array.isArray(i))for(var a=0;a<i.length;a++)e[a]=le(e[a],i[a]);else if(ce(i))for(var a in i)e[a]=le(e[a],i[a]);return e}function ue(e,i){Object.defineProperty(e,"toString",{value:i})}function he(e){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(i.length>0?" Args: ".concat(i.join(", ")):""))}var fe=function(){function e(i){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=i}return e.prototype.indexOfGroup=function(i){for(var s=0,a=0;a<i;a++)s+=this.groupSizes[a];return s},e.prototype.insertRules=function(i,s){if(i>=this.groupSizes.length){for(var a=this.groupSizes,c=a.length,h=c;i>=h;)if((h<<=1)<0)throw he(16,"".concat(i));this.groupSizes=new Uint32Array(h),this.groupSizes.set(a),this.length=h;for(var st=c;st<h;st++)this.groupSizes[st]=0}for(var nt=this.indexOfGroup(i+1),ot=(st=0,s.length);st<ot;st++)this.tag.insertRule(nt,s[st])&&(this.groupSizes[i]++,nt++)},e.prototype.clearGroup=function(i){if(i<this.length){var s=this.groupSizes[i],a=this.indexOfGroup(i),c=a+s;this.groupSizes[i]=0;for(var h=a;h<c;h++)this.tag.deleteRule(a)}},e.prototype.getGroup=function(i){var s="";if(i>=this.length||this.groupSizes[i]===0)return s;for(var a=this.groupSizes[i],c=this.indexOfGroup(i),h=c+a,st=c;st<h;st++)s+="".concat(this.tag.getRule(st)).concat(g);return s},e}(),ye=new Map,ve=new Map,ge=1,Se=function(e){if(ye.has(e))return ye.get(e);for(;ve.has(ge);)ge++;var i=ge++;return ye.set(e,i),ve.set(i,e),i},we=function(e,i){ge=i+1,ye.set(e,i),ve.set(i,e)},be="style[".concat(f,"][").concat(y,'="').concat(v,'"]'),Ee=new RegExp("^".concat(f,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(e,i,s){for(var a,c=s.split(","),h=0,st=c.length;h<st;h++)(a=c[h])&&e.registerName(i,a)},Pe=function(e,i){for(var s,a=((s=i.textContent)!==null&&s!==void 0?s:"").split(g),c=[],h=0,st=a.length;h<st;h++){var nt=a[h].trim();if(nt){var ot=nt.match(Ee);if(ot){var xt=0|parseInt(ot[1],10),vt=ot[2];xt!==0&&(we(vt,xt),Ne(e,vt,ot[3]),e.getTag().insertRules(xt,c)),c.length=0}else c.push(nt)}}},_e=function(e){for(var i=document.querySelectorAll(be),s=0,a=i.length;s<a;s++){var c=i[s];c&&c.getAttribute(f)!==m&&(Pe(e,c),c.parentNode&&c.parentNode.removeChild(c))}};function Ce(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ie=function(e){var i=document.head,s=e||i,a=document.createElement("style"),c=function(nt){var ot=Array.from(nt.querySelectorAll("style[".concat(f,"]")));return ot[ot.length-1]}(s),h=c!==void 0?c.nextSibling:null;a.setAttribute(f,m),a.setAttribute(y,v);var st=Ce();return st&&a.setAttribute("nonce",st),s.insertBefore(a,h),a},Ae=function(){function e(i){this.element=Ie(i),this.element.appendChild(document.createTextNode("")),this.sheet=function(s){if(s.sheet)return s.sheet;for(var a=document.styleSheets,c=0,h=a.length;c<h;c++){var st=a[c];if(st.ownerNode===s)return st}throw he(17)}(this.element),this.length=0}return e.prototype.insertRule=function(i,s){try{return this.sheet.insertRule(s,i),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(i){this.sheet.deleteRule(i),this.length--},e.prototype.getRule=function(i){var s=this.sheet.cssRules[i];return s&&s.cssText?s.cssText:""},e}(),Oe=function(){function e(i){this.element=Ie(i),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(i,s){if(i<=this.length&&i>=0){var a=document.createTextNode(s);return this.element.insertBefore(a,this.nodes[i]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(i){this.element.removeChild(this.nodes[i]),this.length--},e.prototype.getRule=function(i){return i<this.length?this.nodes[i].textContent:""},e}(),De=function(){function e(i){this.rules=[],this.length=0}return e.prototype.insertRule=function(i,s){return i<=this.length&&(this.rules.splice(i,0,s),this.length++,!0)},e.prototype.deleteRule=function(i){this.rules.splice(i,1),this.length--},e.prototype.getRule=function(i){return i<this.length?this.rules[i]:""},e}(),Re=S,Te={isServer:!S,useCSSOMInjection:!w},ke=function(){function e(i,s,a){i===void 0&&(i=C),s===void 0&&(s={});var c=this;this.options=__assign(__assign({},Te),i),this.gs=s,this.names=new Map(a),this.server=!!i.isServer,!this.server&&S&&Re&&(Re=!1,_e(this)),ue(this,function(){return function(h){for(var st=h.getTag(),nt=st.length,ot="",xt=function(bt){var St=function(b){return ve.get(b)}(bt);if(St===void 0)return"continue";var Et=h.names.get(St),Ct=st.getGroup(bt);if(Et===void 0||!Et.size||Ct.length===0)return"continue";var ht="".concat(f,".g").concat(bt,'[id="').concat(St,'"]'),d="";Et!==void 0&&Et.forEach(function(b){b.length>0&&(d+="".concat(b,","))}),ot+="".concat(Ct).concat(ht,'{content:"').concat(d,'"}').concat(g)},vt=0;vt<nt;vt++)xt(vt);return ot}(c)})}return e.registerId=function(i){return Se(i)},e.prototype.rehydrate=function(){!this.server&&S&&_e(this)},e.prototype.reconstructWithOptions=function(i,s){return s===void 0&&(s=!0),new e(__assign(__assign({},this.options),i),this.gs,s&&this.names||void 0)},e.prototype.allocateGSInstance=function(i){return this.gs[i]=(this.gs[i]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(i=function(s){var a=s.useCSSOMInjection,c=s.target;return s.isServer?new De(c):a?new Ae(c):new Oe(c)}(this.options),new fe(i)));var i},e.prototype.hasNameForId=function(i,s){return this.names.has(i)&&this.names.get(i).has(s)},e.prototype.registerName=function(i,s){if(Se(i),this.names.has(i))this.names.get(i).add(s);else{var a=new Set;a.add(s),this.names.set(i,a)}},e.prototype.insertRules=function(i,s,a){this.registerName(i,s),this.getTag().insertRules(Se(i),a)},e.prototype.clearNames=function(i){this.names.has(i)&&this.names.get(i).clear()},e.prototype.clearRules=function(i){this.getTag().clearGroup(Se(i)),this.clearNames(i)},e.prototype.clearTag=function(){this.tag=void 0},e}(),je=/&/g,xe=/^\s*\/\/.*$/gm;function Ve(e,i){return e.map(function(s){return s.type==="rule"&&(s.value="".concat(i," ").concat(s.value),s.value=s.value.replaceAll(",",",".concat(i," ")),s.props=s.props.map(function(a){return"".concat(i," ").concat(a)})),Array.isArray(s.children)&&s.type!=="@keyframes"&&(s.children=Ve(s.children,i)),s})}function Fe(e){var i,s,a,c=C,h=c.options,st=h===void 0?C:h,nt=c.plugins,ot=nt===void 0?_:nt,xt=function(St,Et,Ct){return Ct.startsWith(s)&&Ct.endsWith(s)&&Ct.replaceAll(s,"").length>0?".".concat(i):St},vt=ot.slice();vt.push(function(St){St.type===RULESET&&St.value.includes("&")&&(St.props[0]=St.props[0].replace(je,s).replace(a,xt))}),st.prefix&&vt.push(prefixer),vt.push(stringify);var bt=function(St,Et,Ct,ht){Et===void 0&&(Et=""),Ct===void 0&&(Ct=""),ht===void 0&&(ht="&"),i=ht,s=Et,a=new RegExp("\\".concat(s,"\\b"),"g");var d=St.replace(xe,""),b=compile(Ct||Et?"".concat(Ct," ").concat(Et," { ").concat(d," }"):d);st.namespace&&(b=Ve(b,st.namespace));var ft=[];return serialize(b,middleware(vt.concat(rulesheet(function(mt){return ft.push(mt)})))),ft};return bt.hash=ot.length?ot.reduce(function(St,Et){return Et.name||he(15),M(St,Et.name)},F).toString():"",bt}var Me=new ke,ze=Fe(),$e=o.createContext({shouldForwardProp:void 0,styleSheet:Me,stylis:ze});$e.Consumer;o.createContext(void 0);function Ge(){return reactExports.useContext($e)}var We=function(){function e(i,s){var a=this;this.inject=function(c,h){h===void 0&&(h=ze);var st=a.name+h.hash;c.hasNameForId(a.id,st)||c.insertRules(a.id,st,h(a.rules,st,"@keyframes"))},this.name=i,this.id="sc-keyframes-".concat(i),this.rules=s,ue(this,function(){throw he(12,String(a.name))})}return e.prototype.getName=function(i){return i===void 0&&(i=ze),this.name+i.hash},e}(),qe=function(e){return e>="A"&&e<="Z"};function He(e){for(var i="",s=0;s<e.length;s++){var a=e[s];if(s===1&&a==="-"&&e[0]==="-")return e;qe(a)?i+="-"+a.toLowerCase():i+=a}return i.startsWith("ms-")?"-"+i:i}var Ue=function(e){return e==null||e===!1||e===""},Je=function(e){var i,s,a=[];for(var c in e){var h=e[c];e.hasOwnProperty(c)&&!Ue(h)&&(Array.isArray(h)&&h.isCss||re(h)?a.push("".concat(He(c),":"),h,";"):ce(h)?a.push.apply(a,__spreadArray(__spreadArray(["".concat(c," {")],Je(h),!1),["}"],!1)):a.push("".concat(He(c),": ").concat((i=c,(s=h)==null||typeof s=="boolean"||s===""?"":typeof s!="number"||s===0||i in unitlessKeys||i.startsWith("--")?String(s).trim():"".concat(s,"px")),";")))}return a};function Xe(e,i,s,a){if(Ue(e))return[];if(se(e))return[".".concat(e.styledComponentId)];if(re(e)){if(!re(h=e)||h.prototype&&h.prototype.isReactComponent||!i)return[e];var c=e(i);return Xe(c,i,s,a)}var h;return e instanceof We?s?(e.inject(s,a),[e.getName(a)]):[e]:ce(e)?Je(e):Array.isArray(e)?Array.prototype.concat.apply(_,e.map(function(st){return Xe(st,i,s,a)})):[e.toString()]}function Ze(e){for(var i=0;i<e.length;i+=1){var s=e[i];if(re(s)&&!se(s))return!1}return!0}var Ke=z(v),Qe=function(){function e(i,s,a){this.rules=i,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&Ze(i),this.componentId=s,this.baseHash=M(Ke,s),this.baseStyle=a,ke.registerId(s)}return e.prototype.generateAndInjectStyles=function(i,s,a){var c=this.baseStyle?this.baseStyle.generateAndInjectStyles(i,s,a):"";if(this.isStatic&&!a.hash)if(this.staticRulesId&&s.hasNameForId(this.componentId,this.staticRulesId))c=ie(c,this.staticRulesId);else{var h=ae(Xe(this.rules,i,s,a)),st=x(M(this.baseHash,h)>>>0);if(!s.hasNameForId(this.componentId,st)){var nt=a(h,".".concat(st),void 0,this.componentId);s.insertRules(this.componentId,st,nt)}c=ie(c,st),this.staticRulesId=st}else{for(var ot=M(this.baseHash,a.hash),xt="",vt=0;vt<this.rules.length;vt++){var bt=this.rules[vt];if(typeof bt=="string")xt+=bt;else if(bt){var St=ae(Xe(bt,i,s,a));ot=M(ot,St+vt),xt+=St}}if(xt){var Et=x(ot>>>0);s.hasNameForId(this.componentId,Et)||s.insertRules(this.componentId,Et,a(xt,".".concat(Et),void 0,this.componentId)),c=ie(c,Et)}}return c},e}(),et=o.createContext(void 0);et.Consumer;var rt={};function it(e,i,s){var a=se(e),c=e,h=!L(e),st=i.attrs,nt=st===void 0?_:st,ot=i.componentId,xt=ot===void 0?function(_t,tt){var gt=typeof _t!="string"?"sc":R(_t);rt[gt]=(rt[gt]||0)+1;var wt="".concat(gt,"-").concat($(v+gt+rt[gt]));return tt?"".concat(tt,"-").concat(wt):wt}(i.displayName,i.parentComponentId):ot,vt=i.displayName,bt=vt===void 0?function(_t){return L(_t)?"styled.".concat(_t):"Styled(".concat(B(_t),")")}(e):vt,St=i.displayName&&i.componentId?"".concat(R(i.displayName),"-").concat(i.componentId):i.componentId||xt,Et=a&&c.attrs?c.attrs.concat(nt).filter(Boolean):nt,Ct=i.shouldForwardProp;if(a&&c.shouldForwardProp){var ht=c.shouldForwardProp;if(i.shouldForwardProp){var d=i.shouldForwardProp;Ct=function(_t,tt){return ht(_t,tt)&&d(_t,tt)}}else Ct=ht}var b=new Qe(s,St,a?c.componentStyle:void 0);function ft(_t,tt){return function(gt,wt,yt){var Tt=gt.attrs,Mt=gt.componentStyle,Pt=gt.defaultProps,It=gt.foldedComponentIds,Lt=gt.styledComponentId,zt=gt.target,jt=o.useContext(et),Nt=Ge(),kt=gt.shouldForwardProp||Nt.shouldForwardProp,Ot=I(wt,jt,Pt)||C,Bt=function(on,nn,dn){for(var tn,rn=__assign(__assign({},nn),{className:void 0,theme:dn}),En=0;En<on.length;En+=1){var bn=re(tn=on[En])?tn(rn):tn;for(var Dn in bn)rn[Dn]=Dn==="className"?ie(rn[Dn],bn[Dn]):Dn==="style"?__assign(__assign({},rn[Dn]),bn[Dn]):bn[Dn]}return nn.className&&(rn.className=ie(rn.className,nn.className)),rn}(Tt,wt,Ot),Ut=Bt.as||zt,Ft={};for(var Wt in Bt)Bt[Wt]===void 0||Wt[0]==="$"||Wt==="as"||Wt==="theme"&&Bt.theme===Ot||(Wt==="forwardedAs"?Ft.as=Bt.forwardedAs:kt&&!kt(Wt,Ut)||(Ft[Wt]=Bt[Wt]));var _i=function(on,nn){var dn=Ge(),tn=on.generateAndInjectStyles(nn,dn.styleSheet,dn.stylis);return tn}(Mt,Bt),Qt=ie(It,Lt);return _i&&(Qt+=" "+_i),Bt.className&&(Qt+=" "+Bt.className),Ft[L(Ut)&&!A.has(Ut)?"class":"className"]=Qt,yt&&(Ft.ref=yt),reactExports.createElement(Ut,Ft)}(mt,_t,tt)}ft.displayName=bt;var mt=o.forwardRef(ft);return mt.attrs=Et,mt.componentStyle=b,mt.displayName=bt,mt.shouldForwardProp=Ct,mt.foldedComponentIds=a?ie(c.foldedComponentIds,c.styledComponentId):"",mt.styledComponentId=St,mt.target=a?c.target:e,Object.defineProperty(mt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(_t){this._foldedDefaultProps=a?function(tt){for(var gt=[],wt=1;wt<arguments.length;wt++)gt[wt-1]=arguments[wt];for(var yt=0,Tt=gt;yt<Tt.length;yt++)le(tt,Tt[yt],!0);return tt}({},c.defaultProps,_t):_t}}),ue(mt,function(){return".".concat(mt.styledComponentId)}),h&&oe(mt,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),mt}function at(e,i){for(var s=[e[0]],a=0,c=i.length;a<c;a+=1)s.push(i[a],e[a+1]);return s}var ct=function(e){return Object.assign(e,{isCss:!0})};function lt(e){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(re(e)||ce(e))return ct(Xe(at(_,__spreadArray([e],i,!0))));var a=e;return i.length===0&&a.length===1&&typeof a[0]=="string"?Xe(a):ct(Xe(at(a,i)))}function ut(e,i,s){if(s===void 0&&(s=C),!i)throw he(1,i);var a=function(c){for(var h=[],st=1;st<arguments.length;st++)h[st-1]=arguments[st];return e(i,s,lt.apply(void 0,__spreadArray([c],h,!1)))};return a.attrs=function(c){return ut(e,i,__assign(__assign({},s),{attrs:Array.prototype.concat(s.attrs,c).filter(Boolean)}))},a.withConfig=function(c){return ut(e,i,__assign(__assign({},s),c))},a}var pt=function(e){return ut(it,e)},dt=pt;A.forEach(function(e){dt[e]=pt(e)});const Loader=()=>jsxRuntimeExports.jsx(StyledWrapper,{children:jsxRuntimeExports.jsx("div",{className:"content",children:jsxRuntimeExports.jsxs("div",{className:"pill",children:[jsxRuntimeExports.jsxs("div",{className:"medicine",children:[jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{}),jsxRuntimeExports.jsx("i",{})]}),jsxRuntimeExports.jsx("div",{className:"side"}),jsxRuntimeExports.jsx("div",{className:"side"})]})})}),StyledWrapper=dt.div`
  .content {
    width: 50vmin;
    height: 50vmin;
    background: #fff0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .pill {
    background: #fff0;
    width: 15vmin;
    height: 40vmin;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    transform: rotate(180deg);
    animation: spin 4s linear 0s infinite;
  }

  @keyframes spin {
    100% {
      transform: rotate(-540deg);
    }
  }

  .pill .side {
    background: #f7c340;
    position: relative;
    overflow: hidden;
    width: 11vmin;
    height: 15vmin;
    border-radius: 6vmin 6vmin 0 0;
  }

  .pill .side + .side {
    background: #d9680c;
    border-radius: 0 0 6vmin 6vmin;
    border-top: 1vmin solid #621e1a;
    animation: open 2s ease-in-out 0s infinite;
  }

  @keyframes open {
    0%,
    20%,
    80%,
    100% {
      margin-top: 0;
    }
    30%,
    70% {
      margin-top: 10vmin;
    }
  }

  .pill .side:before {
    content: "";
    position: absolute;
    width: 2vmin;
    height: 10vmin;
    bottom: 0;
    right: 1.5vmin;
    background: #fff2;
    border-radius: 1vmin 1vmin 0 0;
    animation: shine 1s ease-out -1s infinite alternate-reverse;
  }

  .pill .side + .side:before {
    bottom: inherit;
    top: 0;
    border-radius: 0 0 1vmin 1vmin;
  }

  .pill .side:after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    bottom: 0;
    left: 0;
    border-radius: 6vmin 6vmin 0 0;
    border: 1.75vmin solid #00000022;
    border-bottom-color: #fff0;
    border-bottom-width: 0vmin;
    border-top-width: 1vmin;
    animation: shadow 1s ease -1s infinite alternate-reverse;
  }

  .pill .side + .side:after {
    bottom: inherit;
    top: 0;
    border-radius: 0 0 6vmin 6vmin;
    border-top-color: #fff0;
    border-top-width: 0vmin;
    border-bottom-width: 1vmin;
  }

  @keyframes shine {
    0%,
    46% {
      right: 1.5vmin;
    }
    54%,
    100% {
      right: 7.5vmin;
    }
  }

  @keyframes shadow {
    0%,
    49.999% {
      transform: rotateY(0deg);
      left: 0;
    }
    50%,
    100% {
      transform: rotateY(180deg);
      left: -3vmin;
    }
  }

  .medicine {
    position: absolute;
    width: calc(100% - 6vmin);
    height: calc(100% - 12vmin);
    background: #fff0;
    border-radius: 5vmin;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
  }

  .medicine i {
    width: 1vmin;
    height: 1vmin;
    background: #47c;
    border-radius: 100%;
    position: absolute;
    animation: medicine-dust 1.75s ease 0s infinite alternate;
  }

  .medicine i:nth-child(2n + 2) {
    width: 1.5vmin;
    height: 1.5vmin;
    margin-top: -5vmin;
    margin-right: -5vmin;
    animation-delay: -0.2s;
  }

  .medicine i:nth-child(3n + 3) {
    width: 2vmin;
    height: 2vmin;
    margin-top: 4vmin;
    margin-right: 3vmin;
    animation-delay: -0.33s;
  }

  .medicine i:nth-child(4) {
    margin-top: -5vmin;
    margin-right: 4vmin;
    animation-delay: -0.4s;
  }

  .medicine i:nth-child(5) {
    margin-top: 5vmin;
    margin-right: -4vmin;
    animation-delay: -0.5s;
  }

  .medicine i:nth-child(6) {
    margin-top: 0vmin;
    margin-right: -3.5vmin;
    animation-delay: -0.66s;
  }

  .medicine i:nth-child(7) {
    margin-top: -1vmin;
    margin-right: 7vmin;
    animation-delay: -0.7s;
  }

  .medicine i:nth-child(8) {
    margin-top: 6vmin;
    margin-right: -1vmin;
    animation-delay: -0.8s;
  }

  .medicine i:nth-child(9) {
    margin-top: 4vmin;
    margin-right: -7vmin;
    animation-delay: -0.99s;
  }

  .medicine i:nth-child(10) {
    margin-top: -6vmin;
    margin-right: 0vmin;
    animation-delay: -1.11s;
  }

  .medicine i:nth-child(1n + 10) {
    width: 0.6vmin;
    height: 0.6vmin;
  }

  .medicine i:nth-child(11) {
    margin-top: 6vmin;
    margin-right: 6vmin;
    animation-delay: -1.125s;
  }

  .medicine i:nth-child(12) {
    margin-top: -7vmin;
    margin-right: -7vmin;
    animation-delay: -1.275s;
  }

  .medicine i:nth-child(13) {
    margin-top: -1vmin;
    margin-right: 3vmin;
    animation-delay: -1.33s;
  }

  .medicine i:nth-child(14) {
    margin-top: -3vmin;
    margin-right: -1vmin;
    animation-delay: -1.4s;
  }

  .medicine i:nth-child(15) {
    margin-top: -1vmin;
    margin-right: -7vmin;
    animation-delay: -1.55s;
  }

  @keyframes medicine-dust {
    0%,
    100% {
      transform: translate3d(0vmin, 0vmin, -0.1vmin);
    }
    25% {
      transform: translate3d(0.25vmin, 5vmin, 0vmin);
    }
    75% {
      transform: translate3d(-0.1vmin, -4vmin, 0.25vmin);
    }
  }`,LoaderWrapper=dt.div`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh; /* Full screen height */
  width: 100vw;  /* Full screen width */
  background-color: ${({themeMode:e})=>e==="dark"?"#121212":"#f4f4f4"}; /* Adapts to theme */
  color: ${({themeMode:e})=>e==="dark"?"#ffffff":"#000000"}; /* Text color */
`;function PrivateRoute({children:e}){const{user:i}=useAuth();return i?e:jsxRuntimeExports.jsx(Navigate,{to:"/login"})}function AppContent(){const[e,i]=reactExports.useState(!0),{theme:s}=useTheme();return reactExports.useEffect(()=>{setTimeout(()=>{i(!1)},3e3)},[]),e?jsxRuntimeExports.jsx(LoaderWrapper,{themeMode:s,children:jsxRuntimeExports.jsx(Loader,{})}):jsxRuntimeExports.jsx(BrowserRouter,{basename:"/PharmAI/",children:jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{path:"register",element:jsxRuntimeExports.jsx(Register,{})}),jsxRuntimeExports.jsx(Route,{path:"dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{children:jsxRuntimeExports.jsx(Dashboard,{})})})]})})})}function App(){return jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(AppContent,{})})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
